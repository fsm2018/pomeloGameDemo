window.__require=function e(t,n,i){function a(s,r){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){return a(t[s][1][e]||e)},h,h.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<i.length;s++)a(i[s]);return a}({Accouncement:[function(e,t,n){"use strict";cc._RF.push(t,"8e7facAjwRPEbPrrjDujzG7","Accouncement"),cc.Class({extends:cc.Component,properties:{info:cc.Label,content:cc.Label,gameinfo:cc.Label,gamecontent:cc.Label,AccounceNode:cc.Node,toggles:cc.Node,_AccountData:null,systemSayNode:cc.Node,gameSayNode:cc.Node,RuleNode:cc.Node,_accountType:0},onLoad:function(){},OpenAccount:function(){this.node.active=!0,this.showAndHideTips(),this.setInfoBybtn()},getAccounceType:function(){for(var e=-1,t=0;t<this.toggles.childrenCount;t++){this.toggles.children[t].getComponent(cc.Toggle);if(this._accountType==t){e=t;break}}return e},showAndHideTips:function(){var e=this.node.getChildByName("lbliphoneCheck");if(2==this.getAccounceType())e.active=!1;else{var t=dc.Iphone_Check_flag;e.active=!!t}},sendToServer:function(){var e={token:dc.userMgr.token};dc.net.http_proto.sendProtoToHS("get_notice",e,function(e,t){if(!e){if(500==t.errcode)return void dc.userMgr.ReGetToken();if(0==t.errcode){this._AccountData=t.data;var n=t.data;this.showAndHideTips(),dc.Iphone_Check_flag&&(n=null),this.initAccountByDic(n),this.setInfoBybtn()}}}.bind(this))},setInfoBybtn:function(){var e=this.getAccounceType();0==e?(this.systemSayNode.active=!0,this.gameSayNode.active=!1,this.RuleNode.active=!1):1==e?(this.systemSayNode.active=!1,this.gameSayNode.active=!0,this.RuleNode.active=!1):2==e&&(this.systemSayNode.active=!1,this.gameSayNode.active=!1,this.RuleNode.active=!0)},initAccountByDic:function(e){for(var t in e){e[t];"\u7cfb\u7edf\u516c\u544a"==t?(this.info.string=t,this.content.string=e[t]):(this.gameinfo.string=t,this.gamecontent.string=e[t])}},onBtnbClose:function(){this.node.active=!1},onToggleClick:function(e){"toggle1"==e.target.parent.name?this._accountType=0:"toggle2"==e.target.parent.name?this._accountType=1:"toggle3"==e.target.parent.name&&(this._accountType=2),this.setInfoBybtn(),this.showAndHideTips()}}),cc._RF.pop()},{}],AgentAddOwnersItem:[function(e,t,n){"use strict";cc._RF.push(t,"e40a7es/sBN+Ks1sMKulCcg","AgentAddOwnersItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblUserId:cc.Label},start:function(){},initData:function(e,t){this.setBgByIndex(t),this.lblUserId.string=e.userId,this._userId=e.userId},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},OnClickRemoveUserId:function(){var e=function(){var e=this._userId;Hall_ReqAndRes.remExperienceAgentList(e,function(e){this.node.removeFromParent()}.bind(this))}.bind(this);publicWindow.alert.show("","\u662f\u5426\u5220\u9664\u8be5\u63a8\u9001\u7528\u6237",e,!0)}}),cc._RF.pop()},{}],AgentBuyCard:[function(e,t,n){"use strict";cc._RF.push(t,"34afaY9EnRO+7W3wta2UXaK","AgentBuyCard"),cc.Class({extends:cc.Component,properties:{content:cc.Node,buyRecordItem:cc.Node},start:function(){},removeAllRecord:function(){this.content.removeAllChildren()},createBuyRecordList:function(e){this.removeAllRecord();for(var t=0,n=0;n<e.length;n++){var i=cc.instantiate(this.buyRecordItem);i.active=!0;var a=i.getComponent("AgentBuyRecordItem");this.content.addChild(i),a.initData(e[n],n),t+=i.height}this.content.height=t}}),cc._RF.pop()},{}],AgentBuyRecordItem:[function(e,t,n){"use strict";cc._RF.push(t,"8ec53OhB0tDrYp9q2GwixPD","AgentBuyRecordItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,buyTime:cc.Label,buyNum:cc.Label,fkNum:cc.Label,fkNumOfAfterBuy:cc.Label},start:function(){},initData:function(e,t){this.setBgByIndex(t);var n=dc.utils.dateFormat(e.pay_time);this.buyTime.string=n,this.buyNum.string=e.gems,this.fkNum.string=e.gems_before;var i=e.gems+e.gems_before;this.fkNumOfAfterBuy.string=i},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)}}),cc._RF.pop()},{}],AgentCreateEGroup:[function(e,t,n){"use strict";cc._RF.push(t,"6373cHaoDdNjrOOy5KXr8Cd","AgentCreateEGroup"),cc.Class({extends:cc.Component,properties:{ebox_groupId:cc.EditBox,ebox_priority:cc.EditBox,scrollGroupContent:cc.Node,agentEGroupInfoItem:cc.Node},start:function(){},onDisable:function(){this.ebox_groupId.string="",this.ebox_priority.string=""},removeAllRecord:function(){this.scrollGroupContent.removeAllChildren()},createEGroupList:function(e){this.removeAllRecord();var t=0;for(var n in e){var i=cc.instantiate(this.agentEGroupInfoItem);i.active=!0;var a=i.getComponent("AgentEGroupInfoItem");this.scrollGroupContent.addChild(i),a.initData(e[n],n),t+=i.height}this.scrollGroupContent.height=t},OnClickCreateGroup:function(){var e=/^[0-9]+$/;if(e.test(this.ebox_priority.string)||""==this.ebox_priority.string)if(e.test(this.ebox_groupId.string)&&""!=this.ebox_groupId.string){var t=this.ebox_groupId.string,n=""!=this.ebox_priority.string?parseInt(this.ebox_priority.string):0;Hall_ReqAndRes.addEclub(t,n,function(e){e.code?publicWindow.alert.show("",e.msg):(publicWindow.alert.show("","\u521b\u5efa\u4f53\u9a8c\u5708\u5b50\u6210\u529f"),UIMgr.getPageScript(UIMgr.HallPage)._agentPowersMgr.getComponent("AgentPowersMgr").initEGroupList(e))}.bind(this))}else publicWindow.alert.show("","\u4ff1\u4e50\u90e8ID\u53ea\u80fd\u4e3a\u6570\u5b57");else publicWindow.alert.show("","\u4f18\u5148\u7ea7\u53ea\u80fd\u4e3a\u6570\u5b57")}}),cc._RF.pop()},{}],AgentCreateGroup:[function(e,t,n){"use strict";cc._RF.push(t,"44a68dByuRCv6ng51VnFSh3","AgentCreateGroup"),cc.Class({extends:cc.Component,properties:{ebox_ownerId:cc.EditBox,ebox_groupId:cc.EditBox,ebox_groupName:cc.EditBox,transferNode:cc.Node,dec:cc.Label,scrollGroupContent:cc.Node,agentGroupInfoItem:cc.Node,scrollLoadOneByOne:cc.Node},onDisable:function(){this.ebox_ownerId.string="",this.ebox_groupId.string="",this.ebox_groupName.string=""},start:function(){this.groupType=3},removeAllRecord:function(){this.scrollGroupContent.removeAllChildren()},initGroupList:function(e){this.scrollLoadOneByOne.getComponent("ScrollPartLoadItems").init()},createGroupList:function(e){var t=this.scrollLoadOneByOne.getComponent("ScrollPartLoadItems");t.setItem(this.agentGroupInfoItem,"AgentGroupInfoItem"),t.addItems(e)},OnClickCreateGroup:function(){var e=/^[0-9]+$/;if(e.test(this.ebox_ownerId.string)&&""!=this.ebox_ownerId.string)if(e.test(this.ebox_groupId.string)&&""!=this.ebox_groupId.string){var t=parseInt(this.ebox_ownerId.string),n=this.ebox_groupId.string,i=this.ebox_groupName.string;Hall_ReqAndRes.createClub(t,n,i,this.groupType,function(e){e.code?-2==e.code?(this.transferNode.active=!0,this.dec.string=e.msg,this.ginfo=e.data):publicWindow.alert.show("",e.msg):publicWindow.alert.show("","\u521b\u5efa\u5708\u5b50\u6210\u529f")}.bind(this))}else publicWindow.alert.show("","\u4ff1\u4e50\u90e8ID\u53ea\u80fd\u4e3a\u6570\u5b57");else publicWindow.alert.show("","\u5708\u4e3bID\u53ea\u80fd\u4e3a\u6570\u5b57")},OnClickChooseGameType:function(e,t){this.groupType=parseInt(t)},OnClickCloseTransfer:function(){this.transferNode.active=!1},OnClickTransferGroup:function(){Hall_ReqAndRes.optClub(this.ebox_ownerId.string,this.ebox_groupId.string,1,function(e){e.code?publicWindow.alert.show("",e.msg):publicWindow.alert.show("","\u8f6c\u8ba9\u6210\u529f"),this.transferNode.active=!1}.bind(this))}}),cc._RF.pop()},{}],AgentEGroupInfoItem:[function(e,t,n){"use strict";cc._RF.push(t,"afb6agw7i9Osq43sAu0Z73P","AgentEGroupInfoItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblClubId:cc.Label,ebox_priority:cc.EditBox},start:function(){},initData:function(e,t){this.setBgByIndex(t),this.setClubId(e.clubId),this.setPriority(e.priority),this._clubId=e.clubId,this._priority=e.priority},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},setClubId:function(e){this.lblClubId.string=e},setPriority:function(e){this.ebox_priority.string=e},OnClickDel:function(){var e=function(){Hall_ReqAndRes.delEclub(this._clubId,function(e){e.code?publicWindow.alert.show("",e.msg):(this.node.removeFromParent(),publicWindow.alert.show("","\u5220\u9664\u6210\u529f"))}.bind(this))}.bind(this);publicWindow.alert.show("","\u662f\u5426\u5220\u9664\u8be5\u724c\u53cb\u5708",e,!0)},OnEndFixPriority:function(){var e=parseInt(this.ebox_priority.string);Hall_ReqAndRes.addEclub(this._clubId,e,function(e){e.code?publicWindow.alert.show("",e.msg):publicWindow.alert.show("","\u4fee\u6539\u6210\u529f")}.bind(this))}}),cc._RF.pop()},{}],AgentEGroupOwnersPushList:[function(e,t,n){"use strict";cc._RF.push(t,"ac2c7G3EglFN60DfLUD1us+","AgentEGroupOwnersPushList"),cc.Class({extends:cc.Component,properties:{ebox_userId:cc.EditBox,contentList:cc.Node,pushUserItem:cc.Node},start:function(){},onDisable:function(){this.ebox_userId.string=""},removeAllRecord:function(){this.contentList.removeAllChildren()},createEGrouppushOfUsers:function(e){this.removeAllRecord();var t=0;for(var n in e){var i=cc.instantiate(this.pushUserItem);i.active=!0;var a=i.getComponent("AgentAddOwnersItem");this.contentList.addChild(i),a.initData(e[n],n),t+=i.height}this.contentList.height=t},OnClickAddEGrouppushOfusers:function(){if(/^[0-9]+$/.test(this.ebox_userId.string)||""==this.ebox_userId.string){var e=parseInt(this.ebox_userId.string);Hall_ReqAndRes.addExperienceAgentList(e,function(e){e.code?publicWindow.alert.show("",e.msg):(publicWindow.alert.show("","\u6dfb\u52a0\u63a8\u9001\u7528\u6237\u6210\u529f"),UIMgr.getPageScript(UIMgr.HallPage)._agentPowersMgr.getComponent("AgentPowersMgr").getEGroupPushOfUsers())}.bind(this))}else publicWindow.alert.show("","\u4f18\u5148\u7ea7\u53ea\u80fd\u4e3a\u6570\u5b57")}}),cc._RF.pop()},{}],AgentFeadback:[function(e,t,n){"use strict";cc._RF.push(t,"7cb03EckN5AnLjN6hzO18M8","AgentFeadback"),cc.Class({extends:cc.Component,properties:{scrollcontent:cc.Node,feadBackItem:cc.Node},start:function(){},removeAllRecord:function(){this.scrollcontent.removeAllChildren()},createRecordList:function(e){this.removeAllRecord();for(var t=0,n=0;n<e.length;n++){var i=cc.instantiate(this.feadBackItem);i.active=!0;var a=i.getComponent("FeadBackItem");this.scrollcontent.addChild(i),a.initData(e[n],n),t+=i.height}this.scrollcontent.height=t}}),cc._RF.pop()},{}],AgentFindItem:[function(e,t,n){"use strict";cc._RF.push(t,"dffa5G5oKxALIcuDnDY2BEu","AgentFindItem"),cc.Class({extends:cc.Component,properties:{lblName:cc.Label,icon:cc.Node,lblUserID:cc.Label,_roomId:null,_userId:null},start:function(){},initData:function(e,t){this._roomId=t,this._userId=e.userId,this.setName(e.name),this.setUserId(e.userId),this.setIcon(e.headImg,e.userId)},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){})},setName:function(e){var t;e.length>9?t=e.substr(0,8)+"...":t=e;this.lblName.string=t},setUserId:function(e){this.lblUserID.string=e},OnClickDissolve:function(){var e=function(){Hall_ReqAndRes.kickUserOutRoom(this._roomId,this._userId,function(e){e.code?publicWindow.alert.show("",e.msg):this.node.removeFromParent()}.bind(this))}.bind(this);publicWindow.alert.show("","\u662f\u5426\u8981\u8e22\u51fa\u8be5\u6210\u5458",e)}}),cc._RF.pop()},{}],AgentGroupInfoItem:[function(e,t,n){"use strict";cc._RF.push(t,"bcd50+ian1CpIuocGJeTDPG","AgentGroupInfoItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,icon:cc.Node,lblName:cc.Label,lblUserId:cc.Label,lblGroupName:cc.Label,lblGroupID:cc.Label},start:function(){},initData:function(e,t){this.setBgByIndex(t),this.setIcon(e.headImg,e.ownerid),this.setUserId(e.ownerid),this.setName(e.userName),this.setGroupID(e.clubid),this.setGroupName(e.name)},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){})},setUserId:function(e){this.lblUserId.string=e},setName:function(e){this.lblName.string=e},setGroupName:function(e){this.lblGroupName.string=e},setGroupID:function(e){this.lblGroupID.string=e}}),cc._RF.pop()},{}],AgentInfo:[function(e,t,n){"use strict";cc._RF.push(t,"ff6e1tgHmFB3rseW1T+kL5+","AgentInfo"),cc.Class({extends:cc.Component,properties:{icon:cc.Node,lblName:cc.Label,lblUserID:cc.Label,lblCurFK:cc.Label,lblAllSaleNum:cc.Label,lblMonthSaleName:cc.Label,lblTodaySaleNum:cc.Label,content:cc.Node},start:function(){},initData:function(e){this.setIcon(e.headImg,e.userId),this.setName(e.name),this.setUserID(e.userId),this.setCurFK(e.gems),this.setAllSaleFKNum(e.sell_total),this.setMonthSaleFKNum(e.sell_mon),this.setTodaySaleFKNum(e.sell_today)},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){})},setName:function(e){var t;e.length>9?t=e.substr(0,8)+"...":t=e;this.lblName.string=t},setUserID:function(e){this.lblUserID.string=e},setCurFK:function(e){this.lblCurFK.string=e},setAllSaleFKNum:function(e){this.lblAllSaleNum.string=e},setMonthSaleFKNum:function(e){this.lblMonthSaleName.string=e},setTodaySaleFKNum:function(e){this.lblTodaySaleNum.string=e}}),cc._RF.pop()},{}],AgentPMDItem:[function(e,t,n){"use strict";cc._RF.push(t,"f9b19PZ22pFJqy8L2ar6Mee","AgentPMDItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblContent:cc.Label,lblType:cc.Label,lblTime:cc.Label},start:function(){},initData:function(e,t){this.setBgByIndex(t),this.setContent(e.content),this.setType(e.type),this._type=e.type,this.lblTime.string="",""==e.beginTime||""==e.endTime?this.lblTime.string="\u5168\u5929":this.lblTime.string=e.beginTime+"-"+e.endTime},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},setContent:function(e){this.lblContent.string=e},setType:function(e){this.lblType.string=e},OnClickDel:function(){var e=function(){Hall_ReqAndRes.delRollingNotice(this._type,function(e){e.code||(publicWindow.alert.show("","\u5220\u9664\u8dd1\u9a6c\u706f\u6210\u529f"),this.node.removeFromParent())}.bind(this))}.bind(this);publicWindow.alert.show("","\u662f\u5426\u5220\u9664\u8be5\u724c\u53cb\u5708",e,!0)}}),cc._RF.pop()},{}],AgentPMD:[function(e,t,n){"use strict";cc._RF.push(t,"dce4aO87UhPd4PEN3LQtiuJ","AgentPMD"),cc.Class({extends:cc.Component,properties:{ebox_Content:cc.EditBox,ebox_Type:cc.EditBox,scrollPMDContent:cc.Node,agentPMDItem:cc.Node,ebox_startHour:cc.EditBox,ebox_startMin:cc.EditBox,ebox_endHour:cc.EditBox,ebox_endMin:cc.EditBox},start:function(){},onDisable:function(){this.ebox_Content.string="",this.ebox_Type.string="",this.ebox_startHour.string="",this.ebox_startMin.string="",this.ebox_endHour.string="",this.ebox_endMin.string=""},removeAllRecord:function(){this.scrollPMDContent.removeAllChildren()},createPMDList:function(e){this.removeAllRecord();var t=0;for(var n in e){var i=cc.instantiate(this.agentPMDItem);i.active=!0;var a=i.getComponent("AgentPMDItem");this.scrollPMDContent.addChild(i),i.data=e[n],a.initData(e[n],n),t+=i.height}this.scrollPMDContent.height=t},OnClickAddContent:function(){if(/^[0-9a-zA-Z]+$/.test(this.ebox_Type.string)&&""!=this.ebox_Type.string){var e=/^[0-9]+$/;if(e.test(this.ebox_startHour.string)||""==this.ebox_startHour.string)if(e.test(this.ebox_startMin.string)||""==this.ebox_startMin.string)if(e.test(this.ebox_endHour.string)||""==this.ebox_endHour.string)if(e.test(this.ebox_endMin.string)||""==this.ebox_endMin.string){var t=this.ebox_Type.string,n=this.ebox_Content.string,i=this.ebox_startHour.string+":"+this.ebox_startMin.string,a=this.ebox_endHour.string+":"+this.ebox_endMin.string;if(""==this.ebox_Type.string||""==this.ebox_startMin.string||""==this.ebox_endHour.string||""==this.ebox_endMin.string)i="",a="";else{var o=parseInt(this.ebox_startHour.string),s=parseInt(this.ebox_startMin.string),r=parseInt(this.ebox_endHour.string),c=parseInt(this.ebox_endMin.string);if(!(o>=0&&o<24&&s>=0&&s<60&&r>=0&&r<24&&c>=0&&c<60))return void publicWindow.alert.show("","\u5c0f\u65f6\u4e0d\u80fd\u8d85\u8fc724\u6216\u5206\u949f\u4e0d\u80fd\u8d85\u8fc760");i=o+":"+s,a=r+":"+c}Hall_ReqAndRes.setRollingNotice_gm(t,n,i,a,function(e){e.code?publicWindow.alert.show("",e.msg):(publicWindow.alert.show("","\u6dfb\u52a0\u5185\u5bb9\u6210\u529f"),UIMgr.getPageScript(UIMgr.HallPage)._agentPowersMgr.getComponent("AgentPowersMgr").initPMDList(e))}.bind(this))}else publicWindow.alert.show("","\u65f6\u95f4\u53ea\u80fd\u4e3a\u6570\u5b57");else publicWindow.alert.show("","\u65f6\u95f4\u53ea\u80fd\u4e3a\u6570\u5b57");else publicWindow.alert.show("","\u65f6\u95f4\u53ea\u80fd\u4e3a\u6570\u5b57");else publicWindow.alert.show("","\u65f6\u95f4\u53ea\u80fd\u4e3a\u6570\u5b57")}else publicWindow.alert.show("","\u7c7b\u578b\u53ea\u80fd\u4e3a\u6570\u5b57\u548c\u82f1\u6587")},OnItemSelect:function(e){var t=e.target.data,n=t.type,i=t.content,a=t.beginTime,o=t.endTime;if(this.ebox_Type.string=n,this.ebox_Content.string=i,""==a||""==o)return this.ebox_startHour.string="",this.ebox_startMin.string="",this.ebox_endHour.string="",void(this.ebox_endMin.string="");var s=a.split(":"),r=o.split(":"),c=s[0],l=s[1],h=r[0],d=r[1];this.ebox_startHour.string=c,this.ebox_startMin.string=l,this.ebox_endHour.string=h,this.ebox_endMin.string=d}}),cc._RF.pop()},{}],AgentPowersMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2d184pVohRMvZI5wJ6G8g4G","AgentPowersMgr"),cc.Class({extends:cc.Component,properties:{_selectType:1,_agentInfo:null,_agentRoot:null,_buycardNode:null,_welfareNode:null,_statisticsNode:null,_feadBackNode:null,_agentReq:null,_createGroupNode:null,_createEGroupNode:null,_paomadengNode:null,_taskStateNode:null,toggleContent:cc.Node,pagesNode:cc.Node,titleNode:cc.Node},onLoad:function(){this._selectType=1},openAgentMgr:function(){var e=UserMgr.agentLevel>=100;this.setSeniorAgentInterface(e),this.node.active=!0,this.getAgentInfo(),this.setPage(this._selectType)},getAgentInfo:function(){Hall_ReqAndRes.getAgentInfo(function(e){this._agentInfo.getComponent("AgentInfo").initData(e.data)}.bind(this))},setSeniorAgentInterface:function(e){if(e)for(var t=0;t<this.toggleContent.children.length;t++)this.toggleContent.children[t].active=!0;else for(t=0;t<this.toggleContent.children.length;t++)this.toggleContent.children[t].active=t<=2},refreshFK:function(e){this._agentInfo.getComponent("AgentInfo").setCurFK(e)},start:function(){this.initPrefab()},initPrefab:function(){this._agentInfo=this.node.getChildByName("agentInfo"),this._agentRoot=this.node.getChildByName("pages").getChildByName("agentRoot"),this._buycardNode=this.node.getChildByName("pages").getChildByName("buycardNode"),this._welfareNode=this.node.getChildByName("pages").getChildByName("welfareNode"),this._statisticsNode=this.node.getChildByName("pages").getChildByName("statisticsNode"),this._feadBackNode=this.node.getChildByName("pages").getChildByName("feedback"),this._agentReq=this.node.getChildByName("pages").getChildByName("agentReq"),this._createGroupNode=this.node.getChildByName("pages").getChildByName("createGroup"),this._createEGroupNode=this.node.getChildByName("pages").getChildByName("createEGroup"),this._paomadengNode=this.node.getChildByName("pages").getChildByName("paomadeng"),this._taskStateNode=this.node.getChildByName("pages").getChildByName("taskState"),this._eGroupPushOfusersNode=this.node.getChildByName("pages").getChildByName("EGroupOwnersPushList")},onToggleSelect:function(e){"toggle1"==e.target.name?this._selectType=1:"toggle2"==e.target.name?this._selectType=2:"toggle3"==e.target.name?this._selectType=3:"toggle4"==e.target.name?this._selectType=4:"toggle5"==e.target.name?this._selectType=5:"toggle6"==e.target.name?this._selectType=6:"toggle7"==e.target.name?this._selectType=7:"toggle8"==e.target.name?this._selectType=8:"toggle9"==e.target.name?this._selectType=9:"toggle10"==e.target.name?this._selectType=10:"toggle11"==e.target.name?this._selectType=11:"toggle12"==e.target.name?this._selectType=12:"toggle13"==e.target.name&&(this._selectType=13),this.setPage(this._selectType),this._selectType<=3?this.titleNode.active=!0:this.titleNode.active=!1},setPage:function(e){this._selectType=e,this.chageInterface(),this.SendMsg()},SendMsg:function(){1==this._selectType?this.getSaleRecord():2==this._selectType?this.getBuyRecordList():3==this._selectType?this.getWelfare():4==this._selectType?this.getStatistics():5==this._selectType||6==this._selectType||(7==this._selectType?this.getFeadBack():8==this._selectType?this.getAgentReq():9==this._selectType?(this.initGroupList(),this.getAllGroupList(0,15)):10==this._selectType?this.getCreateEGroup():11==this._selectType?this.getPMDList():12==this._selectType?this.getTaskStateList():13==this._selectType&&this.getEGroupPushOfUsers())},getEGroupPushOfUsers:function(){Hall_ReqAndRes.getExperienceAgentList(function(e){if(!e.code){for(var t=e.data,n=[],i=GroupDataMgr.userInfoMap,a=0;a<t.length;a++){var o=parseInt(t[a]);i[o]||n.push(o)}GroupDataMgr.getUsersInfo(n,function(e){for(var n={},a=0;a<t.length;a++){var o=t[a];n[o]||(n[o]={}),i[o]?(n[o].headImg=i[o].headImg,n[o].name=i[o].name,n[o].userId=parseInt(o)):(n[o].headImg="",n[o].name="",n[o].userId="")}this._eGroupPushOfusersNode.getComponent("AgentEGroupOwnersPushList").createEGrouppushOfUsers(n)}.bind(this))}}.bind(this))},getTaskStateList:function(){Hall_ReqAndRes.getUserTaskStateList(function(e){for(var t=e.data.tasks,n=[],i=GroupDataMgr.userInfoMap,a=0;a<t.length;a++){var o=t[a].userid;i[o]||n.push(o)}GroupDataMgr.getUsersInfo(n,function(e){for(var n=0;n<t.length;n++){var a=t[n].userid;i[a]?(t[n].headImg=i[a].headImg,t[n].name=i[a].name):(t[n].headImg="",t[n].name="")}t.sort(function(e,t){return e.state-t.state}.bind(this)),this._taskStateNode.getComponent("AgentTaskState").createRecordList(t)}.bind(this))}.bind(this))},getSaleRecord:function(){Hall_ReqAndRes.getSellRecord(UserMgr.userId,0,10,function(e){this._agentRoot.getComponent("AgentRoot").createRecordList(e.data)}.bind(this))},getBuyRecordList:function(){Hall_ReqAndRes.getUserChargeRecord(function(e){e.code?publicWindow.alert.show("",e.msg):this._buycardNode.getComponent("AgentBuyCard").createBuyRecordList(e.data)}.bind(this))},getWelfare:function(){Hall_ReqAndRes.getSpreadUserInfo(null,function(e){this.initWelfare(e)}.bind(this))},initWelfare:function(e){if(e.code)publicWindow.alert.show("",e.msg);else{var t=e.data,n=this._welfareNode.getComponent("AgentWelfare"),i=[];Array.isArray(t)?i=t:i.push(t);for(var a=0,o=0;o<i.length;o++)a+=i[o].record_gems.buy_rebate;a=parseInt(a/10),n.setTotolGain(a),n.createWelRecordList(i)}},getStatistics:function(){Hall_ReqAndRes.getStatistics(function(e){e.code||this._statisticsNode.getComponent("AgentStatisticsPage").createStatisticsList(e.data)}.bind(this))},getFeadBack:function(){Hall_ReqAndRes.getPlayerReportList(0,50,function(e){this._feadBackNode.getComponent("AgentFeadback").createRecordList(e.data)}.bind(this))},getAgentReq:function(){Hall_ReqAndRes.getAgentRequestList(0,100,function(e){this._agentReq.getComponent("AgentReqPage").createAgentReqList(e.data)}.bind(this))},getAllGroupList:function(e,t){Hall_ReqAndRes.getAllClub(e,t,function(e){for(var t=e.data,n=[],i=GroupDataMgr.userInfoMap,a=0;a<t.length;a++){var o=t[a].ownerid;i[o]||n.push(o)}GroupDataMgr.getUsersInfo(n,function(e){for(var n=0;n<t.length;n++){var a=t[n].ownerid;i[a]?(t[n].headImg=i[a].headImg,t[n].userName=i[a].name):(t[n].headImg="",t[n].userName="")}this._createGroupNode.getComponent("AgentCreateGroup").createGroupList(t)}.bind(this))}.bind(this))},initGroupList:function(){this._createGroupNode.getComponent("AgentCreateGroup").initGroupList()},getCreateEGroup:function(){Hall_ReqAndRes.getEclub(function(e){e.code||this.initEGroupList(e)}.bind(this))},getPMDList:function(){Hall_ReqAndRes.getRollingNotice_gm(function(e){e.code||this.initPMDList(e)}.bind(this))},initEGroupList:function(e){var t=e.data.eclubs,n=[];for(var i in t){var a={};a.priority=t[i],a.clubId=i,n.push(a)}this._createEGroupNode.getComponent("AgentCreateEGroup").createEGroupList(n)},initPMDList:function(e){var t=e.data,n=[];for(var i in t){var a={},o="";try{o=JSON.parse(t[i]),a.content=o.info,a.beginTime=o.beginTime,a.endTime=o.endTime}catch(e){}a.type=i,n.push(a)}this._paomadengNode.getComponent("AgentPMD").createPMDList(n)},chageInterface:function(){for(var e=this.node.getChildByName("pages"),t=0;t<e.children.length;t++){var n=e.children[t];t==this._selectType-1?n.active=!0:n.active=!1}},onClickClose:function(){this.node.active=!1,GroupDataMgr.refreshInfo(UserMgr.userId)}}),cc._RF.pop()},{}],AgentPowers:[function(e,t,n){"use strict";cc._RF.push(t,"3a73enE4bRPx50mWVdzD4zh","AgentPowers"),cc.Class({extends:cc.Component,properties:{agentPowersNode:cc.Node,RoomListNode:cc.Node,SelectNode:cc.Node,AgentRoomsItem:cc.Prefab,ContentofRoom:cc.Node,createRoomNode:cc.Node,btnAgentPower:cc.Node},onLoad:function(){this.RoomListNode.active=!1},onEnable:function(){var e=UserMgr.agentLevel>=2;this.btnAgentPower.active=e},onBtnClose:function(e){"btn_RoomClose"==e.target.name?this.RoomListNode.active=!1:"btn_back"==e.target.name&&(this.agentPowersNode.active=!1,this.RoomListNode.active=!1)},onBtnBack:function(){this.agentPowersNode.active=!1,this.RoomListNode.active=!1},onBtnSelectClick:function(e){var t=UIMgr.getPageScript(UIMgr.HallPage)._createRoom.getComponent("CreateRoom");if("btn_Room"==e.target.name)t.open(2);else if("btn_VRoom"==e.target.name);else if("btn_RoomList"==e.target.name)this.RoomListNode.getComponent("EmptyRoomList").open();else if("btn_AgentPower"==e.target.name){UIMgr.getPageScript(UIMgr.HallPage)._agentPowersMgr.getComponent("AgentPowersMgr").openAgentMgr()}},RemoveRooms:function(){this.ContentofRoom.removeAllChildren()},initRoomList:function(e){this.ContentofRoom;for(var t=0;t<e.length;t++){cc.instantiate(this.AgentRoomsItem).getComponent("AgentRoomsItem").initData(e[t])}},initSingleRoom:function(e){},getEmptyRooms:function(e){this.RoomListNode.getComponent("EmptyRoomList").getEmptyRooms(e)},getRoomInfo:function(e){this.RoomListNode.getComponent("EmptyRoomList").getRoomInfo(e)}}),cc._RF.pop()},{}],AgentRebateHistoryItem:[function(e,t,n){"use strict";cc._RF.push(t,"a34560hBhdF1JBIRy/Bj45J","AgentRebateHistoryItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblTime:cc.Label,lblUserID:cc.Label,lblRebate:cc.Label},start:function(){},initData:function(e,t){this.setBgByIndex(t);var n=dc.utils.dateFormat(e.date);this.lblTime.string=n,this.lblUserID.string=e.receiver,this.lblRebate.string=e.rebate},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)}}),cc._RF.pop()},{}],AgentRecruit:[function(e,t,n){"use strict";cc._RF.push(t,"9e083niTT9GvqzSpnd8C9yo","AgentRecruit"),cc.Class({extends:cc.Component,properties:{AgentRecruitNode:cc.Node},onLoad:function(){},onBtnClose:function(){this.AgentRecruitNode.active=!1}}),cc._RF.pop()},{}],AgentReqItem:[function(e,t,n){"use strict";cc._RF.push(t,"392c0pd3ZFArJ0arVbCd2tK","AgentReqItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblUserId:cc.Label,lblRelName:cc.Label,lblPhone:cc.Label,lblName:cc.Label,lblWxacc:cc.Label,_userId:null},start:function(){},initData:function(e,t){this._userId=e.userid,this.setBgByIndex(t),this.setUserId(e.userid),this.setPhone(e.phone),this.setRelName(e.real_name),this.setName(e.name||""),this.setWxacc(e.wx_account)},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},setUserId:function(e){this.lblUserId.string=e},setPhone:function(e){this.lblPhone.string=e},setRelName:function(e){this.lblRelName.string=e},setName:function(e){this.lblName.string=e},setWxacc:function(e){this.lblWxacc.string=e},onBtnAgree:function(){var e=this._userId;Hall_ReqAndRes.optAgentRequest(e,1,function(e){e.code?publicWindow.alert.show("",e.msg):(publicWindow.alert.show("","\u64cd\u4f5c\u6210\u529f"),this.node.removeFromParent())}.bind(this))},onBtnDisagree:function(){var e=this._userId;Hall_ReqAndRes.optAgentRequest(e,2,function(e){e.code?publicWindow.alert.show("",e.msg):(publicWindow.alert.show("","\u64cd\u4f5c\u6210\u529f"),this.node.removeFromParent())}.bind(this))}}),cc._RF.pop()},{}],AgentReqPage:[function(e,t,n){"use strict";cc._RF.push(t,"dd0a3XDunpAqoob7a/arTLS","AgentReqPage"),cc.Class({extends:cc.Component,properties:{scrollcontent:cc.Node,agentReqItem:cc.Node},start:function(){},removeAllRecord:function(){this.scrollcontent.removeAllChildren()},createAgentReqList:function(e){this.removeAllRecord();for(var t=0,n=0;n<e.length;n++){var i=cc.instantiate(this.agentReqItem);i.active=!0;var a=i.getComponent("AgentReqItem");this.scrollcontent.addChild(i),a.initData(e[n],n),t+=i.height}this.scrollcontent.height=t}}),cc._RF.pop()},{}],AgentRoomFind:[function(e,t,n){"use strict";cc._RF.push(t,"c1ad06wQzdC6KGC8jFwXL4Y","AgentRoomFind"),cc.Class({extends:cc.Component,properties:{ebox_roomId:cc.EditBox,lblRoomID:cc.Label,lblRoomType:cc.Label,lblRoomPeopleNum:cc.Label,peoplesNode:cc.Node,peopleDetailItem:cc.Node,_seats:null,_roomId:null},start:function(){},onDisable:function(){this.ebox_roomId.string="",this.lblRoomID.string="",this.lblRoomType.string="",this.lblRoomPeopleNum.string="",this.peoplesNode.removeAllChildren(),this._roomId=null},setRoomInfo:function(e,t){var n=JSON.parse(e.conf),i=e.seats;this.lblRoomID.string=e.roomId;for(var a=0,o=0;o<i.length;o++)i[o].userId&&a++;this.lblRoomPeopleNum.string=a;var s="";3==n.gametype&&(s=2==n.peoplemax?0==n.gamenums?"\u676d\u9ebb\u5bf9\u621850\u7247":"\u676d\u9ebb\u5bf9\u62188\u7247":0==n.gamenums?"\u676d\u5dde\u9ebb\u5c0640\u7247":"\u676d\u5dde\u9ebb\u5c068\u5c40"),this.lblRoomType.string=s,this._seats=e.seats,this.createItems(e.seats,t)},createItems:function(e,t){this.peoplesNode.removeAllChildren();for(var n=0;n<e.length;n++)if(e[n]&&e[n].userId){var i=cc.instantiate(this.peopleDetailItem);i.active=!0;var a=i.getComponent("AgentFindItem");this.peoplesNode.addChild(i),a.initData(e[n],t),i.height}},OnClickSearchRoom:function(){var e=this.ebox_roomId.string;Hall_ReqAndRes.getRoomInfo(e,function(t){t.code?publicWindow.alert.show("",t.msg):(this._roomId=e,this.setRoomInfo(t.data,e))}.bind(this))},OnClickDissolve:function(){if(this._roomId){var e=function(){Hall_ReqAndRes.dissolveRoom(this._roomId,function(e){e.code?publicWindow.alert.show("",e.msg):(publicWindow.alert.show("","\u89e3\u6563\u6210\u529f"),this.ebox_roomId.string="",this.lblRoomID.string="",this.lblRoomType.string="",this.lblRoomPeopleNum.string="",this._roomId=null,this.ebox_roomId.string="",this.peoplesNode.removeAllChildren())}.bind(this))}.bind(this);publicWindow.alert.show("","\u662f\u5426\u8981\u89e3\u6563\u8be5\u623f\u95f4",e,!0)}}}),cc._RF.pop()},{}],AgentRoot:[function(e,t,n){"use strict";cc._RF.push(t,"6ef61uk4D1IL61USw+4OYge","AgentRoot"),cc.Class({extends:cc.Component,properties:{ebox_userId:cc.EditBox,saleNode:cc.Node,salerIcon:cc.Node,lblSalerName:cc.Label,lblSalerUserId:cc.Label,lblRetainFK:cc.Label,ebox_saleNum:cc.EditBox,content:cc.Node,saleRecordItem:cc.Node,lblTuiGuangMa:cc.Label,qcodeNode:cc.Node,myIcon:cc.Node,lblName:cc.Label,lblUserId:cc.Label,qcode:cc.Node,moveNode:cc.Node,cutBg:cc.Node},start:function(){this.setTuiGuangMa()},onDisable:function(){this.lblSalerUserId.string="",this.lblSalerName.string="",this.lblRetainFK.string=""},removeAllRecord:function(){this.content.removeAllChildren()},createRecordList:function(e){this.removeAllRecord();for(var t=0,n=0;n<e.length;n++){var i=cc.instantiate(this.saleRecordItem);i.active=!0;var a=i.getComponent("SaleRecordItem");this.content.addChild(i),a.initData(e[n],n),t+=i.height}this.content.height=t},setCurFK:function(e){this.lblRetainFK.string=e},setTuiGuangMa:function(){var e="";e=dc.getTuiGuangMaUrl(),e+=UserMgr.userId,this.lblTuiGuangMa.string=e},OnBtnOpenSale:function(){var e=this.ebox_userId.string,t=/^[0-9]+$/.test(e);if(""!=e)if(t)if(n!=UserMgr.userId){var n=parseInt(e),i=[],a=GroupDataMgr.userInfoMap;i.push(n),GroupDataMgr.getUsersInfo(i,function(e){this.saleNode.active=!0;var t=a[n];this.setSaleUserId(n),this.setIcon(t.headImg),this.setSaleName(t.name),this.setCurFK(t.gems)}.bind(this))}else publicWindow.alert.show("","\u4e0d\u80fd\u8f6c\u7ed9\u81ea\u5df1");else publicWindow.alert.show("","id\u53ea\u80fd\u662f\u6570\u5b57");else publicWindow.alert.show("","id\u4e0d\u80fd\u4e3a\u7a7a")},OnBtnQcodeMake:function(){cc.director.getWinSize();var e=this.moveNode.getContentSize();console.log("width:"+e.width),console.log("height:"+e.height);var t=this.moveNode.getPosition(),n="agent_"+UserMgr.userId+".jpg";console.log("cutpaic0");var i=jsb.fileUtils.getWritablePath()+n;console.log("cutpaic"),console.log(jsb.fileUtils.getWritablePath()),console.log(i),jsb.fileUtils.isFileExist(i)&&(console.log("jinqu"),jsb.fileUtils.removeFile(i));var a=new cc.RenderTexture(Math.floor(e.width),Math.floor(e.height));this.moveNode.setPosition(e.width/2,e.height/2),console.log("x:"+t.x),console.log("y:"+t.y),a.setAnchorPoint(cc.p(.5,.5)),a.begin(),this.moveNode._sgNode.visit(),a.end(),console.log("cutpaic1"),a.saveToFile(n,cc.ImageFormat.JPG,!0,function(t){console.log("cut succeed"),AnysdkMgr.saveCutToPicture(i,n,e.width,e.height),this.moveNode.x=0,this.moveNode.y=0,cc.sys.os!=cc.sys.OS_IOS&&publicWindow.alert.show("","\u4fdd\u5b58\u5230\u76f8\u518c")}.bind(this)),console.log("cutpaic2"),cc.sys.os==cc.sys.OS_ANDROID||(cc.sys.os,cc.sys.OS_WINDOWS)},OnClickOpenQcode:function(){this.qcodeNode.active=!0;var e=this.lblTuiGuangMa.string;this.makeCode(this.qcode,e),this.lblName.string=UserMgr.userName,this.lblUserId.string=UserMgr.userId,this.setMyIcon(UserMgr.headIMG,UserMgr.userId)},setMyIcon:function(e,t){this.myIcon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){})},makeCode:function(e,t){var n=new QRCode(-1,QRErrorCorrectLevel.H);n.addData(t),n.make();for(var i=e.getComponent(cc.Graphics),a=e.width/n.getModuleCount(),o=e.height/n.getModuleCount(),s=0;s<n.getModuleCount();s++)for(var r=0;r<n.getModuleCount();r++){n.isDark(s,r)?i.fillColor=cc.Color.BLACK:i.fillColor=cc.Color.WHITE;var c=Math.ceil((r+1)*a)-Math.floor(r*a),l=Math.ceil((s+1)*a)-Math.floor(s*a);i.rect(Math.round(r*a),Math.round(s*o),c,l),i.fill()}},OnClickCloseQcode:function(){this.qcodeNode.active=!1},setSaleUserId:function(e){this.lblSalerUserId.string=e},setIcon:function(e,t){this.salerIcon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){})},setSaleName:function(e){this.lblSalerName.string=e},onBtnSale:function(){if(/^[0-9]+$/.test(this.ebox_saleNum.string)&&""!=this.ebox_saleNum.string){var e=parseInt(this.ebox_userId.string),t=parseInt(this.ebox_saleNum.string);Hall_ReqAndRes.sellGems(e,t,function(e){if(!e.code){e.data;var t=UIMgr.getPageScript(UIMgr.HallPage)._agentPowersMgr.getComponent("AgentPowersMgr");t.getSaleRecord(),t.getAgentInfo(),publicWindow.alert.show("","\u51fa\u552e\u6210\u529f")}}.bind(this))}else publicWindow.alert.show("","\u623f\u5361\u6570\u53ea\u80fd\u4e3a\u6570\u5b57")},onBtnCloseSale:function(){this.saleNode.active=!1}}),cc._RF.pop()},{}],AgentStatisticsItem:[function(e,t,n){"use strict";cc._RF.push(t,"aa7ecAtA1pCxpgxcpamUM/a","AgentStatisticsItem");e("GameTypeConf");cc.Class({extends:cc.Component,properties:{lblType:cc.Label,lblYesterday:cc.Label,lblToday:cc.Label,lblLastWeek:cc.Label,lblLastMonth:cc.Label},start:function(){},initData:function(e){this.setTitleByType(e.type),this.setYesterday(e.yesterday),this.setToday(e.today),this.setLastWeek(e.lastweek),this.setLastMonth(e.lastmonth)},setTitleByType:function(e){var t="";"login"==e?t="\u6d3b\u8dc3\u4eba\u6570":"register"==e?t="\u6ce8\u518c\u4eba\u6570":"costOfMJ2"==e?t="\u4e8c\u4eba\u9ebb\u5c06\u5c40\u6570":"costOfMJ4"==e?t="\u56db\u4eba\u9ebb\u5c06\u5c40\u6570":"\u603b\u6d88\u8017"==e?t="\u9ebb\u5c06\u623f\u5361\u603b\u5c40\u6570":"costOfDB"==e?t="\u53cc\u6263\u5c40\u6570":"costOfTDH3"==e?t="\u63a8\u5012\u80e1\u4e09\u4eba":"costOfTDH4"==e&&(t="\u63a8\u5012\u80e1\u56db\u4eba"),this.setType(t)},setType:function(e){this.lblType.string=e},setYesterday:function(e){this.lblYesterday.string=e},setToday:function(e){this.lblToday.string=e},setLastWeek:function(e){this.lblLastWeek.string=e},setLastMonth:function(e){this.lblLastMonth.string=e}}),cc._RF.pop()},{GameTypeConf:"GameTypeConf"}],AgentStatisticsPage:[function(e,t,n){"use strict";cc._RF.push(t,"15f26f7mq1OPLG5XAlyYZt9","AgentStatisticsPage");var i=e("GameTypeConf");cc.Class({extends:cc.Component,properties:{content:cc.Node,statisticItem:cc.Node,lblOtherInfo:cc.Label},start:function(){},removeAllRecord:function(){this.content.removeAllChildren()},createStatisticsList:function(e){this.removeAllRecord();var t={},n=0,a=0,o=0,s=0,r=[];for(var c in e){var l=e[c];if("cost"==c)for(var h in l){var d={},u=l[h];d.lastmonth=u.lastmonth?u.lastmonth.gems:0,d.lastweek=u.lastweek?u.lastweek.gems:0,d.month=u.month?u.month.gems:0,d.today=u.today?u.today.gems:0,d.yesterday=u.yesterday?u.yesterday.gems:0,h==i.historyServerGameType.mj4_hz?d.type="costOfMJ4":h==i.historyServerGameType.mj2_hz?d.type="costOfMJ2":h==i.historyServerGameType.dbuckle4_hz?d.type="costOfDB":h==i.historyServerGameType.mj_tdh3?d.type="costOfTDH3":h==i.historyServerGameType.mj_tdh4&&(d.type="costOfTDH4"),r.push(d),h!=i.historyServerGameType.mj4_hz&&h!=i.historyServerGameType.mj2_hz||(n+=parseInt(d.lastweek),a+=parseInt(d.lastmonth),o+=parseInt(d.yesterday),s+=parseInt(d.today))}else if("login"==c){(d={}).lastmonth=l.lastmonth.length,d.lastweek=l.lastweek.length,d.month=l.month.length,d.today=l.today.length,d.yesterday=l.yesterday.length,d.type="login",r.push(d)}else if("register"==c){(d={}).lastmonth=l.lastmonth.length,d.lastweek=l.lastweek.length,d.month=l.month.length,d.today=l.today.length,d.yesterday=l.yesterday.length,d.type="register",r.push(d)}}t.lastweek=n,t.lastmonth=a,t.yesterday=o,t.today=s,t.type="\u603b\u6d88\u8017",r.push(t);for(var g=0,m=0;m<r.length;m++){d=r[m];var p=cc.instantiate(this.statisticItem);p.active=!0;var f=p.getComponent("AgentStatisticsItem");this.content.addChild(p),f.initData(d),g+=p.height}this.content.height=g;var v,_=e.realtimeCount,M=0,C=0,y=0,N=0,I=0,b=0;for(var S in _)if(_.hasOwnProperty(S)){var D=_[S];try{var G=JSON.parse(D);G.hasOwnProperty("logined")&&(M+=G.logined),G.hasOwnProperty("mj_hz2_games")&&(C+=G.mj_hz2_games),G.hasOwnProperty("mj_hz4_games")&&(y+=G.mj_hz4_games),G.hasOwnProperty("dbuckle_hz4_games")&&(N+=G.dbuckle_hz4_games),G.hasOwnProperty("mj_hz_pushing_games")&&(I+=G.mj_hz_pushing_games),G.hasOwnProperty("mj_hz_pushing_games_ma")&&(b+=G.mj_hz_pushing_games_ma)}catch(e){console.error(e)}}v=2*C+4*y+4*N,this.lblOtherInfo.string="\u5728\u7ebf\u4eba\u6570:"+M+"  \u6e38\u620f\u4eba\u6570:"+v+"  \u4e8c\u4eba\u9ebb\u5c06\u5bf9\u5c40\u6570:"+C+" \u56db\u4eba\u9ebb\u5c06\u5bf9\u5c40\u6570:"+y+" \u53cc\u6263\u5bf9\u5c40\u6570:"+N+" \u63a8\u5012\u80e1\u4e70\u9a6c:"+b+" \u63a8\u5012\u80e1\u4e0d\u4e70\u9a6c:"+I}}),cc._RF.pop()},{GameTypeConf:"GameTypeConf"}],AgentTaskStateItem:[function(e,t,n){"use strict";cc._RF.push(t,"92f8ajy60RJObZ54aYo75hO","AgentTaskStateItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblName:cc.Label,lblUserID:cc.Label,lblPhone:cc.Label,stateNode:cc.Node},start:function(){},initData:function(e,t){this.setBgByIndex(t),this.lblName.string=e.name,this.lblUserID.string=e.userid,this.lblPhone.string=e.phone,this.setState(e.state),this._userId=e.userid,this._state=e.state},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},setState:function(e){var t=this.stateNode.getChildByName("lblstate"),n=this.stateNode.getChildByName("btnDeal");e?(t.active=!0,n.active=!1):(t.active=!1,n.active=!0)},OnClickDeal:function(){Hall_ReqAndRes.optUserTaskState(this._userId,1,function(e){e.code?publicWindow.alert.show("",e.msg):(this.setState(e.data.state),publicWindow.alert.show("","\u5904\u7406\u6210\u529f"))}.bind(this))}}),cc._RF.pop()},{}],AgentTaskState:[function(e,t,n){"use strict";cc._RF.push(t,"21eb2oA6jVN9ainSb7oD0I/","AgentTaskState"),cc.Class({extends:cc.Component,properties:{content:cc.Node,taskStateItem:cc.Node},start:function(){},removeAllRecord:function(){this.content.removeAllChildren()},createRecordList:function(e){this.removeAllRecord();for(var t=0,n=0;n<e.length;n++){var i=cc.instantiate(this.taskStateItem);i.active=!0;var a=i.getComponent("AgentTaskStateItem");this.content.addChild(i),a.initData(e[n],n),t+=i.height}this.content.height=t}}),cc._RF.pop()},{}],AgentUserInfoFind:[function(e,t,n){"use strict";cc._RF.push(t,"d55c5KrddNKFLK75zWRYP97","AgentUserInfoFind"),cc.Class({extends:cc.Component,properties:{ebox_userId:cc.EditBox,ebox_changeLV:cc.EditBox,lblName:cc.Label,lblUserId:cc.Label,lblBindUserId:cc.Label,lblPhone:cc.Label,lblAgentCTime:cc.Label,lblLastLoginTime:cc.Label,lblCurFK:cc.Label,lblCurRoomId:cc.Label,lblAgentLV:cc.Label},start:function(){},onDisable:function(){this.ebox_userId.string="",this.ebox_changeLV.string="",this.lblName.string="",this.lblUserId.string="",this.lblBindUserId.string="",this.lblPhone.string="",this.lblAgentCTime.string="",this.lblLastLoginTime.string="",this.lblCurFK.string="",this.lblCurRoomId.string="",this.lblAgentLV.string=""},setUserInfo:function(e){var t;this.lblName.string=e.name,this.lblUserId.string=e.userId,this.lblBindUserId.string=0==e.ownerId?"":e.ownerId,this.lblPhone.string=e.phone,t=e.agent_create_time&&""!=e.agent_create_time?dc.utils.dateFormat(e.agent_create_time):"",this.lblAgentCTime.string=t,this.lblLastLoginTime.string=dc.utils.dateFormat(e.re_time),this.lblCurFK.string=e.gems,this.lblCurRoomId.string=e.roomId||"",this.lblAgentLV.string=e.agent_level},OnClickSearUserInfo:function(){if(/^[0-9]+$/.test(this.ebox_userId.string)&&""!=this.ebox_userId.string){var e=parseInt(this.ebox_userId.string);Hall_ReqAndRes.getUserInfo(e,function(e){if(!e.code){var t=e.data;this.setUserInfo(t)}}.bind(this))}else publicWindow.alert.show("","\u623f\u5361\u6570\u53ea\u80fd\u4e3a\u6570\u5b57")},OnEditChangeLvEnd:function(){var e=/^[0-9]+$/;if(e.test(this.ebox_userId.string)&&""!=this.ebox_userId.string)if(e.test(this.ebox_changeLV.string)&&""!=this.ebox_changeLV.string){var t=parseInt(this.ebox_changeLV.string),n=parseInt(this.ebox_userId.string);Hall_ReqAndRes.changeAgentLevel(n,t,function(e){e.code?publicWindow.alert.show("",e.msg):(this.lblAgentLV.string=t,publicWindow.alert.show("","\u4fee\u6539\u4ee3\u7406\u7b49\u7ea7\u6210\u529f")),this.ebox_changeLV.string=""}.bind(this))}else publicWindow.alert.show("","\u4fee\u6539\u4ee3\u7406\u7b49\u7ea7\u53c2\u6570\u4e0d\u6b63\u786e");else publicWindow.alert.show("","\u7528\u6237ID\u53ea\u80fd\u4e3a\u6570\u5b57")},OnClickOpenDown:function(){var e=parseInt(this.ebox_userId.string);Hall_ReqAndRes.removeBanUser(e,function(e){e.code?publicWindow.alert.show("",e.msg):publicWindow.alert.show("","\u89e3\u5c01\u6210\u529f")}.bind(this))},OnClickCloseDown:function(){var e=parseInt(this.ebox_userId.string);Hall_ReqAndRes.addBanUser(e,function(e){e.code?publicWindow.alert.show("",e.msg):publicWindow.alert.show("","\u5c01\u53f7\u6210\u529f")}.bind(this))}}),cc._RF.pop()},{}],AgentWelfare:[function(e,t,n){"use strict";cc._RF.push(t,"dfd59a8kMRFk4Tsm9SmGJsS","AgentWelfare"),cc.Class({extends:cc.Component,properties:{content:cc.Node,welfareItem:cc.Node,ebox_userId:cc.EditBox,lblTotalGain:cc.Label,rebateHistoryNode:cc.Node,rebateHistoryContent:cc.Node,rebateHistoryItem:cc.Node},start:function(){},onDisable:function(){this.lblTotalGain.string=""},setTotolGain:function(e){this.lblTotalGain.string=e,this._gain=parseInt(e)},removeAllRecord:function(){this.content.removeAllChildren()},createWelRecordList:function(e){this.removeAllRecord();for(var t=0,n=0;n<e.length;n++){var i=cc.instantiate(this.welfareItem);i.active=!0;var a=i.getComponent("WelfareItem");this.content.addChild(i),a.initData(e[n],n),t+=i.height}this.content.height=t},createRebateHistoryList:function(e){this.rebateHistoryContent.removeAllChildren();for(var t=0,n=0;n<e.length;n++){var i=cc.instantiate(this.rebateHistoryItem);i.active=!0;var a=i.getComponent("AgentRebateHistoryItem");this.rebateHistoryContent.addChild(i),a.initData(e[n],n),t+=i.height}this.rebateHistoryContent.height=t},OnClickSeachWelfare:function(){if(/^[0-9]+$/.test(this.ebox_userId.string)&&""!=this.ebox_userId.string){var e=parseInt(this.ebox_userId.string);Hall_ReqAndRes.getSpreadUserInfo(e,function(e){UIMgr.getPageScript(UIMgr.HallPage)._agentPowersMgr.getComponent("AgentPowersMgr").initWelfare(e)}.bind(this))}else publicWindow.alert.show("","id\u53ea\u80fd\u4e3a\u6570\u5b57")},OnClickGain:function(){0!=this._gain?Hall_ReqAndRes.getRebate(function(e){e.code?publicWindow.alert.show("",e.msg):(publicWindow.alert.show("","\u9886\u53d6\u6210\u529f"),this.lblTotalGain.string="",this._gain=0,GroupDataMgr.refreshInfo(UserMgr.userId))}.bind(this)):publicWindow.alert.show("","\u6ca1\u6709\u53ef\u4ee5\u9886\u53d6\u7684\u5956\u52b1")},OnClickGetRebateHistory:function(){Hall_ReqAndRes.getRebateHistroy(0,50,function(e){if(e.code)publicWindow.alert.show("",e.msg);else{this.rebateHistoryNode.active=!0;for(var t=e.data.history||[],n=0;n<t.length;n++)t[n]=JSON.parse(t[n]);this.createRebateHistoryList(t)}}.bind(this))},OnClickCloseHistory:function(){this.rebateHistoryNode.active=!1}}),cc._RF.pop()},{}],AniLayer_DB:[function(e,t,n){"use strict";cc._RF.push(t,"8a0eaejHP1PdJX/ml6cFr1H","AniLayer_DB"),cc.Class({extends:cc.Component,properties:{dragonNode:cc.Node},start:function(){},playBombEffect:function(){var e=this.dragonNode.getChildByName("bomb").getComponent(dragonBones.ArmatureDisplay),t=e.playAnimation("newAnimation",1);return e.addEventListener(dragonBones.EventObject.COMPLETE,function(){console.log("playBombEffect complete")}.bind(this),this),t.totalTime},playRocketEffect:function(){var e=this.dragonNode.getChildByName("rocket").getComponent(dragonBones.ArmatureDisplay),t=e.playAnimation("newAnimation",1);return e.addEventListener(dragonBones.EventObject.COMPLETE,function(){console.log("playRocket complete")}.bind(this),this),t.totalTime},playPlaneEffect:function(){var e=this.dragonNode.getChildByName("plane").getComponent(dragonBones.ArmatureDisplay),t=e.playAnimation("newAnimation",1);return e.addEventListener(dragonBones.EventObject.COMPLETE,function(){console.log("playPlane complete")}.bind(this),this),t.totalTime}}),cc._RF.pop()},{}],AniLayer_MJ_G:[function(e,t,n){"use strict";cc._RF.push(t,"ae4699M9/RGvL4mGP8hBIZM","AniLayer_MJ_G"),cc.Class({extends:cc.Component,properties:{mjOverNode:cc.Node,playEfxs:[cc.Animation],handArrNode:[cc.Node],pointArrNode:[cc.Node],diceMgr:cc.Node,HuNode:cc.Node,DrawNode:cc.Node},onLoad:function(){},playEffect:function(e,t,n,i){var a=this.playEfxs[e];a.node.active=!0;var o=a.play(t);o.wrapMode;o.repeatCount=1,a.once("finished",function(){a.node.active=!1,i&&i()},this)},playDice:function(e,t){this.diceMgr.active=!0;var n=this.diceMgr.getChildByName("playNode").getComponent(cc.Animation);n.node.active=!0;var i=this.diceMgr.getChildByName("diceArr");i.active=!1;var a=n.play("touzi");a.repeatCount=2;var o=a.duration*a.repeatCount,s=o+.8;return this.setDiceData(e),n.once("finished",function(){console.log(o),n.node.active=!1,i.active=!0},this),audioMgr.playSFX("game/dice.mp3"),s},setDiceData:function(e){this.diceMgr;for(var t=this.diceMgr.getChildByName("diceArr"),n=0;n<t.childrenCount;n++){var i=t.children[n];this.sureDiceSpriteByIndex(e[n],i)}},sureDiceSpriteByIndex:function(e,t){for(var n=0;n<t.childrenCount;n++){var i=t.children[n];i.active=e-1==n}},playHandThrow:function(e){var t=this.handArrNode[e].getComponent(cc.Animation);t.node.active=!0;var n=t.getClips()[0].name;t.play(n),t.once("finished",function(){console.log("playHandThrow finish"),t.node.active=!1},this)},playFallPoint:function(e){var t=this.pointArrNode[e].getComponent(cc.Animation);t.node.active=!0;var n=t.getClips()[0].name;t.play(n),t.once("finished",function(){console.log("playHandThrow finish"),t.node.active=!1},this)},setHuLayer:function(e,t){for(var n=this.mjOverNode.getChildByName("titleNode"),i=this.mjOverNode.getChildByName("scoreNode"),a=i.getChildByName("mj_over_sub"),o=i.getChildByName("mj_over_add"),s=i.getChildByName("lblScore").getComponent(cc.Label),r=0;r<n.children.length;r++)n.children[r].active=r==e;var c=t;t>0?(o.active=!0,a.active=!1):t<0?(o.active=!1,a.active=!0,c=-c):(o.active=!0,a.active=!1),c=""+c,s.string=c;var l=-(28*c.length/2+o.width/2);o.x=l,a.x=l},playDraw:function(e){var t=2;t=null==e?2:e,this.DrawNode.active=!0;var n=cc.sequence(cc.delayTime(0),cc.scaleTo(e/2,1.2),cc.scaleTo(e/2,1),cc.callFunc(function(){this.DrawNode.active=!1},this,null));return this.DrawNode.runAction(n),t},playHu:function(e){this.HuNode.active=!0;var t=this.playShanDianAni();this.playPaiAni(e,t);var n=cc.sequence(cc.delayTime(t.totalTime),cc.callFunc(function(){this.playHuAni()},this,null));this.node.runAction(n)},playPaiAni:function(e,t){var n=this.HuNode.getChildByName("pai");n.removeAllChildren();var i=cc.instantiate(dc.ResourceMgr.MJPrefabArr[0]),a=i.getComponent(dc.ResourceMgr.geScriptLabel(0));a.setMJID(e),a.initMJ(),n.addChild(i);var o=1*t.totalTime,s=cc.sequence(cc.delayTime(o),cc.callFunc(function(){n.removeAllChildren()},this,null));return n.runAction(s),0},playShanDianAni:function(){var e=this.HuNode.getChildByName("shandian").getComponent(cc.Animation);e.node.active=!0;var t=e.getClips()[0].name,n=e.play(t);n.repeatCount=1;var i={totalTime:n.duration*n.repeatCount,frame:n.frameRate};return e.once("finished",function(){console.log("playHuAni finish"),e.node.active=!1},this),i},playHuAni:function(e){var t=this.HuNode,n=t.getChildByName("hu").getComponent(cc.Animation);n.node.active=!0;var i=n.getClips()[0].name,a=n.play(i);a.repeatCount=1;var o=a.duration*a.repeatCount;a.frameRate;return n.once("finished",function(){console.log("playHuAni finish"),n.node.active=!1,t.active=!1},this),o},hideDice:function(){this.diceMgr.active=!1},showDice:function(){this.diceMgr.active=!0}}),cc._RF.pop()},{}],AniLayer_TDH:[function(e,t,n){"use strict";cc._RF.push(t,"db0cc7c0qxF/5S5yuPQMxhf","AniLayer_TDH"),cc.Class({extends:e("AniLayer_MJ_G"),properties:{huParent:cc.Node,huArr:cc.Node,pointArr:cc.Node},start:function(){},setHuShadowShow:function(e){this.huParent.active=e},playFP:function(e,t,n,i){var a=this.pointArr.children[e].getComponent(cc.Animation);a.node.active=!0;var o=a.play(t);o.wrapMode;o.repeatCount=1,a.once("finished",function(){i&&i()},this)},hideFPNode:function(){for(var e=this.pointArr.children,t=0;t<e.length;t++){e[t].active=!1}this.hideHu()},playHu:function(e,t,n){parseInt(GameDataMgr.conf.wanfa/100);for(var i=GameDataMgr.getLocalSide(e),a=this.huArr.children,o=0;o<a.length;o++)(function(e){var o=a[e];if(i==e){o.active=!0;var s=this.playShanDianAni(i);this.playPaiAni(i,t,s);var r=cc.sequence(cc.delayTime(s.totalTime),cc.callFunc(function(){this.playHuAni(i);n&&n()},this,null));o.runAction(r)}}).bind(this)(o)},hideHu:function(){for(var e=this.huArr.children,t=0;t<e.length;t++){e[t].active=!1}},playPaiAni:function(e,t,n){var i=this.huArr.children[e].getChildByName("pai");i.removeAllChildren();var a=cc.instantiate(dc.ResourceMgr.MJPrefabArr[0]),o=a.getComponent(dc.ResourceMgr.geScriptLabel(0));o.setMJID(t),o.initMJ(),i.addChild(a);var s=1*n.totalTime,r=cc.sequence(cc.delayTime(s),cc.callFunc(function(){i.removeAllChildren()},this,null));return i.runAction(r),0},playHuAni:function(e,t){var n=this.huArr.children[e],i=n.getChildByName("hu").getComponent(cc.Animation);i.node.active=!0;var a=i.getClips()[0].name,o=i.play(a);o.repeatCount=1;var s=o.duration*o.repeatCount;o.frameRate;return i.once("finished",function(){console.log("playHuAni finish"),i.node.active=!1,n.active=!1},this),s},playShanDianAni:function(e){var t=this.huArr.children[e].getChildByName("shandian").getComponent(cc.Animation);t.node.active=!0;var n=t.getClips()[0].name,i=t.play(n);i.repeatCount=1;var a={totalTime:i.duration*i.repeatCount,frame:i.frameRate};return t.once("finished",function(){console.log("playHuAni finish"),t.node.active=!1},this),a}}),cc._RF.pop()},{AniLayer_MJ_G:"AniLayer_MJ_G"}],AnysdkMgr:[function(e,t,n){"use strict";cc._RF.push(t,"078244reHtCmJEEFKU2hnJL","AnysdkMgr"),cc.Class({extends:cc.Component,properties:{_isCapturing:!1},onLoad:function(){},init:function(){this.ANDROID_API="com/hsgame/WXAPI",this.ANDROID_XLAPI="com/hsgame/SGAPI",this.IOS_API="AppController"},battery:function(){if(cc.sys.os==cc.sys.OS_ANDROID){var e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getBattery","()I");return console.log("battery"+e),e}if(cc.sys.os==cc.sys.OS_IOS){var t=jsb.reflection.callStaticMethod(this.IOS_API,"getBattery");return console.log("battery : "+t),t}return-1},onIapResp:function(e,t){console.log("onIapResp:"+e),console.log("identifying:"),console.log(t),publicWindow.wc.hide(),""!=e?"Falure"==e?publicWindow.alert.show("\u63d0\u793a","\u652f\u4ed8\u5931\u8d25"):Hall_ReqAndRes.payResult(1,t,function(e){e.code&&publicWindow.alert.show("",e.msg)}.bind(this)):console.log("onIapResp code is kong")},copyContent:function(e){cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","CopyTxt","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod(this.IOS_API,"copyTxt:",e)},saveCutToPicture:function(e,t,n,i){console.log("saveCutToPicture"),console.log(e),console.log(t),console.log(n),console.log(i),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","saveCutToPicture","(Ljava/lang/String;Ljava/lang/String;II)V",e,t,n,i):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod(this.IOS_API,"_SavePhoto:",e)},isWeichatInstall:function(){return cc.sys.os!=cc.sys.OS_IOS||jsb.reflection.callStaticMethod(this.IOS_API,"getWeichatInstalled")},isXLInstall:function(){return cc.sys.os!=cc.sys.OS_IOS||jsb.reflection.callStaticMethod(this.IOS_API,"getXLInstalled")},getXLInstall:function(){console.log("getXLInstall");var e=!1;return e=cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"getXLInstalled"):cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(this.ANDROID_XLAPI,"isXLInstall","()Z"),console.log("install:"+e),e},login:function(){cc.sys.os==cc.sys.OS_ANDROID?(console.log("android login"),jsb.reflection.callStaticMethod(this.ANDROID_API,"Login","()V")):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"login"):console.log("platform:"+cc.sys.os+" dosn't implement share.")},XLLogin:function(){cc.sys.os==cc.sys.OS_ANDROID?(console.log("android login"),jsb.reflection.callStaticMethod(this.ANDROID_XLAPI,"Login","()V")):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"XLLogin"):console.log("platform:"+cc.sys.os+" dosn't implement share.")},share:function(e,t){var n="?roomId="+dc.GameDataMgr.roomID,i=dc.URL_HZ_InviteFriends+n;console.log("shareshare:"),console.log("appweb:"+dc.SIAddress.appweb),console.log("roomId:"+n),console.log("tempweb:"+i),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.ANDROID_API,"Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",i,e,t):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"share:shareTitle:shareDesc:",i,e,t):console.log("platform:"+cc.sys.os+" dosn't implement share.")},SharePicToFriendCircle:function(e,t){var n="?roomId="+dc.GameDataMgr.roomID,i=dc.URL_HZ_FriendAndCircle+n;console.log("shareshare:"),console.log("appweb:"+dc.SIAddress.appweb),console.log("roomId:"+n),console.log("tempweb:"+i),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.ANDROID_API,"SharePicToFriendCircle","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",i,e,t):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"share:shareTitle:shareDesc:",i,e,t):console.log("platform:"+cc.sys.os+" dosn't implement share.")},SharePicToFriend:function(e,t){var n="?roomId="+dc.GameDataMgr.roomID,i=dc.URL_HZ_FriendAndCircle+n;console.log("shareshare:"),console.log("appweb:"+dc.SIAddress.appweb),console.log("roomId:"+n),console.log("tempweb:"+i),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.ANDROID_API,"SharePicToFriend","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",i,e,t):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"share:shareTitle:shareDesc:",i,e,t):console.log("platform:"+cc.sys.os+" dosn't implement share.")},shareCutToFriend:function(e,t,n){console.log("shareCutToFriend"),cc.sys.os==cc.sys.OS_ANDROID?(console.log("shareCutToFriend1"),jsb.reflection.callStaticMethod(this.ANDROID_API,"ShareIMG","(Ljava/lang/String;III)V",e,t,n,0)):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"shareIMG:width:height:scene:",e,t,n,0):console.log("platform:"+cc.sys.os+" dosn't implement share.")},shareCutToCircle:function(e,t,n){console.log("shareCutToCircle"),cc.sys.os==cc.sys.OS_ANDROID?(console.log("shareCutToCircle1"),jsb.reflection.callStaticMethod(this.ANDROID_API,"ShareIMG","(Ljava/lang/String;III)V",e,t,n,1)):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"shareIMG:width:height:scene:",e,t,n,1):console.log("platform:"+cc.sys.os+" dosn't implement share.")},shareResult:function(){if(console.log("shareResult"),!this._isCapturing){console.log("shareResult1"),this._isCapturing=!0;var e=cc.director.getWinSize(),t=(new Date,jsb.fileUtils.getWritablePath()+"result_share.jpg");console.log("shareResult2"),console.log(t),jsb.fileUtils.isFileExist(t)&&(jsb.fileUtils.removeFile(t),console.log("shareResult3"));var n=new cc.RenderTexture(Math.floor(e.width),Math.floor(e.height));n.setPosition(cc.p(e.width/2,e.height/2)),n.begin(),cc.director.getRunningScene().visit(),n.end(),console.log("shareResult4"),n.saveToFile("result_share.jpg",cc.ImageFormat.JPG),console.log("shareResult5");var i=this,a=0;setTimeout(function n(){if(jsb.fileUtils.isFileExist(t)){console.log("shareResult6");var o=100/e.height,s=Math.floor(e.width*o);cc.sys.os==cc.sys.OS_ANDROID?(console.log("shareResult7"),console.log("width:"+s),console.log("height:100"),jsb.reflection.callStaticMethod(i.ANDROID_API,"ShareIMG","(Ljava/lang/String;III)V",t,s,100,0),console.log("height:100")):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(i.IOS_API,"shareIMG:width:height:scene:",t,s,100,0):console.log("platform:"+cc.sys.os+" dosn't implement share."),i._isCapturing=!1}else{if(++a>10)return void console.log("time out...");setTimeout(n,50)}},50)}},XLShareResult:function(){if(console.log("shareResult"),!this._isCapturing){console.log("shareResult1"),this._isCapturing=!0;var e=cc.director.getWinSize(),t=(new Date,jsb.fileUtils.getWritablePath()+"result_share.jpg");console.log("shareResult2"),console.log(t),jsb.fileUtils.isFileExist(t)&&(jsb.fileUtils.removeFile(t),console.log("shareResult3"));var n=new cc.RenderTexture(Math.floor(e.width),Math.floor(e.height));n.setPosition(cc.p(e.width/2,e.height/2)),n.begin(),cc.director.getRunningScene().visit(),n.end(),console.log("shareResult4"),n.saveToFile("result_share.jpg",cc.ImageFormat.JPG),console.log("shareResult5");var i=this,a=0;setTimeout(function n(){if(jsb.fileUtils.isFileExist(t)){console.log("shareResult6");var o=100/e.height,s=Math.floor(e.width*o);cc.sys.os==cc.sys.OS_ANDROID?(console.log("shareResult7"),console.log("width:"+s),console.log("height:100"),jsb.reflection.callStaticMethod(i.ANDROID_XLAPI,"ShareIMG","(Ljava/lang/String;II)V",t,s,100),console.log("height:100")):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(i.IOS_API,"XLShareIMG:width:height:",t,s,100):console.log("platform:"+cc.sys.os+" dosn't implement share."),i._isCapturing=!1}else{if(++a>10)return void console.log("time out...");setTimeout(n,50)}},50)}},startLocation:function(){cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/baidu/LocationApi","startLocation","()V"):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"startLocation"):console.log("platform:"+cc.sys.os+" dosn't implement startLocation.")},getLocationRep:function(e){console.log("getLocationRep"),console.log(e),Hall_ReqAndRes.updateAddress(e)},onLoginResp:function(e){console.log("code:",e);NetMgr.createSocket({},function(t){UserMgr.LoginHall(e,2,function(e){console.log("onLoginResp LoginHall",JSON.stringify(e));var t=e.data.token;cc.sys.localStorage.setItem("token",t),cc.sys.localStorage.setItem("LoginType","wx_login");var n=cc.sys.localStorage.getItem("token");console.log(n),cc.director.loadScene("HallAndGame",function(){UIMgr.pushUI(UIMgr.HallPage);UIMgr.getPageScript(UIMgr.HallPage).doSomethingAfterlogin()}.bind(this))}.bind(this))}.bind(this))},onXLLoginResp:function(e){console.log("code:"+e),UserMgr.xlcode=e},onBatteryResp:function(e){var t=JSON.stringify(e);cc.log("onBatteryResp : "+t.level),dc.vars.battery=t.level},onShareTimeLineResp:function(){}}),cc._RF.pop()},{}],ArenaDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"6b73cSNPbhGYrw5MLpK4gzW","ArenaDataMgr"),cc.Class({extends:cc.Component,properties:{},start:function(){},init:function(){},clearreadyInterval:function(){GameDataMgr._readyRetainSecond=null,GameDataMgr._readytimer&&(clearInterval(GameDataMgr._readytimer),GameDataMgr._readytimer=null)},enterHallGame:function(e){Hall_ReqAndRes.enterHallGameHall("3201",function(t){t.code||(ArenaDataMgr.hallGamehallId=t.data.hallGamehallId,e&&e(t))}.bind(this))},loginHallGameHall:function(e){Hall_ReqAndRes.loginHallGameHall(function(t){t.code||e&&e(t)})},getHallConfig:function(){Hall_ReqAndRes.getHallGameConfigs(function(e){ArenaDataMgr.hallGameConfigs=e.data.hallGameConfigs}.bind(this))},getHallGameRooms:function(e){Hall_ReqAndRes.getHallGameRooms(function(t){t.code||(ArenaDataMgr.setRooms(t.data.rooms),e&&e(t))})},setArenaLayerSp:function(e){this.arenaLayerSp=e},setRooms:function(e){for(var t in e)e[t].roomId=e[t].id;ArenaDataMgr.rooms=e},setRoomInfo:function(e){var t=this.rooms;t[e.roomId].numOfGames=e.numOfGames,t[e.roomId].gems=e.gems;for(var n=t[e.roomId].seats,i=0;i<e.seat.length;i++)e.seat[i].userId&&(n[i].gems=e.seat[i].gems,n[i].seatIndex=e.seat[i].seatIndex)},onAutoState:function(e){GameDataMgr.onAutoState(e)},removeRoom:function(e){delete this.rooms[e.roomId]},createRoom:function(e){this.rooms[e.roomId]=e,this.rooms[e.roomId].seats=e.seats||[],this.rooms[e.roomId].numOfGames=e.numOfGames||0},userLeave:function(e){var t=e.roomId,n=e.userId,i=this.rooms[t].seats||[];for(var a in i)i[a].userId==n&&(i[a].userId=0)},userEnter:function(e){var t=e.roomId;(this.rooms[t].seats||[])[e.seat.seatIndex]=e.seat},isExitUser:function(e){for(var t in this.rooms)for(var n=this.rooms[t].seats||[],i=0;i<n.length;i++)if(n[i].userId==e)return!0;return!1}}),cc._RF.pop()},{}],ArenaDeskItem:[function(e,t,n){"use strict";cc._RF.push(t,"ba95fpXL1xMBZL2ln1zO9g9","ArenaDeskItem"),cc.Class({extends:cc.Component,properties:{lblDec:cc.Label,lblJushu:cc.Label,lblRoomID:cc.Label,userNode:cc.Node,roomNode:cc.Node},start:function(){},initDesks:function(){for(var e=0;e<this.userNode.childrenCount;e++){var t=this.userNode.children[e];t.index=e,t.getChildByName("userInfo").active=!1}},freshUsers:function(e){console.log("DeskItem freshUsers"),console.log(JSON.stringify(e));for(var t=0;t<this.userNode.childrenCount;t++){this.userNode.children[t].getChildByName("userInfo").active=!1}var n=GroupDataMgr.userInfoMap;e.length;for(var t in console.log("DeskItem freshUsers2"),e)e[t].userId&&function(i){var a=e[i],o=(n[a.userId],this.userNode.children[i]),s=o.getChildByName("userInfo");s.active=!0,s.userId=e[t].userId;var r=o.getComponent("Desk_userInfo");r.setName(a.name||""),r.setOnline(!0);a.ready&&a.online;r.setReadyNodeShow(!1),r.setIcon(a.headimg,a.userId);var c=dc.utils.getExchangeNum(a.gems);r.setGems(c)}.bind(this)(t)},setTableType:function(e){this.tableType=e},setRoomID:function(e){this._roomID=e;var t=this._roomID%100>=10?this._roomID%100:"0"+this._roomID%100;this.lblRoomID.string=t},setJS:function(e){this.lblJushu.string=e},setDec:function(e){this.lblDec.string=e||""},onBtnSit:function(e){console.log("onBtnSit");var t=e.target,n=t.parent.getChildByName("userInfo"),i=t.parent.index;if(n.active){if(n.userId!=UserMgr.userId)return void publicWindow.alert.show("","\u4f4d\u7f6e\u5df2\u6709\u4eba");var a=this._roomID;Hall_ReqAndRes.enter_game_arena(a,i,function(){}.bind(this))}else{a=this._roomID;Hall_ReqAndRes.enter_game_arena(a,i,function(){}.bind(this))}}}),cc._RF.pop()},{}],ArenaLayer:[function(e,t,n){"use strict";cc._RF.push(t,"e4629yYtL9Gs5T0nPohvDjc","ArenaLayer"),cc.Class({extends:cc.Component,properties:{_roomListNode:cc.Node,_roomInfoNode:null},start:function(){},openHallPlayingLayer:function(e){this._roomInfoNode.getComponent("roomInfoLayer").setContinueBtn(e)},initPrefabe:function(){if(!this._roomListNode){var e=cc.loader.getRes("Catalogue/Prefab/Arena/roomListNode",cc.Prefab);this._roomListNode=cc.instantiate(e),this.node.addChild(this._roomListNode)}if(!this._roomInfoNode){var t=cc.loader.getRes("Catalogue/Prefab/Arena/roomInfoLayer",cc.Prefab);this._roomInfoNode=cc.instantiate(t),this.node.addChild(this._roomInfoNode)}},enterHallGame:function(e){var t=this;ArenaDataMgr.enterHallGame(function(n){ArenaDataMgr.setArenaLayerSp(this),ArenaDataMgr.loginHallGameHall(function(e){e.code||(console.log("loginHallGameHall succeed"),t.getTables(),ArenaDataMgr.getHallConfig())}),e&&e()}.bind(this))},getTables:function(){var e=this;ArenaDataMgr.getHallGameRooms(function(t){e.initTable(t)})},openLayer:function(){this.node.active=!0,UIMgr.getPageScript(UIMgr.HallPage).updatePMDPos("arena"),this.enterHallGame()},createRoomBtnList:function(e){this._roomListNode.getComponent("roomListLayer").createRoomBtnList(e)},initTable:function(e){this.setListNodeShow(!1),this.setRoomInfoNodeShow(!0),this.createTableList(e.data.rooms);var t=ArenaDataMgr.isExitUser(UserMgr.userId);this._roomInfoNode.getComponent("roomInfoLayer").setContinueBtn(t)},createTableList:function(e){this._roomInfoNode.getComponent("roomInfoLayer").createTableList(e)},updateTable:function(e){this._roomInfoNode.getComponent("roomInfoLayer").updateTable(e)},userEnter:function(e){this._roomInfoNode.getComponent("roomInfoLayer").userEnter(e)},userLeave:function(e){this._roomInfoNode.getComponent("roomInfoLayer").userLeave(e)},setListNodeShow:function(e){this._roomListNode.active=e},setRoomInfoNodeShow:function(e){this._roomInfoNode.active=e},closeInterface:function(){UIMgr.getPageScript(UIMgr.HallPage).updatePMDPos("hall"),this.node.active=!1,Hall_ReqAndRes.logoutHallGameHall(),ArenaDataMgr.hallGamehallId=null,ArenaDataMgr.setArenaLayerSp(null)}}),cc._RF.pop()},{}],AudioMgr:[function(e,t,n){"use strict";cc._RF.push(t,"fa08brrYtZCS4ob6GfzN2so","AudioMgr"),cc.Class({extends:cc.Component,properties:{bgmVolume:1,sfxVolume:1,bgmAudioID:-1},init:function(){var e;null!=(e=cc.sys.localStorage.getItem("bgmVolume"))&&(this.bgmVolume=parseFloat(e)),null!=(e=cc.sys.localStorage.getItem("sfxVolume"))&&(this.sfxVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},getUrl:function(e){return cc.url.raw("resources/Music/"+e)},playBGM:function(e){if(1!=dc.DEBUG_FLAG){e="BGMusic/"+e;var t=this.getUrl(e);console.log(t),this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume)}},playSFX:function(e){if(1!=dc.DEBUG_FLAG){e="soundEffect/"+e;var t=this.getUrl(e);if(this.sfxVolume>0)cc.audioEngine.play(t,!1,this.sfxVolume)}},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},setBGMVolume:function(e,t){this.bgmAudioID>=0&&(e>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!=e||t)&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],AutoStateLayer:[function(e,t,n){"use strict";cc._RF.push(t,"6f093YmzEJKvaoGlTF7hOOP","AutoStateLayer"),cc.Class({extends:cc.Component,properties:{shadowLayer:cc.Node},start:function(){},setAutoState:function(e){e?this.setShadowLayerShow(!0):this.setShadowLayerShow(!1)},setShadowLayerShow:function(e){this.shadowLayer.active=e},OnClickCancelAuto:function(){Hall_ReqAndRes.optIsRobotTime(0)}}),cc._RF.pop()},{}],Battery:[function(e,t,n){"use strict";cc._RF.push(t,"75de9myh89Kmb2oa6R47pOY","Battery"),cc.Class({extends:cc.Component,properties:{target:cc.Node,_level:0,_levelRank:0},onLoad:function(){var e=0;if(this._level=AnysdkMgr.battery(),cc.sys.os==cc.sys.OS_ANDROID?e=this.getLevelRank():cc.sys.os==cc.sys.OS_IOS&&(this._levelRank=this._level,e=this._level),e>=0)for(var t=this.target.children,n=0;n<t.length;n++)t[n].active=e>=n+1;this.schedule(function(){var e=0;if(this._level=AnysdkMgr.battery(),cc.sys.os==cc.sys.OS_ANDROID?e=this.getLevelRank():cc.sys.os==cc.sys.OS_IOS&&(this._levelRank=this._level,e=this._level),e>=0)for(var t=this.target.children,n=0;n<t.length;n++)t[n].active=e>=n+1},30)},getLevelRank:function(){return this._level>0&&this._level<=20?this._levelRank=1:this._level>20&&this._level<=66?this._levelRank=2:this._level>66&&this._level<=90?this._levelRank=3:this._level>90?this._levelRank=4:this._levelRank=0,this._levelRank}}),cc._RF.pop()},{}],CardBase:[function(e,t,n){"use strict";function i(e){return e>>4}function a(e){return 15&e}function o(e,t){return!(e<=0||t<=0)&&(!(e>2&&e<=13&&t<=2)&&(e<=2&&t>2&&t<=13||e>t))}function s(e,t){return o(a(e),a(t))}cc._RF.push(t,"4d5774bkmxLuKR4oLfBWzIV","CardBase"),t.exports.getCardType=i,t.exports.getCardValue=a,t.exports.printfCardType=function(e){switch(i(e)){case Diamonds:return"\u2666\ufe0f";case Clubs:return"\u2663\ufe0f";case Hearts:return"\u2665\ufe0f";case Spades:return"\u2660\ufe0f";case King:return"\u2605";case Magic:return"\u2606"}return"@"},t.exports.printfCardValue=function(e){switch(a(e)){case 1:return"A";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"10";case 11:return"J";case 12:return"Q";case 13:return"K";case 14:return"-";case 15:return"+";case 0:return""}return"#"},t.exports.printfCard=function(e){return"["+t.exports.printfCardType(e)+t.exports.printfCardValue(e)+"]"},t.exports.printfCardsArr=function(e){var n="{";return e.forEach(function(e){n+=t.exports.printfCard(e)}),n+="}"},t.exports.compareValue=o,t.exports.bubbleSort=function(e){for(var t=e,n=t.length,i=0;i<n;i+=1)for(var a=0;a<n-1-i;a+=1)if(s(t[a],t[a+1])){var o=t[a+1];t[a+1]=t[a],t[a]=o}return t},t.exports.getCardsMap=function(e){for(var t={},n=0;n<e.length;n++){var i=a(e[n]);t[i]||(t[i]=0),t[i]++}return t},cc._RF.pop()},{}],CardTypeCheck:[function(e,t,n){"use strict";cc._RF.push(t,"c3285ewbG5HtbBpkc5tNcZV","CardTypeCheck");e("CardBase");function i(e){return 15&e}function a(e){return e[14]>0||e[15]>0}function o(e){for(var t=0;t<e.length-1;t+=1){var n=i(e[t]),a=i(e[t+1]);if(2==n||2==a)return!1;if(!(1==n&&13==a||13==n&&1==a)&&(a+1!==n&&n+1!==a))return!1}return!0}function s(e,t){return!(e<=0||t<=0)&&(!(e>2&&e<=13&&t<=2)&&(e<=2&&t>2&&t<=13||e>t))}function r(e,t){return s(i(e),i(t))}function c(e){for(var t=e,n=t.length,i=0;i<n;i+=1)for(var a=0;a<n-1-i;a+=1)if(r(t[a],t[a+1])){var o=t[a+1];t[a+1]=t[a],t[a]=o}return t}n.getNextValue=function(e){if(null==e)return null;var t=i(e);if(2==t||t>=14)return null;var n=t+1;return n>13&&(n=1),n},t.exports.getCardType=function(e){return e>>4},n.getCardValue=i,t.exports.compareValue=s,t.exports.bubbleSort=c,t.exports.PatternNone=0,t.exports.PatternKingBomb=1,t.exports.PatternBomb=2,t.exports.PatternSin=3,t.exports.PatternDou=4,t.exports.PatternTri=5,t.exports.PatternSinList=6,t.exports.PatternDouList=7,t.exports.PatternTriList=8,t.exports.PatternTriList2=9;var l={};function h(e){var t={};return e.forEach(function(e){var n=i(e);t[n]||(t[n]=0),t[n]+=1}),t}l[t.exports.PatternKingBomb]=function(e){var t=e.arr,n=e.map;return 4==t.length&&(2==n[14]&&2==n[15])},l[t.exports.PatternBomb]=function(e){var t=e.arr,n=e.map;if(t.length<4)return!1;if(a(n))return!1;if(1!=Object.keys(n).length)return!1;var o=i(t[0]);return o||!1},l[t.exports.PatternSin]=function(e){var t=e.arr;e.map;if(1!==t.length)return!1;var n=i(t[0]);return n||!1},l[t.exports.PatternDou]=function(e){var t=e.arr;e.map;if(2!==t.length)return!1;if(i(t[0])!=i(t[1]))return!1;var n=i(t[0]);return n||!1},l[t.exports.PatternTri]=function(e){var t=e.arr,n=e.map;if(3!==t.length)return!1;if(a(n))return!1;var o=i(t[0]);return 1==Object.keys(n).length&&(o||!1)},l[t.exports.PatternSinList]=function(e){var t=e.arr,n=e.map;if(t.length<5||t.length>12)return!1;if(n[2])return!1;if(a(n))return!1;if(c(t),!o(t))return!1;var s=i(t[t.length-1]);return s||!1},l[t.exports.PatternDouList]=function(e){var t=e.arr,n=e.map;if(t.length<6||t.length%2!=0)return!1;if(a(n))return!1;if(n[2])return!1;for(var s in n)if(2!==n[s])return!1;for(var r=[],l=0;l<t.length;l+=1)l%2==0&&r.push(t[l]);if(c(t),c(r),!o(r))return!1;var h=i(t[t.length-1]);return h||!1},l[t.exports.PatternTriList]=function(e){var t=e.arr,n=e.map;if(t.length<9||t.length%3!=0)return!1;if(a(n))return!1;if(n[2])return!1;for(var s in n)if(3!==n[s])return!1;for(var r=[],l=0;l<t.length;l+=1)l%3==0&&r.push(t[l]);if(c(r),!o(r))return!1;var h=i(r[r.length-1]);return h||!1},l[t.exports.PatternTriList2]=function(e){var t=e.arr,n=e.map;if(t.length%5!=0||t.length<10)return!1;if(n[2])return!1;for(var a=0,s=0,r=[],l=[],h=Object.keys(n),d=0;d<h.length;d+=1){var u=h[d];if(3===n[u])a+=1,r.push(u);else if(2===n[u])s+=1,l.push(u);else{if(5!==n[u])return!1;r.push(u),l.push(u)}}if(a!==s)return!1;if(c(r),c(l),!o(r))return!1;if(!o(l))return!1;var g=i(r[r.length-1]);return g||!1},t.exports.getCardsType=function(e){!e.map&&e.arr&&(e.map=h(e.arr));for(var t=Object.keys(l),n=0;n<t.length;n+=1){var i=parseInt(t[n]),a=l[i](e);if(a)return{pattern:i,big:a}}return null},t.exports.compareCards=function(e,n){var i=t.exports.getCardsType({arr:e}),a=t.exports.getCardsType({arr:n});return!(!a||!i)&&(i.pattern==t.exports.PatternKingBomb||a.pattern!=t.exports.PatternKingBomb&&(a.pattern==t.exports.PatternBomb?i.pattern==t.exports.PatternBomb&&(e.length>n.length||e.length==n.length&&!!r(i.big,a.big)):i.pattern==t.exports.PatternBomb||i.pattern==a.pattern&&e.length==n.length&&!!r(i.big,a.big)))},cc._RF.pop()},{CardBase:"CardBase"}],ChatAniSelect_public:[function(e,t,n){"use strict";cc._RF.push(t,"f3747ap/kVJLKd0bK7coNyd","ChatAniSelect_public"),cc.Class({extends:cc.Component,properties:{picNode:cc.Node,emojiAniNode:cc.Node,effectNode:cc.Node,_controlSp:null,_curIndex:-1,_openType:-1,infoNode:cc.Node},onLoad:function(){this.setPicIndexs(),this.initSelectEffect()},setControlSp:function(e){this._controlSp=e},getEffectPubSp:function(){return this._controlSp.getEffectPubSp()},setEffectNode:function(e){this.effectNode=e},setOpenType:function(e){this._openType=e},setPicIndexs:function(){var e=GameDataMgr.attackConf,t=this.picNode,n=0;for(var i in e){var a=e[i],o=t.children[n],s=o.getChildByName("btnBQ").getComponent(cc.Sprite),r=dc.ResourceMgr.getFaceAByIndex(a.index);s.spriteFrame=r,"ani_other_9"==a.oriName&&s.node.setScale(.6,.6),o.getChildByName("btnItem").index=a.index,n++}},getItemByIndex:function(e){for(var t=this.picNode,n=0;n<t.childrenCount;n++){var i=t.children[n].getChildByName("btnItem");if(e==i.index)return i.parent}},initSelectEffect:function(){for(var e=this.picNode,t=0;t<e.childrenCount;t++){e.children[t].getChildByName("bg_selectbg").active=!1}},onBtnSelect:function(e){for(var t=this.picNode,n=0;n<t.childrenCount;n++){var i=t.children[n],a=i.getChildByName("btnItem"),o=i.getChildByName("bg_selectbg");a.index==e.target.index?(o.active=!0,this._curIndex=e.target.index):o.active=!1}},onBtnSend:function(e){if(GameDataMgr.isEnableEmojiA)if(this._curIndex<0)console.log("please select");else{console.log("emojiA onBtnSend");var t=GameDataMgr.getIndexBySide(this._openType);this.emojiAniNode.active=!1;var n={};n.dIndex=t,n.sender=UserMgr.userId,n.content=this._curIndex,n.type=3,Hall_ReqAndRes.chatRequest(n),GameDataMgr.isEnableEmojiA=!1,this.createEmojiA(this._curIndex)}else publicWindow.alert.show("\u63d0\u793a","10\u79d2\u5185\u53ea\u80fd\u53d1\u9001\u4e00\u6b21")},createEmojiA:function(e){var t=0,n=function(){(t/100).toFixed(2);100==t&&(GameDataMgr.isEnableEmojiA=!0,clearInterval(i)),t++}.bind(this),i=setInterval(n,100)},onBtnclose:function(){this.emojiAniNode.active=!1},initInfoNode:function(e){var t=this.infoNode.getComponent("UserInfo");t.setUserName(e.name),t.setUserID(e.userId),t.setIP(e.ip);var n=GameDataMgr.dicLocaltion[e.userId];t.setAddress(n.address)},onDestroy:function(){console.log("chatAniSelect onDestroy")}}),cc._RF.pop()},{}],ChatClient:[function(e,t,n){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","ChatClient");var i=/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,a={urlRE:/https?:\/\/([-\w\.]+)+(:\d+)?(\/([^\s]*(\?\S+)?)?)?/g,toStaticHTML:function(e){return(e=e.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},zeroPad:function(e,t){for(t=t.toString();t.length<e;)t="0"+t;return t},timeString:function(e){var t=e.getMinutes().toString(),n=e.getHours().toString();return this.zeroPad(2,n)+":"+this.zeroPad(2,t)},isBlank:function(e){return null!==e.match(/^\s*$/)}},o=e("ListView");cc.Class({extends:cc.Component,properties:{loginNode:cc.Node,roomNode:cc.Node,ipEB:cc.EditBox,portEB:cc.EditBox,userNameEB:cc.EditBox,roomIdEB:cc.EditBox,userLabel:cc.Label,channelLabel:cc.Label,msgScrollView:cc.ScrollView,msgLabel:cc.Label,msgEditBox:cc.EditBox,userListView:{default:null,type:o},targetLabel:cc.Label,errorLabel:cc.Label},onLoad:function(){var e=this;pomelo.on("onChat",function(t){e.addMessage(t.from,t.target,t.msg)}),pomelo.on("onAdd",function(t){var n=t.user;e.tip("online",n),e.addUser(n)}),pomelo.on("onLeave",function(t){var n=t.user;e.tip("offline",n),e.removeUser(n)}),pomelo.on("disconnect",function(t){cc.log("pomelo.on() disconnect: ",t),e.showLogin()}),pomelo.on("io-error",function(t){cc.log("pomelo.on() io-error: ",t),e.showError("\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u662f\u5426\u5df2\u7ecf\u542f\u52a8\u6210\u529f\uff01")}),this.serverIp="127.0.0.1",this.serverPort="3014",this.userName="",this.channelName="",this.ipEB.string=this.serverIp,this.portEB.string=this.serverPort,this.users=null,this.showLogin(),this.scheduleOnce(this.scrollDown,0);cc.error({code:400,msg:"reutrn error"})},update:function(e){},scrollDown:function(){cc.log("scrollDown()");var e=this.msgScrollView.content;cc.log("content height: "+e.height),cc.log("content x: "+e.x+", y: "+e.y),e.height<=this.msgScrollView.node.height?cc.log("scrollDown() return false"):this.msgScrollView.scrollToBottom()},addMessage:function(e,t,n,i){cc.log("addMessage()");var o="*"==t?"all":t;if(null!==n){null==i?i=new Date:i instanceof Date==!1&&(i=new Date(i)),n=a.toStaticHTML(n);var s="";s=""==e?a.timeString(i)+" tip: "+n:a.timeString(i)+" "+a.toStaticHTML(e)+" says to "+o+": "+n+"\n",this.msgLabel.string=this.msgLabel.string+s,this.scrollDown()}},showLogin:function(){cc.log("showLogin()"),this.loginNode.active=!0,this.roomNode.active=!1,this.msgLabel.string="",this.scrollDown(),this.targetLabel.string="all"},showChat:function(){this.loginNode.active=!1,this.roomNode.active=!0,this.userListView.setChat(this),this.userListView.hide(),this.scrollDown()},login:function(){cc.log("login()");var e=this;this.serverIp=this.ipEB.string,this.serverPort=this.portEB.string;var t=e.userNameEB.string,n=e.roomIdEB.string;return t.length>20||0==t.length||n.length>20||0==n.length?(e.showError("Name/Channel is too long or too short. 20 character max."),!1):i.test(t)&&i.test(n)?(cc.log("login() user name: "+t),cc.log("login() channel name: "+n),void e.queryEntry(t,function(i,a){pomelo.init({host:i,port:a,log:!0},function(){pomelo.request("connector.entryHandler.enter",{username:t,rid:n},function(i){cc.log("pomelo.request return data: ",i),i.error?e.showError("Please change your name to login."):(e.userName=t,e.channelName=n,e.userLabel.string=t,e.channelLabel.string=n,e.showChat(),e.initUserList(i))})})})):(e.showError("Bad character in Name/Channel. Can only have letters, numbers, Chinese characters, and '_'"),!1)},queryEntry:function(e,t){var n=this;pomelo.init({host:n.serverIp,port:n.serverPort,log:!0},function(){pomelo.request("gate.gateHandler.queryEntry",{uid:e},function(e){cc.log("pomelo.request return data: ",e),pomelo.disconnect(),500!==e.code?t(n.serverIp,e.port):n.showError("There is no server to log in, please wait.")})})},showError:function(e){cc.log("error: "+e),this.errorLabel.string=e,this.unschedule(this.clearErrorMsg),this.scheduleOnce(this.clearErrorMsg,3)},clearErrorMsg:function(){this.errorLabel.string=""},tip:function(e,t){var n,i;switch(e){case"online":n=t+" is online now.",i="Online Notify";break;case"offline":n=t+" is offline now.",i="Offline Notify";break;case"message":n=t+" is saying now.",i="Message Notify"}this.addMessage("","",i+" "+n)},initUserList:function(e){cc.log("initUserList()"),this.users=e.users,this.users.splice(0,0,"all");for(var t=0;t<this.users.length;t++)cc.log("users "+t+": "+this.users[t])},addUser:function(e){cc.log("addUser() user: "+e),this.users[this.users.length]=e,this.userListView.setUsers(this.users)},removeUser:function(e){cc.log("removeUser() user: "+e);for(var t=-1,n=0;n<this.users.length;n++)if(this.users[n]==e){t=n;break}-1!=t&&this.users.splice(t,1),this.userListView.setUsers(this.users),this.targetLabel.string==e&&(this.targetLabel.string="all")},showUserList:function(){cc.log("showUserList()"),this.userListView.setUsers(this.users),this.userListView.show()},chooseUser:function(e){cc.log("chooseUser() index: "+e),this.targetLabel.string=this.users[e],this.userListView.hide()},sendMsg:function(){cc.log("sendMsg()");var e=this,t=e.msgEditBox.string.replace("\n","");if(0!=t.length){var n=this.targetLabel.string;"all"==n&&(n="*");var i=e.channelName,o=e.userName;a.isBlank(t)||pomelo.request("chat.chatHandler.send",{rid:i,content:t,from:o,target:n},function(i){"*"!=n&&n!=o&&e.addMessage(o,n,t)})}else e.showError("Message is empty!")},logout:function(){cc.log("logout()"),pomelo.disconnect()}}),cc._RF.pop()},{ListView:"ListView"}],ChatDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"38ee1OO9a1GhLxaYgVtnSDD","ChatDataMgr");var i=e("FileUtils");cc.Class({extends:cc.Component,properties:{wTalkList:[],myRecord:[],memTalkMap:null},start:function(){},init:function(){this.wTalkList=[],this.myRecord=[],this.memTalkMap={}},clear:function(){this.wTalkList=[]},setGameHistory:function(e){this.wTalkList=[];for(var t=0;t<e.length;t++){var n=e[e.length-1-t],i=JSON.parse(n);i.userId=i.sender,this.wTalkList.push(i)}},getMemTalkByUserId:function(e){return this.memTalkMap&&this.memTalkMap[e]?this.memTalkMap[e]:null},setMemTalkHistory:function(e){this.memTalkMap||(this.memTalkMap={});for(var t=0;t<e.length;t++){var n=e[e.length-1-t],i=JSON.parse(n);i.readState=0,i.sender!=UserMgr.userId?(this.memTalkMap[i.sender]||(this.memTalkMap[i.sender]=[]),this.memTalkMap[i.sender].push(i)):i.receiver!=UserMgr.userId&&(this.memTalkMap[i.receiver]||(this.memTalkMap[i.receiver]=[]),this.memTalkMap[i.receiver].push(i))}this.savePersonWords()},setMemTalkReadState:function(e,t){if(this.memTalkMap&&this.memTalkMap[e])for(var n=this.memTalkMap[e],i=0;i<n.length;i++){n[i].readState=t?1:0}},getMemTalkReadStateNum:function(e){if(!this.memTalkMap||!this.memTalkMap[e])return 0;for(var t=0,n=this.memTalkMap[e],i=0;i<n.length;i++)n[i].readState||t++;return t},getAllMemTalkReadStateNum:function(){if(!this.memTalkMap)return 0;var e=0;for(var t in this.memTalkMap){if(this.memTalkMap[t])e+=this.getMemTalkReadStateNum(t)}return e},chatInGame:function(e){if(e.userId=e.sender,this.curChat=e,2==e.scene){var t=e;this.wTalkList.push(t),this.wTalkList.length>100&&this.wTalkList.shift(),t.sender==UserMgr.userId&&this.addRecord(t.content)}else 3==e.scene&&(this.memTalkMap||(this.memTalkMap={}),e.sender!=UserMgr.userId?(this.memTalkMap[e.sender]||(this.memTalkMap[e.sender]=[]),this.memTalkMap[e.sender].push(e),this.memTalkMap[e.sender].length>100&&this.memTalkMap[e.sender].shift()):e.receiver!=UserMgr.userId&&(this.memTalkMap[e.receiver]||(this.memTalkMap[e.receiver]=[]),this.memTalkMap[e.receiver].push(e),this.memTalkMap[e.receiver].length>100&&this.memTalkMap[e.receiver].shift()),this.savePersonWords())},savePersonWords:function(){var e="persionWords_"+UserMgr.userId+".json",t=JSON.stringify(this.memTalkMap);cc.sys.isNative&&i.writeStringToFile("persionWordsDir",e,t)},getPersonwords:function(){if(!cc.sys.isNative)return this.memTalkMap||{};var e="persionWords_"+UserMgr.userId+".json";console.log("persionWords_"),console.log(e);var t=i.getStringFromFile("persionWordsDir",e);if(console.log("filePath:"+t),""!=t)try{var n=JSON.parse(t);return console.log("afterjson:",n),n}catch(e){return console.log("catch error",e),{}}return{}},isExitContent:function(e){return this.myRecord.indexOf(e)>=0},addRecord:function(e){this.isExitContent(e)||(this.myRecord.push(e),this.myRecord.length>10&&this.myRecord.shift(),cc.sys.isNative&&this.savePhraseToFile())},savePhraseToFile:function(){var e="habitOfSentence_"+UserMgr.userId+".json",t=JSON.stringify(this.myRecord);cc.sys.isNative&&i.writeStringToFile("myrecirdDir",e,t)},getHabitOfSentence:function(){if(!cc.sys.isNative)return[];var e="habitOfSentence_"+UserMgr.userId+".json";console.log("getHabitOfSentence"),console.log(e);var t=i.getStringFromFile("myrecirdDir",e);if(console.log("filePath:"+t),""!=t)try{var n=JSON.parse(t);return console.log("afterjson:",n),n}catch(e){return console.log("catch error",e),[]}return[]}}),cc._RF.pop()},{FileUtils:"FileUtils"}],Chat_2MJ:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}cc._RF.push(t,"31974RFXbVMTY2zW6ZE05Je","Chat_2MJ");var a=e("PhraseConf");cc.Class({extends:cc.Component,properties:{chatNode:cc.Node,MenuNode:cc.Node,chatEditBox:cc.EditBox,quickchatItemNode:cc.Node,quickchatItemInstant:cc.Prefab,myConfScrollContent:cc.Node,myConfScrollView:cc.Node,phraseFixItem:cc.Node,emojiNode:cc.Node,_quickchatsArr:[],_myQuickList:[],ViewList0:cc.Node,chatsIndex:-1,_interfaceType:0,seatsMgr:cc.Node,effectNode:cc.Node,_curSelectType:0,recordListContent:cc.Node,recardsListNode:cc.Node,takeItemPrefab:cc.Prefab,toggles:cc.Node,observeList:cc.Node,editShadow:cc.Node,infoNode:cc.Node},onLoad:function(){this.startInit()},setControlSp:function(e){this._controlSp=e},getMenuSp:function(){return this._controlSp.getMenuNodeSp()},getEmojiSp:function(){},getSeatsMgrSp:function(){return this._controlSp.getSeatsMgrSp()},getEffectPubSp:function(){},setMenuNode:function(e){this.MenuNode=e},setEmojiNode:function(e){},setSeatMgr:function(e){this.seatsMgr=e},setEffectNode:function(e){this.effectNode=e},startInit:function(){this.editShadow.active=!1;var e=GameDataMgr.getIsObserver(),t=this.toggles,n=t.getChildByName("toggle1"),i=t.getChildByName("toggle2"),a=t.getChildByName("toggle3"),o=t.getChildByName("toggle4");e?(n.active=!1,i.active=!1,a.active=!0,o.active=!1,this._curSelectType=2):(this.initQuickChatConf(),n.active=!0,a.active=!0,this._curSelectType=0,GameDataMgr.conf.peoplemax,i.active=!0,UserMgr.agentLevel>=2?o.active=!0:o.active=!1);this.changeInterfaceByType(this._curSelectType);var s=GameDataMgr.chatInfoList;this.initRecordListByData(s)},changeInterfaceByType:function(e){0==e?(this.emojiNode.active=!0,this.quickchatItemNode.active=!1,this.recardsListNode.active=!1,this.myConfScrollView.active=!1):1==e?(this.emojiNode.active=!1,this.quickchatItemNode.active=!0,this.recardsListNode.active=!1,this.myConfScrollView.active=!1,this.initQuickChatList(GameDataMgr.seatIndex)):2==e?(this.recardsListNode.active=!0,this.emojiNode.active=!1,this.quickchatItemNode.active=!1,this.myConfScrollView.active=!1):3==e&&(this.recardsListNode.active=!1,this.emojiNode.active=!1,this.quickchatItemNode.active=!1,this.myConfScrollView.active=!0,this.initMyConfList())},initRecordListByData:function(e){if(e){this.recordListContent.removeAllChildren();for(var t=0;t<e.length;t++){var n=e[t];this.recardItem(n,n.type)}}else console.log("record null")},openListType:function(){0==this._curSelectType?this.clearQuickChatItemNode():1==this._curSelectType?this.changeInterfaceByType(this._curSelectType):2==this._curSelectType?(this.clearQuickChatItemNode(),this.updateTipsPointByType()):3==this._curSelectType&&this.changeInterfaceByType(this._curSelectType)},updateTipsPointByType:function(){2==this._curSelectType&&(this.setTipsShow(!1),this.updateRecordListPos())},updateRecordListPos:function(){var e=this.recordListContent.parent.height,t=this.recordListContent.height>e?this.recordListContent.height-e:0;this.recordListContent.y=t},setTipsShow:function(e){GameDataMgr.getIsObserver()?this.getMenuNodeSp().setTipsShow(e):this.getSeatsMgrSp().setTipsShow(e)},onBtnToggleSelect:function(e){var t=e.target.parent;"toggle1"==t.name?this._curSelectType=0:"toggle2"==t.name?this._curSelectType=1:"toggle3"==t.name?this._curSelectType=2:"toggle4"==t.name&&(this._curSelectType=3),this.changeInterfaceByType(this._curSelectType),this.updateTipsPointByType()},onBtnCloseChat:function(e){this.chatNode.active=!1,this.clearQuickChatItemNode()},clearQuickChatItemNode:function(){this.quickchatItemNode.removeAllChildren()},getMylist:function(){var e;this._myQuickList;var t=GameDataMgr.seats[GameDataMgr.seatIndex].sex;e=GameDataMgr.isPutonghua?1==t?this._myQuickList[0]:2==t?this._myQuickList[2]:this._myQuickList[0]:1==t?this._myQuickList[1]:2==t?this._myQuickList[3]:this._myQuickList[1];var n=GameDataMgr.getPhaseList(),a=[];return a.push.apply(a,i(n)),a.push.apply(a,i(e)),e},initQuickChatList:function(e){this.clearQuickChatItemNode();var t=this.getMylist(),n=(GameDataMgr.seats[e],this.quickchatItemNode),i=0;for(var a in t){var o=t[a],s=cc.instantiate(this.quickchatItemInstant);s.on(cc.Node.EventType.TOUCH_END,this.onQuickChatItemClicked,this),n.addChild(s),s.index=o.index,s.getChildByName("lblword").getComponent(cc.Label).string=o.content,s.y=i,i+=s.height}n.height=i},getNextConfList:function(){return this.myConfScrollContent.children.length-1},initMyConfList:function(){this.myConfScrollContent.removeAllChildren();var e=GameDataMgr.getPhaseList(),t=0;for(var n in e){var i,a;(i=cc.instantiate(this.phraseFixItem)).active=!0,(a=i.getComponent("phraseFixItem")).setState(1),a.initData(e[n],t),this.myConfScrollContent.addChild(i),t++}(i=cc.instantiate(this.phraseFixItem)).active=!0,(a=i.getComponent("phraseFixItem")).setState(0),a.initData({content:'\u70b9\u51fb"\u7b14"\u6dfb\u52a0\u5e38\u7528\u8bed'},1e4),this.myConfScrollContent.addChild(i)},initQuickChatConf:function(){var e=a.getPhrase();this._myQuickList=e._myQuickList,this._quickchatsArr=e._quickchatsArr},getQuickInfo:function(e){return this._quickchatsArr[e]},onQuickChatItemClicked:function(e){this.chatNode.active=!1;var t=e.target;console.log(t.index);var n={};n.content=t.index.toString(),n.sender=UserMgr.userId,n.type=1,Hall_ReqAndRes.chatRequest(n,function(e){})},onBtnSendChat:function(e){if(""!=this.chatEditBox.string){var t={};t.content=this.chatEditBox.string,t.sender=UserMgr.userId;var n={};n.content=this.chatEditBox.string,n.sender=UserMgr.userId,n.type=2,Hall_ReqAndRes.chatRequest(n),GameDataMgr.isObserver?this.chatNode.active=!0:(this.chatNode.active=!1,this.clearQuickChatItemNode()),this.chatEditBox.string=""}else dc.publicWindow.alert.show("\u63d0\u793a","\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")},sendChatBack:function(e){this.node.active?UserMgr.userId==e.sender&&this.updateTipsPointByType():this.clearQuickChatItemNode()},onEmojiItemClicked:function(e){var t;console.log(e.target.name),this.chatNode.active=!1,this.clearQuickChatItemNode();for(var n=0;n<36;n++)if(e.target.name=="btnBQ_"+(n+1)){t=n+1;break}var i={};i.content=t.toString(),i.sender=UserMgr.userId,i.type=0,Hall_ReqAndRes.chatRequest(i)},recardItem:function(e,t){var n=cc.instantiate(this.takeItemPrefab),i=n.getComponent("takeItem");(i.setType(t),i.initData(e),this.recordListContent.addChild(n),this.recordListContent.childrenCount>50)&&this.recordListContent.children[0].removeFromParent();var a=this.recordListContent.childrenCount;this.recordListContent.height=a*this.takeItemPrefab.data.height},clearRecordItems:function(){this.recordListContent.removeAllChildren()},initInfoNode:function(e){var t=this.infoNode.getComponent("UserInfo");t.setUserName(e.name),t.setUserID(e.userId),t.setIP(e.ip);var n=GameDataMgr.dicLocaltion[e.userId];n?t.setAddress(n.address):t.setAddress(""),t.setIcom(e.headimg,e.userId)}}),cc._RF.pop()},{PhraseConf:"PhraseConf"}],Chat_DB:[function(e,t,n){"use strict";cc._RF.push(t,"822a2XTBiJCuICOMduK1V3N","Chat_DB"),cc.Class({extends:cc.Component,properties:{chatNode:cc.Node,MenuNode:cc.Node,chatEditBox:cc.EditBox,quickchatItemNode:cc.Node,quickchatItemInstant:cc.Prefab,emojiNode:cc.Node,_quickchatsArr:[],_myQuickList:[],ViewList0:cc.Node,chatsIndex:-1,_interfaceType:0,seatsMgr:cc.Node,effectNode:cc.Node,_curSelectType:0,recordListContent:cc.Node,recardsListNode:cc.Node,takeItemPrefab:cc.Prefab,toggles:cc.Node,observeList:cc.Node,editShadow:cc.Node,infoNode:cc.Node},onLoad:function(){this.startInit()},setControlSp:function(e){this._controlSp=e},getMenuSp:function(){return this._controlSp.getMenuNodeSp()},getEmojiSp:function(){},getSeatsMgrSp:function(){return this._controlSp.getSeatsMgrSp()},getEffectPubSp:function(){},setMenuNode:function(e){this.MenuNode=e},setEmojiNode:function(e){},setSeatMgr:function(e){this.seatsMgr=e},setEffectNode:function(e){this.effectNode=e},startInit:function(){this.editShadow.active=!1;var e=GameDataMgr.getIsObserver(),t=this.toggles,n=t.getChildByName("toggle1"),i=t.getChildByName("toggle2"),a=t.getChildByName("toggle3");e?(n.active=!1,i.active=!1,a.active=!0,this._curSelectType=2):(this.initQuickChatConf(),n.active=!0,a.active=!0,this._curSelectType=0,GameDataMgr.conf.peoplemax,i.active=!0);this.changeInterfaceByType(this._curSelectType);var o=GameDataMgr.chatInfoList;this.initRecordListByData(o)},changeInterfaceByType:function(e){0==e?(this.emojiNode.active=!0,this.quickchatItemNode.active=!1,this.recardsListNode.active=!1):1==e?(this.emojiNode.active=!1,this.quickchatItemNode.active=!0,this.recardsListNode.active=!1,this.initQuickChatList(GameDataMgr.seatIndex)):2==e&&(this.recardsListNode.active=!0,this.emojiNode.active=!1,this.quickchatItemNode.active=!1)},initRecordListByData:function(e){if(e){this.recordListContent.removeAllChildren();for(var t=0;t<e.length;t++){var n=e[t];this.recardItem(n,n.type)}}else console.log("record null")},openListType:function(){0==this._curSelectType?this.clearQuickChatItemNode():1==this._curSelectType?this.changeInterfaceByType(this._curSelectType):2==this._curSelectType&&(this.clearQuickChatItemNode(),this.updateTipsPointByType())},updateTipsPointByType:function(){2==this._curSelectType&&(this.setTipsShow(!1),this.updateRecordListPos())},updateRecordListPos:function(){var e=this.recordListContent.parent.height,t=this.recordListContent.height>e?this.recordListContent.height-e:0;this.recordListContent.y=t},setTipsShow:function(e){GameDataMgr.getIsObserver()?this.getMenuNodeSp().setTipsShow(e):this.getSeatsMgrSp().setTipsShow(e)},onBtnToggleSelect:function(e){var t=e.target.parent;"toggle1"==t.name?this._curSelectType=0:"toggle2"==t.name?this._curSelectType=1:"toggle3"==t.name&&(this._curSelectType=2),this.changeInterfaceByType(this._curSelectType),this.updateTipsPointByType()},onBtnCloseChat:function(e){this.chatNode.active=!1,this.clearQuickChatItemNode()},clearQuickChatItemNode:function(){this.quickchatItemNode.removeAllChildren()},getMylist:function(){this._myQuickList;var e=GameDataMgr.seats[GameDataMgr.seatIndex].sex;return GameDataMgr.isPutonghua?1==e?this._myQuickList[0]:2==e?this._myQuickList[2]:this._myQuickList[0]:1==e?this._myQuickList[1]:2==e?this._myQuickList[3]:this._myQuickList[1]},initQuickChatList:function(e){this.clearQuickChatItemNode();var t=this.getMylist(),n=(GameDataMgr.seats[e],this.quickchatItemNode),i=0;for(var a in t){var o=t[a],s=cc.instantiate(this.quickchatItemInstant);s.on(cc.Node.EventType.TOUCH_END,this.onQuickChatItemClicked,this),n.addChild(s),s.index=o.index,s.getChildByName("lblword").getComponent(cc.Label).string=o.content,s.y=i,i+=s.height}n.height=i},initQuickChatConf:function(){this._quickchatsArr=[];var e=[];this._myQuickList=[];var t=[];t[(n={index:1100,content:"\u9ad8\u624b\u4f60\u7684\u724c\u6280\u53ef\u4ee5\u7684",sound:"QuickChat_0.mp3"}).index]=n,e[n.index]=n,t[(n={index:1101,content:"\u5dee\u751f\u5dee\u7684\u4e00\u584c\u7cca\u6d82\u7684",sound:"QuickChat_1.mp3"}).index]=n,e[n.index]=n,t[(n={index:1102,content:"\u55e8\u5f88\u9ad8\u5174\u548c\u4f60\u4e00\u8d77\u6e38\u620f",sound:"QuickChat_2.mp3"}).index]=n,e[n.index]=n,t[(n={index:1103,content:"\u56db\u4e2a\u4eba\u51d1\u9f50\u4e86\uff0c\u8d76\u7d27\u5feb\u5f00\u59cb\u5427",sound:"QuickChat_3.mp3"}).index]=n,e[n.index]=n,t[(n={index:1104,content:"\u5c0f\u59d0\u59b9\u52a0\u4e2a\u597d\u53cb\u5417",sound:"QuickChat_4.mp3"}).index]=n,e[n.index]=n,t[(n={index:1105,content:"\u54c8\u54c8\u6253\u5230\u6211\u996d\u7897\u91cc\u6765\u4e86",sound:"QuickChat_5.mp3"}).index]=n,e[n.index]=n,t[(n={index:1106,content:"\u670b\u53cb\u5408\u4f5c\u6109\u5feb",sound:"QuickChat_6.mp3"}).index]=n,e[n.index]=n,t[(n={index:1107,content:"\u6f02\u4eae\uff0c\u5077\u9e21\u6210\u529f",sound:"QuickChat_7.mp3"}).index]=n,e[n.index]=n,t[(n={index:1108,content:"\u53cc\u6263\u4ed6\u4eec\u4e86\u723d",sound:"QuickChat_8.mp3"}).index]=n,e[n.index]=n,t[(n={index:1109,content:"\u4e0d\u6015\u795e\u4e00\u6837\u7684\u5bf9\u624b\uff0c\u5c31\u6015\u732a\u4e00\u6837\u7684\u961f\u53cb\u554a",sound:"QuickChat_9.mp3"}).index]=n,e[n.index]=n,this._myQuickList.push(e);e=[];t[(n={index:2100,content:"\u50ac\u4ec0\u4e48\u50ac\u6211\u60f3\u6e05\u695a\u518d\u51fa",sound:"QuickChat_0.mp3"}).index]=n,e[n.index]=n,t[(n={index:2101,content:"\u8ddf\u4f60\u5408\u4f5c\u5f88\u6109\u5feb",sound:"QuickChat_1.mp3"}).index]=n,e[n.index]=n,t[(n={index:2102,content:"\u6f02\u4eae\u4f60\u7684\u53cc\u6263\u5883\u754c\u5b9e\u5728\u9ad8",sound:"QuickChat_2.mp3"}).index]=n,e[n.index]=n,t[(n={index:2103,content:"\u732a\u4e00\u6837\u7684\u961f\u53cb\u5927\u6982\u5c31\u662f\u8bf4\u4f60\u4e86",sound:"QuickChat_3.mp3"}).index]=n,e[n.index]=n,t[(n={index:2104,content:"\u653e\u6389\u4e00\u4e2a\uff0c\u6293\u534a\u4e2a",sound:"QuickChat_4.mp3"}).index]=n,e[n.index]=n,t[(n={index:2105,content:"\u4e24\u53ea\u9ebb\u888b\uff0c\u653e\u5fc3\u6253\u597d\u4e86",sound:"QuickChat_5.mp3"}).index]=n,e[n.index]=n,t[(n={index:2106,content:"\u4f60\u4e2a\u6162\u541e\u5a46\uff0c\u5feb\u70b9\u51fa",sound:"QuickChat_6.mp3"}).index]=n,e[n.index]=n,t[(n={index:2107,content:"\u4ec0\u4e48\u662f\u7f18\u5206\uff0c\u78b0\u5230\u4f60\u5c31\u662f\u7f18\u5206",sound:"QuickChat_7.mp3"}).index]=n,e[n.index]=n,t[(n={index:2108,content:"\u70b8\u70b8\u6389\u4e48\u597d\u4e86",sound:"QuickChat_8.mp3"}).index]=n,e[n.index]=n,t[(n={index:2109,content:"\u8fd9\u724c\u6ca1\u6709\u5239\u8f66\u4e86",sound:"QuickChat_9.mp3"}).index]=n,e[n.index]=n,this._myQuickList.push(e);e=[];t[(n={index:1200,content:"\u521d\u6765\u4e4d\u5230\uff0c\u8bf7\u591a\u591a\u5173\u7167",sound:"QuickChat_0.mp3"}).index]=n,e[n.index]=n,t[(n={index:1200,content:"\u54ce\u5440\uff0c\u4f60\u5b75\u9e21\u86cb\u5462\uff0c\u52a8\u4f5c\u5feb\u4e00\u70b9\u597d\u4e0d\u5566",sound:"QuickChat_1.mp3"}).index]=n,e[n.index]=n,t[(n={index:1202,content:"\u4f60\u80fd\u8d70\uff0c\u5c31\u7ba1\u81ea\u5df1\u8d70",sound:"QuickChat_2.mp3"}).index]=n,e[n.index]=n,t[(n={index:1203,content:"\u592a\u5389\u5bb3\u4e86\uff0c\u6211\u5f04\u4f60\u4e0d\u8fc7",sound:"QuickChat_3.mp3"}).index]=n,e[n.index]=n,t[(n={index:1204,content:"\u8fd0\u6c14\uff0c\u8fd9\u724c\u81ea\u6263",sound:"QuickChat_4.mp3"}).index]=n,e[n.index]=n,t[(n={index:1205,content:"\u70b8\u7684\u5934\u90fd\u75db\u4e86",sound:"QuickChat_5.mp3"}).index]=n,e[n.index]=n,t[(n={index:1206,content:"\u70b8\u70b8\u6389\u4e48\u597d\u4e86",sound:"QuickChat_6.mp3"}).index]=n,e[n.index]=n,t[(n={index:1207,content:"\u4e13\u5fc3\u6253\u724c\uff0c\u4e0d\u8981\u804a\u5929\u4e86",sound:"QuickChat_7.mp3"}).index]=n,e[n.index]=n,this._myQuickList.push(e),this._quickchatsArr=[];var n;e=[];t[(n={index:2200,content:"\u8868\u8003\u8651\u4e86\uff0c\u8fd9\u724c\u6a2a\u6253\u76f4\u6253\u90fd\u662f\u6b7b",sound:"QuickChat_0.mp3"}).index]=n,e[n.index]=n,t[(n={index:2201,content:"\u4e0d\u8981\u5439\u6211\uff0c\u8ba9\u6211\u60f3\u6e05\u695a\u518d\u51fa",sound:"QuickChat_1.mp3"}).index]=n,e[n.index]=n,t[(n={index:2202,content:"\u6253\u7684\u592a\u81ed\u4e86\uff0c\u56de\u53bb\u7ec3\u7ec3\u5728\u6765",sound:"QuickChat_2.mp3"}).index]=n,e[n.index]=n,t[(n={index:2203,content:"\u5f1f\u5144\uff0c\u4f60\u7ba1\u81ea\u5df1\u8d70",sound:"QuickChat_3.mp3"}).index]=n,e[n.index]=n,t[(n={index:2204,content:"\u4f60\u4eca\u5929\u8138\u8272\u4e0d\u597d\u8981\u8f93\u4e86",sound:"QuickChat_4.mp3"}).index]=n,e[n.index]=n,t[(n={index:2205,content:"\u4f69\u670d\u4f69\u670d\u7684\u786e\u662f\u9ad8\u624b",sound:"QuickChat_5.mp3"}).index]=n,e[n.index]=n,t[(n={index:2206,content:"\u592a\u5389\u5bb3\u4e86\uff0c\u6211\u5f04\u4f60\u4e0d\u8fc7",sound:"QuickChat_6.mp3"}).index]=n,e[n.index]=n,t[(n={index:2207,content:"\u70b8\u70b8\u6389\u4e48\u597d\u4e86",sound:"QuickChat_7.mp3"}).index]=n,e[n.index]=n,t[(n={index:2208,content:"\u4e13\u5fc3\u6253\u724c\uff0c\u4e0d\u8981\u5f00\u5c0f\u5dee",sound:"QuickChat_8.mp3"}).index]=n,e[n.index]=n,this._myQuickList.push(e),this._quickchatsArr=dc.deepCopy(t)},getQuickInfo:function(e){return this._quickchatsArr[e]},onQuickChatItemClicked:function(e){this.chatNode.active=!1;var t=e.target;console.log(t.index);var n={};n.content=t.index,n.sender=UserMgr.userId,n.type=1;var i=JSON.stringify(n);Hall_ReqAndRes.chatRequest(i)},onBtnSendChat:function(e){if(""!=this.chatEditBox.string){var t={};t.content=this.chatEditBox.string,t.sender=UserMgr.userId;var n={};n.content=this.chatEditBox.string,n.sender=UserMgr.userId,n.type=2;var i=JSON.stringify(n);Hall_ReqAndRes.chatRequest(i),GameDataMgr.isObserver?this.chatNode.active=!0:(this.chatNode.active=!1,this.clearQuickChatItemNode()),this.chatEditBox.string=""}else dc.publicWindow.alert.show("\u63d0\u793a","\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")},sendChatBack:function(e){this.node.active?UserMgr.userId==e.sender&&this.updateTipsPointByType():this.clearQuickChatItemNode()},onEmojiItemClicked:function(e){var t;console.log(e.target.name),this.chatNode.active=!1,this.clearQuickChatItemNode();for(var n=0;n<36;n++)if(e.target.name=="btnBQ_"+(n+1)){t=n+1;break}var i={};i.content=t,i.sender=UserMgr.userId,i.type=0;var a=JSON.stringify(i);Hall_ReqAndRes.chatRequest(a)},recardItem:function(e,t){var n=cc.instantiate(this.takeItemPrefab),i=n.getComponent("takeItem");(i.setType(t),i.initData(e),this.recordListContent.addChild(n),this.recordListContent.childrenCount>50)&&this.recordListContent.children[0].removeFromParent();var a=this.recordListContent.childrenCount;this.recordListContent.height=a*this.takeItemPrefab.data.height},clearRecordItems:function(){this.recordListContent.removeAllChildren()},initInfoNode:function(e){var t=this.infoNode.getComponent("UserInfo");t.setUserName(e.name),t.setUserID(e.userId),t.setIP(e.ip);var n=GameDataMgr.dicLocaltion[e.userId];n?t.setAddress(n.address):t.setAddress(""),t.setIcom(e.headimg,e.userId)}}),cc._RF.pop()},{}],CheckUpdate:[function(e,t,n){"use strict";cc._RF.push(t,"4b635N2n5pE+Z/Hlp0XvJYh","CheckUpdate"),cc.Class({extends:cc.Component,properties:{percent:cc.Label,lblErr:cc.Label,_storagePath:"",manifestUrl:cc.Asset,_updating:!1,_canRetry:!1,_info:cc.Label,btnUpdate:cc.Node,loadNode:cc.Node,progressLoad:cc.ProgressBar,lblDownload:cc.Label,tipLabel:cc.Label,updateTipsInterface:cc.Node,_scheduleTime:0},onLoad:function(){},showUpdateTipsLayer:function(e){this.updateTipsInterface.active=e},startCheck:function(){var e=jsb.fileUtils?jsb.fileUtils.getWritablePath():"/";console.log("Storage path for remote asset : "+e),console.log("Local manifest URL : "+dc.appweb);var t=e+"hs_hzmj-release.apk",n=new jsb.Downloader;n.createDownloadFileTask("http://download.hs323.com/app/hs_hzmj-release.apk",t),n.setOnTaskError(function(e,t,n,i){console.log("errorCode="+t),console.log("errorCodeInternal="+n),console.log("errStr="+i)}.bind(this)),n.setOnTaskProgress(function(e,t,n,i){console.log("\u5df2\u4e0b\u8f7d\u5b8c\u6210\u5927\u5c0f="+t),console.log("\u603b\u5927\u5c0f="+n),console.log("\u9884\u671f\u603b\u5927\u5c0f="+i);var a=i?100*n/i:0;console.log("percent:"+a),cc.find("Canvas/lblDownload").getComponent(cc.Label).string="\u5df2\u7ecf\u4e0b\u8f7d\u6e38\u620f"+parseInt(a)+"%"}.bind(this)),n.setOnFileTaskSuccess(function(e){console.log("downLoad sucess!!!")}.bind(this))},startUshedule:function(){this._scheduleTime>=60&&(console.log("scheduleTime is more than 60s"),this.unschedule(this.startUshedule),this.showUpdateTipsLayer(!0)),this._scheduleTime++},createUpdateSchedule:function(){this.schedule(this.startUshedule,1)},checkUpdate:function(){this._updating?console.log("Checking or updating ..."):(console.log("checkUpdate"),console.log(this._am.getState()),this._am.getState()===jsb.AssetsManager.State.UNINITED&&this._am.loadLocalManifest(this.manifestUrl),this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()?(this._checkListener=new jsb.EventListenerAssetsManager(this._am,this.checkCb.bind(this)),cc.eventManager.addListener(this._checkListener,1),this._am.checkUpdate(),this._updating=!0):console.log("load LocalManifest falure"))},startHotUpdateReady:function(){cc.sys.isNative&&(this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"blackjack-remote-asset",cc.log("Storage path for remote asset : "+this._storagePath),this._updating=!1,this.versionCompareHandle=function(e,t){cc.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var n=e.split("."),i=t.split("."),a=0;a<n.length;++a){var o=parseInt(n[a]),s=parseInt(i[a]||0);if(o!==s)return o-s}return i.length>n.length?-1:0},console.log("1"),this._am=new jsb.AssetsManager("",this._storagePath,this.versionCompareHandle),cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS||this._am.retain(),this._am.setVerifyCallback(function(e,t){var n=t.compressed,i=t.md5,a=t.path;t.size;return n?(console.log("Verification passed :"+a),!0):(console.log("Verification passed :"+a+" ("+i+")"),!0)}),console.log("2"),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2))},checkCb:function(e){switch(console.log("Code: "+e.getEventCode()),e.getEventCode()==jsb.EventAssetsManager.NEW_VERSION_FOUND&&console.log("new_versionFound"),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("No local manifest file found, hot update skipped."),this.lblErr.string="No local manifest file found, hot update skipped.",cc.eventManager.removeListener(this._checkListener);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("Fail to download manifest file, hot update skipped."),this.lblErr.string="Fail to download manifest file, hot update skipped.",cc.eventManager.removeListener(this._checkListener);break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("Already up to date with the latest remote version."),cc.eventManager.removeListener(this._checkListener),this.lblErr.string="\u6e38\u620f\u4e0d\u9700\u8981\u66f4\u65b0",this.node.getComponent("LoadingLogic").startPreloading();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this._updating=!1,this.lblErr.string="\u6e38\u620f\u5f00\u59cb\u66f4\u65b0",cc.eventManager.removeListener(this._checkListener),this.showUpdateTipsLayer(!1),this.createUpdateSchedule(),this.hotUpdate()}},hotUpdate:function(){this._am&&!this._updating&&(this._updateListener=new jsb.EventListenerAssetsManager(this._am,this.updateCb.bind(this)),cc.eventManager.addListener(this._updateListener,1),this._am.getState()===jsb.AssetsManager.State.UNINITED&&this._am.loadLocalManifest(this.manifestUrl),this._failCount=0,this._am.update(),this._updating=!0)},updateCb:function(e){var t=!1,n=!1;switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("No local manifest file found, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:console.log("progress_"),console.log(e.getPercent()),console.log(e.getPercentByFile()),console.log("getDownloadedFiles:"+e.getDownloadedFiles()),console.log("getTotalFiles:"+e.getTotalFiles()),console.log("getDownloadedBytes:"+e.getDownloadedBytes()),console.log("getTotalBytes:"+e.getTotalBytes());e.getPercent(),e.getPercentByFile();var i=e.getDownloadedBytes(),a=e.getTotalBytes(),o=0;o=0==a?0:i/a,console.log("percent"+o);var s=parseInt(100*o)+"%";this.progressLoad.progress=o,this.lblDownload.string=s;var r=e.getMessage();r&&console.log(r);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("Fail to download manifest file, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("Already up to date with the latest remote version."),n=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:console.log("Update finished. "+e.getMessage()),t=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:console.log("Update failed. "+e.getMessage()),this._failCount++,this._failCount<5?this._am.downloadFailedAssets():(cc.log("Reach maximum fail count, exit update process"),this._failCount=0,n=!0);break;case jsb.EventAssetsManager.ERROR_UPDATING:console.log("Asset update error: "+e.getAssetId()+", "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:console.log(e.getMessage())}if(n&&(cc.eventManager.removeListener(this._updateListener),this._updateListener=null,this._updating=!1),t){cc.eventManager.removeListener(this._updateListener),this._updateListener=null;var c=jsb.fileUtils.getSearchPaths(),l=this._am.getLocalManifest().getSearchPaths();Array.prototype.unshift(c,l),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(c)),jsb.fileUtils.setSearchPaths(c),this.lblErr.string="\u6e38\u620f\u8d44\u6e90\u66f4\u65b0\u5b8c\u6bd5",cc.audioEngine.stopAll(),cc.game.restart()}},onDestroy:function(){this._updateListener&&(cc.eventManager.removeListener(this._updateListener),this._updateListener=null),this._am&&!cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS&&this._am.release()}}),cc._RF.pop()},{}],ComfAndGeneralize:[function(e,t,n){"use strict";cc._RF.push(t,"7643c0f2GFK8LQ2Rdmu1P8y","ComfAndGeneralize"),cc.Class({extends:cc.Component,properties:{comfirmNode:cc.Node,generalizeNode:cc.Node,selectNode:cc.Node},onLoad:function(){},onBtnOpenSelect:function(){this.node.active=!0,this.selectNode.active=!0},onBtnOpenComf:function(){this.comfirmNode.active=!0;var e=this.comfirmNode.getComponent("IphoneComfirm");null==dc.confirmOriginTime&&(e.btnYZMNode.active=!0,e.countDown.node.active=!1),null!=dc.userMgr.phone&&(e.btnYZMNode.active=!1,e.countDown.node.active=!1),this.generalizeNode.active=!1,this.selectNode.active=!1},onBtnOpenGeneralize:function(){this.comfirmNode.active=!1,this.generalizeNode.active=!0,this.selectNode.active=!1},onBtnClose:function(){this.node.active=!1}}),cc._RF.pop()},{}],CountDown_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"c3293tIb59JlpIEbnjxXa1j","CountDown_2MJ"),cc.Class({extends:cc.Component,properties:{lblCount:cc.Label,countMax:15,_curCount:-1,actionNode:cc.Node},onLoad:function(){},startAction:function(e){this.actionNode.stopAllActions(),this.node.active=!0,this._curCount=e>0?e:this.countMax,this.countMax=this.countMax<e?e:this.countMax,this.lblCount.string=this._curCount;var t=cc.callFunc(function(){this._curCount--,this.lblCount.string=this._curCount,0==this._curCount&&(this.node.active=!1)},this,null),n=cc.sequence(cc.delayTime(1),t),i=cc.repeat(n,this.countMax);this.actionNode.runAction(i)},stopAllActs:function(){this.actionNode.stopAllActions()},getCurTime:function(){return this._curCount}}),cc._RF.pop()},{}],CountDown:[function(e,t,n){"use strict";cc._RF.push(t,"3e245jor3dJaYEOlVuEnEyZ","CountDown"),cc.Class({extends:cc.Component,properties:{lblCount:cc.Label,countMax:15,_curCount:-1,actionNode:cc.Node},onLoad:function(){},startAction:function(){this.actionNode.stopAllActions(),this.node.active=!0,this._curCount=this.countMax,this.lblCount.string=this._curCount;var e=cc.callFunc(function(){this._curCount--,this.lblCount.string=this._curCount,0==this._curCount&&(this.node.active=!1)},this,null),t=cc.sequence(cc.delayTime(1),e),n=cc.repeat(t,this.countMax);this.actionNode.runAction(n)},stopAllActs:function(){this.actionNode.stopAllActions()},getCurTime:function(){return this._curCount}}),cc._RF.pop()},{}],CreateRoom:[function(e,t,n){"use strict";cc._RF.push(t,"22ae7IAKgpMLpqr3lpVoRTX","CreateRoom"),cc.Class({extends:cc.Component,properties:{TypeToggleGroup:cc.Node,TypeToggleGroup_mj2p:cc.Node,TypeToggleGroup_ddz:cc.Node,createRoomNode:cc.Node,titleNode:cc.Node,contentNode:cc.Node,RoomType:0,_curIndex:0,_max:4,_mode:0,gameToggle:cc.Node,btnSprsNode:cc.Node},onLoad:function(){this.createInit()},createInit:function(){this._max=4,this._mode=0},open:function(e){this.node.active=!0,console.log("CreateRoom open : "+e),this._roomType=e,this.setTitleByOpentype(e),this.changeRuleInterface()},setTitleByOpentype:function(e){for(var t=0;t<this.titleNode.childrenCount;t++){var n=this.titleNode.children[t];n.active=e==t+1}},getInterface:function(){this.contentNode;var e="";return 0==this._curIndex?e="tips":1==this._curIndex?e="flyTips":2==this._curIndex?e="touziTpis":3==this._curIndex?e="tips_mj2p":4==this._curIndex?e="tips_ddz":5==this._curIndex?e="DoubleBulck":6==this._curIndex&&(e="tuidaohu"),this.contentNode.getChildByName(e)},changeRuleInterface:function(){var e=this.contentNode,t="";0==this._curIndex?t="tips":1==this._curIndex?t="flyTips":2==this._curIndex?t="touziTpis":3==this._curIndex?t="tips_mj2p":4==this._curIndex?t="tips_ddz":5==this._curIndex?t="DoubleBulck":6==this._curIndex&&(t="tuidaohu");for(var n=0;n<e.childrenCount;n++){var i=e.children[n];i.name==t?i.active=!0:i.active=!1}this.updateBtnSpr(),this.updateDesc_2MJ()},updateDesc_2MJ:function(){var e=this.contentNode.getChildByName("tips_mj2p").getChildByName("desNode"),t=e.getChildByName("50p"),n=e.getChildByName("8j");0==this.getRoomType()?(t.active=!1,n.active=!0):(t.active=!0,n.active=!1)},onBtnTouziToggle:function(e){var t=e.target;"toggle1"==t.parent.name?this._mode=0:"toggle2"==t.parent.name&&(this._mode=1)},onBtnToggleDesc_2MJ:function(e){var t=e.target;"toggle1"==t.name||t.name,this.updateDesc_2MJ()},updateBtnSpr:function(){var e=this.btnSprsNode,t="";0==this._curIndex?t="mj4p":1==this._curIndex||(2==this._curIndex?t="touzi":3==this._curIndex?t="mj2p":4==this._curIndex?t="ddz":5==this._curIndex?t="db":6==this._curIndex&&(t="tdh"));for(var n=0;n<e.childrenCount;n++){var i=e.children[n];i.name==t?i.active=!0:i.active=!1}},onBtnToggleDDZ:function(){},getRoomType:function(){var e=-1;if(0==this._curIndex)for(var t=0;t<this.TypeToggleGroup.childrenCount;t++){if(this.TypeToggleGroup.children[t].getComponent(cc.Toggle).isChecked){this._soundType=t,e=t;break}}else if(3==this._curIndex)for(t=0;t<this.TypeToggleGroup_mj2p.childrenCount;t++){if(this.TypeToggleGroup_mj2p.children[t].getComponent(cc.Toggle).isChecked){this._soundType=t,e=t;break}}else if(4==this._curIndex)for(t=0;t<this.TypeToggleGroup_ddz.childrenCount;t++){if(this.TypeToggleGroup_ddz.children[t].getComponent(cc.Toggle).isChecked){this._soundType=t,e=t;break}}else e=0;return e},onToggleChange:function(e){var t=e.target;"toggle1"==t.parent.name?this._curIndex=0:"toggle2"==t.parent.name?this._curIndex=1:"toggle3"==t.parent.name?this._curIndex=2:"toggle4"==t.parent.name?this._curIndex=3:"toggle5"==t.parent.name?this._curIndex=4:"toggle6"==t.parent.name?this._curIndex=5:"toggle7"==t.parent.name&&(this._curIndex=6),this.changeRuleInterface()},onPlayerNumToggleFly:function(e){var t=e.target;"toggle1"==t.parent.name?this._max=3:"toggle2"==t.parent.name&&(this._max=4)},getMax:function(){var e;if(0==this._curIndex)e=4;else if(1==this._curIndex)e=this._max;else if(2==this._curIndex)e=2;else if(3==this._curIndex)e=2;else if(4==this._curIndex)e=2;else if(5==this._curIndex)e=4;else if(6==this._curIndex){e=0==this.getTDHMax()?3:4}return e},getMode:function(){var e;if(2==this._curIndex)e=this._mode;else if(5==this._curIndex){var t=this.getDBModeOfByIndex(),n=this.getDBTypeOfByIndex();e=10*(0==t?1:0)+(0==n?1:0)}else if(6==this._curIndex){e=0==this.getTDHMode()?1:2}else e=1;return e},getRaise:function(){var e;if(5==this._curIndex){var t=this.getDBRaiseOfByIndex();0==t?e=1:1==t?e=10:2==t?e=20:3==t&&(e=40)}else e=1;return e},getTDHMode:function(){for(var e=this.getInterface().getChildByName("ToggleGroup"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getTDHMax:function(){for(var e=this.getInterface().getChildByName("ToggleGroup_num"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getDBModeOfByIndex:function(){for(var e=this.getInterface().getChildByName("ToggleGroup_mode"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getDBTypeOfByIndex:function(){for(var e=this.getInterface().getChildByName("ToggleGroup_gametype"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getDBGamenumOfByIndex:function(){for(var e=this.getInterface().getChildByName("ToggleGroup_gamenum"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getDBRaiseOfByIndex:function(){for(var e=this.getInterface().getChildByName("ToggleGroup_raise"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},onBtnClose:function(){this.createRoomNode.active=!1},onBtnSure:function(){var e;5==this._curIndex?e=0==this.getDBGamenumOfByIndex()?6:12:5!=this._curIndex&&(e=this.getRoomType(),3==this._curIndex?e=0==e?8:0:0==this._curIndex?e=0==e?0:8:6==this._curIndex&&(e=8));var t=this._curIndex;0==this._curIndex?t=3:5==this._curIndex?t=2:6==this._curIndex&&(t=4);var n=this.getMax(),i=1e3*t+100*n+this.getMode(),a=this._roomType,o=this.getRaise(),s=(new Date,{gametype:t,gamenums:e,createtype:a,peoplemax:n,wanfa:i,clubId:"",raise:o});Hall_ReqAndRes.creatRoom(s,function(e){this.node.active=!1}.bind(this))}}),cc._RF.pop()},{}],DBDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"548f2mkZJRBgJ+orVjwrri5","DBDataMgr");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}e("DBTips");var o=e("CardTypeCheck");cc.Class({extends:cc.Component,properties:{cardsData:[],top:[],caishenID:null,robDZNum:0,cardTypeEnum:null,minCardValue:null,outCardData:null,tableCards:[],lastSeat:null,totalBase:0,lastCardType:null,_passNum:{get:function(){return this._passnum},set:function(e){this._passnum=e}}},onLoad:function(){},clearPass:function(){this._passNum=0},addPassNum:function(){this._passNum=this._passNum+1},isOnlyMagic:function(e){for(var t=0;t<e.length;t++){if(80!=e[t])return!1}return!0},clearMJ:function(){this.cardsData=[],this.tableCards=[],this.lastSeat=[],this.outCardData=null,this.totalBase=0,this.lastCardType=null;for(var e=GameDataMgr.gamePlayerNum,t=0;t<e;t++){var n={holds:[]};this.cardsData.push(n)}},to16Hexadecimal:function(e){var t=[];void 0===e||i(e);if(!e||0==e.length)return e;for(var n=0;n<e.length;n++){var a=e[n].toString(16);t.push(a)}return t},to10Hexadecimal:function(e){var t=void 0===e?"undefined":i(e);if("object"==t){for(var n=[],a=0;a<e.length;a++){var o=parseInt(e[a],16);n.push(o)}return n}return"string"==t?parseInt(e,16):null},reset:function(){GameDataMgr.DBDataMgr.endusers=[],this.clearPass(),this.clearMJ()},init:function(){this.initConf()},getCardsSelect:function(e){var t={arr:e};return o.getCardsType(t)},getSelectCardsByCardType:function(e,t,n){var i=[];if(null==e||0==t.length)return t;if(e==this.cardTypeEnum.rocket)return t;if(e==this.cardTypeEnum.bomb)for(var a=0;a<t.length;a++){(o=t[a]).cardType!=this.cardTypeEnum.bomb&&o.cardType!=this.cardTypeEnum.rocket||i.push(o)}else if(e==this.cardTypeEnum.magicBomb)for(a=0;a<t.length;a++){(o=t[a]).cardType!=this.cardTypeEnum.magicBomb&&o.cardType!=this.cardTypeEnum.bomb&&o.cardType!=this.cardTypeEnum.rocket||i.push(o)}else for(a=0;a<t.length;a++){var o;if((o=t[a]).cardType==this.cardTypeEnum.magicBomb||o.cardType==e||o.cardType==this.cardTypeEnum.rocket||o.cardType==this.cardTypeEnum.bomb)if(o.cardType==e){var s=this.getBigCard(n,e),r=this.getBigCard(o.cards,e),c=this.getLevelByValue(s);this.getLevelByValue(r)>c&&i.push(o)}else i.push(o)}return i},getBigCard:function(e,t){if(null==t)return null;if(t==this.cardTypeEnum.rocket)return null;for(var n=null,i={},a=0;a<e.length;a++){var s=e[a],r=this.CardTypeLogic.getCardValue(s);i[r]||(i[r]=0),i[r]++}var c=Object.keys(i);if(t==this.cardTypeEnum.single)return n=o.getCardValue(e[0]);if(t==this.cardTypeEnum.double)return n=o.getCardValue(e[0]);if(t==this.cardTypeEnum.trible)return n=o.getCardValue(e[0]);if(t==this.cardTypeEnum.magicBomb)return n=o.getCardValue(e[0]);if(t==this.cardTypeEnum.bomb)return n=o.getCardValue(e[0]);if(t==this.cardTypeEnum.threeBandOne){for(a=0;a<c.length;a++)3==i[c[a]]&&(n=parseInt(c[a]));return n}if(t==this.cardTypeEnum.threeBandTwo){for(a=0;a<c.length;a++)3==i[c[a]]&&(n=parseInt(c[a]));return n}if(t==this.cardTypeEnum.serialThreeBandOnes){var l=[];for(a=0;a<c.length;a++)3==i[c[a]]&&l.push(parseInt(c[a]));return l=this.sortByValues(l),n=this.isTogether(l)[0]}if(t==this.cardTypeEnum.serialThreeBandDoubles){for(l=[],a=0;a<c.length;a++)3==i[c[a]]&&l.push(parseInt(c[a]));return n=(l=this.sortByValues(l))[0]}if(t==this.cardTypeEnum.straight){for(l=[],a=0;a<c.length;a++)l.push(parseInt(c[a]));return n=(l=this.sortByValues(l))[0]}if(t==this.cardTypeEnum.serialDouble){for(l=[],a=0;a<c.length;a++)l.push(parseInt(c[a]));return n=(l=this.sortByValues(l))[0]}if(t==this.cardTypeEnum.serialTrible){for(l=[],a=0;a<c.length;a++)l.push(parseInt(c[a]));return l=this.sortByValues(l),n=this.isTogether(l)[0]}if(t==this.cardTypeEnum.bombBand1||t==this.cardTypeEnum.bombBand2){for(a=0;a<c.length;a++)4==i[c[a]]&&(n=parseInt(c[a]));return n}},sortDB:function(e,t){for(var n={},i=0;i<e.length;i++){var s=e[i],r=o.getCardValue(s);n[r]||(n[r]=[]),n[r].push(s)}for(var i in n){n[i].sort(function(e,t){return t-e})}var c=n[1],l=n[2],h=[];n[15]&&h.push.apply(h,a(n[15])),n[14]&&h.push.apply(h,a(n[14])),l&&h.push.apply(h,a(l)),c&&h.push.apply(h,a(c));for(i=13;i>2;i--)n[i]&&h.push.apply(h,a(n[i]));return n[0]&&h.push.apply(h,a(n[0])),t&&h.reverse(),h},removeHolds:function(e,t){for(var n=this.cardsData[e].holds,i=0;i<n.length;i++)if(n[i]==t){var a=n.indexOf(t);n.splice(a,1);break}},getSoundEffectBySex:function(e){var t="";return t+=null!=e?1==e?"male/":2==e?"female/":"male/":"male/"},getSoundEffectByLanguage:function(e){return e?"putonghua/":"hangzhouhua/"},playCardSound:function(e,t,n){var i="DoubleBuckle/",a=this.getSoundEffectBySex(t);i=i+this.getSoundEffectByLanguage(n)+a,i+="card/",i+=this.getCardSoundName(e,t,n),audioMgr.playSFX(i)},getCardSoundName:function(e,t,n){var i="",a=this.getPKType(e).pattern;if(a==o.PatternSin)(s=this.getCardValue(e[0]))<14?i="card_single_"+s+".mp3":14==s?i="card_single_xw.mp3":15==s&&(i="card_single_dw.mp3");else if(a==o.PatternDou){var s;(s=this.getCardValue(e[0]))<14?i="card_double_"+s+".mp3":14==s?i="card_double_xw.mp3":15==s&&(i="card_double_dw.mp3")}else a==o.PatternTri?i="card_trible.mp3":a==o.PatternSinList?i="card_shunzi.mp3":a==o.PatternDouList?i="card_shuangshun.mp3":a==o.PatternTriList?i="card_sanshun.mp3":a==o.PatternTriList2?i="card_plane.mp3":a==o.PatternBomb?i="card_bomb.mp3":a==o.PatternKingBomb&&(i="card_kingbomb.mp3");return i},initConf:function(){this.localSideMap||(this.localSideMap=new Map),2==GameDataMgr.gamePlayerNum?(this.localSideMap[0]={local:0,Side:0},this.localSideMap[1]={local:1,Side:2}):4==GameDataMgr.gamePlayerNum?(this.localSideMap[0]={local:0,Side:0},this.localSideMap[1]={local:1,Side:1},this.localSideMap[2]={local:2,Side:2},this.localSideMap[3]={local:3,Side:3}):(this.localSideMap[0]=0,this.localSideMap[1]=1,this.localSideMap[2]=2,this.localSideMap[3]=3)},getLocalIndex:function(e){return(e-GameDataMgr.seatIndex+GameDataMgr.gamePlayerNum)%GameDataMgr.gamePlayerNum},getLocalSide:function(e){var t=this.getLocalIndex(e);return this.localSideMap[t].Side},getLocalBySide:function(e){var t=-1;for(var n in this.localSideMap){var i=this.localSideMap[n];if(e==i.Side){t=i.local;break}}return console.log("local:"+t),t},getIndexBySide:function(e){this.getLocalBySide(e);for(var t in GameDataMgr.seats){var n=GameDataMgr.seats[t];if(n.userId){var i=GameDataMgr.getSeatIndexByID(n.userId);if(GameDataMgr.getLocalSide(i)==e)return parseInt(t)}}return-1},getCardsMap:function(e){var t=this,n={};return e.forEach(function(e){var i=t.getCardValue(e);n[i]||(n[i]=0),n[i]+=1}),n},getCardValue:function(e){var t=o.getCardValue(e);return parseInt(t)},getCardType:function(e){return o.getCardType(e)},getMode:function(){var e=GameDataMgr.conf;return parseInt(e.wanfa%100/10)},getType:function(){var e=GameDataMgr.conf;return parseInt(e.wanfa%1e3)},onGameBegin:function(e){GameDataMgr.newSeats=e.newSeats,GameDataMgr.turn=e.button,GameDataMgr.button=e.button,GameDataMgr.raise=e.raise,GameDataMgr.DBDataMgr.select_poker=e.select_poker,GameDataMgr.gameIndex=e.numOfGames,GameDataMgr.DBDataMgr.firstSendIndex=e.firstSendIndex},getBeginCardsData:function(e){for(var t=(GameDataMgr.seatIndex+2)%GameDataMgr.gamePlayerNum,n=e.holds?e.holds.length:0,i=GameDataMgr.DBDataMgr.getMode(),a=dc.deepCopy(this.cardsData),o=0;o<a.length;o++)if(o==GameDataMgr.seatIndex)a[o].isMingpai=!0,a[o].holds=e.holds;else if(o==t)a[o].holds=e.pholds,a[o].isMingpai=1==i;else{a[o].isMingpai=!1;for(var s=0;s<n;s++)a[o].holds.push(0)}return a},initCardsData:function(e){GameDataMgr.updateNewSeats(),GameDataMgr.seatIndex=GameDataMgr.getSeatIndexByID(UserMgr.userId),this.cardsData=this.getBeginCardsData(e)},onGameSync:function(e){GameDataMgr.turn=e.turn,GameDataMgr.gameIndex=e.numOfGames,GameDataMgr.DBDataMgr.outCardData=-1==e.oldChu.seatIndex?null:e.oldChu,GameDataMgr.DBDataMgr.raise=e.raise,GameDataMgr.lcSeatIndex=e.lcSeatIndex,GameDataMgr.DBDataMgr.endusers=e.endusers||[];for(var t=e.seats,n=[],i=0;i<t.length;i++)n.push(t[i].userId);GameDataMgr.newSeats=n,GameDataMgr.updateNewSeats(),GameDataMgr.seatIndex=GameDataMgr.getSeatIndexByID(UserMgr.userId);var a=GameDataMgr.DBDataMgr.getMode(),o=(GameDataMgr.seatIndex+2)%GameDataMgr.gamePlayerNum;for(i=0;i<this.cardsData.length;i++)if(t[i].holds=t[i].holds||[],i==GameDataMgr.seatIndex)this.cardsData[i].holds=t[i].holds,this.cardsData[i].isMingpai=!0;else if(i==o){if(1==a)this.cardsData[i].holds=t[i].holds,this.cardsData[i].isMingpai=!0;else 0==(t[GameDataMgr.seatIndex].holds||[]).length?this.cardsData[i].isMingpai=!0:this.cardsData[i].isMingpai=!1,this.cardsData[i].holds=t[i].holds}else{this.cardsData[i].isMingpai=!1;for(var s=0;s<t[i].holdslen;s++)this.cardsData[i].holds.push(0)}},Chupai_DB:function(e){var t=GameDataMgr.getSeatIndexByID(e.userId);e.seatIndex=t,GameDataMgr.DBDataMgr.outCardData=e;var n,i=this.cardsData[t].holds;i.length>0&&(n=i[0]);for(var a=e.pai,o=0;o<a.length;o++)n?this.removeHolds(t,a[o]):this.removeHolds(t,0);var s=(GameDataMgr.seatIndex+2)%GameDataMgr.gamePlayerNum;0==this.cardsData[GameDataMgr.seatIndex].holds.length&&(this.cardsData[s].isMingpai=!0)},actionHandle:function(e){},getPKType:function(e){var t={};return t.arr=e,o.getCardsType(t)}}),cc._RF.pop()},{CardTypeCheck:"CardTypeCheck",DBTips:"DBTips"}],DBTips:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}cc._RF.push(t,"0caab8pMnhH8bO0j8FeiaDW","DBTips");var a=e("CardTypeCheck");function o(e){var t={};return e.forEach(function(e){var n=a.getCardValue(e);t[n]||(t[n]=0),t[n]+=1}),t}function s(e,t){var n=0;return Object.keys(e).forEach(function(i){e[i]===t&&(n+=1)}),n}function r(e,t,n){for(var i=parseInt(e),o=[],s=t,r=0;r<n.length;r+=1){var c=n[r];if(a.getCardValue(c)===i&&(o.push(c),0===(s-=1)))return o}return null}function c(e,t){var n=[];n.push.apply(n,i(t));for(var a=0;a<e.length;a+=1)for(var o=e[a],s=0;s<n.length;s+=1)if(n[s]===o){n.splice(s,1);break}return n}function l(e,t,n,o,s){for(var c,l=[],h=0;h<t&&(c=0==h?e:a.getNextValue(c));h++)if(0==s){if(!(o[c]>=s))return!1;l.push.apply(l,i(r(c,2,n)))}else{if(o[c]!=s)return!1;l.push.apply(l,i(r(c,2,n)))}return l}function h(e,t,n){var o,s=Object.keys(n);s=a.bubbleSort(s);for(var r=e,c=0;c<s.length;c++){var h=s[c];if((d=[]).push.apply(d,i(t)),o=l(h,r,d,u=dc.deepCopy(n),2))return t=d,n=u,o}for(c=0;c<s.length;c++){var d,u;h=s[c];if((d=[]).push.apply(d,i(t)),o=l(h,r,d,u=dc.deepCopy(n),0))return t=d,n=u,o}return!1}function d(e,t,n,o,c,l){if(1==e)return!1;var h=Object.keys(n);h=a.bubbleSort(h);for(var d=s(c,l),u=e-d+1,g=0;g<h.length;g+=1){var m=parseInt(h[g]);if(n[m]>=l&&!a.compareValue(m,1)&&a.compareValue(m,u)){var p=[];p.push.apply(p,i(r(m,l,t)));for(var f=!0,v=m,_=0;_<d-1;_+=1){var M=null;if(13!==v?(++v>13&&(v=1),M=2!=a.getCardValue(v)?r(v,l,t):null):M=r(v=1,l,t),!M){f=!1;break}p.push.apply(p,i(M))}if(f)return p}}return!1}function u(e){var t=a.getCardValue(78),n=a.getCardValue(79);return e[t]&&e[n]&&2==e[t]&&2==e[n]?[78,78,79,79]:null}function g(e,t){var n=Object.keys(t);n=a.bubbleSort(n);var i=!0,o=!1,s=void 0;try{for(var c,l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var h=c.value;if(4===t[h])return r(h,4,e)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var d=!0,u=!1,g=void 0;try{for(var m,p=n[Symbol.iterator]();!(d=(m=p.next()).done);d=!0){var f=m.value;if(t[f]>4)return r(f,t[f],e)}}catch(e){u=!0,g=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw g}}return null}var m={};function p(e){var t=[];return e.forEach(function(e){t.push(parseInt(e))}),t}m[a.PatternSin]=function(e){var t=e.big,n=e.handCards,i=e.handMap,o=Object.keys(i);o=a.bubbleSort(o);for(var s=0;s<o.length;s+=1){var c=parseInt(o[s]);if(1===i[c]&&a.compareValue(c,t))return r(c,1,n)}for(var l=0;l<o.length;l+=1){var h=parseInt(o[l]);if(2===i[h]&&a.compareValue(h,t))return r(h,1,n)}for(var d=0;d<o.length;d+=1){var u=parseInt(o[d]);if(3===i[u]&&a.compareValue(u,t))return r(u,1,n)}return null},m[a.PatternDou]=function(e){var t=e.big,n=e.handCards,i=e.handMap,o=Object.keys(i);o=a.bubbleSort(o);for(var s=0;s<o.length;s+=1){var c=parseInt(o[s]);if(2===i[c]&&a.compareValue(c,t))return r(c,2,n)}for(var l=0;l<o.length;l+=1){var h=parseInt(o[l]);if(3===i[h]&&a.compareValue(h,t))return r(h,2,n)}return null},m[a.PatternTri]=function(e){var t=e.big,n=e.handCards,i=e.handMap,o=Object.keys(i);o=a.bubbleSort(o);for(var s=0;s<o.length;s+=1){var c=parseInt(o[s]);if(a.compareValue(c,t)&&3===i[c])return r(c,3,n)}return null},m[a.PatternSinList]=function(e){var t=e.big,n=e.handCards,i=e.handMap;e.tableCards;return d(t,n,i,0,e.tableMap,1)},m[a.PatternDouList]=function(e){var t=e.big,n=e.handCards,i=e.handMap;e.tableCards;return d(t,n,i,0,e.tableMap,2)},m[a.PatternTriList]=function(e){var t=e.big,n=e.handCards,i=e.handMap;e.tableCards;return d(t,n,i,0,e.tableMap,3)},m[a.PatternTriList2]=function(e){var t=e.big,n=e.handCards,a=e.handMap,s=(e.tableCards,d(t,n,a,0,e.tableMap,3));if(!s)return!1;var r=parseInt(s.length/3),l=c(s,n),u=h(r,l,o(l));return!!u&&(s.push.apply(s,i(u)),s)},m[a.PatternBomb]=function(e){var t=e.big,n=e.length,i=e.handCards,o=e.handMap,s=Object.keys(o);s=a.bubbleSort(s);for(var c=void 0,l=0;l<s.length;l+=1){var h=parseInt(s[l]);if(a.compareValue(h,t)&&o[h]===n)return c=r(h,n,i)}for(var d=0;d<s.length;d+=1){var u=parseInt(s[d]);if(o[u]>n)return c=r(u,o[u],i)}return c||!1},t.exports.check=function(e,t,n){var i=o(e),s=o(t),r=a.getCardsType({arr:t,map:s});if(!r)return null;var c={handCards:e,tableCards:t,handMap:i,tableMap:s};if(c.big=r.big,c.pattern=r.pattern,c.length=t?t.length:0,c.pattern===a.PatternKingBomb)return null;if(c.pattern===a.PatternBomb){var l=m[a.PatternBomb](c);return l||u(i)}var h=m[c.pattern](c);return h||((h=g(e,i))||u(i))},t.exports.printfCardsType=function(e){var t=p(e.split(",")),n=o(t),i=a.getCardsType({arr:t,map:n});if(!i)return"\u9519\u8bef";var s="";switch(parseInt(i.pattern)){case a.PatternKingBomb:s+="\u5929\u738b\u70b8";break;case a.PatternBomb:s+="\u70b8\u5f39";break;case a.PatternSin:s+="\u5355\u724c";break;case a.PatternDou:s+="\u5bf9\u5b50";break;case a.PatternTri:s+="\u4e09\u5f20";break;case a.PatternSinList:s+="\u5355\u987a";break;case a.PatternDouList:s+="\u53cc\u987a";break;case a.PatternTriList:s+="\u4e09\u987a";break;case a.PatternTriList2:s+="\u98de\u673a\u5e26\u7fc5\u8180"}return s},cc._RF.pop()},{CardTypeCheck:"CardTypeCheck"}],DeciderTips_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"bd34aFFCo9CG7AbDGgfCDnf","DeciderTips_2MJ"),cc.Class({extends:cc.Component,properties:{tipsParent:cc.Node,actionTips:cc.Node},onLoad:function(){},setTipsAction:function(){this.actionTips.active=!0;var e=cc.sequence(cc.delayTime(1),cc.callFunc(function(){this.actionTips.active=!1},this,null));this.node.runAction(e)},setRaiseTips:function(e){this.tipsParent.active=e}}),cc._RF.pop()},{}],Desk_userInfo:[function(e,t,n){"use strict";cc._RF.push(t,"a7211IstgdG/b7QMVxfzH7T","Desk_userInfo"),cc.Class({extends:cc.Component,properties:{userInfo:cc.Node,nameNode:cc.Label,icon:cc.Node,readyNode:cc.Node,lblPocket:cc.Label,onlineNode:cc.Node,lblGems:cc.Label},onLoad:function(){},setPocket:function(e){this.lblPocket.string=e},setName:function(e){var t;e.length>5?t=e.substr(0,5)+"...":t=e;this.nameNode.string=t},setIcon:function(e,t,n){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t,n)},setIconTexture:function(e){this.icon.getComponent(cc.Sprite).spriteFrame=e},setReadyNodeShow:function(e){this.readyNode.active=e},setUserInfoShow:function(e){this.userInfo.active=e},setOnline:function(e){this.onlineNode.active=!e},setStateByNum:function(e,t){1==e?this.setReadyNodeShow(!1):2==e?this.setReadyNodeShow(!0):this.setReadyNodeShow(!1)},clearIcon:function(){this.icon.getComponent(cc.Sprite)},setGems:function(e){this.lblGems&&(this.lblGems.string=e)}}),cc._RF.pop()},{}],DirectionMgr_2Mj:[function(e,t,n){"use strict";cc._RF.push(t,"97799ohRYFEYZ5uxezUhoTT","DirectionMgr_2Mj"),cc.Class({extends:cc.Component,properties:{directpos:[cc.Node],bgNode:[cc.Node]},onLoad:function(){},init:function(){this.hideAllBg(),this.showDirect(!1)},initDirects:function(){for(var e=[0,1,2,3],t=(GameDataMgr.seats,0);t<this.directpos.length;t++)for(var n=this.directpos[t].getChildByName("localPos"),i=0;i<n.childrenCount;i++){var a=n.children[i];a.active=e[t]==i}},setDirectionByseatIndex:function(e){for(var t=this.directpos[e].getChildByName("localPos"),n=GameDataMgr.button,i=(e-GameDataMgr.getLocalSide(n)+4)%4,a=0;a<t.childrenCount;a++){var o=t.children[a];o.active=i==a}},intiDirection:function(){for(var e=0;e<this.directpos.length;e++)this.directpos[e].active=!0,this.setDirectionByseatIndex(e)},hideAllBg:function(){for(var e=this.bgNode,t=0;t<e.length;t++){e[t].active=!1}},showDirect:function(e){for(var t=0;t<this.directpos.length;t++)this.directpos[t].active=e},initButtonBgByseatIndex:function(e){for(var t=GameDataMgr.getLocalSide(e),n=this.bgNode,i=0;i<n.length;i++){var a=n[i];a.active=i==t}},update:function(e){}}),cc._RF.pop()},{}],DistancePage:[function(e,t,n){"use strict";cc._RF.push(t,"8d2a3V4JOxK9Z4p+Chi7Dqb","DistancePage"),cc.Class({extends:cc.Component,properties:{mj4Node:cc.Node,mj2Node:cc.Node,_playerNum:-1,seatsNode_mj2:[cc.Node],seatsNode_mj4:[cc.Node],distance_mj4:cc.Node,distance_mj2:cc.Node},start:function(){},openInterface:function(){this.node.active=!0;var e=GameDataMgr.conf.peoplemax;2==e?(this.mj4Node.active=!1,this.mj2Node.active=!0,this._playerNum=2):3==e?(this.mj4Node.active=!0,this.mj2Node.active=!1,this._playerNum=3):(this.mj4Node.active=!0,this.mj2Node.active=!1,this._playerNum=4),this.updateAllDistance()},setIcon:function(e,t,n){if(2==this._playerNum){var i=0==e?0:1;this.seatsNode_mj2[i].getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(t,n)}else{this.seatsNode_mj4[i].getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(t,n)}},setDistance:function(e,t,n){if(e>t){var i=t;t=e,e=i}if(2==this._playerNum){var a="lblDis"+e+"_"+(0==t?0:1),o=this.getDistanceDetail(n);(s=this.distance_mj2.getChildByName(a).getComponent(cc.Label)).string=o}else{a="lblDis"+e+"_"+t;var s=this.distance_mj4.getChildByName(a).getComponent(cc.Label);o=this.getDistanceDetail(n);s.string=o}},getDistance:function(e,t,n,i){return null==e||null==t||null==n||null==i?0:dc.utils.Distance(e,t,n,i)},getDistanceDetail:function(e){var t=parseInt(1e3*e);return t>=1e3?(t/1e3).toFixed(1)+"km":t+"m"},clearDistance:function(){for(var e=0;e<this.distance_mj4.children.length;e++){this.distance_mj4.children[e].getComponent(cc.Label).string=""}for(e=0;e<this.distance_mj2.children.length;e++){this.distance_mj2.children[e].getComponent(cc.Label).string=""}},closeAllSeats:function(){for(var e=0;e<this.seatsNode_mj4.length;e++){this.seatsNode_mj4[e].active=!1}for(e=0;e<this.seatsNode_mj2.length;e++){this.seatsNode_mj2[e].active=!1}},initSeatActive:function(){if(this.closeAllSeats(),2==this._playerNum)for(var e=0;e<GameDataMgr.seats.length;e++){var t=GameDataMgr.seats[e],n=GameDataMgr.getLocalIndex(e),i=!!t.userId;this.seatsNode_mj2[n].active=i}else for(e=0;e<GameDataMgr.seats.length;e++){t=GameDataMgr.seats[e],n=GameDataMgr.getLocalIndex(e),i=!!t.userId;this.seatsNode_mj4[n].active=i}},setSeatInfo:function(){if(2==this._playerNum)for(var e=0;e<GameDataMgr.seats.length;e++){var t=GameDataMgr.seats[e],n=GameDataMgr.getLocalIndex(e),i=!!t.userId,a=t.userId;if(i){var o=this.seatsNode_mj2[n].getChildByName("lblLocaltion").getComponent(cc.Label),s=this.seatsNode_mj2[n].getChildByName("lblIP").getComponent(cc.Label),r=(l=GameDataMgr.dicLocaltion[t.userId])?l.address:"";o.string=r,this.seatsNode_mj2[n].getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(t.headimg,a);var c=(h=t.ip.split(":"))[h.length-1];s.string=c}}else for(e=0;e<GameDataMgr.seats.length;e++){t=GameDataMgr.seats[e],n=GameDataMgr.getLocalIndex(e);if(i=!!t.userId){var l;o=this.seatsNode_mj4[n].getChildByName("lblLocaltion").getComponent(cc.Label),s=this.seatsNode_mj4[n].getChildByName("lblIP").getComponent(cc.Label),r=(l=GameDataMgr.dicLocaltion[t.userId])?l.address:"";o.string=r,s.string=t.ip,this.seatsNode_mj4[n].getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(t.headimg,t.userId);var h;c=(h=t.ip.split(":"))[h.length-1];s.string=c}}},clearSeatInfo:function(){if(2==this._playerNum)for(var e=0;e<this.seatsNode_mj2.length;e++){(t=this.seatsNode_mj2[e]).getChildByName("lblLocaltion").getComponent(cc.Label).string="",t.getChildByName("icon").spriteFrame=null}else for(e=0;e<this.seatsNode_mj4.length;e++){var t;(t=this.seatsNode_mj4[e]).getChildByName("lblLocaltion").getComponent(cc.Label).string="",t.getChildByName("icon").spriteFrame=null}},updateAllDistance:function(){this.clearDistance(),this.clearSeatInfo(),this.initSeatActive(),this.setSeatInfo();for(var e=GameDataMgr.seats,t=this._playerNum,n=0;n<t;n++)for(var i=e[n],a=n+1;a<t;a++){var o=0,s=GameDataMgr.getLocalIndex(n),r=GameDataMgr.getLocalIndex(a),c=e[a];if(i&&c)if(GameDataMgr.dicLocaltion[i.userId]&&GameDataMgr.dicLocaltion[c.userId]){var l=GameDataMgr.dicLocaltion[i.userId],h=GameDataMgr.dicLocaltion[c.userId];o=this.getDistance(l.Lat,l.Lng,h.Lat,h.Lng),this.setDistance(s,r,o)}}},OnClickClose:function(){this.node.active=!1}}),cc._RF.pop()},{}],DoubleBuckleLogic:[function(e,t,n){"use strict";cc._RF.push(t,"18be19pDo5Mb69pZ6Gn3GG0","DoubleBuckleLogic");var i=e("DBTips");e("CardTypeCheck");cc.Class({extends:cc.Component,properties:{outcard:cc.EditBox,handCard:cc.EditBox},start:function(){},OnClickTips:function(){var e=this.outcard.string,t=e.split(","),n=this.handCard.string.split(","),a=i.printfCardsType(e);console.log("\u724c\u578b:"+a);var o=i.check(n,t);console.log("\u63d0\u793a\u51fa\u724c:",o)}}),cc._RF.pop()},{CardTypeCheck:"CardTypeCheck",DBTips:"DBTips"}],DoubleBuckle_Controller:[function(e,t,n){"use strict";cc._RF.push(t,"b3d61VgFWZBeoG9MUf/yVcT","DoubleBuckle_Controller");var i=e("DBTips"),a=e("CardTypeCheck");cc.Class({extends:cc.Component,properties:{gameRoot:cc.Node,_cardMgr:null,_operLayer:null,_SelectSeatPage:null},start:function(){},onEnable:function(){this.initPrefab()},onDisable:function(){},initPrefab:function(){if(!this._SelectSeatPage){var e=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/SelectSeatPage",cc.Prefab);this._SelectSeatPage=cc.instantiate(e),this.gameRoot.addChild(this._SelectSeatPage)}if(!this._desktopLayer){var t=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/desktopLayer_DB",cc.Prefab);this._desktopLayer=cc.instantiate(t),this.gameRoot.addChild(this._desktopLayer)}if(!this._cardMgr){var n=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/cardsMgr_DB",cc.Prefab);this._cardMgr=cc.instantiate(n),this.gameRoot.addChild(this._cardMgr)}if(!this._operLayer){var i=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/operNode",cc.Prefab);this._operLayer=cc.instantiate(i),this.gameRoot.addChild(this._operLayer)}if(!this._countDown){var a=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/countDownNode_DB",cc.Prefab);this._countDown=cc.instantiate(a),this.gameRoot.addChild(this._countDown)}if(!this._seatsMgr){var o=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/seatsNode_DB",cc.Prefab);this._seatsMgr=cc.instantiate(o),this.gameRoot.addChild(this._seatsMgr)}if(!this._Prepare){var s=cc.loader.getRes("Catalogue/Prefab/HZMJGame/prepare_MJ2",cc.Prefab);this._Prepare=cc.instantiate(s),this.gameRoot.addChild(this._Prepare)}if(!this._menuNode){var r=cc.loader.getRes("Catalogue/Prefab/HZMJGame/MenuNode",cc.Prefab);this._menuNode=cc.instantiate(r),this.gameRoot.addChild(this._menuNode),this._menuNode.getComponent("MenuMgr_2MJ").setRuleNode()}if(!this._distanceNode){var c=cc.loader.getRes("Catalogue/Prefab/publicFrame/DistanceNode",cc.Prefab);this._distanceNode=cc.instantiate(c),this.gameRoot.addChild(this._distanceNode)}if(!this._chatNode){var l=cc.loader.getRes("Catalogue/Prefab/HZMJGame/chatNode_2MJ",cc.Prefab);this._chatNode=cc.instantiate(l),this.gameRoot.addChild(this._chatNode)}if(!this._aniLayer){var h=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/AniLayer_DB",cc.Prefab);this._aniLayer=cc.instantiate(h),this.gameRoot.addChild(this._aniLayer)}if(!this._voiceMgr){var d=cc.loader.getRes("Catalogue/Prefab/publicFrame/voiceMgr_public",cc.Prefab);this._voiceMgr=cc.instantiate(d),this.gameRoot.addChild(this._voiceMgr)}if(!this._effectNode){var u=cc.loader.getRes("Catalogue/Prefab/publicFrame/effectNode_common_G",cc.Prefab);this._effectNode=cc.instantiate(u),this.gameRoot.addChild(this._effectNode)}if(!this._emojiNode){var g=cc.loader.getRes("Catalogue/Prefab/publicFrame/emojiAniNode_public",cc.Prefab);this._emojiNode=cc.instantiate(g),this.gameRoot.addChild(this._emojiNode)}if(!this._gameSetUp){var m=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/setupNode_DB",cc.Prefab);this._gameSetUp=cc.instantiate(m),this.gameRoot.addChild(this._gameSetUp)}if(!this._gameOverNode){var p=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/GameOver_DB",cc.Prefab);this._gameOverNode=cc.instantiate(p),this.gameRoot.addChild(this._gameOverNode)}if(!this._gameEndNode){var f=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/gameEnd_DB",cc.Prefab);this._gameEndNode=cc.instantiate(f),this.gameRoot.addChild(this._gameEndNode)}if(!this._alert){var v=cc.loader.getRes("Catalogue/Prefab/publicFrame/alert",cc.Prefab);this._alert=cc.instantiate(v),this.node.addChild(this._alert)}publicWindow.alert=this._alert.getComponent("alert"),this.initView(),this.initMusic()},initView:function(){this.setCardLayerShow(!1),this.setOperLayerShow(!1),this.setCenterTipsShow(!1),this.seGameSetUpShow(!1),this.setGameOverShow(!1),this.setShowGameEnd(!1),this.setSelectSeatShow(!1),this._cardMgr.getComponent("cardsMgr_DB").setHoldsNodeType(1),this._operLayer.getComponent("operLayer_DB").setCardsMgr(this._cardMgr);var e=this._menuNode.getComponent("MenuMgr_2MJ");e.setGameSetUp(this._gameSetUp),this.getSeatsMgrSp().getComponent("seatsMgr_DB").setControlSp(this.getControlSp()),this.getChatSp().setControlSp(this.getControlSp()),this._emojiNode.getComponent("ChatAniSelect_public").setControlSp(this.getControlSp()),this._gameOverNode.getComponent("GameOver_DB").setControlSp(this.getControlSp());var t=this._voiceMgr.getComponent("Voice_public");t.initVoiceEvent(),t.setControlSp(this.getControlSp()),this.hideTurnEffect(),GameDataMgr.isReplay?(e.setBtnSetupShow(!1),t.setBtnVoice(!1)):(e.setBtnSetupShow(!0),t.setBtnVoice(!0)),this.setcardNumsShow(!1),this.initNumber()},initMusic:function(){var e=Math.floor(1*Math.random());console.log("\u968f\u673a\u6570\uff1a"+e);var t="DB_Game/DB_Game_"+e+".mp3";audioMgr.playBGM(t)},getControlSp:function(){return this.node.getComponent("DoubleBuckle_Controller")},getGameSetupSp:function(){return this._gameSetUp.getComponent("Gamesetup_DB")},getSeatsMgrSp:function(){return this._seatsMgr.getComponent("seatsMgr_DB")},getMenuNodeSp:function(){this.getControlSp();return this._menuNode.getComponent("MenuMgr_2MJ")},getChatSp:function(){this.getControlSp();return this._chatNode.getComponent("Chat_2MJ")},getEffectPubSp:function(){this.getControlSp();return this._effectNode.getComponent("EffectMgrView_common_Gold")},getEmojiSp:function(){return this._emojiNode.getComponent("ChatAniSelect_public")},doBtnOutcardEnbale:function(){if(GameDataMgr.turn==GameDataMgr.seatIndex){var e,t=GameDataMgr.DBDataMgr.outCardData,n=this._cardMgr.getComponent("cardsMgr_DB").getOutcardData(),i=GameDataMgr.DBDataMgr.getPKType(n);e=t?t&&t.userId==UserMgr.userId?!!i:GameDataMgr.lcSeatIndex==GameDataMgr.turn?!!i:this.getSelectCardsEnable(n,t.pai):!!i,this.setBtnOutcardEnable(e)}},getSelectCardsEnable:function(e,t){var n=e;return a.compareCards(n,t)},setBtnOutcardEnable:function(e){this._operLayer.getComponent("operLayer_DB").setBtnOutcardEnable(e)},initSeats:function(e){console.log("HZGame initseats"),this._seatsMgr.getComponent("seatsMgr_DB").initSeats(e)},initNumber:function(){this.getSeatsMgrSp().initNumber()},jurgeLayerHide:function(){if(GameDataMgr.isReplay||0!=GameDataMgr.gameIndex)this.setPrepareShow(!1);else{var e=GameDataMgr.seats,t=0;for(var n in e){var i=e[n];i.userId&&i.online&&i.ready&&t++}if(t==GameDataMgr.gamePlayerNum)this.setPrepareShow(!1);else this.setPrepareShow(!0),this._Prepare.getComponent("Prepare_2MJ").initDissolveBtn()}},enableViews:function(){var e=this.getMenuNodeSp();dc.Iphone_Check_flag?e.setDistanceShow(!1):GameDataMgr.isReplay?e.setDistanceShow(!1):2==GameDataMgr.conf.peoplemax?e.setDistanceShow(!1):e.setDistanceShow(!0)},setCenterTipsShow:function(e){this._desktopLayer.getComponent("desktopLG_DB").setCenterTipsShow(e)},initLable:function(){var e=this._desktopLayer.getComponent("desktopLG_DB");e.updateRoomID(GameDataMgr.roomID),e.updateGameNum(GameDataMgr.gameIndex)},showAndCountTime:function(){this._countDown.getComponent("CountDown_2MJ").startAction()},updateGameNum:function(){this._desktopLayer.getComponent("desktopLG_DB").updateGameNum(GameDataMgr.gameIndex)},hideSeatsReady:function(){this._seatsMgr.getComponent("seatsMgr_DB").hideReady()},initReady:function(e){if(0==GameDataMgr.GameState){var t=GameDataMgr.seats[e],n=t.online&&t.ready,i=this._seatsMgr.getComponent("seatsMgr_DB"),a=GameDataMgr.getLocalSide(e);i.initReady(a,n)}else 1==GameDataMgr.GameState&&this.hideSeatsReady()},readyHandle:function(e){this.initSeats();var t=GameDataMgr.getSeatIndexByID(e.userId);this.initReady(t),this.initSelectSeats(e)},initSelectPageReadyBtn:function(){if(this._SelectSeatPage.active){var e=GameDataMgr.seats[GameDataMgr.seatIndex],t=this._SelectSeatPage.getComponent("SelectSeatsPage_DB"),n=e.ready;t.setReadyBtn(n)}},clearAllCards:function(){this._cardMgr.getComponent("cardsMgr_DB").clearAllCards()},moveSeatsPos:function(e){this._seatsMgr.getComponent("seatsMgr_DB").moveSeatsPos(e)},changeSeatHandle:function(e){this._SelectSeatPage.getComponent("SelectSeatsPage_DB").intSeats(e),this.initSeats(!0)},initSelectSeats:function(e){this._SelectSeatPage.active&&this._SelectSeatPage.getComponent("SelectSeatsPage_DB").intSeats(e);this.initSelectPageReadyBtn()},onGameBegin:function(e){GameDataMgr.GameState=1,this.hideSeatsReady(),this.setGameOverShow(!1),this.setShowGameEnd(!1),this.initSeats(),this.setCenterTipsShow(!0),this.setCardLayerShow(!0),this.setPrepareShow(!1),this.setGameOverShow(!1),this.setShowGameEnd(!1),this.setSelectSeatShow(!1),this.updateGameNum(),this.setcardNumsShow(!0);var t=this._cardMgr.getComponent("cardsMgr_DB");t.setHoldsNodeType(1),this.sendCards(e,function(){this.moveSeatsPos(1);var n=cc.callFunc(function(){GameDataMgr.DBDataMgr.initCardsData(e);for(var n=0;n<GameDataMgr.gamePlayerNum;n++){var i=GameDataMgr.DBDataMgr.cardsData[n].holds,a=GameDataMgr.getLocalSide(n);if(2==a){var o=[];if(GameDataMgr.DBDataMgr.cardsData[n].isMingpai)o=i;else for(var s=0;s<i.length;s++)o.push(0);t.initHoldsByLocal(a,o,n)}else t.initHoldsByLocal(a,i,n)}GameDataMgr.turn==GameDataMgr.seatIndex?(this.setOperLayerShow(!0),this.setOperLayerType(0),this.setOutcardType(1)):this.setOperLayerShow(!1),this.initSeats(),this.showAndCountTime(),this.doBtnOutcardEnbale();var r=GameDataMgr.getLocalSide(GameDataMgr.turn);this.playTurnEffect(r)},this,null),i=cc.sequence(cc.delayTime(1),n);this.node.runAction(i);audioMgr.playSFX("DoubleBuckle/Game/start.mp3")}.bind(this))},clearScene:function(){this.stopAllAnis(),this._voiceMgr.getComponent("Voice_public").cancelClick(),this.getSeatsMgrSp().init(),this.endClear()},stopAllAnis:function(){this.node.stopAllActions()},sendCards:function(e,t){this._cardMgr.getComponent("cardsMgr_DB").sendCards(e,this.node,t)},onGameSync:function(e){this.stopAllAnis(),this.setSelectSeatShow(!1),this.hideSeatsReady(),this.initSeats(),this.setCardLayerShow(!0),this.setPrepareShow(!1),this.setCenterTipsShow(!0),this.updateGameNum(),this.setcardNumsShow(!0);for(var t=this._cardMgr.getComponent("cardsMgr_DB"),n=0;n<GameDataMgr.gamePlayerNum;n++){var a=GameDataMgr.DBDataMgr.cardsData[n].holds||[],o=GameDataMgr.getLocalSide(n);if(2==o){var s=[];if(GameDataMgr.DBDataMgr.cardsData[n].isMingpai)s=a;else for(var r=0;r<a.length;r++)s.push(0);t.initHoldsByLocal(o,s,n)}else t.initHoldsByLocal(o,a,n)}if(GameDataMgr.DBDataMgr.outCardData&&-1!=GameDataMgr.DBDataMgr.outCardData.seatIndex){var c=GameDataMgr.DBDataMgr.outCardData.seatIndex,l=GameDataMgr.getLocalSide(c),h=GameDataMgr.DBDataMgr.outCardData.pai||[];c==GameDataMgr.turn?t.removePoolsByLocal(l,h):t.setCardPoolCards(c,h)}var d=GameDataMgr.getLocalSide(GameDataMgr.turn);if(this.playTurnEffect(d),GameDataMgr.turn==GameDataMgr.seatIndex){this.setOperLayerShow(!0),(t=this._cardMgr.getComponent("cardsMgr_DB")).removePoolsByLocal(0);var u=GameDataMgr.DBDataMgr.outCardData;if(null==u)this.setOutcardType(1);else{var g=GameDataMgr.DBDataMgr.cardsData[GameDataMgr.seatIndex].holds;if(GameDataMgr.getSeatIndexByID(u.userId)!=GameDataMgr.seatIndex)if(GameDataMgr.lcSeatIndex!=GameDataMgr.turn){this.setOutcardType(0);var m=GameDataMgr.DBDataMgr.sortDB(g,!0);i.check(m,u.pai)?this.setOperLayerType(0):this.setOperLayerType(1)}else this.setOutcardType(1);else this.setOutcardType(1)}}else this.setOperLayerShow(!1);this.initNumber(),this.showAndCountTime(),this.doBtnOutcardEnbale()},setTipsCards:function(e){this._cardMgr.getComponent("cardsMgr_DB").setTipsCards(e)},outCardHandle:function(e){var t=this._cardMgr.getComponent("cardsMgr_DB");t.clearAllPools(),t.outCardHandle(e),this.playCardEffect(e.pai);var n=GameDataMgr.seats[GameDataMgr.seatIndex];GameDataMgr.DBDataMgr.playCardSound(e.pai,n.sex,GameDataMgr.isPutonghua);GameDataMgr.lastChuPaiSeat;var i=GameDataMgr.getSeatIndexByID(e.userId),a=GameDataMgr.DBDataMgr.cardsData[i].holds;if(0==a.length&&(GameDataMgr.DBDataMgr.endusers||(GameDataMgr.DBDataMgr.endusers=[]),GameDataMgr.DBDataMgr.endusers.push(e.userId)),this.initNumber(),this.hideAllPass(),i==GameDataMgr.seatIndex&&0==a.length){var o=(GameDataMgr.seatIndex+2)%GameDataMgr.gamePlayerNum,s=GameDataMgr.DBDataMgr.cardsData[o].holds,r=GameDataMgr.getLocalSide(o),c=[];if(GameDataMgr.DBDataMgr.cardsData[o].isMingpai)c=s;else for(var l=0;l<s.length;l++)c.push(0);t.initHoldsByLocal(r,c,l)}GameDataMgr.DBDataMgr.clearPass(),this.hideAllPass()},playCardEffect:function(e){var t=GameDataMgr.DBDataMgr.getPKType(e),n=this._aniLayer.getComponent("AniLayer_DB"),i=0;if(t.pattern==a.PatternKingBomb);else if(t.pattern==a.PatternBomb){i=n.playBombEffect();audioMgr.playSFX("DoubleBuckle/Game/bomb_eff.mp3")}else t.pattern,a.PatternTriList2;return i},actionHandle:function(e){var t=GameDataMgr.turn,n=GameDataMgr.DBDataMgr.outCardData;if(-1!=e.lcSeatIndex){var a=GameDataMgr.getLocalSide(t);this.playTurnEffect(a)}var o=this._cardMgr.getComponent("cardsMgr_DB");if(t==GameDataMgr.seatIndex)if(this.setOperLayerShow(!0),o.removePoolsByLocal(0),n)if(GameDataMgr.getSeatIndexByID(n.userId)!=GameDataMgr.seatIndex){var s=GameDataMgr.DBDataMgr.cardsData[GameDataMgr.seatIndex].holds;if(GameDataMgr.lcSeatIndex!=GameDataMgr.turn){this.setOutcardType(0);var r=GameDataMgr.DBDataMgr.sortDB(s,!0);i.check(r,n.pai)?this.setOperLayerType(0):this.setOperLayerType(1)}else this.setOutcardType(1)}else this.setOutcardType(1);else this.setOutcardType(1);else this.setOperLayerShow(!1);if(this.doBtnOutcardEnbale(),0==e.lcOpt){var c=e.lcSeatIndex,l=GameDataMgr.seats[c],h="DoubleBuckle/",d=GameDataMgr.getSoundEffectBySex(l.sex);h=h+GameDataMgr.getSoundEffectByLanguage(GameDataMgr.isPutonghua)+d,h+="oper/buyao.mp3",audioMgr.playSFX(h),this.setSeatPass(c,!0)}(GameDataMgr.DBDataMgr.addPassNum(),4==GameDataMgr.DBDataMgr._passNum&&(GameDataMgr.DBDataMgr.clearPass(),this.hideAllPass()),n)&&(GameDataMgr.getSeatIndexByID(n.userId)==GameDataMgr.turn&&o.clearAllPools());this.showAndCountTime()},setSeatPass:function(e,t){var n=this.getSeatsMgrSp(),i=GameDataMgr.getLocalSide(e);n.setSeatPass(i,t)},hideAllPass:function(){this.getSeatsMgrSp().hideAllPass()},hideTurnEffect:function(){this.getSeatsMgrSp().hideTurnEffect()},playTurnEffect:function(e){this.getSeatsMgrSp().playTurnEffect(e)},gameOverHandle:function(e){e.results;if(e.results)for(var t=GameDataMgr.seats,n=0;n<t.length;n++){t[n].score=e.results[n].totalscore}e.isEnd&&(console.log("game_end"),GameDataMgr.isOver=!0,this.gameEndHandle(e)),this.gameOverResult(e)},gameOverResult:function(e){this.setcardNumsShow(!1),this.setOperLayerShow(!1),this.seGameSetUpShow(!1),this.setCountDownShow(!1),this.setOverHolds(e),GameDataMgr.DBDataMgr.clearPass(),this.hideAllPass(),this.hideTurnEffect()},setOverHolds:function(e){var t=this._cardMgr.getComponent("cardsMgr_DB");t.setHoldsNodeType(2);var n=e.results;if(n)for(var i=0;i<n.length;i++){var a=n[i].holds||[],o=GameDataMgr.getLocalSide(i);t.initHoldsByLocal2(o,a)}var s,r=cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.clearOutcardPools(),this.gameOverStart(e)},this,e));this.node.runAction(r);var c=e.results;for(i=0;i<c.length;i++){var l=n[i];l.userId==UserMgr.userId&&(s=l.win)}if(s){var h="DoubleBuckle/Game/win.mp3";audioMgr.playSFX(h)}else{h="DoubleBuckle/Game/fail.mp3";audioMgr.playSFX(h)}},gameOverStart:function(e){this.setGameOverShow(!0),this._seatsMgr.getComponent("seatsMgr_DB").initSingleOnline(!0),this._gameOverNode.getComponent("GameOver_DB").onGameOver(e),this.seGameSetUpShow(!1),this.clearReady()},clearReady:function(){for(var e=GameDataMgr.seats,t=0;t<e.length;t++){e[t].ready=!1}},clearOutcardPools:function(){this._cardMgr.getComponent("cardsMgr_DB").clearAllPools()},gameEndHandle:function(e){if(e.results){console.log("have gameEnd Result");var t=this._gameEndNode.getComponent("GameEnd_DB");t.onGameEnd(e),t.showTime()}},endClear:function(){this.clearAllCards(),this.getChatSp().clearRecordItems(),this.hideTurnEffect()},Dissolvenotice:function(e){this._gameSetUp.getComponent("Gamesetup_DB").updateDissolvenotice(e)},sendContentHandle:function(e){var t=e.type;0==t?this.sendExpressionHandle(e):1==t?this.sendQuickchatHandle(e):2==t?this.sendChatHandle(e):3==t?this.sendEmojAHandle(e):4==t&&this.VoiceSend(e)},sendEmojAHandle:function(e){this.getEffectPubSp().sendEmojA(e)},sendExpressionHandle:function(e){this.getEffectPubSp().sendExpression(e)},sendQuickchatHandle:function(e){this.getSeatsMgrSp().sendQuickchatHandle(e)},sendChatHandle:function(e){this._chatNode;var t=this.getChatSp();(t.recardItem(e,0),e.type=0,GameDataMgr.chatInfoList.push(e),GameDataMgr.chatInfoList.length>50&&GameDataMgr.chatInfoList.shift(),t.sendChatBack(e),GameDataMgr.getIsObserver())?this.getMenuNodeSp().updateTipsPoint(e):this.getSeatsMgrSp().updateTipsPoint(e);-1!=GameDataMgr.getSeatIndexByID(e.sender)?this.getSeatsMgrSp().sendChat(e):console.log("observer say")},VoiceSend:function(e){var t=this.getSeatsMgrSp();t.addVoiceData(e),t.playVoice(e),this.getChatSp().recardItem(e,1),e.type=1,GameDataMgr.chatInfoList.push(e),GameDataMgr.chatInfoList.length>50&&GameDataMgr.chatInfoList.shift()},setOperLayerShow:function(e){this._operLayer.active=e},setOperLayerType:function(e){this._operLayer.getComponent("operLayer_DB").setOperType(e)},setOutcardType:function(e){this._operLayer.getComponent("operLayer_DB").setOutcardType(e)},setSelectNodeShow:function(e){this._operLayer.getComponent("operLayer_DB").setSelectNodeShow(e)},setcardNumsShow:function(e){this._cardMgr.getComponent("cardsMgr_DB").setcardNumsShow(e)},setChatShow:function(e){this._chatNode.active=e},setCardLayerShow:function(e){this._cardMgr.active=e},setEmojiNodeShow:function(e){this._emojiNode.active=e},setPrepareShow:function(e){this._Prepare.active=e},seGameSetUpShow:function(e){this._gameSetUp.active=e},setGameOverShow:function(e){this._gameOverNode.active=e},setShowGameEnd:function(e){this._gameEndNode.active=e},setSelectSeatShow:function(e){this._SelectSeatPage.active=e},setCountDownShow:function(e){this._countDown.active=e}}),cc._RF.pop()},{CardTypeCheck:"CardTypeCheck",DBTips:"DBTips"}],DoubleBuckle_Res:[function(e,t,n){"use strict";cc._RF.push(t,"5cd9buSaglJN7H5Fe+4npsL","DoubleBuckle_Res"),cc.Class({extends:cc.Component,properties:{pokerAtlas:cc.SpriteAtlas,pokerPre:[cc.Prefab],Emoji_BigAtlas:cc.SpriteAtlas,attackAniAtlas:cc.SpriteAtlas},start:function(){},onEnable:function(){dc.ResourceMgr=this},getEmojiBigAtlasBydex:function(e){var t="express_big_"+e;return this.Emoji_BigAtlas.getSpriteFrame(t)},getPokerSFrameByName:function(e){return this.pokerAtlas.getSpriteFrame(e)},getFaceAByIndex:function(e){var t=GameDataMgr.attackConf[e];return this.attackAniAtlas.getSpriteFrame(t.oriName)}}),cc._RF.pop()},{}],1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i},n.toByteArray=function(e){var t,n,i=l(e),s=i[0],r=i[1],c=new o(h(e,s,r)),d=0,u=r>0?s-4:s;for(n=0;n<u;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===r&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,c[d++]=255&t);1===r&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},n.fromByteArray=function(e){for(var t,n=e.length,a=n%3,o=[],s=0,r=n-a;s<r;s+=16383)o.push(u(e,s,s+16383>r?r:s+16383));1===a?(t=e[n-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return o.join("")};for(var i=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,c=s.length;r<c;++r)i[r]=s[r],a[s.charCodeAt(r)]=r;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function h(e,t,n){return 3*(t+n)/4-n}function d(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function u(e,t,n){for(var i,a=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(d(i));return a.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){(function(t){"use strict";var i=e("base64-js"),a=e("ieee754"),o=e("isarray");function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return l(this,e,t,n)}function l(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,i):"string"==typeof t?g(e,t,n):f(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t,n,i){return h(t),t<=0?r(e,t):void 0!==n?"string"==typeof i?r(e,t).fill(n,i):r(e,t).fill(n):r(e,t)}function u(e,t){if(h(t),e=r(e,t<0?0:0|v(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function g(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|_(t,n),a=(e=r(e,i)).write(t,n);return a!==i&&(e=e.slice(0,a)),e}function m(e,t){var n=t.length<0?0:0|v(t.length);e=r(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function p(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=m(e,t),e}function f(e,t){if(c.isBuffer(t)){var n=0|v(t.length);return 0===(e=r(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?r(e,0):m(e,t);if("Buffer"===t.type&&o(t.data))return m(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function _(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(i)return K(e).length;t=(""+t).toLowerCase(),i=!0}}function M(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function C(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,a){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:N(e,t,n,i,a);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):N(e,[t],n,i,a);throw new TypeError("val must be string, number or Buffer")}function N(e,t,n,i,a){var o,s=1,r=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,r/=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(a){var h=-1;for(o=n;o<r;o++)if(l(e,o)===l(t,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===c)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+c>r&&(n=r-c),o=n;o>=0;o--){for(var d=!0,u=0;u<c;u++)if(l(e,o+u)!==l(t,u)){d=!1;break}if(d)return o}return-1}function I(e,t,n,i){n=Number(n)||0;var a=e.length-n;i?(i=Number(i))>a&&(i=a):i=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var r=parseInt(t.substr(2*s,2),16);if(isNaN(r))return s;e[n+s]=r}return s}function b(e,t,n,i){return Y(K(t,e.length-n),e,n,i)}function S(e,t,n,i){return Y(Z(t),e,n,i)}function D(e,t,n,i){return S(e,t,n,i)}function G(e,t,n,i){return Y(z(t),e,n,i)}function R(e,t,n,i){return Y(X(t,e.length-n),e,n,i)}function w(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var i=[],a=t;a<n;){var o,s,r,c,l=e[a],h=null,d=l>239?4:l>223?3:l>191?2:1;if(a+d<=n)switch(d){case 1:l<128&&(h=l);break;case 2:128==(192&(o=e[a+1]))&&(c=(31&l)<<6|63&o)>127&&(h=c);break;case 3:o=e[a+1],s=e[a+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:o=e[a+1],s=e[a+2],r=e[a+3],128==(192&o)&&128==(192&s)&&128==(192&r)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&r)>65535&&c<1114112&&(h=c)}null===h?(h=65533,d=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),a+=d}return B(i)}n.Buffer=c,n.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},n.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return d(null,e,t,n)},c.allocUnsafe=function(e){return u(null,e)},c.allocUnsafeSlow=function(e){return u(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,a=0,o=Math.min(n,i);a<o;++a)if(e[a]!==t[a]){n=e[a],i=t[a];break}return n<i?-1:i<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,a),a+=s.length}return i},c.byteLength=_,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):M.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,i,a){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),t<0||n>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&t>=n)return 0;if(i>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,a>>>=0,this===e)return 0;for(var o=a-i,s=n-t,r=Math.min(o,s),l=this.slice(i,a),h=e.slice(t,n),d=0;d<r;++d)if(l[d]!==h[d]){o=l[d],s=h[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return I(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return D(this,e,t,n);case"base64":return G(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function B(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=L));return n}function x(e,t,n){var i="";n=Math.min(e.length,n);for(var a=t;a<n;++a)i+=String.fromCharCode(127&e[a]);return i}function P(e,t,n){var i="";n=Math.min(e.length,n);for(var a=t;a<n;++a)i+=String.fromCharCode(e[a]);return i}function A(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var a="",o=t;o<n;++o)a+=Q(e[o]);return a}function H(e,t,n){for(var i=e.slice(t,n),a="",o=0;o<i.length;o+=2)a+=String.fromCharCode(i[o]+256*i[o+1]);return a}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,i,a,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function E(e,t,n,i){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-n,2);a<o;++a)e[n+a]=(t&255<<8*(i?a:1-a))>>>8*(i?a:1-a)}function F(e,t,n,i){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-n,4);a<o;++a)e[n+a]=t>>>8*(i?a:3-a)&255}function U(e,t,n,i,a,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function J(e,t,n,i,o){return o||U(e,0,n,4),a.write(e,t,n,i,23,4),n+4}function j(e,t,n,i,o){return o||U(e,0,n,8),a.write(e,t,n,i,52,8),n+8}c.prototype.slice=function(e,t){var n,i=this.length;if(e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var a=t-e;n=new c(a,void 0);for(var o=0;o<a;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var i=this[e],a=1,o=0;++o<t&&(a*=256);)i+=this[e+o]*a;return i},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var i=this[e+--t],a=1;t>0&&(a*=256);)i+=this[e+--t]*a;return i},c.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var i=this[e],a=1,o=0;++o<t&&(a*=256);)i+=this[e+o]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var i=t,a=1,o=this[e+--i];i>0&&(a*=256);)o+=this[e+--i]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),a.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var a=Math.pow(2,8*n-1);O(this,e,t,n,a-1,-a)}var o=0,s=1,r=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===r&&0!==this[t+o-1]&&(r=1),this[t+o]=(e/s>>0)-r&255;return t+n},c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var a=Math.pow(2,8*n-1);O(this,e,t,n,a-1,-a)}var o=n-1,s=1,r=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===r&&0!==this[t+o+1]&&(r=1),this[t+o]=(e/s>>0)-r&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return J(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return J(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var a,o=i-n;if(this===e&&n<t&&t<i)for(a=o-1;a>=0;--a)e[a+t]=this[a+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:K(new c(e,i).toString()),r=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%r]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function q(e){if((e=W(e).replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Q(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){var n;t=t||1/0;for(var i=e.length,a=null,o=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Z(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function X(e,t){for(var n,i,a,o=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(n=e.charCodeAt(s))>>8,a=n%256,o.push(a),o.push(i);return o}function z(e){return i.toByteArray(q(e))}function Y(e,t,n,i){for(var a=0;a<i&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function $(e){return e!=e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:5,isarray:3}],3:[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],4:[function(e,t,n){t.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},{}],5:[function(e,t,n){n.read=function(e,t,n,i,a){var o,s,r=8*a-i-1,c=(1<<r)-1,l=c>>1,h=-7,d=n?a-1:0,u=n?-1:1,g=e[t+d];for(d+=u,o=g&(1<<-h)-1,g>>=-h,h+=r;h>0;o=256*o+e[t+d],d+=u,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=i;h>0;s=256*s+e[t+d],d+=u,h-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,i),o-=l}return(g?-1:1)*s*Math.pow(2,o-i)},n.write=function(e,t,n,i,a,o){var s,r,c,l=8*o-a-1,h=(1<<l)-1,d=h>>1,u=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,g=i?0:o-1,m=i?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?u/c:u*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=h?(r=0,s=h):s+d>=1?(r=(t*c-1)*Math.pow(2,a),s+=d):(r=t*Math.pow(2,d-1)*Math.pow(2,a),s=0));a>=8;e[n+g]=255&r,g+=m,r/=256,a-=8);for(s=s<<a|r,l+=a;l>0;e[n+g]=255&s,g+=m,s/=256,l-=8);e[n+g-m]|=128*p}},{}],6:[function(e,t,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n"},{}],7:[function(e,t,n){(function(e){function t(e,t){for(var n=0,i=e.length-1;i>=0;i--){var a=e[i];"."===a?e.splice(i,1):".."===a?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e){"string"!=typeof e&&(e+="");var t,n=0,i=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){n=t+1;break}}else-1===i&&(a=!1,i=t+1);return-1===i?"":e.slice(n,i)}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,i="/"===s.charAt(0))}return n=t(a(n.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),s="/"===o(e,-1);return(e=t(a(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(a(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var a=i(e.split("/")),o=i(t.split("/")),s=Math.min(a.length,o.length),r=s,c=0;c<s;c++)if(a[c]!==o[c]){r=c;break}var l=[];for(c=r;c<a.length;c++)l.push("..");return(l=l.concat(o.slice(r))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,i=-1,a=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!a){i=o;break}}else a=!1;return-1===i?n?"/":".":n&&1===i?"/":e.slice(0,i)},n.basename=function(e,t){var n=i(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,i=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var r=e.charCodeAt(s);if(47!==r)-1===i&&(a=!1,i=s+1),46===r?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!a){n=s+1;break}}return-1===t||-1===i||0===o||1===o&&t===i-1&&t===n+1?"":e.slice(t,i)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:8}],8:[function(e,t,n){var i,a,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function c(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function l(e){if(a===clearTimeout)return clearTimeout(e);if((a===r||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(e){i=s}try{a="function"==typeof clearTimeout?clearTimeout:r}catch(e){a=r}})();var h,d=[],u=!1,g=-1;function m(){u&&h&&(u=!1,h.length?d=h.concat(d):g=-1,d.length&&p())}function p(){if(!u){var e=c(m);u=!0;for(var t=d.length;t;){for(h=d,d=[];++g<t;)h&&h[g].run();g=-1,t=d.length}h=null,u=!1,l(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new f(e,t)),1!==d.length||u||c(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],EffectMgrView_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"e1f16DE3ZhMY4l8Rn+ljjdu","EffectMgrView_2MJ"),cc.Class({extends:cc.Component,properties:{playEfxs:[cc.Animation],ExpressNode:[cc.Node],diceMgr:cc.Node,aniHandThrowNode:cc.Node,handArrNode:[cc.Node],pointArrNode:[cc.Node],aniFlyNode:cc.Node,aniOrginNode:[cc.Node],aniDestinationNode:[cc.Node],DrawNode:cc.Node,HuNode:cc.Node,_lastChatTime:-1,emotionPosNode:cc.Node},onLoad:function(){this.hideDice(),this.DrawNode.active=!1,this.HuNode.active=!1},start:function(){},playHandThrow:function(e){var t=this.handArrNode[e].getComponent(cc.Animation);t.node.active=!0;var n=t.getClips()[0].name;t.play(n),t.once("finished",function(){console.log("playHandThrow finish"),t.node.active=!1},this)},playFallPoint:function(e){var t=this.pointArrNode[e].getComponent(cc.Animation);t.node.active=!0;var n=t.getClips()[0].name;t.play(n),t.once("finished",function(){console.log("playHandThrow finish"),t.node.active=!1},this)},playHu:function(e){this.HuNode.active=!0;var t=this.playShanDianAni();this.playPaiAni(e,t);var n=cc.sequence(cc.delayTime(t.totalTime),cc.callFunc(function(){this.playHuAni()},this,null));this.node.runAction(n)},playHuAni:function(){var e=this.HuNode,t=e.getChildByName("hu").getComponent(cc.Animation);t.node.active=!0;var n=t.getClips()[0].name,i=t.play(n);i.repeatCount=1;var a=i.duration*i.repeatCount;i.frameRate;return t.once("finished",function(){console.log("playHuAni finish"),t.node.active=!1,e.active=!1},this),a},playShanDianAni:function(){var e=this.HuNode.getChildByName("shandian").getComponent(cc.Animation);e.node.active=!0;var t=e.getClips()[0].name,n=e.play(t);n.repeatCount=1;var i={totalTime:n.duration*n.repeatCount,frame:n.frameRate};return e.once("finished",function(){console.log("playHuAni finish"),e.node.active=!1},this),i},playPaiAni:function(e,t){var n=this.HuNode.getChildByName("pai");n.removeAllChildren();var i=cc.instantiate(dc.ResourceMgr.MJPrefabArr[0]),a=i.getComponent(dc.ResourceMgr.geScriptLabel(0));a.setMJID(e),a.initMJ(),n.addChild(i);var o=1*t.totalTime,s=cc.sequence(cc.delayTime(o),cc.callFunc(function(){n.removeAllChildren()},this,null));return n.runAction(s),0},playDraw:function(e){var t=2;t=null==e?2:e,this.DrawNode.active=!0;var n=cc.sequence(cc.delayTime(0),cc.scaleTo(e/2,1.2),cc.scaleTo(e/2,1),cc.callFunc(function(){this.DrawNode.active=!1},this,null));return this.DrawNode.runAction(n),t},playEffect:function(e,t,n,i){var a=this.playEfxs[e];a.node.active=!0;var o=a.play(t);o.wrapMode;o.repeatCount=1,a.once("finished",function(){a.node.active=!1},this)},sendExpression:function(e){console.log("Effect emoji");var t=dc.GameDataMgr.getSeatIndexByID(e.sender),n=dc.GameDataMgr.getLocalIndex(t),i=dc.GameDataMgr.MJDataMgr.getLocalSide(n),a=this.ExpressNode[i];a.active=!0,a.isEmoji=!0,a.getComponent(cc.Sprite).spriteFrame=dc.ResourceMgr.getEmojiBigAtlasBydex(e.content),this._lastChatTime=2,a.setScale(.1,.1);var o=cc.scaleTo(.1,1,1);a.runAction(o)},getAniType:function(e){var t=-1;return t=5==e||9==e?1:2,console.log("aniType"+t),t},sendEmojA:function(e){var t=this.getAniType(e.index),n=1;4==e.index&&(n=2);var i=1;1==e.index&&(i=2),1==t?this.playAni1(e):2==t&&this.playAni2(e,n,i)},fitAniAngle:function(e,t){var n=[],i={anlgles:[]};(s=[]).push(0),s.push(0),s.push(-15),s.push(-60),n.push(i);var a={anlgles:[]};(s=[]).push(-50),s.push(0),s.push(0),s.push(-20),n.push(a);var o={anlgles:[]};(s=[]).push(-50),s.push(0),s.push(-15),s.push(-60),n.push(o);var s,r={anlgles:[]};(s=[]).push(0),s.push(0),s.push(-15),s.push(-60),n.push(r)},playAni1:function(e){var t=dc.GameDataMgr.getSeatIndexByID(e.sender),n=dc.GameDataMgr.getLocalIndex(t),i=dc.GameDataMgr.MJDataMgr.getLocalSide(n),a=this.aniOrginNode[i].getComponent(cc.Animation);a.node.active=!0;var o=a.getClips()[e.index].name;a.repeatCount=1,a.wrapMode="Default",a.play(o);var s="HZMusic/soundEffect/aniEffect/aniFlyFrom/aniFrom_index_"+e.index+".mp3";console.log("palyAni1"),console.log(e.index),console.log(o),0!=e.index&&10!=e.index||audioMgr.playSFX(s),a.once("finished",function(){a.node.active=!1},this);var r=cc.callFunc(function(){var t=dc.GameDataMgr.getLocalIndex(e.toLocalIndex),n=dc.GameDataMgr.MJDataMgr.getLocalSide(t),i=this.aniDestinationNode[n].getComponent(cc.Animation);i.node.active=!0;var a=i.getClips()[e.index].name;i.repeatCount=1,i.wrapMode="Default",i.play(a);var o="HZMusic/soundEffect/aniEffect/aniFlyTo/EAni_index_"+e.index+".mp3";audioMgr.playSFX(o),i.once("finished",function(){i.node.active=!1},this)},this,null),c=cc.sequence(cc.delayTime(.5),r);this.node.runAction(c)},playAni2:function(e,t,n){console.log("palyAni2"),console.log(e.index);var i=1;8==e.index&&(i=12);var a=this.emotionPosNode,o=a.getChildByName("posPotion0"),s=a.getChildByName("posPotion1"),r=dc.GameDataMgr.getSeatIndexByID(e.sender),c=dc.GameDataMgr.getLocalIndex(r),l=dc.GameDataMgr.MJDataMgr.getLocalSide(c),h=o.children[l],d=dc.GameDataMgr.getLocalIndex(e.toLocalIndex),u=dc.GameDataMgr.MJDataMgr.getLocalSide(d),g=(2==t?s.children[u]:o.children[u]).getPosition(),m=cc.instantiate(h);m.active=!0,m.getComponent(cc.Sprite).spriteFrame=dc.ResourceMgr.getFaceAByIndex(e.index+1),h.parent.addChild(m),m.x=h.x,m.y=h.y,2==n?m.setScale(.7):m.setScale(1);var p=cc.callFunc(function(){m.removeFromParent();var n=this.aniDestinationNode[u];2==t?(n.x=s.children[u].x,n.y=s.children[u].y):(n.x=o.children[u].x,n.y=o.children[u].y);var a=n.getComponent(cc.Animation);a.node.active=!0;var r=a.getClips()[e.index].name;console.log(r),a.play(r).repeatCount=i;var c="HZMusic/soundEffect/aniEffect/aniFlyTo/EAni_index_"+e.index+".mp3";audioMgr.playSFX(c),a.once("finished",function(){a.node.active=!1},this)},this,null),f=cc.sequence(cc.delayTime(.1),cc.moveTo(.5,g),p);m.runAction(f)},playDice:function(e,t){this.diceMgr.active=!0;var n=this.diceMgr.getChildByName("playNode").getComponent(cc.Animation);n.node.active=!0;var i=this.diceMgr.getChildByName("diceArr");i.active=!1;var a=n.play("touzi");a.repeatCount=2;var o=a.duration*a.repeatCount,s=o+.8;return this.setDiceData(e),n.once("finished",function(){console.log(o),n.node.active=!1,i.active=!0},this),audioMgr.playSFX("HZMusic/soundEffect/game/dice.mp3"),s},setDiceData:function(e){this.diceMgr;for(var t=this.diceMgr.getChildByName("diceArr"),n=0;n<t.childrenCount;n++){var i=t.children[n];this.sureDiceSpriteByIndex(e[n],i)}},hideDice:function(){this.diceMgr.active=!1},showDice:function(){this.diceMgr.active=!0},sureDiceSpriteByIndex:function(e,t){for(var n=0;n<t.childrenCount;n++){var i=t.children[n];i.active=e-1==n}},update:function(e){if(this._lastChatTime>0&&(this._lastChatTime-=e,this._lastChatTime<0))for(var t=0;t<this.ExpressNode.length;t++){var n=this.ExpressNode[t];n.isEmoji&&(n.active=!1,n.isEmoji=!1)}}}),cc._RF.pop()},{}],EffectMgrView_common_Gold:[function(e,t,n){"use strict";cc._RF.push(t,"a555fF8ThVGwoNCrKnhQTrz","EffectMgrView_common_Gold"),cc.Class({extends:cc.Component,properties:{ExpressNode:[cc.Node],diceMgr:cc.Node,aniHandThrowNode:cc.Node,aniFlyNode:cc.Node,aniOrginNode:[cc.Node],aniDestinationNode:[cc.Node],DrawNode:cc.Node,_lastChatTime:-1,emotionPosNode:cc.Node},onLoad:function(){this.hideDice(),this.DrawNode.active=!1},start:function(){},playDraw:function(e){var t=2;t=null==e?2:e,this.DrawNode.active=!0;var n=cc.sequence(cc.delayTime(0),cc.scaleTo(e/2,1.2),cc.scaleTo(e/2,1),cc.callFunc(function(){this.DrawNode.active=!1},this,null));return this.DrawNode.runAction(n),t},sendExpression:function(e){console.log("Effect emoji");var t=GameDataMgr.getSeatIndexByID(e.sender),n=GameDataMgr.getLocalSide(t),i=this.ExpressNode[n];i.active=!0,i.isEmoji=!0,i.getComponent(cc.Sprite).spriteFrame=dc.ResourceMgr.getEmojiBigAtlasBydex(e.content),this._lastChatTime=2,i.setScale(.1,.1);var a=cc.scaleTo(.1,1,1);i.runAction(a)},getAniType:function(e){var t=-1;return t=5==e?1:2,console.log("aniType"+t),t},sendEmojA:function(e){GameDataMgr.attackConf[e.content].isMovAni?this.tt2(e):this.tt1(e)},tt1:function(e){var t=GameDataMgr.attackConf[e.content],n=GameDataMgr.getSeatIndexByID(e.sender),i=GameDataMgr.getLocalSide(n),a=this.aniOrginNode[i].getComponent(cc.Animation);a.node.active=!0;a.getClips();var o=t.oriAniName;a.repeatCount=1,a.play(o);var s="aniEffect/aniFlyFrom/aniFrom_index_"+e.content+".mp3";5!=e.content&&9!=e.content||audioMgr.playSFX(s),a.once("finished",function(){a.node.active=!1},this);var r=cc.callFunc(function(){var n=GameDataMgr.getLocalSide(e.desIndex),i=this.aniDestinationNode[n].getComponent(cc.Animation);i.node.active=!0;i.getClips();var a=t.desAniName;i.repeatCount=1,i.wrapMode="Default",i.play(a);var o="aniEffect/aniFlyTo/EAni_index_"+e.content+".mp3";audioMgr.playSFX(o),i.once("finished",function(){i.node.active=!1},this)},this,null),c=cc.sequence(cc.delayTime(.5),r);this.node.runAction(c)},tt2:function(e){var t=GameDataMgr.attackConf[e.content],n=1;8==e.content&&(n=12);var i=this.emotionPosNode,a=i.getChildByName("posPotion0"),o=i.getChildByName("posPotion1"),s=GameDataMgr.getSeatIndexByID(e.sender),r=GameDataMgr.getLocalSide(s),c=a.children[r],l=GameDataMgr.getLocalSide(e.desIndex),h=(4==e.content?o.children[l]:a.children[l]).getPosition(),d=cc.instantiate(c);d.active=!0,d.getComponent(cc.Sprite).spriteFrame=dc.ResourceMgr.getFaceAByIndex(e.content),c.parent.addChild(d),d.x=c.x,d.y=c.y,1==e.content?d.setScale(.7):d.setScale(1);var u=cc.callFunc(function(){d.removeFromParent();var i=this.aniDestinationNode[l];4==e.content?(i.x=o.children[l].x,i.y=o.children[l].y):(i.x=a.children[l].x,i.y=a.children[l].y);var s=i.getComponent(cc.Animation);s.node.active=!0;s.getClips();var r=t.desAniName;console.log(r),s.play(r).repeatCount=n;var c="aniEffect/aniFlyTo/EAni_index_"+e.content+".mp3";audioMgr.playSFX(c),s.once("finished",function(){s.node.active=!1},this)},this,null),g=cc.sequence(cc.delayTime(.1),cc.moveTo(.5,h),u);d.runAction(g)},setDiceData:function(e){this.diceMgr;for(var t=this.diceMgr.getChildByName("diceArr"),n=0;n<t.childrenCount;n++){var i=t.children[n];this.sureDiceSpriteByIndex(e[n],i)}},hideDice:function(){this.diceMgr.active=!1},showDice:function(){this.diceMgr.active=!0},sureDiceSpriteByIndex:function(e,t){for(var n=0;n<t.childrenCount;n++){var i=t.children[n];i.active=e-1==n}},update:function(e){if(this._lastChatTime>0&&(this._lastChatTime-=e,this._lastChatTime<0))for(var t=0;t<this.ExpressNode.length;t++){var n=this.ExpressNode[t];n.isEmoji&&(n.active=!1,n.isEmoji=!1)}}}),cc._RF.pop()},{}],EmptyRoomItem:[function(e,t,n){"use strict";cc._RF.push(t,"a4910cZpgdL/43QoZ7JEc0e","EmptyRoomItem");var i=e("WechatHelper"),a=e("XLHelper");cc.Class({extends:cc.Component,properties:{lblRoomID:cc.Label,lblGameName:cc.Label,lbldiscribe:cc.Label,lblTime:cc.Label,spVip:cc.Node,_roomList:null},onLoad:function(){},open:function(e){this.lblRoomID.string=e.roomId,this._roomId=e.roomId;var t=e.conf;if(this._conf=t,this.spVip.active=!1,this._Vip=0,this._max=t.peoplemax,this._conf.time){var n=Date.parse(this._conf.time);this._cTime=n,this.node.cTime=n;var i=this.dateFormat(this._conf.time);this.lblTime.string=i}if(0==t.gametype){var a=void 0;a=0===t.gamenums?"40\u7247\u6d88\u8017\u4e00\u5f20\u623f\u5361":"8\u5c40\u6d88\u8017\u4e00\u5f20\u623f\u5361",this._gameNums=t.gamenums,this._playStr=a,this.lbldiscribe.string=a,this.node.gametype=0,this.lblGameName.string="\u676d\u5dde\u9ebb\u5c06"}else if(2==t.gametype){var o=void 0;0==(r=t.wanfa%100)?o="\u5168\u6697\u56fa\u5b9a\u642d\u6863":1==r?o="\u5168\u6697\u7ffb\u724c\u914d\u5bf9":10==r?o="\u660e\u53cc\u56fa\u5b9a\u642d\u6863":11==r&&(o="\u660e\u53cc\u7ffb\u724c\u914d\u5bf9"),this.lbldiscribe.string=o,this.lblGameName.string="\u53cc\u6263\u6e38\u620f",this.node.gametype=2}else if(3==t.gametype){var s=void 0;4==t.peoplemax?(s=0===t.gamenums?"40\u7247\u6d88\u8017\u4e00\u5f20\u623f\u5361":"8\u5c40\u6d88\u8017\u4e00\u5f20\u623f\u5361",this.lblGameName.string="\u676d\u5dde\u9ebb\u5c06"):(s=0===t.gamenums?"50\u7247\u6d88\u8017\u4e00\u5f20\u623f\u5361":"8\u5c40\u6d88\u8017\u4e00\u5f20\u623f\u5361",this.lblGameName.string="\u4e8c\u4eba\u9ebb\u5c06"),this._gameNums=t.gamenums,this._playStr=s,this.lbldiscribe.string=s,this.node.gametype=3}else if(4==t.gametype){this._playStr="\u63a8\u5012\u80e1",this.node.gametype=4,this.lblGameName.string="\u63a8\u5012\u80e1";var r=t.wanfa%100%10,c=parseInt(t.wanfa/100)%10,l="";1==r?l+="\u65e0\u4e70\u9a6c":2==r&&(l+="\u4e70\u9a6c"),4==c?l+="4\u4eba":3==c&&(l+="3\u4eba"),this.lbldiscribe.string=l}this.node.active=!0},dateFormat:function(e){var t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1;i=i>=10?i:"0"+i;var a=t.getDate();a=a>=10?a:"0"+a;var o=t.getHours();o=o>=10?o:"0"+o;var s=t.getMinutes();s=s>=10?s:"0"+s;var r=t.getSeconds();return n+"-"+i+"-"+a+" "+o+":"+s+":"+(r=r>=10?r:"0"+r)},getTime:function(){return this._cTime},onBtnShareClick:function(){var e=this.node.gametype;if(0==e)i.invite(this._roomId,this._Vip,this._gameNums);else if(2==e){var t=this._conf.wanfa%100;i.invite_DB(this._roomId,t,this._conf.gamenums,"")}else 3==e?2==this._max?i.invite_MJ2P(this._roomId,this._Vip,this._gameNums):i.invite(this._roomId,this._Vip,this._gameNums):4==e&&i.invite_DDZ(this._roomId,this._Vip,this._gameNums)},onBtnShare_XLClick:function(){if(UserMgr.xlOpenId){var e=this.node.gametype;if(0==e)a.invite(this._roomId,this._Vip,this._gameNums);else if(2==e){var t=this._conf.wanfa%100;a.invite_DB(this._roomId,t,this._conf.gamenums,"")}else 3==e?2==this._max?a.invite_MJ2P(this._roomId,this._Vip,this._gameNums):a.invite(this._roomId,this._Vip,this._gameNums):4==e&&a.invite_DDZ(this._roomId,this._Vip,this._gameNums)}else publicWindow.alert.show("\u63d0\u793a","\u672a\u7ed1\u5b9a\u95f2\u804a\u53f7\u4e0d\u80fd\u5206\u4eab")},onBtnDissolve:function(){if(this._roomId){var e=function(){Hall_ReqAndRes.dissolveRoom(this._roomId,function(e){e.code?publicWindow.alert.show("",e.msg):(publicWindow.alert.show("","\u89e3\u6563\u6210\u529f"),this.node.removeFromParent())}.bind(this))}.bind(this);publicWindow.alert.show("","\u662f\u5426\u8981\u89e3\u6563\u8be5\u623f\u95f4",e,!0)}},setParentNode:function(e){this._roomList=e},onBtnDetail:function(){console.log("onBtnDetail"),Hall_ReqAndRes.getRoomInfo(this._roomId,function(e){var t=this._roomList.getComponent("EmptyRoomList");t.showRoomDetail(!0),e.code?publicWindow.alert.show("",e.msg):t.openDetail(e.data)}.bind(this))}}),cc._RF.pop()},{WechatHelper:"WechatHelper",XLHelper:"XLHelper"}],EmptyRoomList:[function(e,t,n){"use strict";cc._RF.push(t,"9994d7FAIdDMpiM1YvOhNdw","EmptyRoomList"),cc.Class({extends:cc.Component,properties:{content:cc.Node,item:cc.Prefab,item_Fly:cc.Prefab,listView:cc.Node,roomDetail:cc.Node},onLoad:function(){},onEnable:function(){this.getEmptyList()},showRoomDetail:function(e){this.roomDetail.active=e},open:function(){this.node.active=!0},getEmptyList:function(){this.content.removeAllChildren(),Hall_ReqAndRes.getEmptyRoomList(function(e){var t=e.data.emptys,n=[];for(var i in t){var a={};a.roomId=i,a.conf=t[i];var o=JSON.parse(t[i]);a.conf=o,n.push(a)}n.sort(function(e,t){return Date.parse(e.conf.time)-Date.parse(t.conf.time)});for(var s=0;s<n.length;s++){var r,c=n[s];(r=0==c.conf.gametype?cc.instantiate(this.item):cc.instantiate(this.item_Fly)).getComponent("EmptyRoomItem").open(c),this.content.addChild(r),r.getComponent("EmptyRoomItem").setParentNode(this.node)}this.refreshListSize()}.bind(this))},getRoomInfo:function(e){var t=e.data;this.showRoomDetail(!0),this.openDetail(t)},openDetail:function(e){this.roomDetail.getComponent("RoomDetail").openDetail(e)},refreshListSize:function(){var e=this.listView.getChildByName("view").getChildByName("content"),t=e.childrenCount;e.height=this.item.data.height*t}}),cc._RF.pop()},{}],ExpressItem:[function(e,t,n){"use strict";cc._RF.push(t,"433daIH8ohD07IoahQbBoE+","ExpressItem"),cc.Class({extends:cc.Component,properties:{index:0,cdNode:cc.Node},onLoad:function(){},showCDNode:function(e){this.cdNode?this.cdNode.active=e:this.node&&(this.node.getChildByName("cdNode").active=e)}}),cc._RF.pop()},{}],FeadBackItem:[function(e,t,n){"use strict";cc._RF.push(t,"67f82lChKxO157fHgiU+O20","FeadBackItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblUserId:cc.Label,lblPhone:cc.Label,lblContent:cc.Label,lblTime:cc.Label},start:function(){},initData:function(e,t){this.setBgByIndex(t),this.setUserId(e.userid),this.setPhone(e.phone),this.setContent(e.txt);var n=new Date(e.createTime).toLocaleString();this.setTime(n)},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},setUserId:function(e){this.lblUserId.string=e},setPhone:function(e){this.lblPhone.string=e},setContent:function(e){this.lblContent.string=e},setTime:function(e){this.lblTime.string=e}}),cc._RF.pop()},{}],FileUtils:[function(e,t,n){"use strict";function i(e){var t=jsb.fileUtils.getWritablePath();console.log(t);var n=t+e;return jsb.fileUtils.isDirectoryExist(n)?console.log("dir is exist!!!"):jsb.fileUtils.createDirectory(n),n}cc._RF.push(t,"0ded4NJNedFbJquYv4kaVyR","FileUtils"),n.getStringFromFile=function(e,t){var n=i(e),a=n+"/"+t;if(jsb.fileUtils.isFileExist(a)){var o=jsb.fileUtils.getStringFromFile(n+"/"+t);return console.log("getStringFromFile"),console.log(o),o}return""},n.writeStringToFile=function(e,t,n){var a=i(e);console.log("writeStringToFile"),console.log("filePath:"+a+"/"+t),console.log(n),jsb.fileUtils.writeStringToFile(n,a+"/"+t)},n.getDataFromFile=function(e,t){var n=i(e);return jsb.fileUtils.getDataFromFile(n+"/"+t)},n.writeDataToFile=function(e,t,n){var a=i(e);jsb.fileUtils.writeDataToFile(n,a+"/"+t)},cc._RF.pop()},{}],GameDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"19830EpwbRBuZ7cZVPaU0nC","GameDataMgr");var i=e("MJDataMgr"),a=e("ListenMsg"),o=e("DBDataMgr"),s=e("FileUtils"),r=e("TDHDataMgr"),c=e("codeConfig");cc.Class({extends:cc.Component,properties:{seats:null,seatIndex:-1,roomID:null,gamePlayerNum:4,chatInfoList:[],attackConf:[],isEnableEmojiA:!0,_GameActionData:[],_messageQuene:[],dicLocaltion:null,PhraseList:null,MJDataMgr:{get:function(){var e,t=GameDataMgr.conf;return 3==t.gametype?e=this.HZMJDataMgr:4==t.gametype&&(e=this.TDHDataMgr),e},set:function(e){var t=GameDataMgr.conf;3==t.gametype?this.HZMJDataMgr=e:4==t.gametype&&(this.TDHDataMgr=e)}}},start:function(){},init:function(){this.ListenMsg=new a,this.ListenMsg.initListen(),this.HZMJDataMgr=new i,this.HZMJDataMgr.init(),this.DBDataMgr=new o,this.DBDataMgr.init(),this.TDHDataMgr=new r,this.TDHDataMgr.init(),this.initLanguageByStore(),this.initAttackAniConf(),this.initMsgList(),this.dicLocaltion={},this.PhraseList={}},initMsgList:function(){this._messageQuene=[]},clearMsgQue:function(e){if(null==e)this._messageQuene=[];else if(1==e)for(var t=0;t<this._messageQuene.length;t++){"t"==this._messageQuene[t].key.substr(0,1).toLowerCase()&&(this._messageQuene.splice(t,1),t--)}else if(2==e)for(t=0;t<this._messageQuene.length;t++){"t"!=this._messageQuene[t].key.substr(0,1).toLowerCase()&&(this._messageQuene.splice(t,1),t--)}},addMsgs:function(e){for(var t in e){var n={};n.content=e[t],n.key=t,this._messageQuene.push(n)}},clearMsgs:function(){this._messageQuene=[]},sendSpeakMsg:function(){Hall_ReqAndRes.getRollingNotice(function(e){if(UIMgr.curPage==UIMgr.HallPage)if(GroupDataMgr.getGroupLayerSp())if(0==GroupDataMgr.type){t=this.addMsgByType("eclub",e);GameDataMgr.addMsgs(t)}else this.clearMsgQue();else{var t=this.addMsgByType("hall",e);GameDataMgr.addMsgs(t)}else UIMgr.curPage>=UIMgr.HZMJGame_Arena||this.clearMsgQue()}.bind(this))},addMsgByType:function(e,t){for(var n in t){var i=n.substr(0,1);i=i.toLowerCase(),"hall"==e?"t"==i&&delete t[n]:"eclub"==e?"t"!=i&&delete t[n]:"arena"==e&&n!=c.rollingnotice_key.hzmj3201&&delete t[n]}return t},updateSpeakMsg:function(){dc.Iphone_Check_flag||(GameDataMgr.sendSpeakMsg(),this.schedule(this.startSpeakMsg,60))},startSpeakMsg:function(){GameDataMgr.sendSpeakMsg()},cancelUpdateSpeakMsg:function(){this.unschedule(this.startSpeakMsg)},initAttackAniConf:function(){var e,t={};t[(e={index:1,oriName:"ani_other_2",isMovAni:!0,desAniName:"jiubei"}).index]=e,t[(e={index:2,oriName:"ani_other_3",isMovAni:!0,desAniName:"kiss"}).index]=e,t[(e={index:4,oriName:"ani_other_5",isMovAni:!0,desAniName:"meigui"}).index]=e,t[(e={index:6,oriName:"ani_other_7",isMovAni:!0,desAniName:"zhuaji"}).index]=e,t[(e={index:8,oriName:"ani_other_9",isMovAni:!0,desAniName:"paishou"}).index]=e,t[(e={index:9,oriName:"ani_other_10",isMovAni:!1,desAniName:"qiubite1",oriAniName:"qiubite2"}).index]=e,this.attackConf=t},initLanguageByStore:function(){var e=1;e=cc.sys.localStorage.getItem("isPTH"),null==(e=Number(e))?GameDataMgr.isPutonghua=!1:0==e?GameDataMgr.isPutonghua=!0:1==e&&(GameDataMgr.isPutonghua=!1)},addPhraseAndSave:function(e,t,n){var i=t,a={type:0,content:e,index:i};this.PhraseList[i]=a,this.savePhraseToFile()},removePhraseAndSave:function(e){e=e;var t=dc.deepCopy(this.PhraseList);this.PhraseList={};var n=0;for(var i in t){var a=n;this.PhraseList[a]=t[i],this.PhraseList[a].index=a,n++}delete this.PhraseList[e],this.savePhraseToFile()},savePhraseToFile:function(){var e="phrase_"+UserMgr.userId+".json",t=JSON.stringify(this.PhraseList);cc.sys.isNative&&s.writeStringToFile("phraseDir",e,t)},getLocalPhraseListFromFile:function(){if(!cc.sys.isNative)return{};var e="phrase_"+UserMgr.userId+".json";console.log("getLocalPhraseListFromFile"),console.log(e);var t=s.getStringFromFile("phraseDir",e);if(console.log("filePath:"+t),""!=t)try{var n=JSON.parse(t);return console.log("afterjson:",n),n}catch(e){return console.log("catch error",e),{}}return{}},getPhaseList:function(){var e=[];for(var t in this.PhraseList)e.push(this.PhraseList[t]);return e},GameEndReset:function(){this.reset(),this.roomID=null,this.seats=null,this.seatsObs=null,this.isReplay=!1,this.isOver=!1,console.log("GameEndReset"),console.log("isOver:"+this.isOver),this._GameActionData=[],this.chatInfoList=[],this.isEnableEmojiA=!0},reset:function(){this.isEnableBegin=!0,this.numofmj=83,this.button=-1,this.turn=-1,this.lastChuPaiSeat=-1,this.dice=null,this.newSeats=null,this.magicCard=-1,this.hasOutCard=!1,this.GameState=0,this.beginAniState=!1,this.ChupaiData=null,this.mopaiData=null,this.chupaiPushData=null,this.actionData=null,this.connectState=0,this.HZMJDataMgr.reset(),this.TDHDataMgr.reset(),this.DBDataMgr.reset(),this._readyRetainSecond=null},getUserType:function(){return 0},getIsObserver:function(){return!1},getSeatIndexByID:function(e){if(this.seats)for(var t in this.seats){if(this.seats[t].userId==e)return parseInt(t)}return cc.log("getSeatIndexByID : -1"),-1},getSeatByID:function(e){var t=this.getSeatIndexByID(e);return this.seats[t]},getSelfData:function(){return this.seats[this.seatIndex]},getLocalIndex:function(e){var t,n=GameDataMgr.conf.gametype;return 3==n?t=this.MJDataMgr.getLocalIndex(e):2==n?t=this.DBDataMgr.getLocalIndex(e):4==n&&(t=this.TDHDataMgr.getLocalIndex(e)),t},getLocalSide:function(e){var t,n=GameDataMgr.conf.gametype;return 3==n?t=this.MJDataMgr.getLocalSide(e):2==n?t=this.DBDataMgr.getLocalSide(e):4==n&&(t=this.TDHDataMgr.getLocalSide(e)),t},getIndexBySide:function(e){var t,n=GameDataMgr.conf.gametype;return 3==n?t=this.MJDataMgr.getIndexBySide(e):2==n?t=this.DBDataMgr.getIndexBySide(e):4==n&&(t=this.TDHDataMgr.getIndexBySide(e)),t},createNewseats:function(){for(var e=GameDataMgr.newSeats,t=GameDataMgr.seats,n=[],i=0;i<e.length;i++)for(var a=0;a<t.length;a++)if(e[i]==t[a].userId){n.push(t[a]);break}for(a=0;a<n.length;a++){(t=n[a]).seatIndex=a}return n},updateNewSeats:function(){console.log("updateNewSeats");var e=this.createNewseats();e?GameDataMgr.seats=e:console.log("kengdie")},getAddress:function(e,t){var n={},i="";try{i=JSON.parse(e),n.userId=t;var a=i.province+i.city+i.district+i.street;n.address=a,n.Lat=i.latitude,n.Lng=i.longitude}catch(e){console.log(e)}return n},initReplayData:function(e){this.GameEndReset();var t=dc.deepCopy(e),n=t.game_index+1;this.isReplay=!0,this.seats=[];for(var i=t.action_records,a=0;a<i.length;a++){var o=i[a];if(Array.isArray(o))this._GameActionData=o,cc.log("Actioncmd");else{var s=o.cmd;if("begin"==s){cc.log("beginCmd");var r=o;this.conf=r.conf,this.button=r.button,this.turn=this.button,this.lastChuPaiSeat=this.button,this.magicCard=r.magicCard,this.numofmj=136-r.currentIndex,this.maxNumOfGames=r.conf.gamenums,this.numofgames=r.numOfGames,this.gameIndex=n,this.roomID=r.roomId,this.gameType=r.conf.gametype,this.gamePlayerNum=r.conf.peoplemax,this.MJDataMgr.reset(),this.MJDataMgr.initConf();var c=r.seats;this.seats=c;for(var l=0;l<this.seats.length;l++)this.seats[l].seatIndex=l;for(var h=GameDataMgr.MJDataMgr.MJSeats,d=0;d<c.length;d++)h[d].holds=c[d].holds;for(var u=-1,g=0;g<c.length;g++)UserMgr.userId==c[g].userId&&(u=g);-1==u&&(u=0),this.seatIndex=u}else"gameover"==s&&(this.results=o.results)}}},getSoundEffectBySex:function(e){var t="";return t+=null!=e?1==e?"male/":2==e?"female/":"male/":"male/"},getSoundEffectByLanguage:function(e){return e?"putonghua/":"hangzhouhua/"},playPaiSound:function(e,t,n){var i="HZGame/",a=this.getSoundEffectBySex(t);i=i+this.getSoundEffectByLanguage(n)+a,i+="pai/MJ_Music_"+e+".mp3",audioMgr.playSFX(i)},playHuSound:function(e,t,n){var i="HZGame/",a=this.getSoundEffectBySex(t);i=i+this.getSoundEffectByLanguage(n)+a,i+="huType/HuType_"+e+".mp3",audioMgr.playSFX(i)},playMJActionSound:function(e,t,n){var i="HZGame/",a=this.getSoundEffectBySex(t);i=i+this.getSoundEffectByLanguage(n)+a,i+="action/"+e+".mp3",audioMgr.playSFX(i)},playQuickSound:function(e,t){var n;3==this.conf.gametype||4==this.conf.gametype?n="HZGame/":2==this.conf.gametype&&(n="DoubleBuckle/");var i=parseInt(e/100)%10,a=1==parseInt(e/1e3),o=this.getSoundEffectBySex(i);n=n+this.getSoundEffectByLanguage(a)+o,n+="QuickChat/"+t,audioMgr.playSFX(n)},getGamePage:function(){var e,t=GameDataMgr.conf;return 2==t.gametype?e=UIMgr.getPageScript(UIMgr.DBGame):3==t.gametype?e=t.createtype==c.createRoomType.hallgame?UIMgr.getPageScript(UIMgr.HZMJGame_Arena):UIMgr.getPageScript(UIMgr.HZMJGame):4==t.gametype&&(e=UIMgr.getPageScript(UIMgr.TDHGame)),e},readyHandle:function(e){var t=GameDataMgr.getSeatIndexByID(e.userId);GameDataMgr.seats[t].ready=0!=e.ready},onlineHandle:function(e){var t=GameDataMgr.getSeatIndexByID(e.userId);GameDataMgr.seats[t].online=1==e.online},onAutoState:function(e){for(var t=this.seats,n=0;n<t.length;n++)t[n].userId==e.userId&&(t[n].isRobotTime=e.isRobotTime)},onGameBegin:function(e){this.reset();var t=GameDataMgr.conf.gametype;3==t?this.MJDataMgr.onGameBegin(e):2==t?this.DBDataMgr.onGameBegin(e):4==t&&this.MJDataMgr.onGameBegin(e)},onGameSync:function(e){GameDataMgr.dissolve=e.dissolve;var t=GameDataMgr.conf.gametype;3==t?this.MJDataMgr.onGameSync(e):2==t?this.DBDataMgr.onGameSync(e):4==t&&this.MJDataMgr.onGameSync(e)},showOutCardHandle:function(e,t){this.MJDataMgr.showOutCardHandle(e,t)},addMopaiHandle:function(e,t){GameDataMgr.actionData=null,this.MJDataMgr.addMopaiHandle(e,t)},chiOper:function(e){this.MJDataMgr.chiOper(e)},pengOper:function(e){this.MJDataMgr.pengOper(e)},gangOper:function(e){this.MJDataMgr.gangOper(e)},gameDBuckleChupai:function(e){this.DBDataMgr.Chupai_DB(e)},enterGame:function(e){var t=e.conf;GameDataMgr.conf=e.conf,GameDataMgr.seats=e.seats,GameDataMgr.maxNumOfGames=t.gamenums,GameDataMgr.gameIndex=e.numOfGames||0,GameDataMgr.gamePlayerNum=t.peoplemax,2==t.gametype?(GameDataMgr.DBDataMgr.reset(),GameDataMgr.DBDataMgr.initConf()):3==t.gametype?(GameDataMgr.MJDataMgr.reset(),GameDataMgr.MJDataMgr.initConf(),2==GameDataMgr.gamePlayerNum?GameDataMgr.MJDataMgr.setFolds_PERROW_NUM(20):GameDataMgr.MJDataMgr.setFolds_PERROW_NUM(12)):4==t.gametype&&(GameDataMgr.TDHDataMgr.reset(),GameDataMgr.TDHDataMgr.initConf(),2==GameDataMgr.gamePlayerNum?GameDataMgr.TDHDataMgr.setFolds_PERROW_NUM(20):GameDataMgr.TDHDataMgr.setFolds_PERROW_NUM(12)),GameDataMgr.roomID=e.roomId,UserMgr.roomId=e.roomId,GameDataMgr.seatIndex=GameDataMgr.getSeatIndexByID(UserMgr.userId)},enterUser:function(e){GameDataMgr.seats[e.seatIndex]=e}}),cc._RF.pop()},{DBDataMgr:"DBDataMgr",FileUtils:"FileUtils",ListenMsg:"ListenMsg",MJDataMgr:"MJDataMgr",TDHDataMgr:"TDHDataMgr",codeConfig:"codeConfig"}],GameEnd_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"3cf57Rs91VFHY/z6aOmiiDU","GameEnd_2MJ");var i=e("WechatHelper"),a=e("XLHelper");cc.Class({extends:cc.Component,properties:{details:[cc.Node],lblTime:cc.Label,btnShare:cc.Node,btnXLBtn:cc.Node},onLoad:function(){this.initSeatSide(),this.hideSeat()},initSeatSide:function(){var e,t=GameDataMgr.gamePlayerNum;t>2?e=this.node.getChildByName("4MJPos"):2==t&&(e=this.node.getChildByName("2MJPos"));for(var n=0;n<t;n++){var i=this.details[n],a=e.children[n];i.x=a.x}},hideSeat:function(){for(var e=GameDataMgr.gamePlayerNum,t=(GameDataMgr.seats,0);t<this.details.length;t++){this.details[t].active=!1}for(t=0;t<e;t++){this.details[t].active=!0}},weichatBtnHide:function(){var e=AnysdkMgr.isWeichatInstall();this.btnShare.active=!!e},XLInstallBtnHide:function(){var e=AnysdkMgr.isXLInstall();this.btnXLBtn.active=e},showTime:function(){var e=this.dateFormat();this.lblTime.string=e},dateFormat:function(e){var t=new Date,n=t.getFullYear(),i=t.getMonth()+1;i=i>=10?i:"0"+i;var a=t.getDate();a=a>=10?a:"0"+a;var o=t.getHours();o=o>=10?o:"0"+o;var s=t.getMinutes();s=s>=10?s:"0"+s;var r=t.getSeconds();return n+"-"+i+"-"+a+" "+o+":"+s+":"+(r=r>=10?r:"0"+r)},onGameEnd:function(e){this.hideSeat(),this.initSeatSide();for(var t=e.results,n=0;n<t.length;n++){var i=t[n];this.initSingleData(i,n)}this.winnersShow(e),this.setBaoZhuang(e),this.setLittleWinner(),this.setRoleBg();var a=this.countIsDissolve(e);console.log("isDissolve:"+a),a&&this.hideAlls(),this.weichatBtnHide(),this.XLInstallBtnHide()},countIsDissolve:function(e){for(var t=e.results,n=!0,i=0;i<t.length;i++){if(t[i].hued){n=!1;break}}return n},initSingleData:function(e,t){this.setName(e,t),this.settoltalScore(e.totalscore,t),this.setIcon(e,t)},setIcon:function(e,t){var n=GameDataMgr.seats[t];this.details[t].getChildByName("iconNode").getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(n.headimg,n.userId)},settoltalScore:function(e,t){var n=this.details[t],i=n.getChildByName("accumulateNode").getChildByName("tex_add"),a=n.getChildByName("accumulateNode").getChildByName("tex_sub");e>0?(i.active=!0,a.active=!1):0==e?(i.active=!1,a.active=!1):(i.active=!1,a.active=!0);var o=n.getChildByName("accumulateNode").getChildByName("totalScore").getComponent(cc.Label);e<0&&(e=-e),o.string=e},setRoleBgByTag:function(e,t){var n=this.details[t].getChildByName("bgNode"),i=-1;i=e?1:0;for(var a=0;a<n.childrenCount;a++){var o=n.children[a];o.active=a==i}},setName:function(e,t){var n=GameDataMgr.seats[t];this.details[t].getChildByName("name").getComponent(cc.Label).string=n.name},setBaoZhuang:function(e){0==GameDataMgr.maxNumOfGames?this.BZ1(e):this.BZ2(e)},BZ1:function(e){for(var t=GameDataMgr.conf.peoplemax,n=e.results,i=this.details,a=0;a<n.length;a++){var o=n[a],s=i[a].getChildByName("sprbaozhuan");2==t?o.totalscore<=-50?s.active=!0:s.active=!1:o.totalscore<=-40?s.active=!0:s.active=!1}},BZ2:function(e){e.results;for(var t=this.details,n=this.countBZByGame10(e),i=0;i<t.length;i++){(s=t[i]).getChildByName("sprbaozhuan").active=!1}if(n.length>0)for(var a=0;a<n.length;a++){var o=n[a];for(i=0;i<t.length;i++){var s=t[i];if(o==i)s.getChildByName("sprbaozhuan").active=!0}}},countBZByGame10:function(e){console.log("countWinners");for(var t=[],n=e.results,i=0;i<n.length;i++){var a=n[i];t.push(a.totalscore)}var o=t[0];for(i=1;i<t.length;i++)o>t[i]&&(o=t[i],i);var s=[];if(0!=o)for(i=0;i<t.length;i++)o==t[i]&&s.push(i);return s},winnersShow:function(e){for(var t=this.countWinners(e),n=this.details,i=0;i<n.length;i++){(s=n[i]).getChildByName("sprwinner").active=!1}for(var a=0;a<t.length;a++){var o=t[a];for(i=0;i<n.length;i++){var s=n[i];if(o==i)s.getChildByName("sprwinner").active=!0}}},hideAlls:function(){for(var e=this.details,t=0;t<e.length;t++){var n=e[t];n.getChildByName("sprwinner").active=!1,n.getChildByName("sprbaozhuan").active=!1,n.getChildByName("heheNode").active=!0}},setLittleWinner:function(){for(var e=0;e<this.details.length;e++){var t=this.details[e],n=t.getChildByName("sprwinner"),i=t.getChildByName("sprbaozhuan"),a=t.getChildByName("heheNode");0==n.active&&0==i.active?a.active=!0:a.active=!1}},setRoleBg:function(){for(var e=0;e<this.details.length;e++){var t;t=!!this.details[e].getChildByName("sprwinner").active,this.setRoleBgByTag(t,e)}},countWinners:function(e){console.log("countWinners");for(var t=[],n=e.results,i=0;i<n.length;i++){var a=n[i];t.push(a.totalscore)}var o=t[0];for(i=1;i<t.length;i++)o<t[i]&&(o=t[i],i);var s=[];if(0!=o)for(i=0;i<t.length;i++)o==t[i]&&s.push(i);return s},onBtnClose:function(e){console.log("gameEndClose"),GameDataMgr.GameEndReset(),UserMgr.clearRoomId(),UIMgr.pushUI(UIMgr.HallPage)},onBtnGameEndShare:function(e){console.log("GameEndShare"),i.shareCutPicToMate()},onBtnGameEndShare_XL:function(e){a.shareCutPicToMate()}}),cc._RF.pop()},{WechatHelper:"WechatHelper",XLHelper:"XLHelper"}],GameEnd_DB:[function(e,t,n){"use strict";cc._RF.push(t,"23b86kriW1KhacA2j2qWVi0","GameEnd_DB");var i=e("WechatHelper"),a=e("XLHelper");cc.Class({extends:cc.Component,properties:{details:[cc.Node],lblTime:cc.Label,btnShare:cc.Node,btnXLBtn:cc.Node},onLoad:function(){this.initSeatSide(),this.hideSeat()},initSeatSide:function(){var e,t=GameDataMgr.gamePlayerNum;4==t?e=this.node.getChildByName("4MJPos"):2==t&&(e=this.node.getChildByName("2MJPos"));for(var n=0;n<t;n++){var i=this.details[n],a=e.children[n];i.x=a.x}},hideSeat:function(){for(var e=GameDataMgr.gamePlayerNum,t=(GameDataMgr.seats,0);t<this.details.length;t++){this.details[t].active=!1}for(t=0;t<e;t++){this.details[t].active=!0}},weichatBtnHide:function(){var e=AnysdkMgr.isWeichatInstall();this.btnShare.active=!!e},XLInstallBtnHide:function(){var e=AnysdkMgr.isXLInstall();this.btnXLBtn.active=e},showTime:function(){var e=this.dateFormat();this.lblTime.string=e},dateFormat:function(e){var t=new Date,n=t.getFullYear(),i=t.getMonth()+1;i=i>=10?i:"0"+i;var a=t.getDate();a=a>=10?a:"0"+a;var o=t.getHours();o=o>=10?o:"0"+o;var s=t.getMinutes();s=s>=10?s:"0"+s;var r=t.getSeconds();return n+"-"+i+"-"+a+" "+o+":"+s+":"+(r=r>=10?r:"0"+r)},onGameEnd:function(e){this.hideSeat(),this.initSeatSide();for(var t=e.results,n=0;n<t.length;n++){var i=t[n];this.initSingleData(i,n)}this.winnersShow(e),this.setRoleBg();var a=this.countIsDissolve(e);console.log("isDissolve:"+a),a&&this.hideAlls(),this.weichatBtnHide(),this.XLInstallBtnHide()},countIsDissolve:function(e){for(var t=e.results,n=!0,i=0;i<t.length;i++){if(t[i].win){n=!1;break}}return n},initSingleData:function(e,t){this.setName(e,t),this.settoltalScore(e.totalscore,t),this.setIcon(e,t)},setIcon:function(e,t){var n=GameDataMgr.seats[t];this.details[t].getChildByName("iconNode").getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(n.headimg,n.userId)},settoltalScore:function(e,t){var n=this.details[t],i=n.getChildByName("accumulateNode").getChildByName("tex_add"),a=n.getChildByName("accumulateNode").getChildByName("tex_sub");e>0?(i.active=!0,a.active=!1):0==e?(i.active=!1,a.active=!1):(i.active=!1,a.active=!0);var o=n.getChildByName("accumulateNode").getChildByName("totalScore").getComponent(cc.Label);e<0&&(e=-e),o.string=e},setRoleBgByTag:function(e,t){var n=this.details[t].getChildByName("bgNode"),i=-1;i=e?1:0;for(var a=0;a<n.childrenCount;a++){var o=n.children[a];o.active=a==i}},setName:function(e,t){var n=GameDataMgr.seats[t];this.details[t].getChildByName("name").getComponent(cc.Label).string=n.name},winnersShow:function(e){for(var t=this.countWinners(e),n=this.details,i=0;i<n.length;i++){(s=(o=n[i]).getChildByName("sprwinner")).active=!1,(r=o.getChildByName("sprFailure")).active=!1,o.getChildByName("hehe").active=!1}if(0!=t.length){var a={};for(i=0;i<t.length;i++)a[t[i]]=!0;for(i=0;i<n.length;i++){var o,s=(o=n[i]).getChildByName("sprwinner"),r=o.getChildByName("sprFailure");a[i]?(s.active=!0,r.active=!1):(s.active=!1,r.active=!0)}}},hideAlls:function(){for(var e=this.details,t=0;t<e.length;t++){var n=e[t];n.getChildByName("sprwinner").active=!1,n.getChildByName("sprFailure").active=!1,n.getChildByName("hehe").active=!0}},setRoleBg:function(){for(var e=0;e<this.details.length;e++){var t;t=!!this.details[e].getChildByName("sprwinner").active,this.setRoleBgByTag(t,e)}},countWinners:function(e){console.log("countWinners");for(var t=[],n=e.results,i=0;i<n.length;i++){var a=n[i];t.push(a.totalscore)}var o=t[0];for(i=1;i<t.length;i++)o<t[i]&&(o=t[i],i);var s=[];if(0!=o)for(i=0;i<t.length;i++)o==t[i]&&s.push(i);return s},onBtnClose:function(e){console.log("gameEndClose"),GameDataMgr.GameEndReset(),UserMgr.clearRoomId(),UIMgr.pushUI(UIMgr.HallPage)},onBtnGameEndShare:function(e){console.log("GameEndShare"),i.shareCutPicToMate()},onBtnGameEndShare_XL:function(e){a.shareCutPicToMate()}}),cc._RF.pop()},{WechatHelper:"WechatHelper",XLHelper:"XLHelper"}],GameEnd_TDH:[function(e,t,n){"use strict";cc._RF.push(t,"8821enzo7xHrJtCnHsq4V25","GameEnd_TDH"),cc.Class({extends:e("GameEnd_2MJ"),properties:{},start:function(){},onGameEnd:function(e){this.hideSeat();for(var t=e.results,n=0;n<t.length;n++){var i=t[n];this.initSingleData(i,n)}this.winnersShow(e),this.weichatBtnHide(),this.XLInstallBtnHide()},winnersShow:function(e){for(var t=this.countWinners(e),n=this.details,i=GameDataMgr.gamePlayerNum,a=0;a<n.length;a++){(s=(o=n[a]).getChildByName("sprwinner")).active=!1,this.playWinAni(a,!1)}for(a=0;a<n.length;a++){var o,s=(o=n[a]).getChildByName("sprwinner"),r=o.getChildByName("sprbaozhuan");if(a<i){var c=t.indexOf(a)>=0;c?(s.active=!0,r.active=!1,this.playWinAni(a,!0)):(s.active=!1,r.active=!0),this.setRoleBgByTag(c,a)}else{this.setRoleBgByTag(!1,a),(s=o.getChildByName("sprwinner")).active=!1}}},playWinAni:function(e,t){var n=this.details[e].getChildByName("bgNode").children[1].getChildByName("yingjia_guang").getComponent(cc.Animation);t?n.play("Touzi_over_guang"):n.stop("Touzi_over_guang")},hideAlls:function(){for(var e=this.details,t=0;t<e.length;t++){var n=e[t];n.getChildByName("sprwinner").active=!1,n.getChildByName("sprbaozhuan").active=!1}}}),cc._RF.pop()},{GameEnd_2MJ:"GameEnd_2MJ"}],GameOver_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"67428OvR4FE14K8PsInBSGR","GameOver_2MJ");var i=e("WechatHelper"),a=e("XLHelper");cc.Class({extends:cc.Component,properties:{detailNode:[cc.Node],usersNode:cc.Node,seatNode:cc.Node,btnNode:cc.Node,gameControlSp:cc.Node,shadowNode:cc.Node,btnShare:cc.Node,btnXLBtn:cc.Node},onLoad:function(){},setControlSp:function(e){this.gameControlSp=e},onGameOver:function(e){this.node.active=!0,this.usersNode.active=!0,this.btnNode.active=!0,this.initSeatSide(),this.hideBanner(),this.hideSeat();for(var t=e.results,n=0;n<t.length;n++){t[n].code=t[n].code||0;var i=t[n];this.initSingleData(i,n)}this.weichatBtnHide(),this.XLInstallBtnHide(),this.hideObserveBtn()},setBtnNodeShow:function(e){this.btnNode.active=e},initSeatSide:function(){var e,t=GameDataMgr.gamePlayerNum;t>2?e=this.node.getChildByName("4MJPos"):2==t&&(e=this.node.getChildByName("2MJPos"));for(var n=0;n<t;n++){var i=this.detailNode[n],a=e.children[n];i.x=a.x}},hideBanner:function(){var e=GameDataMgr.gamePlayerNum,t=GameDataMgr.seats;if(e<4){for(var n=0;n<this.seatNode.children.length;n++){this.seatNode.children[n].active=!1}for(n=0;n<e;n++){var i=t[n],a=GameDataMgr.getSeatIndexByID(i.userId),o=GameDataMgr.getLocalSide(a);this.seatNode.children[o].active=!0}}},onDisable:function(){this.initBanner()},onEnable:function(){this.initBanner()},initBanner:function(){for(var e=0;e<this.seatNode.children.length;e++){this.seatNode.children[e].active=!1}},hideSeat:function(){for(var e=GameDataMgr.gamePlayerNum,t=(GameDataMgr.seats,0);t<this.detailNode.length;t++)this.detailNode[t].active=!1;for(t=0;t<e;t++)this.detailNode[t].active=!0},hideObserveBtn:function(){var e=this.btnNode.getChildByName("btnShare"),t=this.btnNode.getChildByName("btnContinue");GameDataMgr.isObserver?(e.active=!1,t.active=!1):(e.active=!0,t.active=!0)},weichatBtnHide:function(){var e=AnysdkMgr.isWeichatInstall();this.btnShare.active=!!e},XLInstallBtnHide:function(){var e=AnysdkMgr.isXLInstall();this.btnXLBtn.active=e},getRealCode:function(e){var t=GameDataMgr.conf;if(3==t.gametype)return e;if(4==t.gametype){for(var n=[1,2,3,4],i=[-1,-100,-100,1001],a={},o=0;o<n.length;o++)a[n[o]]=i[o];return a[e]}},isMusic:function(e){return[0,1,-1,2,10,11,20,100,200,201,300,301,310,311,1001,1002].indexOf(e)>=0},initSoundSingle:function(e,t){var n;if(e.hued)if(-1==e.code){n=-1;var i=GameDataMgr.seats[t];GameDataMgr.playHuSound(n,i.sex,GameDataMgr.isPutonghua)}else if(e.code>=0){if(n=this.getRealCode(e.code),this.isMusic(n)){i=GameDataMgr.seats[t];GameDataMgr.playHuSound(n,i.sex,GameDataMgr.isPutonghua)}else{i=GameDataMgr.seats[t];GameDataMgr.playHuSound("hu",i.sex,GameDataMgr.isPutonghua)}}},initSingleData:function(e,t){var n=GameDataMgr.seats[t],i=this.detailNode[t];this.setBanker(GameDataMgr.button,t),i.getChildByName("name").getComponent(cc.Label).string=n.name;var a=e.hued;this.setLablesActive(t),this.setRoleBgByTag(a,t),this.settoltalScore(e.totalscore,t),this.setDanjuScore(e.score,t),this.setNoRaiseScore(e.score,t),this.setRaise(e,t),this.setLabelsPos(a,t),this.setBanner(e,t),this.setIcon(e,t)},setLablesActive:function(e){var t=this.detailNode[e].getChildByName("lblsNode"),n=t.getChildByName("curNoRaiseScore"),i=t.getChildByName("raise");4==GameDataMgr.conf.peoplemax?(n.active=!1,i.active=!1):(n.active=!0,i.active=!0)},setLabelsPos:function(e,t){var n,i=this.detailNode[t],a=i.getChildByName("lblsNode"),o=i.getChildByName("lblsPoints");n=4==GameDataMgr.conf.peoplemax?o.children[2]:e?o.children[0]:o.children[1],a.x=n.x,a.y=n.y;a.getChildByName("curNoRaiseScore"),a.getChildByName("raise"),a.getChildByName("curScoreNode")},setRaise:function(e,t){var n=this.detailNode[t].getChildByName("lblsNode").getChildByName("raise").getChildByName("lblraise").getComponent(cc.Label),i=2==GameDataMgr.MJDataMgr.raise?2:0;n.string=""+i},setIcon:function(e,t){var n=GameDataMgr.seats[t];this.detailNode[t].getChildByName("iconNode").getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(n.headimg,n.userId)},setBanner:function(e,t){var n=GameDataMgr.getLocalSide(t),i=this.seatNode.children[n];i.active=!0;var a=i.getChildByName("titelNode").getChildByName("tex_tite").getComponent(cc.Sprite);if(e.hued)if(e.code>=-1){var o=GameDataMgr.conf;if(3==o.gametype){a.node.parent.active=!0;var s=this.getBannerTitleName(e.code,n);a.spriteFrame=s}else if(4==o.gametype){a.node.parent.active=!0;s=this.getBannerTitleName_TDH(e.code,n);a.spriteFrame=s}}else a.node.parent.active=!1;else a.node.parent.active=!1},setBanker:function(e,t){var n=this.detailNode[t].getChildByName("tex_banker");n.active=e==t},setRoleBgByTag:function(e,t){var n=this.detailNode[t].getChildByName("bgNode"),i=-1;i=e?1:0;for(var a=0;a<n.childrenCount;a++){var o=n.children[a];o.active=a==i}},setDanjuScore:function(e,t){var n=this.detailNode[t].getChildByName("lblsNode"),i=n.getChildByName("curScoreNode").getChildByName("tex_add"),a=n.getChildByName("curScoreNode").getChildByName("tex_sub"),o=n.getChildByName("curScoreNode").getChildByName("curScore").getComponent(cc.Label);e>0?(i.active=!0,a.active=!1):0==e?(i.active=!1,a.active=!1):(i.active=!1,a.active=!0),o.string=e<0?-e:e},setNoRaiseScore:function(e,t){var n=this.detailNode[t].getChildByName("lblsNode"),i=n.getChildByName("curNoRaiseScore").getChildByName("tex_add"),a=n.getChildByName("curNoRaiseScore").getChildByName("tex_sub"),o=n.getChildByName("curNoRaiseScore").getChildByName("curScore").getComponent(cc.Label);e>0?(i.active=!0,a.active=!1):0==e?(i.active=!1,a.active=!1):(i.active=!1,a.active=!0),2==GameDataMgr.MJDataMgr.raise&&(e/=2),o.string=e<0?-e:e},settoltalScore:function(e,t){var n=this.detailNode[t].getChildByName("lblsNode"),i=n.getChildByName("accumulateNode").getChildByName("tex_add"),a=n.getChildByName("accumulateNode").getChildByName("tex_sub"),o=n.getChildByName("accumulateNode").getChildByName("totalScore").getComponent(cc.Label);e>0?(i.active=!0,a.active=!1):0==e?(i.active=!1,a.active=!1):(i.active=!1,a.active=!0),o.string=e<0?-e:e},onBtnGameOverContinue:function(e){this.node.active=!1,this.gameControlSp.setMJNodeShow(!1),this.gameControlSp.setMenuShow(!0),this.gameControlSp.setMJNumsShow(!1),GameDataMgr.isOver?(this.gameControlSp.setShowGameEnd(!0),GameDataMgr.reset(),this.gameControlSp.endClear()):(GameDataMgr.reset(),this.gameControlSp.clearAllMJNode(),Hall_ReqAndRes.readyReq(1,null,GameDataMgr.conf.createtype))},onBtnGameOverShare:function(e){i.shareCutPicToMate()},onBtnGameOverShare_XL:function(e){a.shareCutPicToMate()},getBannerTitleName:function(e,t){var n=null;return 0==t||2==t?n=dc.ResourceMgr.getOverBanner("My_",e):1==t?n=dc.ResourceMgr.getOverBanner("Right_",e):3==t&&(n=dc.ResourceMgr.getOverBanner("Left_",e)),n}}),cc._RF.pop()},{WechatHelper:"WechatHelper",XLHelper:"XLHelper"}],GameOver_DB:[function(e,t,n){"use strict";cc._RF.push(t,"e8448mjKRxP54p1alWC9NcB","GameOver_DB");var i=e("WechatHelper"),a=e("XLHelper");cc.Class({extends:cc.Component,properties:{detailNode:[cc.Node],seatNode:cc.Node,winnerTipsNode:[cc.Sprite],gameControlSp:cc.Node,shadowNode:cc.Node,btnShare:cc.Node,btnXLBtn:cc.Node},onLoad:function(){},setControlSp:function(e){this.gameControlSp=e},onGameOver:function(e){this.initSeatSide(),this.hideSeat();for(var t=e.results,n=0;n<t.length;n++){t[n].code=t[n].code||0;var i=t[n];this.initSingleData(i,n)}this.weichatBtnHide(),this.XLInstallBtnHide(),this.hideObserveBtn()},initSeatSide:function(){var e,t=GameDataMgr.gamePlayerNum;4==t?e=this.node.getChildByName("4MJPos"):2==t&&(e=this.node.getChildByName("2MJPos"));for(var n=0;n<t;n++){var i=this.detailNode[n],a=e.children[n];i.x=a.x}},hideSeat:function(){for(var e=GameDataMgr.gamePlayerNum,t=(GameDataMgr.seats,0);t<this.detailNode.length;t++)this.detailNode[t].active=!1;for(t=0;t<e;t++)this.detailNode[t].active=!0},hideObserveBtn:function(){var e=this.node.getChildByName("btnShare"),t=this.node.getChildByName("btnContinue");GameDataMgr.isObserver?(e.active=!1,t.active=!1):(e.active=!0,t.active=!0)},weichatBtnHide:function(){var e=AnysdkMgr.isWeichatInstall();this.btnShare.active=!!e},XLInstallBtnHide:function(){var e=AnysdkMgr.isXLInstall();this.btnXLBtn.active=e},isMusic:function(e){for(var t=!1,n=[0,1,-1,2,10,11,20,100,200,201,300,301,310,311,1001,1002],i=0;i<n.length;i++)if(e==n[i]){t=!0;break}return t},initSoundSingle:function(e,t){var n;if(e.win)if(-1==e.code){n=-1;var i=GameDataMgr.seats[t];GameDataMgr.playHuSound(n,i.sex,GameDataMgr.isPutonghua)}else if(e.code>=0){if(n=e.code,this.isMusic(n)){i=GameDataMgr.seats[t];GameDataMgr.playHuSound(e.code,i.sex,GameDataMgr.isPutonghua)}else{i=GameDataMgr.seats[t];GameDataMgr.playHuSound("hu",i.sex,GameDataMgr.isPutonghua)}}},initSingleData:function(e,t){var n=GameDataMgr.seats[t];this.detailNode[t].getChildByName("name").getComponent(cc.Label).string=n.name;var i=e.win;this.setLablesActive(t),this.setRoleBgByTag(i,t),this.settoltalScore(e.totalscore,t),this.setDanjuScore(e.score,t),this.setNoRaiseScore(e.score,t),this.setRaise(e,t),this.setLabelsPos(i,t),this.setIcon(e,t)},setLablesActive:function(e){var t=this.detailNode[e].getChildByName("lblsNode"),n=t.getChildByName("curNoRaiseScore"),i=t.getChildByName("raise");4==GameDataMgr.conf.peoplemax?(n.active=!1,i.active=!1):(n.active=!0,i.active=!0)},setLabelsPos:function(e,t){var n,i=this.detailNode[t],a=i.getChildByName("lblsNode"),o=i.getChildByName("lblsPoints");n=4==GameDataMgr.conf.peoplemax?o.children[2]:e?o.children[0]:o.children[1],a.x=n.x,a.y=n.y;a.getChildByName("curNoRaiseScore"),a.getChildByName("raise"),a.getChildByName("curScoreNode")},setRaise:function(e,t){GameDataMgr.MJDataMgr.raise;var n=this.detailNode[t].getChildByName("lblsNode").getChildByName("raise").getChildByName("lblraise").getComponent(cc.Label),i=2==GameDataMgr.MJDataMgr.raise?2:0;n.string=""+i},setIcon:function(e,t){var n=GameDataMgr.seats[t];this.detailNode[t].getChildByName("iconNode").getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(n.headimg,n.userId)},setRoleBgByTag:function(e,t){var n=this.detailNode[t].getChildByName("bgNode"),i=-1;i=e?1:0;for(var a=0;a<n.childrenCount;a++){var o=n.children[a];o.active=a==i}},setDanjuScore:function(e,t){var n=this.detailNode[t].getChildByName("lblsNode"),i=n.getChildByName("curScoreNode").getChildByName("tex_add"),a=n.getChildByName("curScoreNode").getChildByName("tex_sub"),o=n.getChildByName("curScoreNode").getChildByName("curScore").getComponent(cc.Label);e>0?(i.active=!0,a.active=!1):0==e?(i.active=!1,a.active=!1):(i.active=!1,a.active=!0),o.string=e<0?-e:e},setNoRaiseScore:function(e,t){var n=this.detailNode[t].getChildByName("lblsNode"),i=n.getChildByName("curNoRaiseScore").getChildByName("tex_add"),a=n.getChildByName("curNoRaiseScore").getChildByName("tex_sub"),o=n.getChildByName("curNoRaiseScore").getChildByName("curScore").getComponent(cc.Label);e>0?(i.active=!0,a.active=!1):0==e?(i.active=!1,a.active=!1):(i.active=!1,a.active=!0),2==GameDataMgr.MJDataMgr.raise&&(e/=2),o.string=e<0?-e:e},settoltalScore:function(e,t){var n=this.detailNode[t].getChildByName("lblsNode"),i=n.getChildByName("accumulateNode").getChildByName("tex_add"),a=n.getChildByName("accumulateNode").getChildByName("tex_sub"),o=n.getChildByName("accumulateNode").getChildByName("totalScore").getComponent(cc.Label);e>0?(i.active=!0,a.active=!1):0==e?(i.active=!1,a.active=!1):(i.active=!1,a.active=!0),o.string=e<0?-e:e},onBtnGameOverContinue:function(e){this.node.active=!1,GameDataMgr.isOver?(this.gameControlSp.setShowGameEnd(!0),GameDataMgr.GameEndReset(),this.gameControlSp.endClear()):(GameDataMgr.reset(),this.gameControlSp.clearAllCards(),this.gameControlSp.initNumber(),this.gameControlSp.setcardNumsShow(!1),Hall_ReqAndRes.readyReq(1))},onBtnGameOverShare:function(e){i.shareCutPicToMate()},onBtnGameOverShare_XL:function(e){a.shareCutPicToMate()},getBannerTitleName:function(e,t){var n=null;return 0==t||2==t?n=dc.ResourceMgr.getOverBanner("My_",e):1==t?n=dc.ResourceMgr.getOverBanner("Right_",e):3==t&&(n=dc.ResourceMgr.getOverBanner("Left_",e)),n}}),cc._RF.pop()},{WechatHelper:"WechatHelper",XLHelper:"XLHelper"}],GameOver_DDZ:[function(e,t,n){"use strict";cc._RF.push(t,"d17a2o0SMhEIbdkrIIsdDZC","GameOver_DDZ");var i=e("WechatHelper");cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,detailNode:[cc.Node],gameControl:cc.Node,shadowNode:cc.Node,btnShare:cc.Node},onLoad:function(){},setController:function(e){this.gameControl=e},setGameOverBg:function(e){var t=this.bgNode,n=e.isEnd,i=t.getChildByName("bg_curOver"),a=t.getChildByName("bg_End");n?(i.active=!1,a.active=!0):(i.active=!0,a.active=!1)},onGameOver:function(e){this.initSeatSide();var t=e.results;dc.GameDataMgr.DDZDataMgr.totalBase;e.spring&&(dc.GameDataMgr.DDZDataMgr.totalBase+=4),this.setGameOverBg(e);for(var n=0;n<t.length;n++){t[n].score=t[n].score||0;var i,a=(n+1)%dc.GameDataMgr.gamePlayerNum;i=t[n].curScore>=0?t[n].curScore==t[a].curScore?2:1:0;var o=t[n];o.winTag=i,this.initSingleData(o,e,n)}this.weichatBtnHide()},countWinners:function(e){console.log("countWinners");for(var t=[],n=e.results,i=0;i<n.length;i++){var a=n[i];t.push(a.score)}var o=t[0];for(i=1;i<t.length;i++)o<t[i]&&(o=t[i],i);var s=[];if(0!=o)for(i=0;i<t.length;i++)o==t[i]&&s.push(i);return s},winnersShow:function(e){for(var t=this.countWinners(e),n=this.detailNode,i=0;i<n.length;i++){(s=n[i].getChildByName("bgNode").getChildByName("endNode")).getChildByName("sprwinner").active=!1}for(var a=0;a<t.length;a++){var o=t[a];for(i=0;i<n.length;i++){var s=n[i].getChildByName("bgNode").getChildByName("endNode");if(o==i)s.getChildByName("sprwinner").active=!0}}},setBaoZhuang:function(e){0==dc.GameDataMgr.maxNumOfGames?this.BZ1(e):this.BZ2(e)},BZ1:function(e){for(var t=e.results,n=this.detailNode,i=0;i<t.length;i++){var a=t[i],o=n[i].getChildByName("bgNode").getChildByName("endNode").getChildByName("sprbaozhuan");a.score<=-40?o.active=!0:o.active=!1}},BZ2:function(e){e.results;for(var t=this.detailNode,n=this.countBZByGame10(e),i=0;i<t.length;i++){(s=t[i].getChildByName("bgNode").getChildByName("endNode")).getChildByName("sprbaozhuan").active=!1}if(n.length>0)for(var a=0;a<n.length;a++){var o=n[a];for(i=0;i<t.length;i++){var s=t[i].getChildByName("bgNode").getChildByName("endNode");if(o==i)s.getChildByName("sprbaozhuan").active=!0}}},countBZByGame10:function(e){console.log("countWinners");for(var t=[],n=e.results,i=0;i<n.length;i++){var a=n[i];t.push(a.score)}var o=t[0];for(i=1;i<t.length;i++)o>t[i]&&(o=t[i],i);var s=[];if(0!=o)for(i=0;i<t.length;i++)o==t[i]&&s.push(i);return s},setLittleWinner:function(){for(var e=0;e<this.detailNode.length;e++){var t=this.detailNode[e].getChildByName("bgNode").getChildByName("endNode"),n=t.getChildByName("sprwinner"),i=t.getChildByName("sprbaozhuan"),a=t.getChildByName("heheNode");0==n.active&&0==i.active?a.active=!0:a.active=!1}},countIsDissolve:function(e){var t=!0;if(0==dc.GameDataMgr.maxNumOfGames)for(var n=e.results,i=0;i<n.length;i++){if(n[i].score<=-40){t=!1;break}}else t=!(dc.GameDataMgr.numofgames>=6);return t},hideAlls:function(){for(var e=this.detailNode,t=0;t<e.length;t++){var n=e[t].getChildByName("bgNode").getChildByName("endNode");n.getChildByName("sprwinner").active=!1,n.getChildByName("sprbaozhuan").active=!1,n.getChildByName("heheNode").active=!0}},initSingleData:function(e,t,n){var i=dc.GameDataMgr.seats[n],a=(e.holds,this.detailNode[n]),o=(dc.GameDataMgr.getLocalIndex(n),a.getChildByName("bgNode")),s=o.getChildByName("curOverNode"),r=o.getChildByName("endNode"),c=e.winTag;if(t.isEnd){s.active=!1,r.active=!0,this.winnersShow(t),this.setBaoZhuang(t),this.setLittleWinner();var l=this.countIsDissolve(t);console.log("isDissolve:"+l),l&&this.hideAlls()}else s.active=!0,r.active=!1;this.setRoleBgByTag(c,n),this.getResultNodeName(c,n).getChildByName("name").getComponent(cc.Label).string=i.name;var h=t.spring;this.setSpring(h,c,n),this.setRobDZ(dc.GameDataMgr.DDZDataMgr.callDZTimes,c,n);var d=dc.GameDataMgr.DDZDataMgr.getTopBase(dc.GameDataMgr.DDZDataMgr.top);this.setDipai(d,c,n);var u=t.bomb;this.setBomb(u,t.bombBase,c,n),this.setIcon(e,c,n);var g=e.score;this.settoltalScore(g,c,n),this.setLabelsPos(c,n),this.setDanjuScore(e.curScore,c,n),this.setDZ(c,n)},setDZ:function(e,t){var n=this.getResultNodeName(e,t).getChildByName("tex_banker");t==dc.GameDataMgr.button?n.active=!0:n.active=!1},setDanjuScore:function(e,t,n){var i=this.getResultNodeName(t,n).getChildByName("lblsNode"),a=i.getChildByName("curScoreNode").getChildByName("tex_add"),o=i.getChildByName("curScoreNode").getChildByName("tex_sub"),s=i.getChildByName("curScoreNode").getChildByName("curScore").getComponent(cc.Label);e>0?(a.active=!1,o.active=!1):0==e?(a.active=!1,o.active=!1):(a.active=!1,o.active=!0),s.string=e<0?-e:e},settoltalScore:function(e,t,n){var i=this.getResultNodeName(t,n).getChildByName("lblsNode"),a=i.getChildByName("accumulateNode").getChildByName("tex_add"),o=i.getChildByName("accumulateNode").getChildByName("tex_sub"),s=i.getChildByName("accumulateNode").getChildByName("totalScore").getComponent(cc.Label);e>0?(a.active=!0,o.active=!1):0==e?(a.active=!1,o.active=!1):(a.active=!1,o.active=!0),s.string=e<0?-e:e},setLabelsPos:function(e,t){var n,i=this.detailNode[t].getChildByName("bgNode");n=e?new cc.Vec2(0,3):new cc.Vec2(0,0),i.x=n.x,i.y=n.y},setRobDZ:function(e,t,n){var i=this.getResultNodeName(t,n).getChildByName("lblsNode").getChildByName("robDZ"),a=i.getChildByName("front").getComponent(cc.Label),o=i.getChildByName("base").getComponent(cc.Label);a.string=""+e,o.string=""+2*e},setDipai:function(e,t,n){var i=this.getResultNodeName(t,n).getChildByName("lblsNode").getChildByName("dipai"),a=i.getChildByName("frontNode"),o=a.getChildByName("you"),s=a.getChildByName("wu"),r=i.getChildByName("base").getComponent(cc.Label);e>0?(o.active=!0,s.active=!1,r.string=""+e):(o.active=!1,s.active=!0,r.string="0")},setBomb:function(e,t,n,i){var a=this.getResultNodeName(n,i).getChildByName("lblsNode").getChildByName("bomb"),o=a.getChildByName("front").getComponent(cc.Label),s=a.getChildByName("base").getComponent(cc.Label);o.string=""+e,s.string=""+t},setSpring:function(e,t,n){var i=this.getResultNodeName(t,n).getChildByName("lblsNode").getChildByName("spring"),a=i.getChildByName("base").getComponent(cc.Label),o=i.getChildByName("frontNode"),s=o.getChildByName("you"),r=o.getChildByName("wu");e?(s.active=!0,r.active=!1,a.string="4"):(s.active=!1,r.active=!0,a.string="0")},setRoleBgByTag:function(e,t){for(var n=this.detailNode[t],i=n.getChildByName("bgNode").getChildByName("curOverNode"),a=e,o=0;o<i.childrenCount;o++){var s=i.children[o];s.active=o==a}var r=n.getChildByName("results"),c=r.getChildByName("winNode"),l=r.getChildByName("failureNode");1==e?(c.active=!0,l.active=!1):(c.active=!1,l.active=!0)},getResultNodeName:function(e,t){var n=this.detailNode[t].getChildByName("results"),i=n.getChildByName("winNode"),a=n.getChildByName("failureNode");return 1==e?i:a},stopGuangAnimation:function(){for(var e=0;e<this.detailNode.length;e++){var t=this.detailNode[e].getChildByName("bgNode").getChildByName("bg1").getChildByName("guangEffect").getComponent(cc.Animation);t.getAnimationState()&&t.stop()}},setCurScore:function(){var e=this.detailNode[seatIndex].getChildByName("lblsNode"),t=e.getChildByName("curScoreNode").getChildByName("tex_add"),n=e.getChildByName("curScoreNode").getChildByName("tex_sub"),i=e.getChildByName("curScoreNode").getChildByName("curScore").getComponent(cc.Label);score>0?(t.active=!0,n.active=!1):0==score?(t.active=!1,n.active=!1):(t.active=!1,n.active=!0),score<0?i.string=-score:i.string=score},setIcon:function(e,t,n){var i=dc.GameDataMgr.seats[n];this.getResultNodeName(t,n).getChildByName("iconNode").getChildByName("icon").getComponent("ImageLoader").setUserIDBySeat(i.userId)},setBanner:function(e,t){var n=dc.GameDataMgr.getLocalIndex(t),i=dc.GameDataMgr.MJDataMgr.getLocalSide(n),a=this.seatNode.children[i].getChildByName("titelNode").getChildByName("tex_tite").getComponent(cc.Sprite);if(e.win)if(e.code>=-1){a.node.parent.active=!0;var o=this.getBannerTitleName(e.code,i);a.spriteFrame=o}else a.node.parent.active=!1;else a.node.parent.active=!1},initSeatSide:function(){var e,t=dc.GameDataMgr.gamePlayerNum;4==t?e=this.node.getChildByName("4MJPos"):2==t&&(e=this.node.getChildByName("2MJPos"));for(var n=0;n<t;n++){var i=this.detailNode[n],a=e.children[n];i.x=a.x}},weichatBtnHide:function(){var e=dc.anysdkMgr.isWeichatInstall();this.btnShare.active=!!e},onBtnGameOverContinue:function(e){this.node.active=!1;var t=this.gameControl.getComponent("DDZ_Controller");t.setCardLayerShow(!1),t.setOperLayerShow(!1),t.setRobDZLayerShow(!1),dc.GameDataMgr.isOver?(dc.GameDataMgr.GameEndReset(),cc.director.loadScene("Hall")):(dc.GameDataMgr.DDZReset(),t.clearScene(),dc.net.send("ready"))},onBtnGameOverShare:function(e){i.shareCutPicToMate()},onDestroy:function(){}}),cc._RF.pop()},{WechatHelper:"WechatHelper"}],GameOver_TDH:[function(e,t,n){"use strict";cc._RF.push(t,"8a2aaJNp+ZIuaBqeeRl+q+6","GameOver_TDH"),cc.Class({extends:e("GameOver_2MJ"),properties:{overItem_4:cc.Prefab,overItem_3:cc.Prefab,bgNode:cc.Node},start:function(){},onEnable:function(){},onGameOver:function(e){this.node.active=!0,this.usersNode.active=!0,this.btnNode.active=!0,this.bgNode.active=!0,this.hideBanner();var t=e.results;this.usersNode.removeAllChildren();for(var n=t.length,i=0;i<t.length;i++){var a;4==n?a=cc.instantiate(this.overItem_4):3==n&&(a=cc.instantiate(this.overItem_3)),a.active=!0,this.usersNode.addChild(a),console.log("itemjiesuanditu:",a.width,a.height),console.log("itemjiesuandituScale:",a.scaleX,a.scaleY),a.setScale(1,1),console.log("afteritemjiesuanditu:",a.width,a.height),console.log("afteritemjiesuandituScale:",a.scaleX,a.scaleY),t[i].code=t[i].code||0;var o=t[i];a.getComponent("OverItem_TDH").initSingleData(o,i,e),this.initSingleData(o,i,e)}this.initTitle(),this.weichatBtnHide(),this.XLInstallBtnHide(),this.hideObserveBtn()},initTitle:function(){var e=GameDataMgr.conf.wanfa%100%10,t=this.bgNode.getChildByName("scoreMM");1==e?t.active=!1:2==e&&(t.active=!0)},initSingleData:function(e,t,n){},onGameHu:function(e){this.node.active=!0,this.usersNode.active=!1,this.btnNode.active=!1,this.bgNode.active=!1;var t=GameDataMgr.getSeatIndexByID(e.userId),n=GameDataMgr.getLocalSide(t),i=this.seatNode.children[n];i.active=!0;var a=i.getChildByName("titelNode").getChildByName("titelNode");if(a.removeAllChildren(),e.code>=-1){if(4==GameDataMgr.conf.gametype){a.parent.active=!0;var o=e.code%100;if(10==o){var s=this.getBannerTitleName_TDH("qdz",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r)}else if(20==o){s=this.getBannerTitleName_TDH("qys",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r)}else if(21==o){s=this.getBannerTitleName_TDH("qys",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r);s=this.getBannerTitleName_TDH("qdz",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r)}else if(22==o){s=this.getBannerTitleName_TDH("qys",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r);s=this.getBannerTitleName_TDH("ddh",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r)}else if(23==o){s=this.getBannerTitleName_TDH("qys",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r);s=this.getBannerTitleName_TDH("ddc",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r)}else if(30==o){s=this.getBannerTitleName_TDH("ddh",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r)}else if(40==o){s=this.getBannerTitleName_TDH("ddc",0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r)}var r,c=parseInt(e.code/1e3);s=this.getBannerTitleName_TDH(c,0);(r=new cc.Node).addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=s,a.addChild(r)}}else a.parent.active=!1},getBannerTitleName_TDH:function(e,t){var n=null;return 0==t||2==t?n=dc.ResourceMgr.getOverBanner_TDH("My_",e):1==t?n=dc.ResourceMgr.getOverBanner_TDH("Right_",e):3==t&&(n=dc.ResourceMgr.getOverBanner_TDH("Left_",e)),n}}),cc._RF.pop()},{GameOver_2MJ:"GameOver_2MJ"}],GameTypeConf:[function(e,t,n){"use strict";cc._RF.push(t,"34acdSKIFVJ3JhmKrY85M5d","GameTypeConf"),n.GAME_HZMJ4P_FK=0,n.GAME_TZ_FK=2,n.GAME_HZMJ2P_FK=3,n.GAME_DDZ_FK=4,n.TABLE_MJ4P_0=1400,n.TABLE_MJ4P_1=1401,n.TABLE_MJ2P_0=1200,n.TABLE_MJ2P_1=1201,n.BIGWINNER_MJ2="mj2",n.BIGWINNER_MJ4="mj4";var i={mj2_hz:32,mj4_hz:34,dbuckle4_hz:24,mj_tdh3:43,mj_tdh4:44};n.historyServerGameType=i,cc._RF.pop()},{}],Gamesetup_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"b952efhwK9Gj5M9jQFQ9oFC","Gamesetup_2MJ");var i=e("codeConfig");cc.Class({extends:cc.Component,properties:{_endTime:-1,_extraInfo:"",noticeLabel:cc.Label,setupNode:cc.Node,dissolveNode:cc.Node,btnDissoveNode:cc.Node,btnOberExit:cc.Node,soundSetupNode:cc.Node,_interfaceType:0,pingLayer:cc.Node,clickInterval:0,ruleNode:cc.Node},onLoad:function(){this.dissolveNode.active=!1,this.btnDissoveNode.active=!0,this.soundSetupNode.active=!0,this.changeInterfaceByType(this._interfaceType)},onDisable:function(){this._interfaceType=0,this.changeInterfaceByType(this._interfaceType)},changeInterfaceByType:function(e){var t=this.node.getChildByName("btnClose");if(0==e){if(GameDataMgr.isObserver)this.btnOberExit.active=!0,this.btnDissoveNode.active=!1;else this.btnOberExit.active=!1,GameDataMgr.conf.createtype==i.createRoomType.hallgame?this.btnDissoveNode.active=!1:this.btnDissoveNode.active=!0;this.soundSetupNode.active=!0,this.dissolveNode.active=!1,this.setupNode.active=!1,t.active=!0}else 1==e&&(this.setupNode.active=!0,this.dissolveNode.active=!0,this.btnOberExit.active=!1,this.btnDissoveNode.active=!1,this.soundSetupNode.active=!1,t.active=!1)},updateDissolvenotice:function(e){var t=e.users,n=!0;for(var i in t)if(0==t[i].agree){n=!1;break}if(n)for(var i in this._interfaceType=1,this.changeInterfaceByType(this._interfaceType),this._endTime=Date.now()/1e3+e.time,this._extraInfo="",e.users){var a=e.users[i],o=GameDataMgr.getSeatIndexByID(a.userId),s=GameDataMgr.seats[o].name;a.agree>0?this._extraInfo+="\n[\u5df2\u540c\u610f] "+s:this._extraInfo+="\n[\u5f85\u786e\u8ba4] "+s}else this.DissolveCancel()},DissolveCancel:function(){this._interfaceType=0,this.changeInterfaceByType(this._interfaceType)},open:function(){this.changeInterfaceByType(this._interfaceType),this.node.active=!0},onBtnDissoveInterfaceOpen:function(){},onBtnClose:function(){this.setupNode.active=!1},onBtnDissolve:function(e){for(var t=0;t<GameDataMgr.seats.length;t++){GameDataMgr.seats[t].userId&&0}var n=GameDataMgr.gamePlayerNum;n==n&&GameDataMgr.gameIndex>0?Hall_ReqAndRes.dissolveAgree(1):GameDataMgr.conf.creator==UserMgr.userId?Hall_ReqAndRes.dissolveRequest():Hall_ReqAndRes.exitRequest(null,GameDataMgr.conf.createtype)},btnAgree:function(){Hall_ReqAndRes.dissolveAgree(1)},btnRefuse:function(){Hall_ReqAndRes.dissolveAgree(0)},onBtnPingLayer:function(){GameDataMgr.clickTimes++,this.clickInterval=0,GameDataMgr.clickTimes>=5&&(this.pingLayer.active=!0,GameDataMgr.clickTimes=0)},setPingNode:function(e){this.pingLayer=e},onBtnRule:function(e){this.ruleNode.active=!0;var t=this.ruleNode.getChildByName("scrollView_1"),n=this.ruleNode.getChildByName("scrollView_2"),i=this.ruleNode.getChildByName("scrollView_mj4p"),a=GameDataMgr.conf;4==a.peoplemax?(i.active=!0,t.active=!1,n.active=!1):(i.active=!1,0==a.gameNums?(t.active=!0,n.active=!1):(t.active=!1,n.active=!0))},onBntCloseRule:function(e){this.ruleNode.active=!1},update:function(e){if(this._endTime>0){var t=this._endTime-Date.now()/1e3;t<0&&(this._endTime=-1);var n=Math.floor(t/60),i=Math.ceil(t-60*n),a="";n>0&&(a+=n+"\u5206"),this.noticeLabel.string=a+i+"\u79d2\u540e\u623f\u95f4\u5c06\u81ea\u52a8\u89e3\u6563"+this._extraInfo}this.clickInterval>180&&(GameDataMgr.clickTimes=0,this.clickInterval=0),this.clickInterval++}}),cc._RF.pop()},{codeConfig:"codeConfig"}],Gamesetup_DB:[function(e,t,n){"use strict";cc._RF.push(t,"8dd48bQvp9Me4Upj2scS2wS","Gamesetup_DB"),cc.Class({extends:cc.Component,properties:{_endTime:-1,_extraInfo:"",noticeLabel:cc.Label,setupNode:cc.Node,dissolveNode:cc.Node,btnDissoveNode:cc.Node,btnOberExit:cc.Node,soundSetupNode:cc.Node,_interfaceType:0,pingLayer:cc.Node,clickInterval:0,ruleNode:cc.Node},onLoad:function(){this.dissolveNode.active=!1,this.btnDissoveNode.active=!0,this.soundSetupNode.active=!0,this.changeInterfaceByType(this._interfaceType)},onDisable:function(){this._interfaceType=0,this.changeInterfaceByType(this._interfaceType)},changeInterfaceByType:function(e){var t=this.node.getChildByName("btnClose");0==e?(GameDataMgr.isObserver?(this.btnOberExit.active=!0,this.btnDissoveNode.active=!1):(this.btnOberExit.active=!1,this.btnDissoveNode.active=!0),this.soundSetupNode.active=!0,this.dissolveNode.active=!1,this.setupNode.active=!1,t.active=!0):1==e&&(this.setupNode.active=!0,this.dissolveNode.active=!0,this.btnOberExit.active=!1,this.btnDissoveNode.active=!1,this.soundSetupNode.active=!1,t.active=!1)},updateDissolvenotice:function(e){var t=e.users,n=!0;for(var i in t)if(0==t[i].agree){n=!1;break}if(n)for(var i in this._interfaceType=1,this.changeInterfaceByType(this._interfaceType),this._endTime=Date.now()/1e3+e.time,this._extraInfo="",e.users){var a=e.users[i],o=GameDataMgr.getSeatIndexByID(a.userId),s=GameDataMgr.seats[o].name;a.agree>0?this._extraInfo+="\n[\u5df2\u540c\u610f] "+s:this._extraInfo+="\n[\u5f85\u786e\u8ba4] "+s}else this.DissolveCancel()},DissolveCancel:function(){this._interfaceType=0,this.changeInterfaceByType(this._interfaceType)},open:function(){this.changeInterfaceByType(this._interfaceType),this.node.active=!0},onBtnDissoveInterfaceOpen:function(){},onBtnClose:function(){this.setupNode.active=!1},onBtnDissolve:function(e){for(var t=0;t<GameDataMgr.seats.length;t++){GameDataMgr.seats[t].userId&&0}var n=GameDataMgr.gamePlayerNum;n==n&&GameDataMgr.gameIndex>0?Hall_ReqAndRes.dissolveAgree(1):GameDataMgr.conf.creator==UserMgr.userId?Hall_ReqAndRes.dissolveRequest():Hall_ReqAndRes.exitRequest()},btnAgree:function(){Hall_ReqAndRes.dissolveAgree(1)},btnRefuse:function(){Hall_ReqAndRes.dissolveAgree(0)},onBtnPingLayer:function(){GameDataMgr.clickTimes++,this.clickInterval=0,GameDataMgr.clickTimes>=5&&(this.pingLayer.active=!0,GameDataMgr.clickTimes=0)},setPingNode:function(e){this.pingLayer=e},onBtnRule:function(e){this.ruleNode.active=!0},onBntCloseRule:function(e){this.ruleNode.active=!1},update:function(e){if(this._endTime>0){var t=this._endTime-Date.now()/1e3;t<0&&(this._endTime=-1);var n=Math.floor(t/60),i=Math.ceil(t-60*n),a="";n>0&&(a+=n+"\u5206"),this.noticeLabel.string=a+i+"\u79d2\u540e\u623f\u95f4\u5c06\u81ea\u52a8\u89e3\u6563"+this._extraInfo}this.clickInterval>180&&(GameDataMgr.clickTimes=0,this.clickInterval=0),this.clickInterval++}}),cc._RF.pop()},{}],Gamesetup_TDH:[function(e,t,n){"use strict";cc._RF.push(t,"66867t5QnJDEa7RkmtluEi+","Gamesetup_TDH"),cc.Class({extends:e("Gamesetup_2MJ"),properties:{},start:function(){},onBtnRule:function(e){this.ruleNode.active=!0;var t=this.ruleNode.getChildByName("scrollView_wumaima"),n=this.ruleNode.getChildByName("scrollView_maima"),i=GameDataMgr.conf.wanfa,a=(parseInt(i/100),i%100%10);1==a?(t.active=!0,n.active=!1):2==a&&(t.active=!1,n.active=!0)}}),cc._RF.pop()},{Gamesetup_2MJ:"Gamesetup_2MJ"}],Gift:[function(e,t,n){"use strict";cc._RF.push(t,"2058csO/9pMmbztbh4YA46i","Gift"),cc.Class({extends:cc.Component,properties:{IDEditBox:cc.EditBox,comfirmSelectNode:cc.Node,GemsNum:cc.Label,btnGift:cc.Node},onLoad:function(){},onSureClick:function(e){var t=this.IDEditBox.string;if(cc.log("Buy Gift:"+t),""!=t){var n=!0,i=Number(t);if(n=!isNaN(i),console.log(n),!n)return console.log("\u8f93\u5165\u5b57\u7b26\u4e0d\u5408\u6cd5:"),void publicWindow.alert.show("\u63d0\u793a","\u8f93\u5165\u5b57\u7b26\u4e0d\u5408\u6cd5\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",null,!1);var a=dc.userMgr,o={userid:a.userId,token:a.token,ownerid:i};dc.net.http_proto.sendProtoToHS("setMyOwner",o,function(e,t){cc.log("CallBack"),cc.log(t),e?500==e?dc.userMgr.ReGetToken():(this.node.active=!1,dc.publicWindow.alert.show("\u63d0\u793a",t,!1)):(this.node.active=!1,this.playAniGetFK(2),this.refreshInfo())}.bind(this))}else publicWindow.alert.show("\u63d0\u793a","\u63a8\u5e7f\u4ebaID\u4e0d\u80fd\u4e3a\u7a7a",null,!1)},playAniGetFK:function(e){2==dc.SceneType&&cc.find("Canvas").getComponent("HallView").playGetFKAni(e)},refreshInfo:function(){var e={token:dc.userMgr.token};dc.net.http_proto.sendProtoToHS("get_user_status",e,function(e,t){console.log("refresh gems:"+t.gems),0==e||null==e?t.gems:500==e&&dc.userMgr.ReGetToken()}.bind(this))},onCloseGift:function(e){this.node.active=!1,this.comfirmSelectNode.active=!0}}),cc._RF.pop()},{}],GroupDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"47411Fbws9FHYz9KXcxbUxB","GroupDataMgr"),cc.Class({extends:cc.Component,properties:{clubID:null,ownerID:null,memberNum:null,groupName:"",info:"",notice:"",requests:[],inviteList:[],userInfoMap:[],clubInfoMap:[],tableMap:[],clubInfos:[],tablesInfo_2mj:[],tablesInfo_4mj:[],GroupLayerSp:null},onLoad:function(){},start:function(){},init:function(){},setGroupLayerSp:function(e){this.GroupLayerSp=e},getGroupLayerSp:function(){return this.GroupLayerSp},refreshInfo:function(e,t){var n=[];n.push(e),Hall_ReqAndRes.getUsersInfo(n,function(e){var n=GroupDataMgr.userInfoMap;for(var i in e)n[i]=e[i],n[i].userId=parseInt(i);var a=n[UserMgr.userId].gems;UIMgr.getPageScript(UIMgr.HallPage).refreshGems(a),t&&t(info)}.bind(this))},clearFKTipsSchedule:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},startFKTipsSchedule:function(){this.clearFKTipsSchedule(),this._timer=setInterval(this.getFKTips.bind(this),18e4)},getFKTips:function(){var e=[];e.push(UserMgr.userId),Hall_ReqAndRes.getUsersInfo(e,function(e){var t=GroupDataMgr.userInfoMap;for(var n in e)t[n]=e[n],t[n].userId=parseInt(n);var i=t[UserMgr.userId].gems,a=t[UserMgr.userId].agentLevel;GroupDataMgr.setTips(i,a),UserMgr.gems=i,UserMgr.agentLevel=a;var o=UIMgr.getPageScript(UIMgr.HallPage);o&&o.refreshGems(i)}.bind(this))},setTips:function(e,t){if(e>=50&&this.setTipsLocal(!0),t>=2&&e<50){var n=new Date,i=n.getFullYear(),a=n.getMonth()+1;a=a>=10?a:"0"+a;var o=n.getDate();o=o>=10?o:"0"+o;var s="FKTips_"+UserMgr.userId+"_"+i+a+o,r=cc.sys.localStorage.getItem(s);if(null==r||"true"==r){publicWindow.alert_Tips.show("","\u623f\u5361\u4f4e\u4e8e50\u5f20\uff0c\u8bf7\u53ca\u65f6\u5145\u503c",function(){cc.sys.localStorage.setItem(s,!0)},function(){cc.sys.localStorage.setItem(s,!1)})}}},setTipsLocal:function(e){var t=new Date,n=t.getFullYear(),i=t.getMonth()+1;i=i>=10?i:"0"+i;var a=t.getDate();a=a>=10?a:"0"+a;var o="FKTips_"+UserMgr.userId+"_"+n+i+a;e?cc.sys.localStorage.removeItem(o):cc.sys.localStorage.setItem(o,!1)},getUsersInfo:function(e,t){e.length>0?Hall_ReqAndRes.getUsersInfo(e,function(e){var n=GroupDataMgr.userInfoMap;for(var i in e)n[i]=e[i],n[i].userId=parseInt(i);t&&t(e)}.bind(this)):t&&t()},getClubsBaseInfo:function(e,t){e&&e.length>0&&Hall_ReqAndRes.getClubsBaseInfo(e,function(e){t&&t(e)}.bind(this))},getClubsBaseInfo2:function(e,t){for(var n=[],i=0;i<e.length;i++)this.clubInfoMap[e[i]]||n.push(e[i]);var a=GroupDataMgr.clubInfoMap;n&&n.length>0?Hall_ReqAndRes.getClubsBaseInfo(n,function(e){for(var n in e)a[n]=e[n],a[n].clubId=parseInt(n);t&&t(e)}.bind(this)):t()},setClubInfo:function(e){GroupDataMgr.clubID=e.clubId,GroupDataMgr.ownerID=e.ownerId,GroupDataMgr.groupName=e.name||"",GroupDataMgr.info=e.introduce||"",GroupDataMgr.clubInfos=e.infos||[],GroupDataMgr.requests=e.requests||[],GroupDataMgr.notice=e.notice||"",GroupDataMgr.setTableMap(e.tables),GroupDataMgr.tables=e.tables,GroupDataMgr.opening=e.opening,GroupDataMgr.open_time=e.open_time,GroupDataMgr.close_time=e.close_time,GroupDataMgr.gametype=e.gametype,GroupDataMgr.type=e.type,e.members.unshift(e.ownerId),this.members=GroupDataMgr.getSingleNumbers(e.members||[]),GroupDataMgr.memberNum=this.members},setTableMap:function(e){this.tableMap=[];for(var t=0;t<e.length;t++){var n=e[t];this.tableMap[n.roomId]=n}},delClubRoomId:function(e){delete GroupDataMgr.tableMap[e]},addClubRoom:function(e){var t=GroupDataMgr.tableMap;t[e.roomId]=e;var n=t[e.roomId].seats;if(!n){var i=t[e.roomId].type,a=parseInt(i/100)%10;n=[];for(var o=0;o<a;o++){var s={userId:0};n.push(s)}}t[e.roomId].seats=n},setClubEnterInfo:function(e){for(var t=GroupDataMgr.tableMap[e.roomId].seats,n=e.seat.userId,i=!1,a=0,o=0;o<t.length;o++)if(t[o].userId==n){a=o,i=!0;break}if(i)t[a]=e.seat;else for(o=0;o<t.length;o++)if(!t[o].userId){t[o]=e.seat;break}},setClubEixtInfo:function(e){for(var t=GroupDataMgr.tableMap[e.roomId].seats,n=0;n<t.length;n++)if(t[n].userId==e.userId){t[n].userId=0;break}},setClubOnlineInfo:function(e){for(var t=GroupDataMgr.tableMap[e.roomId].seats,n=e.userId,i=0;i<t.length;i++)n==t[i].userId&&(t[i].online=e.online)},setClubReadyInfo:function(e){for(var t=GroupDataMgr.tableMap[e.roomId].seats,n=e.userId,i=0;i<t.length;i++)n==t[i].userId&&(t[i].ready=e.ready)},isOwner:function(){var e;return UserMgr.userId==GroupDataMgr.ownerID&&(e=!0),e},isOwnClub:function(e){var t=UserMgr.myClubs;return!!t&&t.indexOf(e)>=0},initClubList:function(){var e=UserMgr.clubs;GroupDataMgr.getClubsBaseInfo2(e,function(t){for(var n=GroupDataMgr.clubInfoMap,i=0;i<e.length;i++)if(0==n[e[i]].type){e.splice(i,1);i--}}.bind(this))},isHasClub:function(e){var t=UserMgr.myClubs,n=UserMgr.clubs;if(t&&UserMgr.myClubs.indexOf(e)>=0)return!0;if(n&&UserMgr.clubs.indexOf(e)>=0)return!0;return!1},addRequsterUserId:function(e){e&&(this.requests.indexOf(e)<0&&this.requests.push(e))},addInviteClubID:function(e){e&&(this.inviteList.indexOf(e)<0&&GroupDataMgr.inviteList.push(e))},dealMember:function(e){if(e){var t=this.memberNum.indexOf(e);t>=0&&this.memberNum.splice(t,1)}},addMember:function(e){e&&(this.memberNum.indexOf(e)<0&&this.memberNum.push(e))},addOtherClub:function(e){UserMgr.clubs&&e&&(UserMgr.clubs.indexOf(e)<0&&UserMgr.clubs.push(e))},addMyClub:function(e){UserMgr.myClubs&&e&&(UserMgr.myClubs.indexOf(e)<0&&UserMgr.myClubs.push(e))},delOtherClub:function(e){if(UserMgr.clubs&&e){var t=UserMgr.clubs.indexOf(e);t>=0&&UserMgr.clubs.splice(t,1)}},dealClubID:function(e){var t="clubID_"+UserMgr.userId;cc.sys.localStorage.removeItem(t);if(null!=e){var n;if(UserMgr.myClubs)(n=UserMgr.myClubs.indexOf(e))>=0&&UserMgr.myClubs.splice(n,1);if(UserMgr.clubs)(n=UserMgr.clubs.indexOf(e))>=0&&UserMgr.clubs.splice(n,1),this.clubID=null}},getClubNum:function(){var e=0;return e+=UserMgr.myClubs?UserMgr.myClubs.length:0,e+=UserMgr.clubs?UserMgr.clubs.length:0},getOtherClubID:function(){var e=[],t=UserMgr.myClubs,n=UserMgr.clubs;if(t)for(var i=0;i<t.length;i++)t[i]!=this.clubID&&e.push(t[i]);if(n)for(i=0;i<n.length;i++)n[i]!=this.clubID&&e.push(n[i]);return e},getUsersActiveTime:function(e){var t=(new Date).getTime(),n=new Date(e).getTime(),i=parseInt((t-n)/1e3),a="";if(i<60)a=i+"\u79d2\u524d";else if(i<3600){a=parseInt(i/60)+"\u5206\u949f\u524d"}else if(i<86400){a=parseInt(i/60/60)+"\u5c0f\u65f6\u524d"}else{a=parseInt(i/60/60/24)+"\u5929\u524d"}return a},IsTableSeated:function(e){if(!e)return!1;for(var t=GroupDataMgr.tableMap,n=t[e]?t[e]:[],i=0;i<n.length;i++)if(0!=n[i])return!0;return!1},getSingleNumbers:function(e){if(!e||0==e.length)return e;for(var t={},n=[],i=0;i<e.length;i++)t[e[i]]||(t[e[i]]=0),0==t[e[i]]&&n.push(e[i]),t[e[i]]++;return n},reset:function(){this.clubInfos=[],this.tableMap=[],this.tableMap={},this.tables=[]},clubDynamicNotify:function(e){var t=GroupDataMgr.isOwner();e.userId==UserMgr.userId||(t&&GroupDataMgr.clubInfos.push(e.info),1==e.state?GroupDataMgr.addMember(e.userId):2==e.state&&GroupDataMgr.dealMember(e.userId))},clubInfoModifyNotify:function(e){1==e.type?GroupDataMgr.groupName=e.name:2==e.type?GroupDataMgr.info=e.introduce:3==e.type?GroupDataMgr.notice=e.notice:4==e.type?(GroupDataMgr.open_time=e.open_time,GroupDataMgr.close_time=e.close_time):5==e.type?GroupDataMgr.opening=e.opening:100==e.type&&(e.ownerId==UserMgr.userId?this.dealClubID(e.clubId):this.clubID==e.clubId&&(this.ownerID=e.ownerId))}}),cc._RF.pop()},{}],GroupSetTime:[function(e,t,n){"use strict";cc._RF.push(t,"b1e1fLUbTtA3J76sm89JZkO","GroupSetTime"),cc.Class({extends:cc.Component,properties:{setNode:cc.Node,showNode:cc.Node,lblShowTime_hour:cc.Label,lblShowTime_min:cc.Label,ebox_startHour:cc.EditBox,ebox_startMin:cc.EditBox,ebox_endHour:cc.EditBox,ebox_endMin:cc.EditBox},start:function(){},initShowOpenTime:function(){var e=GroupDataMgr.open_time,t=(GroupDataMgr.close_time,e.split(":")),n=t[0],i=t[1];n=parseInt(n)<10?"0"+parseInt(n):n,i=parseInt(i)<10?"0"+parseInt(i):i,this.lblShowTime_hour.string=n,this.lblShowTime_min.string=i},initFixTime:function(){var e=GroupDataMgr.open_time,t=GroupDataMgr.close_time,n=e.split(":"),i=n[0],a=n[1];i=parseInt(i)<10?"0"+parseInt(i):i,a=parseInt(a)<10?"0"+parseInt(a):a;var o=t.split(":"),s=o[0],r=o[1];s=parseInt(s)<10?"0"+parseInt(s):s,r=parseInt(r)<10?"0"+parseInt(r):r,this.ebox_startHour.string=s,this.ebox_startMin.string=r,this.ebox_endHour.string=i,this.ebox_endMin.string=a},setShowNode:function(e){this.showNode.active=e},setFixNode:function(e){this.setNode.active=e},isAllNum:function(e){var t=/^[0-9]+$/.test(e);return!!t},isCorrectHour:function(e){if(!this.isAllNum(e))return!1;var t=parseInt(e);return t>=0&&t<24},isCorrectMin:function(e){if(!this.isAllNum(e))return!1;var t=parseInt(e);return t>=0&&t<60},OnBtnSure:function(){var e=this.ebox_startHour.string,t=this.ebox_startMin.string,n=this.ebox_endHour.string,i=this.ebox_endMin.string,a=this.isCorrectHour(e),o=this.isCorrectMin(t),s=this.isCorrectHour(n),r=this.isCorrectMin(i);if(!(a&&o&&s&&r))return publicWindow.alert.show("","\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"),!1;var c=(parseInt(e)<10?"0"+parseInt(e):e)+":"+(parseInt(t)<10?"0"+parseInt(t):t),l=(parseInt(n)<10?"0"+parseInt(n):n)+":"+(parseInt(i)<10?"0"+parseInt(i):i),h={};h.close_time=c,h.open_time=l,Hall_ReqAndRes.modifyClubInfo(GroupDataMgr.clubID,4,h,function(e){console.log("opensss",e),e.code||(publicWindow.alert.show("","\u4fee\u6539\u6210\u529f"),this.onBtnCloseFixNode())}.bind(this))},onBtnCloseFixNode:function(){this.setFixNode(!1),GroupDataMgr.getGroupLayerSp()._groupMgrNode.getComponent("gameGroupMgr").setGroupOpenToggleCheck(!0)},onBtnCloseClub:function(){Hall_ReqAndRes.modifyClubInfo(GroupDataMgr.clubID,5,0,function(e){console.log("opensss",e)})}}),cc._RF.pop()},{}],GroupUserInfo:[function(e,t,n){"use strict";cc._RF.push(t,"738d6DSklZD0brMUlXKeT8o","GroupUserInfo"),cc.Class({extends:cc.Component,properties:{icon:cc.Node,lblUserId:cc.Label,lblName:cc.Label,lblSign:cc.Label,moveNode:cc.Node,pos0Node:cc.Node,pos1Node:cc.Node},start:function(){},initData:function(e){this.setIcon(e.headImg,e.userId),this.setUserId(e.userId),this.setName(e.name),this.setSign(e.sign)},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t)},setUserId:function(e){this.lblUserId.string="ID:"+e},setName:function(e){this.lblName.string=e},setSign:function(e){this.lblSign.string=e},setMoveShow:function(e){e?this.moveAct(2):this.moveAct(1)},moveAct:function(e){if(!this._isMoving){var t;1==e?(this.setMoveNodePos0(),this.pos0Node.position,t=this.pos1Node.position):2==e&&(this.setMoveNodePos1(),this.pos1Node.position,t=this.pos0Node.position),this._isMoving=!0;var n=cc.sequence(cc.moveTo(.1,t),cc.callFunc(function(){this._isMoving=!1,1==e&&(this.node.active=!1)},this,null));this.moveNode.runAction(n)}},setMoveNodePos0:function(){this.moveNode.position=this.pos0Node.position},setMoveNodePos1:function(){this.moveNode.position=this.pos1Node.position},OnClickBtnClose:function(){this.setMoveShow(!1)}}),cc._RF.pop()},{}],HZMJ_Controller_Arena:[function(e,t,n){"use strict";cc._RF.push(t,"808e2vWq7NEfZrnC65jD5ob","HZMJ_Controller_Arena");var i=e("codeConfig");cc.Class({extends:e("HZMJ_Controller"),properties:{_readyNode:null,_autoNode:null,paomadengPosNode:cc.Node},start:function(){},onEnable:function(){this.initPrefab(),GameDataMgr.gameIndex>0?this.readyCountDown(2):this.readyCountDown(1)},readyCountDown:function(e){var t=this._readyNode.getComponent("Ready_Common_Gold"),n=GameDataMgr.seats[GameDataMgr.seatIndex];if(n)if(n.ready)GameDataMgr.gameIndex>0?t.node.active=!1:t.node.active=!0;else if(!!n.isRobotTime)ArenaDataMgr.clearreadyInterval(),t.endClear(),t.setBtnsByType(2);else{var i=GameDataMgr._readyRetainSecond||10;t.startAction(null,i,e)}},onDisable:function(){GameDataMgr.clearMsgs(),this._pamadeng.getComponent("speakMessage_G").setStart(!1)},initPrefab:function(){if(console.log("arena HZMJ control"),!this._desktopLayer){var e=cc.loader.getRes("Catalogue/Prefab/HZMJGame/desktopLayer",cc.Prefab);this._desktopLayer=cc.instantiate(e),this.gameRoot.addChild(this._desktopLayer)}if(!this._directNode){var t=cc.loader.getRes("Catalogue/Prefab/HZMJGame/direction_2MJ",cc.Prefab);this._directNode=cc.instantiate(t),this.gameRoot.addChild(this._directNode)}if(!this._ninthTipsLayer){var n=cc.loader.getRes("Catalogue/Prefab/HZMJGame/ninthTips",cc.Prefab);this._ninthTipsLayer=cc.instantiate(n),this.gameRoot.addChild(this._ninthTipsLayer)}if(!this._MJManager){var a=cc.loader.getRes("Catalogue/Prefab/HZMJGame/MJ4pManager",cc.Prefab);this._MJManager=cc.instantiate(a),this.gameRoot.addChild(this._MJManager)}if(!this._readyNode){var o=cc.loader.getRes("Catalogue/Prefab/Arena/publicModel/readyNode",cc.Prefab);this._readyNode=cc.instantiate(o),this.gameRoot.addChild(this._readyNode)}if(!this._outCardNode){var s=cc.loader.getRes("Catalogue/Prefab/HZMJGame/showOutCardNode",cc.Prefab);this._outCardNode=cc.instantiate(s),this.gameRoot.addChild(this._outCardNode)}if(!this._countDown){var r=cc.loader.getRes("Catalogue/Prefab/HZMJGame/countDownNode_2MJ",cc.Prefab);this._countDown=cc.instantiate(r),this.gameRoot.addChild(this._countDown)}if(!this._OptionNode){var c=cc.loader.getRes("Catalogue/Prefab/HZMJGame/OptionNode_2MJ",cc.Prefab);this._OptionNode=cc.instantiate(c),this.gameRoot.addChild(this._OptionNode)}if(!this._seatsMgr){var l=cc.loader.getRes("Catalogue/Prefab/HZMJGame/seatsNode_2MJ",cc.Prefab);this._seatsMgr=cc.instantiate(l),this.gameRoot.addChild(this._seatsMgr)}if(GameDataMgr.isReplay&&!this._ReplayNode){var h=cc.loader.getRes("Catalogue/Prefab/HZMJGame/ReplayNode_2MJ",cc.Prefab);this._ReplayNode=cc.instantiate(h),this.gameRoot.addChild(this._ReplayNode)}if(!this._voiceMgr){var d=cc.loader.getRes("Catalogue/Prefab/publicFrame/voiceMgr_public",cc.Prefab);this._voiceMgr=cc.instantiate(d),this.gameRoot.addChild(this._voiceMgr)}if(!this._menuNode){var u=cc.loader.getRes("Catalogue/Prefab/HZMJGame/MenuNode",cc.Prefab);this._menuNode=cc.instantiate(u),this.gameRoot.addChild(this._menuNode),this._menuNode.getComponent("MenuMgr_2MJ").setRuleNode()}if(!this._autoNode){var g=cc.loader.getRes("Catalogue/Prefab/Arena/publicModel/autoNode",cc.Prefab);this._autoNode=cc.instantiate(g),this.gameRoot.addChild(this._autoNode)}if(!this._distanceNode){var m=cc.loader.getRes("Catalogue/Prefab/publicFrame/DistanceNode",cc.Prefab);this._distanceNode=cc.instantiate(m),this.gameRoot.addChild(this._distanceNode)}if(!this._raiseLayer){var p=cc.loader.getRes("Catalogue/Prefab/HZMJGame/raiseNode",cc.Prefab);this._raiseLayer=cc.instantiate(p),this.gameRoot.addChild(this._raiseLayer)}if(!this._chatNode){var f=cc.loader.getRes("Catalogue/Prefab/HZMJGame/chatNode_2MJ",cc.Prefab);this._chatNode=cc.instantiate(f),this.gameRoot.addChild(this._chatNode)}if(!this._aniLayer){var v=cc.loader.getRes("Catalogue/Prefab/HZMJGame/AniLayer_MJ",cc.Prefab);this._aniLayer=cc.instantiate(v),this.gameRoot.addChild(this._aniLayer)}if(!this._effectNode){var _=cc.loader.getRes("Catalogue/Prefab/publicFrame/effectNode_common_G",cc.Prefab);this._effectNode=cc.instantiate(_),this.gameRoot.addChild(this._effectNode)}if(!this._emojiNode){var M=cc.loader.getRes("Catalogue/Prefab/publicFrame/emojiAniNode_public",cc.Prefab);this._emojiNode=cc.instantiate(M),this.gameRoot.addChild(this._emojiNode)}if(!this._gameSetUp){var C=cc.loader.getRes("Catalogue/Prefab/HZMJGame/setupNode_2MJ",cc.Prefab);this._gameSetUp=cc.instantiate(C),this.gameRoot.addChild(this._gameSetUp)}if(!this._gameOverNode){var y=cc.loader.getRes("Catalogue/Prefab/HZMJGame/gameOver_2MJ",cc.Prefab);this._gameOverNode=cc.instantiate(y),this.gameRoot.addChild(this._gameOverNode)}if(!this._gameEndNode){var N=cc.loader.getRes("Catalogue/Prefab/HZMJGame/gameEnd_2MJ",cc.Prefab);this._gameEndNode=cc.instantiate(N),this.gameRoot.addChild(this._gameEndNode)}if(!this._alert){var I=cc.loader.getRes("Catalogue/Prefab/publicFrame/alert",cc.Prefab);this._alert=cc.instantiate(I),this.node.addChild(this._alert)}if(publicWindow.alert=this._alert.getComponent("alert"),!this._pamadeng){var b=cc.loader.getRes("Catalogue/Prefab/publicFrame/speakMessage_arena",cc.Prefab);this._pamadeng=cc.instantiate(b),this.gameRoot.addChild(this._pamadeng),this._pamadeng.y=this.paomadengPosNode.y}GameDataMgr.clearMsgs(),this._pamadeng.getComponent("speakMessage_G").setStart(!0),Hall_ReqAndRes.getRollingNotice(function(e){for(var t in e)i.rollingnotice_key[t]||delete e[t];GameDataMgr.addMsgs(e)}),this.initView(),this.initMusic()},initView:function(){this._super(),this.setReadyShow(!1),this.setAutoState(!1)},initLable:function(){var e=this._desktopLayer.getComponent("desktopLG_2MJ"),t=GameDataMgr.roomID.substr(GameDataMgr.roomID.length-2);e.updateRoomID(t),e.updateGameNum(GameDataMgr.gameIndex),e.updateGameMaxNum(GameDataMgr.maxNumOfGames),e.initGameNums()},onGameBegin:function(e){this.setReadyShow(!1),this._super(e)},onGameSync:function(e){this._super(e),this.onAutoState(),Hall_ReqAndRes.syncCountDown(function(e){this.showAndCountTime(e.data.countdown)}.bind(this))},gameOverHandle:function(e){GameDataMgr.isEnableBegin=!0,GameDataMgr.GameState=0;var t=e.results;if(e.results){for(var n=0;n<t.length;n++)t[n].totalscore=t[n].totalscore||0,t[n].score=t[n].score||0,t[n].code=t[n].code||0,t[n].win&&(t[n].lastCard=t[n].lastCard||0);var i=GameDataMgr.seats;for(n=0;n<i.length;n++){i[n].score=e.results[n].totalscore}}if(e.isEnd){console.log("game_end"),GameDataMgr.isOver=!0,ArenaDataMgr.clearreadyInterval();var a=!1;for(n=0;n<t.length;n++)if(t[n].hued){a=!0;break}a?this.gameOverResult(e):(this.endClear(),this.setShowGameEnd(!0)),this.gameEndHandle(e)}else this.gameOverResult(e)},gameOverStart:function(e){this.setGameOverShow(!0),this.initSeats(),this._seatsMgr.getComponent("seatsMgr_2MJ").initSingleOnline(!0);var t=this._gameOverNode.getComponent("GameOver_2MJ");t.onGameOver(e),t.setBtnNodeShow(!1),this.setCountDownShow(!1),this.seGameSetUpShow(!1),this.setNinthTipsShow(!1),this.setEmojiNodeShow(!1),this.GameOver(e),this.clearFolds(),this.clearReady(),this.setMJNodeShow(!0),this.setAutoState(!1);var n=this._readyNode.getComponent("Ready_Common_Gold");if(GameDataMgr.isOver)n.endClear();else if(!!GameDataMgr.seats[GameDataMgr.seatIndex].isRobotTime)ArenaDataMgr.clearreadyInterval(),n.endClear(),n.setBtnsByType(2);else{var i=GameDataMgr._readyRetainSecond||10;n.startAction(null,i,2)}},onAutoState:function(e){var t=!!GameDataMgr.seats[GameDataMgr.seatIndex].isRobotTime;this.setAutoState(t)},showAndCountTime:function(e){var t,n=this._countDown.getComponent("CountDown_2MJ");if(e)t=e;else{var i=ArenaDataMgr.hallGameConfigs[3201];t=(GameDataMgr.seats[GameDataMgr.turn].isRobotTime,i.exchangetime)}n.startAction(t)},setAutoState:function(e){this._autoNode.getComponent("AutoStateLayer").setAutoState(e)},setReadyShow:function(e){this._readyNode.active=e}}),cc._RF.pop()},{HZMJ_Controller:"HZMJ_Controller",codeConfig:"codeConfig"}],HZMJ_Controller:[function(e,t,n){"use strict";cc._RF.push(t,"78d43RLb6tF97CXchBFlgDK","HZMJ_Controller");e("codeConfig");cc.Class({extends:cc.Component,properties:{gameRoot:cc.Node,_MJManager:null,_outCardNode:null,_OptionNode:null,_seatsMgr:null,_desktopLayer:null,_Prepare:null,_gameSetUp:null,_voiceMgr:null,_menuNode:null,_distanceNode:null,_raiseLayer:null,_chatNode:null,_effectNode:null,_emojiNode:null,_aniLayer:null,_countDown:null,_ninthTipsLayer:null,_gameOverNode:null,_gameEndNode:null},start:function(){},onEnable:function(){this.initPrefab()},onDisable:function(){},initPrefab:function(){if(console.log("hzmj control"),!this._desktopLayer){var e=cc.loader.getRes("Catalogue/Prefab/HZMJGame/desktopLayer",cc.Prefab);this._desktopLayer=cc.instantiate(e),this.gameRoot.addChild(this._desktopLayer)}if(!this._directNode){var t=cc.loader.getRes("Catalogue/Prefab/HZMJGame/direction_2MJ",cc.Prefab);this._directNode=cc.instantiate(t),this.gameRoot.addChild(this._directNode)}if(!this._ninthTipsLayer){var n=cc.loader.getRes("Catalogue/Prefab/HZMJGame/ninthTips",cc.Prefab);this._ninthTipsLayer=cc.instantiate(n),this.gameRoot.addChild(this._ninthTipsLayer)}if(!this._MJManager){var i=cc.loader.getRes("Catalogue/Prefab/HZMJGame/MJ4pManager",cc.Prefab);this._MJManager=cc.instantiate(i),this.gameRoot.addChild(this._MJManager)}if(!this._outCardNode){var a=cc.loader.getRes("Catalogue/Prefab/HZMJGame/showOutCardNode",cc.Prefab);this._outCardNode=cc.instantiate(a),this.gameRoot.addChild(this._outCardNode)}if(!this._countDown){var o=cc.loader.getRes("Catalogue/Prefab/HZMJGame/countDownNode_2MJ",cc.Prefab);this._countDown=cc.instantiate(o),this.gameRoot.addChild(this._countDown)}if(!this._OptionNode){var s=cc.loader.getRes("Catalogue/Prefab/HZMJGame/OptionNode_2MJ",cc.Prefab);this._OptionNode=cc.instantiate(s),this.gameRoot.addChild(this._OptionNode)}if(!this._seatsMgr){var r=cc.loader.getRes("Catalogue/Prefab/HZMJGame/seatsNode_2MJ",cc.Prefab);this._seatsMgr=cc.instantiate(r),this.gameRoot.addChild(this._seatsMgr)}if(GameDataMgr.isReplay&&!this._ReplayNode){var c=cc.loader.getRes("Catalogue/Prefab/HZMJGame/ReplayNode_2MJ",cc.Prefab);this._ReplayNode=cc.instantiate(c),this.gameRoot.addChild(this._ReplayNode)}if(!this._Prepare){var l=cc.loader.getRes("Catalogue/Prefab/HZMJGame/prepare_MJ2",cc.Prefab);this._Prepare=cc.instantiate(l),this.gameRoot.addChild(this._Prepare)}if(!this._voiceMgr){var h=cc.loader.getRes("Catalogue/Prefab/publicFrame/voiceMgr_public",cc.Prefab);this._voiceMgr=cc.instantiate(h),this.gameRoot.addChild(this._voiceMgr)}if(!this._menuNode){var d=cc.loader.getRes("Catalogue/Prefab/HZMJGame/MenuNode",cc.Prefab);this._menuNode=cc.instantiate(d),this.gameRoot.addChild(this._menuNode),this._menuNode.getComponent("MenuMgr_2MJ").setRuleNode()}if(!this._distanceNode){var u=cc.loader.getRes("Catalogue/Prefab/publicFrame/DistanceNode",cc.Prefab);this._distanceNode=cc.instantiate(u),this.gameRoot.addChild(this._distanceNode)}if(!this._raiseLayer){var g=cc.loader.getRes("Catalogue/Prefab/HZMJGame/raiseNode",cc.Prefab);this._raiseLayer=cc.instantiate(g),this.gameRoot.addChild(this._raiseLayer)}if(!this._chatNode){var m=cc.loader.getRes("Catalogue/Prefab/HZMJGame/chatNode_2MJ",cc.Prefab);this._chatNode=cc.instantiate(m),this.gameRoot.addChild(this._chatNode)}if(!this._aniLayer){var p=cc.loader.getRes("Catalogue/Prefab/HZMJGame/AniLayer_MJ",cc.Prefab);this._aniLayer=cc.instantiate(p),this.gameRoot.addChild(this._aniLayer)}if(!this._effectNode){var f=cc.loader.getRes("Catalogue/Prefab/publicFrame/effectNode_common_G",cc.Prefab);this._effectNode=cc.instantiate(f),this.gameRoot.addChild(this._effectNode)}if(!this._emojiNode){var v=cc.loader.getRes("Catalogue/Prefab/publicFrame/emojiAniNode_public",cc.Prefab);this._emojiNode=cc.instantiate(v),this.gameRoot.addChild(this._emojiNode)}if(!this._gameSetUp){var _=cc.loader.getRes("Catalogue/Prefab/HZMJGame/setupNode_2MJ",cc.Prefab);this._gameSetUp=cc.instantiate(_),this.gameRoot.addChild(this._gameSetUp)}if(!this._gameOverNode){var M=cc.loader.getRes("Catalogue/Prefab/HZMJGame/gameOver_2MJ",cc.Prefab);this._gameOverNode=cc.instantiate(M),this.gameRoot.addChild(this._gameOverNode)}if(!this._gameEndNode){var C=cc.loader.getRes("Catalogue/Prefab/HZMJGame/gameEnd_2MJ",cc.Prefab);this._gameEndNode=cc.instantiate(C),this.gameRoot.addChild(this._gameEndNode)}if(!this._alert){var y=cc.loader.getRes("Catalogue/Prefab/publicFrame/alert",cc.Prefab);this._alert=cc.instantiate(y),this.node.addChild(this._alert)}publicWindow.alert=this._alert.getComponent("alert"),this.initView(),this.initMusic()},initView:function(){this.initSeats(!0),this._MJManager.getComponent("MJManagerView").addShowPaiLayer(this._outCardNode);var e=this._menuNode.getComponent("MenuMgr_2MJ");e.setGameSetUp(this._gameSetUp),this.getSeatsMgrSp().getComponent("seatsMgr_2MJ").setControlSp(this.getControlSp()),this.getChatSp().setControlSp(this.getControlSp()),this._emojiNode.getComponent("ChatAniSelect_public").setControlSp(this.getControlSp()),this._gameOverNode.getComponent("GameOver_2MJ").setControlSp(this.getControlSp());var t=this._voiceMgr.getComponent("Voice_public");if(t.initVoiceEvent(),t.setControlSp(this.getControlSp()),this.setMJNumsShow(!0),this.setOprationShow(!1),this.setEmojiNodeShow(!1),this.jurgeLayerHide(),this.setGameOverShow(!1),this.setShowGameEnd(!1),this.setRaiseLayerShow(!1),this.setDistanceShow(!1),this.setNinthTipsShow(!1),this.setCenterTipsShow(!1),this._directNode.getComponent("DirectionMgr_2Mj").init(),GameDataMgr.isReplay){e.setBtnSetupShow(!1),this.setReplayNodeShow(!0);var n=this._ReplayNode.getComponent("ReplayMgr_2MJ");n.setControlSp(this.getControlSp()),n.initGame(),t.setBtnVoice(!1),this.initLable()}else e.setBtnSetupShow(!0),this.setReplayNodeShow(!1),t.setBtnVoice(!0)},initMusic:function(){var e=Math.floor(2*Math.random());console.log("\u968f\u673a\u6570\uff1a"+e);var t="HZ_Game/Game_"+e+".mp3";audioMgr.playBGM(t)},getControlSp:function(){return this.node.getComponent("HZMJ_Controller")},getGameSetupSp:function(){return this._gameSetUp.getComponent("Gamesetup_2MJ")},getSeatsMgrSp:function(){return this._seatsMgr.getComponent("seatsMgr_2MJ")},getMenuNodeSp:function(){this.getControlSp();return this._menuNode.getComponent("MenuMgr_2MJ")},getChatSp:function(){this.getControlSp();return this._chatNode.getComponent("Chat_2MJ")},getEffectPubSp:function(){this.getControlSp();return this._effectNode.getComponent("EffectMgrView_common_Gold")},getEmojiSp:function(){return this._emojiNode.getComponent("ChatAniSelect_public")},enableViews:function(){var e=this.getMenuNodeSp();dc.Iphone_Check_flag?e.setDistanceShow(!1):GameDataMgr.isReplay?e.setDistanceShow(!1):2==GameDataMgr.conf.peoplemax?e.setDistanceShow(!1):e.setDistanceShow(!0)},setCenterTipsShow:function(e){this._desktopLayer.getComponent("desktopLG_2MJ").setCenterTipsShow(e)},initFoldsPos:function(){this._MJManager.getComponent("MJManagerView").initFoldsPos()},initSeats:function(e){console.log("HZGame initseats"),this._seatsMgr.getComponent("seatsMgr_2MJ").initSeats(e)},initLable:function(){var e=this._desktopLayer.getComponent("desktopLG_2MJ");e.updateRoomID(GameDataMgr.roomID),e.updateGameNum(GameDataMgr.gameIndex),e.updateGameMaxNum(GameDataMgr.maxNumOfGames),e.initGameNums()},updateGameNum:function(){this._desktopLayer.getComponent("desktopLG_2MJ").updateGameNum(GameDataMgr.gameIndex)},intiDirection:function(e){var t=this._directNode.getComponent("DirectionMgr_2Mj");t.intiDirection(),t.initButtonBgByseatIndex(e)},changeDirect:function(e){this._directNode.getComponent("DirectionMgr_2Mj").initButtonBgByseatIndex(e)},jurgeLayerHide:function(){if(this._Prepare)if(GameDataMgr.isReplay||0!=GameDataMgr.gameIndex)this.setPrepareShow(!1);else{var e=GameDataMgr.seats,t=0;for(var n in e){var i=e[n];i.userId&&i.online&&t++}if(t==GameDataMgr.gamePlayerNum)this.setPrepareShow(!1);else this.setPrepareShow(!0),this._Prepare.getComponent("Prepare_2MJ").initDissolveBtn()}},updateCardsNum:function(e){this._desktopLayer.getComponent("desktopLG_2MJ").updateGameCardsNum(e)},initReady:function(e){if(0==GameDataMgr.GameState){var t=GameDataMgr.seats[e],n=t.online&&t.ready,i=this._seatsMgr.getComponent("seatsMgr_2MJ"),a=GameDataMgr.getLocalSide(e);i.initReady(a,n)}else 1==GameDataMgr.GameState&&this.hideSeatsReady()},hideSeatsReady:function(){this._seatsMgr.getComponent("seatsMgr_2MJ").hideReady()},hideAllBankers:function(){this._seatsMgr.getComponent("seatsMgr_2MJ").hideAllBankers()},clearAllMJNode:function(){this._MJManager.getComponent("MJManagerView").clearAllMJNode()},initAllMJs:function(){this._MJManager.getComponent("MJManagerView").initAllMJs()},readyHandle:function(e){this.initSeats();var t=GameDataMgr.getSeatIndexByID(e.userId);this.initReady(t)},Dissolvenotice:function(e){this._gameSetUp.getComponent("Gamesetup_2MJ").updateDissolvenotice(e)},onGameBegin:function(e){this.clearAllMJNode(),GameDataMgr.GameState=1,this.initSeats(),GameDataMgr.gameIndex<=1&&this.hideAllBankers(),this.setGameOverShow(!1),this.setShowGameEnd(!1),this.hideSeatsReady(),this.setDirectionShow(!0),this.showAndCountTime(),this.setPrepareShow(!1),this.updateGameNum(),this.setMJNodeShow(!1),this.setCenterTipsShow(!0),this.initLable(),this.updateCardsNum(GameDataMgr.numofmj),this.checkIpEnd(e)},checkIpEnd:function(e){var t=this._aniLayer.getComponent("AniLayer_MJ_G");t.showDice();GameDataMgr.seats;var n=0,i=0,a=[];console.log("afterCheckout"),n=0==e.gameIndex?GameDataMgr.button:GameDataMgr.seatIndex;for(var o=0;o<e.dice.length;o+=2){n%=4;var s=GameDataMgr.getLocalSide(n),r=[e.dice[o],e.dice[o+1]];a.push(r),this.perDicePlay(r,i,s),i+=2,n++}var c=i+.5,l=cc.callFunc(function(){console.log("afterDice"),console.log("afterDice1"),t.hideDice();GameDataMgr.gamePlayerNum>2&&GameDataMgr.newSeats&&this.moveSeatsPos(1);var n=cc.callFunc(function(){console.log("afterNewSeat"),GameDataMgr.MJDataMgr.changeSeats(e),console.log("afterNewSeat1"),this.initSeats(),this.intiDirection(GameDataMgr.turn),console.log("afterNewSeat2"),this.initHoldsBegin(e),i&&this.setOprationShow(!0);var t=GameDataMgr.conf;if(0==t.gamenums)if(4==t.peoplemax){this.setMJNodeShow(!0),this.setRaiseLayerShow(!1);var n=GameDataMgr.MJDataMgr.actionData;(i=GameDataMgr.MJDataMgr.getEnableOper(n))?this.setOprationShow(!0):this.setOprationShow(!1)}else 0==GameDataMgr.MJDataMgr.raise?(this.setOprationShow(!1),this.setRaiseLayerShow(!0),GameDataMgr.seatIndex==GameDataMgr.button?this.setRaiseOperShow(!0):this.setRaiseOperShow(!1),this.setMJNodeShow(!1),this.setRaiseTips(!1)):(this.setRaiseLayerShow(!0),this.setMJNodeShow(!0),this.setRaiseTips(!0),this.setRaiseOperShow(!1));else{this.setMJNodeShow(!0),this.setRaiseLayerShow(!1);var i;n=GameDataMgr.MJDataMgr.actionData;if((i=GameDataMgr.MJDataMgr.getEnableOper(n))?this.setOprationShow(!0):this.setOprationShow(!1),2==t.peoplemax&&9==GameDataMgr.gameIndex)this.setNinthTipsShow(!0),this._ninthTipsLayer.getComponent("DeciderTips_2MJ").setTipsAction();else this.setNinthTipsShow(!1)}this.setDirectionShow(!0),this.setMJNumsShow(!0),this.showAndCountTime(),GameDataMgr.beginAniState=!1},this,null),i=cc.sequence(cc.delayTime(1),n);this.node.runAction(i)},this,null),h=cc.sequence(cc.delayTime(c),l);this.node.runAction(h)},beginActions:function(e){},moveSeatsPos:function(e){this.getSeatsMgrSp().moveSeatsPos(e)},clearScene:function(){this.stopAllAnis(),this.clearAllMJNode(),this.endClear(),this._voiceMgr.getComponent("Voice_public").cancelClick(),this.getSeatsMgrSp().init()},stopAllAnis:function(){this.node.stopAllActions(),this._aniLayer.getComponent("AniLayer_MJ_G").hideDice(),this.getSeatsMgrSp().stopChangeSeatAni()},perDicePlay:function(e,t,n){var i={dice:e,defaultTime:t,local:n},a=cc.sequence(cc.delayTime(i.defaultTime),cc.callFunc(function(){console.log("perDicePlay"),this.playDice(i.dice),console.log("perDicePlay0"),this.playHandleEffect(i.local),console.log("perDicePlay1"),this.playFallPoint(i.local),console.log("perDicePlay2")},this,i));this.node.runAction(a)},playDice:function(e){return this._aniLayer.getComponent("AniLayer_MJ_G").playDice(e)},playHandleEffect:function(e){this._aniLayer.getComponent("AniLayer_MJ_G").playHandThrow(e)},playFallPoint:function(e){this._aniLayer.getComponent("AniLayer_MJ_G").playFallPoint(e)},onGameSync:function(e){GameDataMgr.GameState=1,console.log("sync"),this.clearAllMJNode(),this.stopAllAnis(),this.setCenterTipsShow(!0),this.setMJNodeShow(!0),this.initSeats(),this.hideSeatsReady(),this.intiDirection(GameDataMgr.turn),this.setDirectionShow(!0),this.setMJNumsShow(!0),this.updateCardsNum(GameDataMgr.numofmj),this.updateGameNum();for(var t=GameDataMgr.seats,n=0;n<GameDataMgr.gamePlayerNum;n++){var i=t[n],a=i.userId,o=GameDataMgr.getSeatIndexByID(a);this.createRestartMJ(i,o)}var s=GameDataMgr.lastDiscardSeat;this.updateFoldsPoint(s);var r=GameDataMgr.conf;4==r.peoplemax?(this.setMJNodeShow(!0),this.setRaiseLayerShow(!1)):0==r.gamenums?(this.setRaiseLayerShow(!0),0==e.raise?(this.setMJNodeShow(!1),GameDataMgr.seatIndex==GameDataMgr.button?this.setRaiseOperShow(!0):this.setRaiseOperShow(!1),this.setRaiseTips(!1)):(this.setMJNodeShow(!0),this.setRaiseOperShow(!1),this.setRaiseTips(!0),1==e.raise?this.setRaiseState(!1):2==e.raise&&this.setRaiseState(!0))):(this.setMJNodeShow(!0),this.setRaiseLayerShow(!1),9==GameDataMgr.gameIndex?this.setNinthTipsShow(!0):this.setNinthTipsShow(!1)),GameDataMgr.MJDataMgr.actionData&&this.gameActionShow(GameDataMgr.MJDataMgr.actionData)},updateFoldsPoint:function(e){this._MJManager.getComponent("MJManagerView").actionAddFolds(e)},createRestartMJ:function(e,t){this._MJManager.getComponent("MJManagerView").createRestartMJ(e,t)},gameOverHandle:function(e){GameDataMgr.isEnableBegin=!0,GameDataMgr.GameState=0;var t=e.results;if(e.results){for(var n=0;n<t.length;n++)t[n].totalscore=t[n].totalscore||0,t[n].score=t[n].score||0,t[n].code=t[n].code||0,t[n].win&&(t[n].lastCard=t[n].lastCard||0);var i=GameDataMgr.seats;for(n=0;n<i.length;n++){i[n].score=e.results[n].totalscore}}e.isEnd&&(console.log("game_end"),GameDataMgr.isOver=!0,this.gameEndHandle(e)),this.gameOverResult(e)},gameEndHandle:function(e){if(e.results){console.log("have gameEnd Result");var t=this._gameEndNode.getComponent("GameEnd_2MJ");t.onGameEnd(e),t.showTime()}else{console.log("no gameEnd Result");var n=cc.sequence(cc.delayTime(2),cc.callFunc(function(){UserMgr.clearRoomId(),GameDataMgr.GameEndReset(),UIMgr.pushUI(UIMgr.HallPage)}));this.node.runAction(n)}},endClear:function(){this.clearAllMJNode(),this.getChatSp().clearRecordItems()},gameOverResult:function(e){this.setOprationShow(!1),this.setRaiseLayerShow(!1),this.hideAllPoints();var t=this.countDraw(e);if(2==t){this.showDraw();var n=cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.gameOverStart(e)},this,e));this.node.runAction(n)}else{var i=1;1==t?i=2.5:3==t&&(i=1),this.overHu(e);n=cc.sequence(cc.delayTime(i),cc.callFunc(function(){this.gameOverStart(e)},this,e));this.node.runAction(n)}},countDraw:function(e){for(var t=e.results,n=0;n<t.length;n++){if(t[n].hued)return!1,1}return e.isEnd?(!1,3):2},showDraw:function(){this._aniLayer.getComponent("AniLayer_MJ_G").playDraw(2)},overHu:function(e){for(var t=e.results,n=this._gameOverNode.getComponent("GameOver_2MJ"),i=0;i<t.length;i++){var a=t[i];if(a.hued){var o=a.holds,s=o[o.length-1];this.playHuNew(s)}n.initSoundSingle(a,i)}},playHuNew:function(e){this._aniLayer.getComponent("AniLayer_MJ_G").playHu(e)},gameOverStart:function(e){this.setGameOverShow(!0),this.initSeats(),this._seatsMgr.getComponent("seatsMgr_2MJ").initSingleOnline(!0),this._gameOverNode.getComponent("GameOver_2MJ").onGameOver(e),this.setCountDownShow(!1),this.seGameSetUpShow(!1),this.setNinthTipsShow(!1),this.setEmojiNodeShow(!1),this.GameOver(e),this.clearFolds(),this.clearReady(),this.setMJNodeShow(!0)},GameOver:function(e){this._MJManager.getComponent("MJManagerView").GameOver(e)},clearReady:function(){for(var e=GameDataMgr.seats,t=0;t<e.length;t++){e[t].ready=!1}},clearFolds:function(){this._MJManager.getComponent("MJManagerView").clearFolds()},initHoldsBegin:function(e,t){this._MJManager.getComponent("MJManagerView").initHoldsBegin(e,t)},showOutCardHandle:function(e,t){this._MJManager.getComponent("MJManagerView").showOutCardHandle(e,t),this.setOprationShow(!1);var n=GameDataMgr.getSeatIndexByID(e.userId),i=GameDataMgr.seats[n];GameDataMgr.playPaiSound(e.pai,i.sex,GameDataMgr.isPutonghua),this.updateCardsNum(GameDataMgr.numofmj)},addMopaiHandle:function(e,t){this._MJManager.getComponent("MJManagerView").addMopaiHandle(e,t);var n=GameDataMgr.getSeatIndexByID(e.userId);this.changeDirect(n),this.updateCardsNum(GameDataMgr.numofmj),t||this.showAndCountTime()},gameActionShow:function(e){(this._OptionNode.getComponent("OptionMgr_2MJ").showOperSelectInterface(e),this._MJManager.active)?GameDataMgr.MJDataMgr.getEnableOper(e)?this.setOprationShow(!0):this.setOprationShow(!1):this.setOprationShow(!1);this.setEnable(e)},setEnable:function(e){this._MJManager.getComponent("MJManagerView").setEnable(e)},KongHandle:function(e,t){GameDataMgr.hasOutCard=!1,this._MJManager.getComponent("MJManagerView").KongHandle(e,t),this.setOprationShow(!1),this.updateCardsNum(GameDataMgr.numofmj);var n,i=GameDataMgr.getSeatIndexByID(e.userId),a=GameDataMgr.MJDataMgr.getLocalSide(i);n="angang"==e.gangtype?"angang":"gang";var o=GameDataMgr.seats[i];GameDataMgr.playMJActionSound(n,o.sex,GameDataMgr.isPutonghua),this.playEffect(a,"gang"),this.changeDirect(i),t||this.showAndCountTime()},PongHandle:function(e,t){GameDataMgr.hasOutCard=!1,this._MJManager.getComponent("MJManagerView").PongHandle(e,t),this.setOprationShow(!1);var n=GameDataMgr.getSeatIndexByID(e.userId),i=GameDataMgr.getLocalSide(n),a=GameDataMgr.seats[n];GameDataMgr.playMJActionSound("peng",a.sex,GameDataMgr.isPutonghua),this.playEffect(i,"peng"),this.changeDirect(n),t||this.showAndCountTime()},EatCardsHandle:function(e,t){GameDataMgr.hasOutCard=!1,this._MJManager.getComponent("MJManagerView").EatCardsHandle(e,t),this.setOprationShow(!1);var n=GameDataMgr.getSeatIndexByID(e.userId),i=(n=GameDataMgr.getSeatIndexByID(e.userId),GameDataMgr.getLocalSide(n)),a=GameDataMgr.seats[n];GameDataMgr.playMJActionSound("chi",a.sex,GameDataMgr.isPutonghua),this.playEffect(i,"chi"),this.changeDirect(n),t||this.showAndCountTime()},sendContentHandle:function(e){var t=e.type;0==t?this.sendExpressionHandle(e):1==t?this.sendQuickchatHandle(e):2==t?this.sendChatHandle(e):3==t?this.sendEmojAHandle(e):4==t&&this.VoiceSend(e)},sendEmojAHandle:function(e){this.getEffectPubSp().sendEmojA(e)},sendExpressionHandle:function(e){this.getEffectPubSp().sendExpression(e)},sendQuickchatHandle:function(e){this.getSeatsMgrSp().sendQuickchatHandle(e)},sendChatHandle:function(e){this._chatNode;var t=this.getChatSp();(t.recardItem(e,0),e.type=0,GameDataMgr.chatInfoList.push(e),GameDataMgr.chatInfoList.length>50&&GameDataMgr.chatInfoList.shift(),t.sendChatBack(e),GameDataMgr.getIsObserver())?this.getMenuNodeSp().updateTipsPoint(e):this.getSeatsMgrSp().updateTipsPoint(e);-1!=GameDataMgr.getSeatIndexByID(e.sender)?this.getSeatsMgrSp().sendChat(e):console.log("observer say")},VoiceSend:function(e){var t=this.getSeatsMgrSp();t.addVoiceData(e),t.playVoice(e),this.getChatSp().recardItem(e,1),e.type=1,GameDataMgr.chatInfoList.push(e),GameDataMgr.chatInfoList.length>50&&GameDataMgr.chatInfoList.shift()},raiseHandle:function(e){var t=2==e;(this.setRaiseLayerShow(!0),this.setRaiseTips(!0),this.setRaiseState(t),t)&&this._raiseLayer.getComponent("raise_Layer").setRaiseAction(function(){}.bind(this));var n=GameDataMgr.MJDataMgr.actionData;GameDataMgr.MJDataMgr.getEnableOper(n)?this.setOprationShow(!0):this.setOprationShow(!1)},playEffect:function(e,t){this._aniLayer.getComponent("AniLayer_MJ_G").playEffect(e,t)},showAndCountTime:function(){this._countDown.getComponent("CountDown_2MJ").startAction()},hideAllPoints:function(){this._MJManager.getComponent("MJManagerView").hideAllPoints()},setOprationShow:function(e){this._OptionNode.active=!!e},seGameSetUpShow:function(e){this._gameSetUp.active=e},setMJNodeShow:function(e){this._MJManager.active=e},setMJNumsShow:function(e){this._desktopLayer.getComponent("desktopLG_2MJ").setMJNumNodeShow(e)},setPrepareShow:function(e){this._Prepare&&(this._Prepare.active=e)},setEmojiNodeShow:function(e){this._emojiNode.active=e},setDirectionShow:function(e){this._directNode.active=e},setCountDownShow:function(e){this._countDown.active=e},setMenuShow:function(e){this._menuNode.active=e},setDistanceShow:function(e){this._distanceNode.active=e},setGameOverShow:function(e){this._gameOverNode.active=e},setShowGameEnd:function(e){this._gameEndNode.active=e},setChatShow:function(e){this._chatNode.active=e},setRaiseLayerShow:function(e){this._raiseLayer&&(this._raiseLayer.active=e)},setRaiseOperShow:function(e){this._raiseLayer.getComponent("raise_Layer").setRaiseOperShow(e)},setRaiseTips:function(e){this._raiseLayer.getComponent("raise_Layer").setRaiseTips(e)},setRaiseState:function(e){this._raiseLayer.getComponent("raise_Layer").setRaiseState(e),this.setMJNodeShow(!0),this.setRaiseOperShow(!1)},setReplayNodeShow:function(e){this._ReplayNode&&(this._ReplayNode.active=e)},setNinthTipsShow:function(e){this._ninthTipsLayer&&(this._ninthTipsLayer.active=e)},OnGameBeginRepaly:function(e,t){this.setCenterTipsShow(!0),this.enableViews(),this.setCountDownShow(!1),this.setMJNumsShow(!0),this.initSeats(),this.intiDirection(GameDataMgr.turn),this.initHoldsBegin(e,!0),this.setDirectionShow(!0),this.setMJNodeShow(!0),this.updateCardsNum(GameDataMgr.numofmj),this.initLable()}}),cc._RF.pop()},{codeConfig:"codeConfig"}],HZMJ_Res:[function(e,t,n){"use strict";cc._RF.push(t,"161daJv2cFGyL6Q1hG+X5a6","HZMJ_Res"),cc.Class({extends:cc.Component,properties:{myMJAtlas:{default:null,type:cc.SpriteAtlas},myPengKongAtlas:{default:null,type:cc.SpriteAtlas},MJPongPrefab:[cc.Prefab],MJKongPrefab:[cc.Prefab],MJPrefabArr:[cc.Prefab],MJFoldsPrefab:[cc.Prefab],MJFoldsAtlas:[cc.SpriteAtlas],MJFallPrefab:[cc.Prefab],GameOverBannerAtlas:[cc.SpriteAtlas],Emoji_BigAtlas:cc.SpriteAtlas,attackAniAtlas:cc.SpriteAtlas,effectAniNode:cc.Animation,effectClips:[cc.AnimationClip]},onLoad:function(){},onEnable:function(){dc.ResourceMgr=this},getMJSpriteFrameByIDAndPre:function(e,t){var n=e+"MahJong_"+t;return"M_"==e?this.myMJAtlas.getSpriteFrame(n):"U_"==e?this.upMJAtlas.getSpriteFrame(n):"L_"==e?this.leftMJAtlas.getSpriteFrame(n):"R_"==e?this.rightMJAtlas.getSpriteFrame(n):void 0},getFoldsSpriteByIDAndPre:function(e,t){var n=e+"Folds_"+t,i=null;return"M_"==e?i=this.MJFoldsAtlas[0].getSpriteFrame(n):"U_"==e?i=this.MJFoldsAtlas[2].getSpriteFrame(n):"L_"==e?i=this.MJFoldsAtlas[3].getSpriteFrame(n):"R_"==e&&(i=this.MJFoldsAtlas[1].getSpriteFrame(n)),i},getPongKongSpriteByIDAndPre:function(e,t){var n=e+"PengKong_"+t,i=null;return"M_"==e?i=this.myPengKongAtlas.getSpriteFrame(n):"U_"==e?(n=e+"Folds_"+t,i=this.MJFoldsAtlas[2].getSpriteFrame(n)):"L_"==e?(n=e+"Folds_"+t,i=this.MJFoldsAtlas[3].getSpriteFrame(n)):"R_"==e&&(n=e+"Folds_"+t,i=this.MJFoldsAtlas[1].getSpriteFrame(n)),i},getPreBySide:function(e){var t="";return 0==e?t="M_":1==e?t="R_":2==e?t="U_":3==e&&(t="L_"),t},getMJCardTypeByID:function(e){return e>=0&&id<9?0:e>=9&&id<18?1:e>=18&&id<27?2:e>=34&&id<=37?3:e>=38&&id<=41?4:e>=27&&e<=33?5:-1},getOverBanner:function(e,t){var n=e+"HuType_"+t,i=null;return"My_"==e?i=this.GameOverBannerAtlas[0].getSpriteFrame(n):"Left_"==e?i=this.GameOverBannerAtlas[2].getSpriteFrame(n):"Right_"==e&&(i=this.GameOverBannerAtlas[1].getSpriteFrame(n)),i},getOverBanner_TDH:function(e,t){var n=e+"TDH_"+t,i=null;return"My_"==e?i=this.GameOverBannerAtlas[0].getSpriteFrame(n):"Left_"==e?i=this.GameOverBannerAtlas[2].getSpriteFrame(n):"Right_"==e&&(i=this.GameOverBannerAtlas[1].getSpriteFrame(n)),i},geScriptLabel:function(e){var t="";return 0==e?t="MJPrefab_myself":1==e?t="MJPrefab_right":2==e?t="MJPrefab_up":3==e&&(t="MJPrefab_left"),t},getEmojiBigByIndex:function(e){return this.Emoji_BigSFrame[e]},getEmojiBigAtlasBydex:function(e){var t="express_big_"+e;return this.Emoji_BigAtlas.getSpriteFrame(t)},getFaceAByIndex:function(e){var t=GameDataMgr.attackConf[e];return this.attackAniAtlas.getSpriteFrame(t.oriName)},onDestroy:function(){console.log("ResouceMgr onDestroy"),dc.ResourceMgr&&(dc.ResourceMgr=null)}}),cc._RF.pop()},{}],HallMgr:[function(e,t,n){"use strict";cc._RF.push(t,"d879fMvhVZC44ek89f7Y6Sj","HallMgr"),cc.Class({extends:cc.Component,properties:{gameRoot:cc.Node,_UILayer:null,_createRoom:null,_joinGameNode:null,_historyNode:null,_setupNode:null,_agentPowersNode:null,_gameCircleLayer:null,_agentPowersMgr:null,_taskNode:null,_kefuNode:null,_userInfo:null,_agentRecruitNode:null,_shopNode:null,_gamebleNode:null,_comfirmNode:null,_accountPage:null,_shareNode:null,_alert:null,_arenaLayer:null},onLoad:function(){this.initPrefab()},start:function(){GameDataMgr.updateSpeakMsg()},onEnable:function(){this._alert&&(publicWindow.alert=this._alert.getComponent("alert")),this.initMusic(),GroupDataMgr.refreshInfo(UserMgr.userId)},initMusic:function(){var e=Math.floor(1*Math.random());console.log("\u968f\u673a\u6570\uff1a"+e);var t="HZ_Game/Hall_"+e+".mp3";audioMgr.playBGM(t)},initPrefab:function(){if(!this._UILayer){var e=cc.loader.getRes("Catalogue/Prefab/Hall/UILayer",cc.Prefab);this._UILayer=cc.instantiate(e),this.gameRoot.addChild(this._UILayer)}if(!this._gameCircleLayer){var t=cc.loader.getRes("Catalogue/Prefab/Hall/gameCircleLayer",cc.Prefab);this._gameCircleLayer=cc.instantiate(t),this.gameRoot.addChild(this._gameCircleLayer)}if(!this._arenaLayer){var n=cc.loader.getRes("Catalogue/Prefab/Hall/ArenaLayer",cc.Prefab);this._arenaLayer=cc.instantiate(n),this.gameRoot.addChild(this._arenaLayer),this._arenaLayer.getComponent("ArenaLayer").initPrefabe()}if(!this._pamadeng){var i=cc.loader.getRes("Catalogue/Prefab/publicFrame/speakMessage",cc.Prefab);this._pamadeng=cc.instantiate(i),this.gameRoot.addChild(this._pamadeng)}if(!this._agentPowersNode){var a=cc.loader.getRes("Catalogue/Prefab/Hall/agentPowersNode",cc.Prefab);this._agentPowersNode=cc.instantiate(a),this.gameRoot.addChild(this._agentPowersNode)}if(!this._createRoom){var o=cc.loader.getRes("Catalogue/Prefab/Hall/createRoomNode",cc.Prefab);this._createRoom=cc.instantiate(o),this.gameRoot.addChild(this._createRoom)}if(!this._joinGameNode){var s=cc.loader.getRes("Catalogue/Prefab/Hall/JoinGameNode",cc.Prefab);this._joinGameNode=cc.instantiate(s),this.gameRoot.addChild(this._joinGameNode)}if(!this._historyNode){var r=cc.loader.getRes("Catalogue/Prefab/Hall/historyNode",cc.Prefab);this._historyNode=cc.instantiate(r),this.gameRoot.addChild(this._historyNode)}if(!this._setupNode){var c=cc.loader.getRes("Catalogue/Prefab/publicFrame/setupNode",cc.Prefab);this._setupNode=cc.instantiate(c),this.gameRoot.addChild(this._setupNode)}if(!this._agentPowersMgr){var l=cc.loader.getRes("Catalogue/Prefab/Hall/agentPowersMgr",cc.Prefab);this._agentPowersMgr=cc.instantiate(l),this.gameRoot.addChild(this._agentPowersMgr)}if(!this._kefuNode){var h=cc.loader.getRes("Catalogue/Prefab/Hall/kefuNode",cc.Prefab);this._kefuNode=cc.instantiate(h),this.gameRoot.addChild(this._kefuNode)}if(!this._taskNode){var d=cc.loader.getRes("Catalogue/Prefab/Hall/taskPage",cc.Prefab);this._taskNode=cc.instantiate(d),this.gameRoot.addChild(this._taskNode)}if(!this._comfirmNode){var u=cc.loader.getRes("Catalogue/Prefab/Hall/confimNode",cc.Prefab);this._comfirmNode=cc.instantiate(u),this.gameRoot.addChild(this._comfirmNode)}if(!this._agentRecruitNode){var g=cc.loader.getRes("Catalogue/Prefab/Hall/AgentRecruitNode",cc.Prefab);this._agentRecruitNode=cc.instantiate(g),this.gameRoot.addChild(this._agentRecruitNode)}if(!this._shopNode){var m=cc.loader.getRes("Catalogue/Prefab/Hall/shopNode",cc.Prefab);this._shopNode=cc.instantiate(m),this.gameRoot.addChild(this._shopNode)}if(!this._gamebleNode){var p=cc.loader.getRes("Catalogue/Prefab/Hall/duboNode",cc.Prefab);this._gamebleNode=cc.instantiate(p),this.gameRoot.addChild(this._gamebleNode)}if(!this._userInfo){var f=cc.loader.getRes("Catalogue/Prefab/Hall/userInfo_Hall",cc.Prefab);this._userInfo=cc.instantiate(f),this.gameRoot.addChild(this._userInfo)}if(!this._accountPage){var v=cc.loader.getRes("Catalogue/Prefab/Hall/Accouncement",cc.Prefab);this._accountPage=cc.instantiate(v),this.gameRoot.addChild(this._accountPage)}if(!this._shareNode){var _=cc.loader.getRes("Catalogue/Prefab/Hall/shareNode",cc.Prefab);this._shareNode=cc.instantiate(_),this.gameRoot.addChild(this._shareNode)}if(!this._alert){var M=cc.loader.getRes("Catalogue/Prefab/publicFrame/alert_Hall",cc.Prefab);this._alert=cc.instantiate(M),this.node.addChild(this._alert)}publicWindow.alert=this._alert.getComponent("alert"),this.initView()},updatePMDPos:function(e){var t;"arena"==e?t=330:"hall"==e&&(t=260),this._pamadeng.y=t},initView:function(){this.setHistoryNodeShow(!1),this.setSetupNodeShow(!1),this.setAgentPowersNodeShow(!1),this.setUserInfoShow(!1),this.setKefuNodeShow(!1),this.setComfirmShow(!1),this.setTaskShow(!1),this.setAgentRecruitShow(!1),this.setShopNodeShow(!1),this.setGamebleNodeShow(!1),this.setAccountPageShow(!1),this.setShareNode(!1),this.setXLBtnShow()},refreshGems:function(e){this._UILayer.getComponent("HallUILayer").refreshGems(e)},doSomethingAfterlogin:function(){if(UserMgr.roomId)Hall_ReqAndRes.loginGame(function(){}.bind(this));else{var e;if(UserMgr.hallgameId?ArenaDataMgr.enterHallGame(function(){ArenaDataMgr.loginHallGameHall(),ArenaDataMgr.getHallConfig(),ArenaDataMgr.arenaLayerSp&&ArenaDataMgr.arenaLayerSp.getTables(),Hall_ReqAndRes.enter_game_arena(UserMgr.hallgameId,null,function(){})}):ArenaDataMgr.arenaLayerSp&&ArenaDataMgr.arenaLayerSp.openLayer(),UserMgr.gameId)(t=UIMgr.getPageScript(UIMgr.HallPage))._historyNode.getComponent("HistoryList").getlShareVideo(UserMgr.gameId);e=UserMgr.agentLevel>=2,this._UILayer.getComponent("HallUILayer").setBtnAgent(e);var t;this._UILayer.getComponent("HallUILayer");(t=UIMgr.getPageScript(UIMgr.HallPage)).setXLBtnShow(),t.initCheckIOS(),UserMgr.xlcode&&Hall_ReqAndRes.bindxl(UserMgr.xlcode,function(e){if(e.code)publicWindow.alert.show("",e.msg);else{var n=e.data.xlOpenId;console.log("xlOpenID:",n),UserMgr.xlOpenId=n,UserMgr.xlcode=null,t.setXLBtnShow(),publicWindow.alert.show("","\u7ed1\u5b9a\u6210\u529f")}}.bind(this)),UIMgr.curPage==UIMgr.HallPage&&this.checkupdate(),GroupDataMgr.setTips(UserMgr.gems,UserMgr.agentLevel)}},checkupdate:function(){var e,t=UserMgr.version,n=UserMgr.minversion;e=cc.sys.os==cc.sys.OS_IOS?dc.VERSION_IOS:dc.VERSION_Android;var i=dc.utils.getUpdateType(e,t);if(0==i||1==i){var a=dc.utils.getUpdateType(e,n);if(0==a||1==a){var o=function(){UserMgr.isNotByHttp=!0,UserMgr.clearUIAndCloseWS(),cc.director.loadScene("Loading")}.bind(this);publicWindow.alert.show("","\u68c0\u6d4b\u5230\u66f4\u65b0",o)}else{o=function(){UserMgr.isNotByHttp=!0,UserMgr.clearUIAndCloseWS(),cc.director.loadScene("Loading")}.bind(this);publicWindow.alert.show("","\u68c0\u6d4b\u5230\u66f4\u65b0",o,!0)}}},setXLBtnShow:function(){var e=!UserMgr.xlOpenId;dc.Iphone_Check_flag&&(e=!1),this._UILayer.getComponent("HallUILayer").setXLBtnShow(e)},initCheckIOS:function(){this._UILayer.getComponent("HallUILayer").initCheckIOS()},setHistoryNodeShow:function(e){this._historyNode.active=e},setSetupNodeShow:function(e){this._setupNode.active=e},setAgentPowersNodeShow:function(e){this._agentPowersNode.active=e},setComfirmShow:function(e){this._comfirmNode.active=e},setKefuNodeShow:function(e){this._kefuNode.active=e},setUserInfoShow:function(e){this._userInfo.active=e},setTaskShow:function(e){this._taskNode.active=e},setAgentRecruitShow:function(e){this._agentRecruitNode.active=e},setShopNodeShow:function(e){this._shopNode.active=e},setGamebleNodeShow:function(e){this._gamebleNode.active=e},setAccountPageShow:function(e){this._accountPage.active=e},setShareNode:function(e){this._shareNode.active=e},openComfirm:function(e){this._comfirmNode.getComponent("IphoneComfirm").openComfirm(e)},setArenaLayerShow:function(e){this.arenaLayer.active=e},onDestroy:function(){this.unschedule(this.upateGameTime)}}),cc._RF.pop()},{}],HallRankItem_Arena:[function(e,t,n){"use strict";cc._RF.push(t,"048a4hGYLRDJ4fKHKiC8WhG","HallRankItem_Arena"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblBattleCount:cc.Label,lblWinCount:cc.Label,lblWinRate:cc.Label,lblID:cc.Label,lblName:cc.Label,icon:cc.Node,numberNode:cc.Node},start:function(){},setBgNode:function(e){var t=this.bgNode.children[0],n=this.bgNode.children[1];t.active=!e,n.active=e},initData:function(e,t){this.lblBattleCount.string=e.count,this.lblWinCount.string=e.win;var n=parseInt(e.rate);0==e.count?n=0:(n=parseInt(e.win)/parseInt(e.count),n=parseInt(100*n)),this.lblWinRate.string=n+"%",this.lblID.string="ID:"+e.userId,this.lblName.string=e.name,this.icon.getComponent("ImageLoader_Gold").setIcon(e.headImg,e.userId),this.setIndex(t)},setIndex:function(e){var t=this.numberNode.getChildByName("lblNum"),n=this.numberNode.getChildByName("spr"),i=this.numberNode.getChildByName("numArr");if(e<=3){i.active=!0,t.active=!1,n.active=!1;for(var a=0;a<i.children.length;a++)i.children[a].active=e==a+1}else{t.active=!0,n.active=!0,i.active=!1,t.getComponent(cc.Label).string=e}}}),cc._RF.pop()},{}],HallTaskItem:[function(e,t,n){"use strict";cc._RF.push(t,"c07cedSZDtIub5ROmjCb7ka","HallTaskItem");var i=e("WechatHelper");cc.Class({extends:cc.Component,properties:{lblDec:cc.Label,lblProgress:cc.Label,progressNode:cc.Node,proBar:cc.ProgressBar,lblPrice:cc.Label,btnInvite:cc.Node,btnGain:cc.Node,sprComplete:cc.Node,sprUnActive:cc.Node},start:function(){},setTaskData:function(e){var t=e.type,n="",i=e.num,a=e.completeNum;if(this._type=t,this._reclv=e.completeNum,this._key=e.key,this._price=e.price,n=1==t?"\u6210\u529f\u9080\u8bf7"+a+"\u540d\u597d\u53cb":"\u9080\u8bf7\u8d85\u8fc7"+e.max+"\u540d\u597d\u53cb\u540e\u6bcf\u6210\u529f\u9080\u8bf7"+e.min+"\u540d\u597d\u53cb("+e.num+"/1)",this.setDec(n),1==t){var o,s;this.progressNode.active=!0;var r=i>=a?a:i;o=r+"/"+a,s=r/a,this.setProgressDetail(o),this.setProBarValue(s)}else this.progressNode.active=!1;if(1==t)var c=e.price+"\u5143";else{c=e.price*i+"\u5143";c=0==i?e.price+"\u5143":e.price*i+"\u5143"}this.setPrice(c),this.setTaskState(e.state)},setDec:function(e){this.lblDec.string=e},setProBarValue:function(e){this.proBar.progress=e},setProgressDetail:function(e){this.lblProgress.string=e},setPrice:function(e){this.lblPrice.string=e},setTaskState:function(e){1==e?(this.sprComplete.active=!1,this.btnGain.active=!1,this.btnInvite.active=!0,this.sprUnActive.active=!1):2==e?(this.sprComplete.active=!1,this.btnGain.active=!0,this.btnInvite.active=!1,this.sprUnActive.active=!1):3==e?(this.sprComplete.active=!0,this.btnGain.active=!1,this.btnInvite.active=!1,this.sprUnActive.active=!1):4==e&&(this.sprComplete.active=!1,this.btnGain.active=!1,this.btnInvite.active=!1,this.sprUnActive.active=!0)},OnClickGain:function(){var e=parseInt(this._type),t=this._key;publicWindow.wc.show(""),Hall_ReqAndRes.finishTask(e,t,function(e){var t=UIMgr.getPageScript(UIMgr.HallPage);if(e.code)if(-2==e.code){publicWindow.alert.show("",e.msg,function(){t.openComfirm(2)},!0)}else publicWindow.alert.show("",e.msg);else publicWindow.alert.show("","\u9886\u53d6\u6210\u529f"),t._taskNode.getComponent("HallTask").createTaskList(e.data.tasks);publicWindow.wc.hide()}.bind(this))},OnClickSendTGMToFriend:function(){var e=dc.getTuiGuangMaUrl();e+=UserMgr.userId,i.shareTGMToMate(e)}}),cc._RF.pop()},{WechatHelper:"WechatHelper"}],HallTask:[function(e,t,n){"use strict";cc._RF.push(t,"501c8aKcg5LI4nPtjVENRQs","HallTask"),cc.Class({extends:cc.Component,properties:{content:cc.Node,taskItem:cc.Node,titleNode:cc.Node,decNode:cc.Node,_curIndex:1,parent:cc.Node,lblName:cc.Label,lblUserId:cc.Label,lblCode:cc.Label,icon:cc.Node,welcontent:cc.Node,welUserInfoItem:cc.Node,moveNode:cc.Node,codeSpr:cc.Node,splitePre:cc.Node,codeNode:cc.Node},start:function(){this._curIndex=1},OnToggleBtn:function(e){var t=e.target;"toggle1"==t.name?this._curIndex=1:"toggle2"==t.name?this._curIndex=2:"toggle3"==t.name&&(this._curIndex=3),this.setPage(this._curIndex)},setPage:function(e){if(this._curIndex=e,this.changeTitle(),this.changeDec(),this.changeInterface(),this.updateMsg(),2==this._curIndex){var t=dc.getTuiGuangMaUrl();t+=UserMgr.userId,this.makeCode(this.codeNode,t)}},changeTitle:function(){for(var e=0;e<this.titleNode.children.length;e++)this._curIndex==e+1?this.titleNode.children[e].active=!0:this.titleNode.children[e].active=!1},changeDec:function(){for(var e=0;e<this.decNode.children.length;e++){var t=this.decNode.children[e],n=t.children[0],i=t.children[1];this._curIndex==e+1?(n.active=!0,i.active=!1):(n.active=!1,i.active=!0)}},changeInterface:function(){for(var e=0;e<this.parent.children.length;e++)this._curIndex==e+1?this.parent.children[e].active=!0:this.parent.children[e].active=!1},updateMsg:function(){1==this._curIndex?Hall_ReqAndRes.getTasks(function(e){var t=e.data.tasks;this.createTaskList(t)}.bind(this)):2==this._curIndex?this.initInfo():3==this._curIndex&&Hall_ReqAndRes.getSpreadUserInfo(null,function(e){e.code?publicWindow.alert.show("",e.msg):this.createWelRecordList(e.data)}.bind(this))},removeAllWelList:function(){this.welcontent.removeAllChildren()},createWelRecordList:function(e){this.removeAllWelList();for(var t=0,n=0;n<e.length;n++){var i=cc.instantiate(this.welUserInfoItem);i.active=!0;var a=i.getComponent("taskWelfareItem");this.welcontent.addChild(i),a.initData(e[n],n+1),t+=i.height}this.welcontent.height=t},removeAllRecord:function(){this.content.removeAllChildren()},createTaskList:function(e){var t=e[1];for(var n in this.removeAllRecord(),e){var i,a=(h=e[n]).reward;i=h.reclv;for(var o={},s=0;s<i.length;s++)o[i[s]]=a[s];e[n].rewardMap=o}var r=[],c=0,l=[];for(var n in e){var h,d=(h=e[n]).rewardMap,u=h.reclv,g=h.reclv_u;1==n&&(c=h.num);for(s=0;s<u.length;s++){(_={}).type=n;var m=u[s];_.completeNum=m,_.price=d[m]/100,_.key=u[s];var p=g.indexOf(m);if(2==n)_.max=t.reclv[t.reclv.length-1],_.min=t.reclv[0],_.allNum=t.num,_.num=h.num,h.num>0?_.state=2:_.state=4,l.push(_);else{_.completeNum=s-1>=0?u[s]-u[s-1]:u[s];var f=c-_.completeNum>0?_.completeNum:c;_.num=f,c=c-_.completeNum<0?0:c-_.completeNum,p>=0?_.state=3:_.num>=_.completeNum?_.state=2:_.state=1,r.push(_)}}}var v=0;for(s=0;s<l.length;s++){var _=l[s];(C=cc.instantiate(this.taskItem)).active=!0,C.getComponent("HallTaskItem").setTaskData(_),this.content.addChild(C),v+=C.height}var M=cc.instantiate(this.splitePre);M.active=!0,this.content.addChild(M);for(s=0;s<r.length;s++){var C;_=r[s];(C=cc.instantiate(this.taskItem)).active=!0,C.getComponent("HallTaskItem").setTaskData(_),this.content.addChild(C),v+=C.height}this.content.height=v},initInfo:function(){var e=UserMgr.userName,t=UserMgr.userId;this.setName(e),this.setUserId(t);var n="";n=dc.getTuiGuangMaUrl(),n+=UserMgr.userId,this.setCode(n),this.setIcon(UserMgr.headIMG,t)},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t)},setName:function(e){this.lblName.string=e},setUserId:function(e){this.lblUserId.string=e},setCode:function(e){this.lblCode.string=e},OpenTask:function(){this.node.active=!0,this.setPage(this._curIndex)},OnClickCopy:function(){var e=this.lblCode.string;AnysdkMgr.copyContent(e)},makeCode:function(e,t){var n=new QRCode(-1,QRErrorCorrectLevel.H);n.addData(t),n.make();for(var i=e.getComponent(cc.Graphics),a=e.width/n.getModuleCount(),o=e.height/n.getModuleCount(),s=0;s<n.getModuleCount();s++)for(var r=0;r<n.getModuleCount();r++){n.isDark(s,r)?i.fillColor=cc.Color.BLACK:i.fillColor=cc.Color.WHITE;var c=Math.ceil((r+1)*a)-Math.floor(r*a),l=Math.ceil((s+1)*a)-Math.floor(s*a);i.rect(Math.round(r*a),Math.round(s*o),c,l),i.fill()}},cutPicture:function(e){this.moveNode.active=!0;cc.director.getWinSize();var t=this.moveNode.getContentSize(),n=new cc.size;n.width=t.width*this.moveNode.scaleX,n.height=t.height*this.moveNode.scaleY,console.log("width:"+n.width),console.log("height:"+n.height);var i=this.moveNode.getPosition(),a="share_"+UserMgr.userId+".jpg";console.log("cutpaic0");var o=jsb.fileUtils.getWritablePath()+a;console.log("cutpaic"),console.log(jsb.fileUtils.getWritablePath()),console.log(o),jsb.fileUtils.isFileExist(o)&&(console.log("jinqu"),jsb.fileUtils.removeFile(o));var s=new cc.RenderTexture(Math.floor(n.width),Math.floor(n.height));this.moveNode.setPosition(n.width/2,n.height/2),console.log("x:"+i.x),console.log("y:"+i.y),s.setAnchorPoint(cc.p(.5,.5)),s.begin(),this.moveNode._sgNode.visit(),s.end(),console.log("cutpaic1"),s.saveToFile(a,cc.ImageFormat.JPG,!0,function(t){console.log("cut succeed"),console.log(e);var i=100/n.height,a=Math.floor(n.width*i);setTimeout(function(){this.closeMoveNode(),1==e?AnysdkMgr.shareCutToFriend(o,a,100):AnysdkMgr.shareCutToCircle(o,a,100)}.bind(this),1e3)}.bind(this))},closeMoveNode:function(){this.moveNode.x=0,this.moveNode.y=0,this.moveNode.active=!1},OnClickShareToFriend:function(){var e=dc.getTuiGuangMaUrl();e+=UserMgr.userId,this.makeCode(this.codeSpr,e),this.cutPicture(1)},OnClickShareToCirecle:function(){var e=dc.getTuiGuangMaUrl();e+=UserMgr.userId,this.makeCode(this.codeSpr,e),this.cutPicture(2)},OnClickClose:function(){this.node.active=!1}}),cc._RF.pop()},{}],HallUILayer:[function(e,t,n){"use strict";function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(a,o){try{var s=t[a](o),r=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(r).then(function(e){i("next",e)},function(e){i("throw",e)});e(r)}("next")})}}cc._RF.push(t,"74e49iuSG1OfqMl1Em4l57b","HallUILayer"),cc.Class({extends:cc.Component,properties:{userIcon:cc.Node,lblName:cc.Label,lblID:cc.Label,lblGems:cc.Label,btnXLBind:cc.Node,btnAgent:cc.Node,bottomLayout:cc.Node,bottomBg:cc.Node,posCheck:cc.Node,posOrigin:cc.Node,distanceTipsNode:cc.Node,leadNode:cc.Node,moveAniArr:[cc.Node]},start:function(){this.playBtnAnis()},repeatBtnAnis:function(){this.playBtnAnis()},delayPromise:function(e){var t=this;return e=e||1,new Promise(function(n,i){var a=cc.sequence(cc.delayTime(e),cc.callFunc(function(){n()},t,null));t.node.runAction(a)})},playTotalAni:function(e){var t=this;e.active=!0;var n=e.getChildByName("mask").getChildByName("move1Ani"),i=e.getChildByName("move2Ani"),a=e.getChildByName("orinNode");return new Promise(function(o,s){n.active=!0,i.active=!1,t.playBtnAni(n,function(){n.active=!1,i.active=!0,this.playBtnAni(i,function(){i.setPosition(a.x,a.y),i.active=!1,e.active=!1,o()}.bind(this))}.bind(t))})},playBtnAnis:function(){var e=function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.playTotalAni(t.moveAniArr[0]);case 2:return e.next=4,t.delayPromise(5);case 4:return e.next=6,t.playTotalAni(t.moveAniArr[1]);case 6:return e.next=8,t.delayPromise(5);case 8:t.repeatBtnAnis();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t=this;e()},playBtnAni:function(e,t){e.active=!0;var n=e.getComponent(cc.Animation);n.play();n.once("finished",function(){e.active=!1,t&&t()},this)},onEnable:function(){(this.initInfo(),!!!dc.Iphone_Check_flag&&this.btnXLBind)&&this.btnXLBind.getChildByName("jiantou").getComponent(cc.Animation).play("moveTipsOfXL");if(UserMgr.qualification_eclub){this.leadNode.active=!0;var e=this.leadNode.getChildByName("shou").getComponent(cc.Animation),t=this.leadNode.getChildByName("frame").getComponent(cc.Animation);e.play("shou"),t.play("frame")}else this.leadNode.active=!1},initCheckIOS:function(){var e,t=!!dc.Iphone_Check_flag;this.node.getChildByName("right").getChildByName("btnOpenClub").active=!t,this.node.getChildByName("right").getChildByName("btnExperience").active=!t,this.bottomLayout.active=!t,t?(e=this.posCheck.getPosition(),this.distanceTipsNode.active=!1):(e=this.posOrigin.getPosition(),this.distanceTipsNode.active=!0);var n=this.node.getChildByName("left").getChildByName("btn_Create_Room"),i=this.node.getChildByName("left").getChildByName("btn_Join_Room");n.x=e.x,i.x=e.x,this.bottomBg.active=!t},refreshGems:function(e){this.lblGems.string=e},initInfo:function(){this.lblName.string=UserMgr.userName,this.lblGems.string=UserMgr.gems,this.lblID.string=UserMgr.userId,this.userIcon.getComponent("ImageLoader_Gold").setIcon(UserMgr.headIMG,UserMgr.userId)},OnClickOpenCreateLayer:function(){UIMgr.getPageScript(UIMgr.HallPage)._createRoom.getComponent("CreateRoom").open(1)},OnClickOpenJoinLayer:function(){this.setJoinGameActiveShow(!0)},OnClickBindXL:function(){AnysdkMgr.getXLInstall()?AnysdkMgr.XLLogin():publicWindow.alert.show("","\u6ca1\u6709\u5b89\u88c5\u95f2\u804a")},onClickOpenHistory:function(){var e=UIMgr.getPageScript(UIMgr.HallPage);e.setHistoryNodeShow(!0),e._historyNode.getComponent("HistoryList").openByType()},OnClickOpenSetup:function(){UIMgr.getPageScript(UIMgr.HallPage).setSetupNodeShow(!0)},onClickOpenGroupLayer:function(){UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").openCircleLayer()},OnClickOpenExperienceClub:function(){UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").openExperienceClub()},onClickOpenAgentPowers:function(){UIMgr.getPageScript(UIMgr.HallPage).setAgentPowersNodeShow(!0)},OnClickOpenComfirm:function(){UserMgr.phone?publicWindow.alert.show("","\u5df2\u7ecf\u8ba4\u8bc1\u6210\u529f"):UIMgr.getPageScript(UIMgr.HallPage).openComfirm(1)},OnClickOpenKefu:function(){UIMgr.getPageScript(UIMgr.HallPage).setKefuNodeShow(!0)},OnClickOpenUserInfo:function(){if(!!!dc.Iphone_Check_flag){console.log("OnClickOpenUserInfo");var e=UIMgr.getPageScript(UIMgr.HallPage)._userInfo.getComponent("UserInfo_Hall"),t=UserMgr.userId,n=[];n.push(t);var i=GroupDataMgr.userInfoMap;GroupDataMgr.getUsersInfo(n,function(n){e.openUserInfo(i[t])}.bind(this))}},OnClickOpenTask:function(){UIMgr.getPageScript(UIMgr.HallPage)._taskNode.getComponent("HallTask").OpenTask()},OnClickOpenAgentRecruit:function(){UIMgr.getPageScript(UIMgr.HallPage).setAgentRecruitShow(!0)},OnClickOpenShop:function(){UIMgr.getPageScript(UIMgr.HallPage).setShopNodeShow(!0)},OnClickOpenGameble:function(){UIMgr.getPageScript(UIMgr.HallPage).setGamebleNodeShow(!0)},OnClickOpenAccount:function(){UIMgr.getPageScript(UIMgr.HallPage)._accountPage.getComponent("Accouncement").OpenAccount()},OnClickOpenShare:function(){UIMgr.getPageScript(UIMgr.HallPage).setShareNode(!0)},OnClickBeiginWeb:function(){cc.sys.openURL(dc.beianWeb)},OnClickArenaLayer:function(){UIMgr.getPageScript(UIMgr.HallPage)._arenaLayer.getComponent("ArenaLayer").openLayer()},setJoinGameActiveShow:function(e){var t=UIMgr.getPageScript(UIMgr.HallPage)._joinGameNode;t&&(t.active=e)},setXLBtnShow:function(e){this.btnXLBind.active=e},setBtnAgent:function(e){this.btnAgent.active=e},OnClickTmp:function(){var e={gametype:2,gamenums:8,createtype:1,peoplemax:4,wanfa:2400,clubId:""};Hall_ReqAndRes.creatRoom(e,function(e){}.bind(this))}}),cc._RF.pop()},{}],Hall_ReqAndRes:[function(e,t,n){"use strict";cc._RF.push(t,"fced9jBWYBKlJ8dGBGKaW8B","Hall_ReqAndRes");var i=e("codeConfig"),a=function(e){if(e.code)if(-110==e.code){publicWindow.alert.show("\u63d0\u793a",e.msg,function(){GameDataMgr.reset(),pomelo.disconnect(),pomelo.reconnect()})}else publicWindow.alert.show("\u63d0\u793a",e.msg)};n.getUrlFromGate=function(e){pomelo.request("gate.gateHandler.queryEntry",{},function(t){console.log("queryEntry",t),e&&e(t),a(t)})},n.bindxl=function(e,t){var n={};n.code=e,pomelo.request("hall.hallHandler.bindxl",n,function(e){console.log("bindxl",e),t&&t(e),a(e)})},n.enterRoom=function(e,t){var n={};n.roomId=e,pomelo.request("hall.hallHandler.enter_private_room",n,function(e){console.log("enter_private_room",e),t&&t(e),e.code||o(function(e){}),a(e)})},n.creatRoom=function(e,t){pomelo.request("hall.hallHandler.create_private_room",e,function(e){console.log("create_private_room",e),e.code||(t&&t(e),e.data.roomId&&o(function(e){})),a(e)})};n.delRoom=function(e,t){var n={};n.roomId=e,pomelo.request("hall.hallHandler.del_private_room",n,function(e){console.log("hall.hallHandler.del_private_room",e),t&&t(e),a(e)})};n.getEmptyRoomList=function(e){pomelo.request("hall.hallHandler.get_empty_rooms",{},function(t){console.log("hall.hallHandler.get_empty_rooms",t),e&&e(t),a(t)})};n.getHistory=function(e,t,n,i){var o={};o.type=e,o.start=t,o.step=n,pomelo.request("hall.hallHandler.getHistory",o,function(e){console.log("hall.hallHandler.getHistory",e),i&&i(e.data),a(e)})};n.getRecord=function(e,t){var n={};n.uuid=e,pomelo.request("hall.hallHandler.getRecord",n,function(e){console.log("hall.hallHandler.getRecord",e),t&&t(e.data),a(e)})};n.getBigWinner=function(e,t,n,i){var o={};o.type=e,o.start=t,o.step=n,pomelo.request("hall.hallHandler.getBigWinerRank",o,function(e){console.log("hall.hallHandler.getBigWinerRank",e),i&&i(e.data),a(e)})};n.getVerifyCode=function(e,t){var n={};n.phone=e,pomelo.request("hall.hallHandler.getVerifyCode",n,function(e){console.log("hall.hallHandler.getVerifyCode",e),t&&t(e),a(e)})};n.certify=function(e,t,n,i){var o={};o.code=e,o.phone=t,o.type=n,pomelo.request("hall.hallHandler.certify",o,function(e){console.log("hall.hallHandler.certify",e),i&&i(e),a(e)})};n.suggest=function(e,t,n){var i={};i.content=e,i.phone=t,pomelo.request("hall.hallHandler.suggest",i,function(e){console.log("hall.hallHandler.suggest",e),n&&n(e),a(e)})};n.getUsersInfo=function(e,t){var n={};n.userIds=e,pomelo.request("hall.hallHandler.getUsersInfo",n,function(e){console.log("hall.hallHandler.getUsersInfo",e),e.code||t&&t(e.data),a(e)})};n.getRollingNotice=function(e){pomelo.request("hall.hallHandler.getRollingNotice",{},function(t){console.log("hall.hallHandler.getRollingNotice",t),t.code||e&&e(t.data),a(t)})};n.payResult=function(e,t,n){var i={};i.type=e,i.receipt=t,pomelo.request("hall.hallHandler.payResult",i,function(e){console.log("hall.hallHandler.payResult",JSON.stringify(e)),n&&n(e),a(e)})},n.modifyUserInfo=function(e,t,n){var i={type:e,sign:t};pomelo.request("hall.hallHandler.modifyUserInfo",i,function(e){console.log("hall.hallHandler.modifyUserInfo",JSON.stringify(e)),n&&n(e),a(e)})};n.dissolveRequest=function(e){pomelo.request("game.gameHandler.dissolveRequest",{},function(e){a(e)})};n.exitRequest=function(e,t){var n;n=t==i.createRoomType.hallgame?"hallgame.gameHandler.exit":"game.gameHandler.exit",console.log("exitRequest"),pomelo.request(n,{},function(e){a(e)})};n.dissolveAgree=function(e,t){var n={};n.agree=e,pomelo.request("game.gameHandler.dissolveAgree",n,function(e){a(e)})};n.chatRequest=function(e,t,n){var i=e;i.scene=n||1,pomelo.request("chat.chatHandler.chatInGame",i,function(e){t&&t(),a(e)})},n.getChatHistory=function(e,t,n,i,o){var s={scene:e,clubId:t};null!=n&&(s.start=n),null!=i&&(s.step=i),e&&(s.scene=e),pomelo.request("chat.chatHandler.getChatHistory",s,function(e){o&&o(e),a(e)})};n.updateAddress=function(e,t){var n={};n.address=e,pomelo.request("game.gameHandler.updateAddress",n,function(e){})};var o=function(e){GameDataMgr.GameState=0;pomelo.request("game.gameHandler.enter_game",{},function(t){console.log("game.gameHandler.enter_game",t),t.code||(e&&e(t),dc.Iphone_Check_flag||AnysdkMgr.startLocation()),a(t)})};n.loginGame=o;n.doRaise=function(e,t){var n={};n.raise=e,pomelo.request("game.gameHandler.doraise",n,function(e){a(e)})};n.readyReq=function(e,t,n){var o,s={};s.ready=e,o=n==i.createRoomType.hallgame?"hallgame.gameHandler.ready":"game.gameHandler.ready",pomelo.request(o,s,function(e){console.log(o,e),t&&t(e),a(e)})};n.outCard=function(e,t,n){var o,s={};s.pai=e,o=n==i.createRoomType.hallgame?"hallgame.hzMJHandler.chupai":"game.hzMJHandler.chupai",pomelo.request(o,s,function(e){a(e)})};n.chiOper=function(e,t,n){var o,s={};s.pai=e,o=n==i.createRoomType.hallgame?"hallgame.hzMJHandler.chi":"game.hzMJHandler.chi",pomelo.request(o,s,function(e){a(e)})};n.pengOper=function(e,t){var n;n=t==i.createRoomType.hallgame?"hallgame.hzMJHandler.peng":"game.hzMJHandler.peng",pomelo.request(n,{},function(e){a(e)})};n.gangOper=function(e,t,n){var o,s={};s.pai=e,o=n==i.createRoomType.hallgame?"hallgame.hzMJHandler.gang":"game.hzMJHandler.gang",pomelo.request(o,s,function(e){a(e)})};n.passOper=function(e,t){var n;n=t==i.createRoomType.hallgame?"hallgame.hzMJHandler.guo":"game.hzMJHandler.guo",pomelo.request(n,{},function(e){a(e)})};n.huOper=function(e,t){var n;n=t==i.createRoomType.hallgame?"hallgame.hzMJHandler.hu":"game.hzMJHandler.hu",pomelo.request(n,{},function(e){a(e)})},n.chupai_DB=function(e,t){var n={};n.pai=e,pomelo.request("game.hzDBuckleHandler.chupai",n,function(e){console.log("game.hzDBuckleHandler.chupai:",e),t&&t(e),a(e)})},n.guo_DB=function(e){pomelo.request("game.hzDBuckleHandler.guo",{},function(t){console.log("game.hzDBuckleHandler.guo:",t),e&&e(t),a(t)})},n.changeSeat=function(e,t){var n={hopeIndex:e};pomelo.request("game.gameHandler.changeSeat",n,function(e){console.log("game.gameHandler.changeSeat:",e),t&&t(e),a(e)})},n.optExchangeSeat=function(e,t){var n={agree:e};pomelo.request("game.gameHandler.optExchangeSeat",n,function(e){console.log("game.gameHandler.optExchangeSeat:",e),t&&t(e),a(e)})};n.loginClub=function(e,t){var n={};n.clubId=e,pomelo.request("club.clubHandler.loginClub",n,function(e){console.log("club.clubHandler.loginClub:",e),t&&t(e),a(e)})};n.joinExperienceClub=function(e){pomelo.request("club.clubHandler.joinExperienceClub",{},function(t){console.log("club.clubHandler.joinExperienceClub:",t),e&&e(t),-110==t.code&&publicWindow.alert.show("\u63d0\u793a",t.msg,function(){GameDataMgr.reset(),pomelo.disconnect(),pomelo.reconnect()})})};n.logoutClub=function(e){pomelo.request("club.clubHandler.logoutClub",{},function(t){console.log("club.clubHandler.logoutClub:",t),e&&e(t),a(t)})};n.getClubInfo=function(e,t){var n={};n.clubId=""+e,pomelo.request("club.clubHandler.getClubInfo",n,function(e){console.log("club.clubHandler.getClubInfo:",e),t&&t(e),a(e)})};n.getClubsBaseInfo=function(e,t){var n={};n.clubIds=e,pomelo.request("club.clubHandler.getClubsBaseInfo",n,function(e){console.log("club.clubHandler.getClubsBaseInfo:",e),e.code||t&&t(e.data),a(e)})};n.getInviteList=function(e){pomelo.request("club.clubHandler.getUserInvitation",{},function(t){console.log("club.clubHandler.getUserInvitation",t),t.code||e&&e(t.data),a(t)})};n.inviteUser=function(e,t,n){var i={};i.inviteUserId=e,i.clubId=t,pomelo.request("club.clubHandler.inviteUser",i,function(e){console.log("club.clubHandler.inviteUser",e),n&&n(e),a(e)})};n.invitedOpt=function(e,t,n){var i={};i.agree=e,i.clubId=t,pomelo.request("club.clubHandler.optUserInvitation",i,function(e){console.log("club.clubHandler.optUserInvitation",e),n&&n(e),a(e)})};n.eixtClub=function(e,t){var n={};n.clubId=e,pomelo.request("club.clubHandler.exitClub",n,function(e){console.log("club.clubHandler.exitClub",e),e.code||t&&t(e),a(e)})};n.enterClub=function(e,t){var n={};n.clubId=e,pomelo.request("club.clubHandler.requestClub",n,function(e){console.log("club.clubHandler.requestClub",e),t&&t(e),a(e)})};n.clubReqOpt=function(e,t,n,i){var o={};o.agree=e,o.clubId=t,o.requestId=n,pomelo.request("club.clubHandler.optClubRequests",o,function(e){console.log("club.clubHandler.optClubRequests",e),i&&i(e),a(e)})};n.kickUser=function(e,t,n){var i={};i.clubId=e,i.kickUserId=t,pomelo.request("club.clubHandler.kickUser",i,function(e){console.log("club.clubHandler.kickUser",e),n&&n(e),a(e)})};n.modifyClubInfo=function(e,t,n,i){var o={};o.clubId=e,o.type=t,1==t?o.name=n:2==t?o.introduce=n:3==t?o.notice=n:4==t?(o.open_time=n.open_time,o.close_time=n.close_time):5==t&&(o.uswitch=n),pomelo.request("club.clubHandler.modifyClubInfo",o,function(e){console.log("club.clubHandler.modifyClubInfo",e),i&&i(e),a(e)})};n.getBigWinerRank=function(e,t,n,i){var o={};o.clubId=e,o.type=t,o.gametype=n,pomelo.request("club.clubHandler.getBigWinerRank",o,function(e){console.log("club.clubHandler.getBigWinerRank",e),i&&i(e),a(e)})};n.getBattleCount=function(e,t,n,i){var o={};o.clubId=e,o.type=t,o.gametype=n,pomelo.request("club.clubHandler.getBattleCount",o,function(e){console.log("club.clubHandler.getBattleCount",e),i&&i(e),a(e)})};n.getClubHistroy=function(e,t,n,i){var o={};o.clubId=e,o.type=t,o.gametype=n,pomelo.request("club.clubHandler.getClubHistroy",o,function(e){console.log("club.clubHandler.getClubHistroy",e),i&&i(e),a(e)})};n.dissolveClub=function(e,t){var n={};n.clubId=e,pomelo.request("club.clubHandler.dissolveClub",n,function(e){console.log("club.clubHandler.dissolveClub",e),t&&t(e),a(e)})};n.getAgentInfo=function(e){pomelo.request("gm.gmHandler.getAgentInfo",{},function(t){console.log("gm.gmHandler.getAgentInfo",t),e&&e(t),a(t)})};n.sellGems=function(e,t,n){var i={};i.userId=e,i.gems=t,pomelo.request("gm.gmHandler.sellGems",i,function(e){console.log("gm.gmHandler.sellGems",e),n&&n(e),a(e)})};n.getSellRecord=function(e,t,n,i){var o={};o.userId=e,o.start=t,o.step=n,pomelo.request("gm.gmHandler.getSellRecord",o,function(e){console.log("gm.gmHandler.getSellRecord",e),i&&i(e),a(e)})};n.getUserChargeRecord=function(e){pomelo.request("gm.gmHandler.getUserChargeRecord",{},function(t){console.log("gm.gmHandler.getUserChargeRecord",t),e&&e(t),a(t)})};n.getRebate=function(e){pomelo.request("gm.gmHandler.getRebate",{},function(t){console.log("gm.gmHandler.getRebate",t),e&&e(t),a(t)})},n.getRebateHistroy=function(e,t,n){var i={};i.start=e,i.step=t,pomelo.request("gm.gmHandler.getRebateHistroy",i,function(e){console.log("gm.gmHandler.getRebateHistroy",e),n&&n(e)})};n.getSpreadUserInfo=function(e,t){var n={};e&&(n.userId=e),pomelo.request("gm.gmHandler.getSpreadUserInfo",n,function(e){console.log("gm.gmHandler.getSpreadUserInfo",e),t&&t(e),a(e)})};n.getStatistics=function(e){pomelo.request("gm.gmHandler.getStatistics",{},function(t){console.log("gm.gmHandler.getStatistics",t),e&&e(t),a(t)})};var s=function(e,t){var n={};n.roomId=e,pomelo.request("gm.gmHandler.getRoomInfo",n,function(e){console.log("gm.gmHandler.getRoomInfo",e),t&&t(e),a(e)})};n.getRoomInfo=s;n.kickUserOutRoom=function(e,t,n){var i={};i.roomId=e,i.userId=t,pomelo.request("gm.gmHandler.kickUserOutRoom",i,function(e){console.log("gm.gmHandler.kickUserOutRoom",e),n&&n(e),a(e)})};n.dissolveRoom=function(e,t){var n={};n.roomId=e,pomelo.request("gm.gmHandler.dissolveRoom",n,function(e){console.log("gm.gmHandler.dissolveRoom",e),t&&t(e),a(e)})};n.getUserInfo=function(e,t){var n={};n.userId=e,pomelo.request("gm.gmHandler.getUserInfo",n,function(e){console.log("gm.gmHandler.getUserInfo",e),t&&t(e),a(e)})};n.changeAgentLevel=function(e,t,n){var i={};i.userId=e,i.agent_level=t,pomelo.request("gm.gmHandler.changeAgentLevel",i,function(e){console.log("gm.gmHandler.changeAgentLevel",e),n&&n(e),a(e)})};n.addBanUser=function(e,t){var n={};n.userId=e,pomelo.request("gm.gmHandler.addBanUser",n,function(e){console.log("gm.gmHandler.addBanUser",e),t&&t(e),a(e)})};n.removeBanUser=function(e,t){var n={};n.userId=e,pomelo.request("gm.gmHandler.removeBanUser",n,function(e){console.log("gm.gmHandler.removeBanUser",e),t&&t(e),a(e)})};n.getPlayerReportList=function(e,t,n){var i={};i.start=e,i.step=t,pomelo.request("gm.gmHandler.getPlayerReportList",i,function(e){console.log("gm.gmHandler.getPlayerReportList",e),n&&n(e),a(e)})};n.getAgentRequestList=function(e,t,n){var i={};i.start=e,i.step=t,pomelo.request("gm.gmHandler.getAgentRequestList",i,function(e){console.log("gm.gmHandler.getAgentRequestList",e),n&&n(e),a(e)})};n.optAgentRequest=function(e,t,n){var i={};i.userId=e,i.agree=t,pomelo.request("gm.gmHandler.optAgentRequest",i,function(e){console.log("gm.gmHandler.optAgentRequest",e),n&&n(e),a(e)})};n.createClub=function(e,t,n,i,o){var s={};e&&(s.ownerId=e),t&&(s.clubId=t),s.name=n,s.gametype=i,pomelo.request("gm.gmHandler.createClub",s,function(e){console.log("gm.gmHandler.createClub",e),o&&o(e),a(e)})};n.optClub=function(e,t,n,i){var o={};o.ownerId=e,o.clubId=t,o.type=n,pomelo.request("gm.gmHandler.optClub",o,function(e){console.log("gm.gmHandler.optClub",e),i&&i(e),a(e)})};n.getAllClub=function(e,t,n){var i={start:e,step:t};pomelo.request("gm.gmHandler.getAllClub",i,function(e){console.log("gm.gmHandler.getAllClub",e),n&&n(e),a(e)})};s=function(e,t){var n={};n.roomId=e,pomelo.request("gm.gmHandler.getRoomInfo",n,function(e){console.log("gm.gmHandler.getRoomInfo",e),t&&t(e),a(e)})};n.getRoomInfo=s,n.getServerInfo_gm=function(e){pomelo.request("gm.gmHandler.getServerInfo",{},function(t){console.log("gm.gmHandler.getServerInfo",t),e&&e(t),a(t)})},n.setServerInfo_gm=function(e,t,n,i,o){var s={type:e,AndroidVersion:t,IPhoneVersion:n,ServerState:i};pomelo.request("gm.gmHandler.setServerInfo",s,function(e){console.log("gm.gmHandler.setServerInfo",e),o&&o(e),a(e)})},n.getRollingNotice_gm=function(e){pomelo.request("gm.gmHandler.getRollingNotice",{},function(t){console.log("gm.gmHandler.getRollingNotice",t),e&&e(t),a(t)})},n.setRollingNotice_gm=function(e,t,n,i,o){var s={key:e,info:t,beginTime:n,endTime:i};pomelo.request("gm.gmHandler.setRollingNotice",s,function(e){console.log("gm.gmHandler.setRollingNotice",e),o&&o(e),a(e)})},n.delRollingNotice=function(e,t){var n={key:e};pomelo.request("gm.gmHandler.delRollingNotice",n,function(e){console.log("gm.gmHandler.delRollingNotice",e),t&&t(e),a(e)})},n.getEclub=function(e){pomelo.request("gm.gmHandler.getEclub",{},function(t){console.log("gm.gmHandler.getEclub",t),e&&e(t),a(t)})},n.addEclub=function(e,t,n){var i={clubId:e,priority:t};pomelo.request("gm.gmHandler.addEclub",i,function(e){console.log("gm.gmHandler.addEclub",e),n&&n(e),a(e)})},n.delEclub=function(e,t){var n={clubId:e};pomelo.request("gm.gmHandler.delEclub",n,function(e){console.log("gm.gmHandler.delEclub",e),t&&t(e),a(e)})},n.getUserTaskStateList=function(e){pomelo.request("gm.gmHandler.getUserTaskStateList",{},function(t){console.log("gm.gmHandler.getUserTaskStateList",t),e&&e(t),a(t)})},n.optUserTaskState=function(e,t,n){var i={};i.userId=e,i.state=t,pomelo.request("gm.gmHandler.optUserTaskState",i,function(e){console.log("gm.gmHandler.optUserTaskState",e),n&&n(e),a(e)})},n.addExperienceAgentList=function(e,t){var n={};n.userId=e,pomelo.request("gm.gmHandler.addExperienceAgentList",n,function(e){console.log("gm.gmHandler.addExperienceAgentList",e),t&&t(e),a(e)})},n.addExperienceAgentList=function(e,t){var n={};n.userId=e,pomelo.request("gm.gmHandler.addExperienceAgentList",n,function(e){console.log("gm.gmHandler.addExperienceAgentList",e),t&&t(e),a(e)})},n.getExperienceAgentList=function(e){pomelo.request("gm.gmHandler.getExperienceAgentList",{},function(t){console.log("gm.gmHandler.getExperienceAgentList",t),e&&e(t),a(t)})},n.remExperienceAgentList=function(e,t){var n={};n.userId=e,pomelo.request("gm.gmHandler.remExperienceAgentList",n,function(e){console.log("gm.gmHandler.remExperienceAgentList",e),t&&t(e),a(e)})};n.getTasks=function(e){pomelo.request("task.taskHandler.getTasks",{},function(t){console.log("task.taskHandler.getTasks",t),e&&e(t)})};n.finishTask=function(e,t,n){var i={};i.type=e,i.reclv=t,pomelo.request("task.taskHandler.finishTask",i,function(e){console.log("task.taskHandler.finishTask",e),n&&n(e),a(e)})},n.enterHallGameHall=function(e,t){var n={};n.hallGamehallId=e,pomelo.request("hall.hallHandler.enterHallGameHall",n,function(e){console.log("hall.hallHandler.enterHallGameHall",e),t&&t(e),a(e)})},n.loginHallGameHall=function(e){pomelo.request("hallgame.gameHandler.loginHallGameHall",{},function(t){console.log("hallgame.gameHandler.loginHallGameHall",t),e&&e(t),a(t)})},n.logoutHallGameHall=function(e){pomelo.request("hallgame.gameHandler.logoutHallGameHall",{},function(t){console.log("hallgame.gameHandler.logoutHallGameHall",t),e&&e(t),a(t)})},n.getHallGameConfigs=function(e){pomelo.request("hall.hallHandler.getHallGameConfigs",{},function(t){console.log("hall.hallHandler.getHallGameConfigs",t),e&&e(t),a(t)})},n.getHallGameRooms=function(e){pomelo.request("hallgame.gameHandler.getHallGameRooms",{},function(t){console.log("hall.hallHandler.getHallGameRooms",t),e&&e(t),a(t)})},n.enter_game_arena=function(e,t,n){var i={};e&&(i.roomId=e),null!=t&&(i.seatIndex=t),pomelo.request("hallgame.gameHandler.enter_game",i,function(e){console.log("hallgame.gameHandler.enter_game",e),n&&n(e),a(e)})},n.optIsRobotTime=function(e,t){var n={robot:e};pomelo.request("hallgame.gameHandler.optIsRobotTime",n,function(e){console.log("hallgame.gameHandler.optIsRobotTime",e),t&&t(e),a(e)})},n.syncCountDown=function(e){pomelo.request("hallgame.gameHandler.syncCountDown",{},function(t){console.log("hallgame.gameHandler.syncCountDown",t),e&&e(t),a(t)})},n.getHallGameCountAll=function(e,t,n){var i={hallGamehallId:e};t&&(i.date=t),pomelo.request("hall.hallHandler.getHallGameCountAll",i,function(e){console.log("hall.hallHandler.getHallGameCountAll",e),n&&n(e),a(e)})},n.getHallGameWinerCountAll=function(e,t,n){var i={hallGamehallId:e};t&&(i.date=t),pomelo.request("hall.hallHandler.getHallGameWinerCountAll",i,function(e){console.log("hall.hallHandler.getHallGameWinerCountAll",e),n&&n(e),a(e)})};var r=new Promise(function(e,t){e()});n.promise=r,cc._RF.pop()},{codeConfig:"codeConfig"}],HistoryGamesItem:[function(e,t,n){"use strict";cc._RF.push(t,"96d708td1FCrITNaPfu010z","HistoryGamesItem"),cc.Class({extends:cc.Component,properties:{lblIndex:cc.Label,playTime:cc.Label,usernames:[cc.Label],sharebtn:cc.Node,sharebtn_XL:cc.Node,relaybtn:cc.Node,_idx:-1,bgNode:cc.Node},onLoad:function(){},setIndex:function(e){this._idx=e},initGamesItem:function(e,t){var n=this._idx,i=""+n;this.lblIndex.string=i,this.relaybtn.idx=n;for(var a=n%2,o=0;o<this.bgNode.childrenCount;o++){var s=this.bgNode.children[o];s.active=o==a}var r=this.dateFormat(1e3*t.create_time);this.playTime.string=r;var c,l=t.result;e.conf?c=e.conf.peoplemax:c=4;for(var h=0;h<4;++h)if(h<c){e.seats[h];var d,u=l?l[h]:0;this.usernames[h].node.active=!0,u>0?(this.usernames[h].string="+"+u,d=new cc.Color(162,255,117)):(this.usernames[h].string=u,d=new cc.Color(255,117,113)),this.usernames[h].node.color=d}else this.usernames[h].node.active=!1},dateFormat:function(e){var t=new Date(e),n=(t.getFullYear(),t.getMonth()+1);n=n>=10?n:"0"+n;var i=t.getDate();i=i>=10?i:"0"+i;var a=t.getHours();a=a>=10?a:"0"+a;var o=t.getMinutes();o=o>=10?o:"0"+o;var s=t.getSeconds();return a+":"+o+":"+(s=s>=10?s:"0"+s)}}),cc._RF.pop()},{}],HistoryList:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(a,o){try{var s=t[a](o),r=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(r).then(function(e){i("next",e)},function(e){i("throw",e)});e(r)}("next")})}}cc._RF.push(t,"eadf1GGgAFBZbs3PwQRGc38","HistoryList");var o=e("WechatHelper"),s=e("XLHelper"),r=e("GameTypeConf");cc.Class({extends:cc.Component,properties:{history:cc.Node,viewList:cc.Node,content:cc.Node,contentGame:cc.Node,viewList1:cc.Node,_historyData:null,_curRoomInfo:null,emptyTip:cc.Node,GameInfoNode:cc.Node,HistoryRoomsItem:cc.Prefab,HistoryRoomsItem_2P:cc.Prefab,HistoryGamesItem:cc.Prefab,End_FrameNode:cc.Node,toggleGroup:cc.ToggleGroup,HFMNode:cc.Node,editNode:cc.Node,hisNode:cc.Node,rankNode:cc.Node,rankView_mj2:cc.Node,rankView_mj4:cc.Node,rankViewContent:cc.Node,rankViewContent_mj2:cc.Node,rankItem:cc.Prefab,downAni:cc.Node,_curInterfaceType:0},onLoad:function(){this.GameInfoNode.active=!1,this.viewList1.active=!1,this.viewList.active=!0,this.emptyTip.active=!0,this.ShowHFM(!1),this._viewitemTemp=this.content.children[0],this.content.removeChild(this._viewitemTemp)},openByType:function(e){this.selectBtnBtType(this._curInterfaceType),this.setInterfaceType(this._curInterfaceType),0==this._curInterfaceType?this.sendMJ4BigWinner():5==this._curInterfaceType?this.sendMJ2BigWinner():1==this._curInterfaceType?this.sendMJ4History():3==this._curInterfaceType?this.sendMJ2History():6==this._curInterfaceType?this.sendDBHistory():7==this._curInterfaceType&&this.sendTDHHistory()},sendMJ2BigWinner:function(){var e={};e.type=r.historyServerGameType.mj2_hz,e.start=0,e.step=50,Hall_ReqAndRes.getBigWinner(e.type,e.start,e.step,function(e){this.getBigWinnerBoard(e,!1)}.bind(this))},sendMJ4BigWinner:function(){var e={};e.type=r.historyServerGameType.mj4_hz,e.start=0,e.step=50,Hall_ReqAndRes.getBigWinner(e.type,e.start,e.step,function(e){this.getBigWinnerBoard(e,!0)}.bind(this))},getBigWinnerBoard:function(e,t){var n=e.rank,i=[];for(var a in n){var o=JSON.parse(n[a]);o.rank=a,i.push(o)}this.setRankData(i,t)},setRankData:function(e,t){for(var n=[],i=GroupDataMgr.userInfoMap,a=0;a<e.length;a++){var o=e[a].userId;i[o]||n.push(o)}GroupDataMgr.getUsersInfo(n,function(n){for(var a=0;a<e.length;a++){var o=e[a].userId;e[a].headImg=i[o].headImg,e[a].name=i[o].name}t?this.initRankData(e):this.initRankData_mj2(e)}.bind(this))},initRankData_mj2:function(e){if(e){this.rankViewContent_mj2.removeAllChildren();for(var t=0,n=e.length>50?50:e.length,i=0,a=0;a<n;a++){var o=e[a];if("0"!=o.userId){var s=cc.instantiate(this.rankItem);s.getComponent("rankItem").initData(o,i+1),this.rankViewContent_mj2.addChild(s),t+=s.height,i++}}this.rankViewContent_mj2.height=t+10}},initRankData:function(e){if(e){this.removeRankItems();for(var t=0,n=e.length>50?50:e.length,i=0,a=0;a<n;a++){var o=e[a];if("0"!=o.userId){var s=cc.instantiate(this.rankItem);s.getComponent("rankItem").initData(o,i+1),this.rankViewContent.addChild(s),t+=s.height,i++}}this.rankViewContent.height=t+10}},removeRankItems:function(){this.rankViewContent.removeAllChildren()},getRankUsers:function(e){for(var t=GroupDataMgr.userInfoMap,n=[],i=0;i<e.length;i++){var a=e[i];t[a.userId]||n.push(parseInt(a.userId))}if(n.length>0){var o={};o.users=n,dc.goldNet.send("GetUserNameAndIcon",o,dc.GoldDataMgr.hallRouteKey);var s=this;dc.goldNet.asyncClosure(function(n){if(n){var i=n.users;if(i){for(var a=0;a<e.length;a++){var o=e[a],c=o.userId;"0"!=c&&(i[c]?o.userName=i[c].name:o.userName=t[c]?t[c].name:"")}dc.userMgr.rankType==r.BIGWINNER_MJ2?s.initRankData_mj2(e):s.initRankData(e)}}else s.setRankData(e)})}else this.setRankData(e)},sendMJ2History:function(){var e={};e.type=r.historyServerGameType.mj2_hz,e.start=0,e.step=20,Hall_ReqAndRes.getHistory(e.type,e.start,e.step,function(e){console.log("sendMJ2BigWinner",e),this.getHistoryList(e)}.bind(this))},sendMJ4History:function(){var e={};e.type=r.historyServerGameType.mj4_hz,e.start=0,e.step=20,Hall_ReqAndRes.getHistory(e.type,e.start,e.step,function(e){console.log("sendMJ2BigWinner",e),this.getHistoryList(e)}.bind(this))},sendDBHistory:function(){var e={};e.type=r.historyServerGameType.dbuckle4_hz,e.start=0,e.step=20,Hall_ReqAndRes.getHistory(e.type,e.start,e.step,function(e){console.log("sendDBBigWinner",e),this.getHistoryList(e)}.bind(this))},sendHistory:function(e,t,n){var i=this;return new Promise(function(a,o){Hall_ReqAndRes.getHistory(e,t,n,function(e){a(e)}.bind(i))})},sendTDHHistory:function(){var e=function(){var e=a(regeneratorRuntime.mark(function e(){var n,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendHistory(r.historyServerGameType.mj_tdh4,0,20);case 2:return n=e.sent,a=n.hislist||[],e.next=6,t.sendHistory(r.historyServerGameType.mj_tdh3,0,20);case 6:o=e.sent,s=o.hislist||[],a.push.apply(a,i(s)),t.getHistoryList(n);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t=this;e()},getHistoryList:function(e){for(var t=e.hislist,n=0;n<t.length;n++){t[n]=JSON.parse(t[n]),"string"==typeof t[n]&&(t[n]=JSON.parse(t[n]))}t.sort(function(e,t){return t.time-e.time}),this._historyData=t,this.initRoomHistoryList(t)},initRoomHistoryList:function(e){this.content.removeAllChildren(),0!=this._curInterfaceType&&this.initGradeByGameType(e)},initGradeByGameType:function(e){if(null!=e){this.content.removeAllChildren();for(var t=e,n=0;n<t.length;n++){var i,a,o=t[n],s=t[n];if(s.conf)i=(a="string"==typeof s.conf?JSON.parse(s.conf):s.conf).peoplemax>2?cc.instantiate(this.HistoryRoomsItem):cc.instantiate(this.HistoryRoomsItem_2P),0!=a.gametype&&3!=a.gametype&&4!=a.gametype||i.on(cc.Node.EventType.TOUCH_END,this.onViewItemClicked,this);else(i=cc.instantiate(this.HistoryRoomsItem)).on(cc.Node.EventType.TOUCH_END,this.onViewItemClicked,this);this.content.addChild(i),i.idx=n,i.getComponent("HistoryRoomsItem").initRoomsItem(o)}this.emptyTip.active=0==t.length,this.shrinkContent(t.length),this._curRoomInfo=null}else console.log("data null")},playDownTipsAni:function(){this.downAni.getComponent(cc.Animation).play("rank_downTips")},onBtnSelectItem:function(e){"toggle1"==e.target.parent.name?this._curInterfaceType=0:"toggle2"==e.target.parent.name?this._curInterfaceType=1:"toggle3"==e.target.parent.name?this._curInterfaceType=2:"toggle4"==e.target.parent.name?this._curInterfaceType=3:"toggle5"==e.target.parent.name?this._curInterfaceType=4:"toggle6"==e.target.parent.name?this._curInterfaceType=5:"toggle_db"==e.target.parent.name?this._curInterfaceType=6:"toggle_tdh"==e.target.parent.name&&(this._curInterfaceType=7),this.setInterfaceType(this._curInterfaceType),0==this._curInterfaceType?this.sendMJ4BigWinner():5==this._curInterfaceType?this.sendMJ2BigWinner():1==this._curInterfaceType?this.sendMJ4History():3==this._curInterfaceType?this.sendMJ2History():6==this._curInterfaceType?this.sendDBHistory():7==this._curInterfaceType&&this.sendTDHHistory()},selectBtnBtType:function(e){var t;t=6==e?"toggle_db":7==e?"toggle_tdh":"toggle"+(e+1);for(var n=this.toggleGroup._toggleItems,i=0;i<n.length;i++){var a=n[i],o=(a.isChecked,a.node.name);a.isChecked=o==t}},setInterfaceType:function(e){this._curInterfaceType=e,this.changeInterfaceByType()},changeInterfaceByType:function(){0==this._curInterfaceType?(this.rankNode.active=!0,this.rankView_mj2.active=!1,this.rankView_mj4.active=!0,this.hisNode.active=!1,this.playDownTipsAni()):1==this._curInterfaceType?(this.rankNode.active=!1,this.hisNode.active=!0,this.setPlaybackInterface(0)):2==this._curInterfaceType?(this.rankNode.active=!1,this.hisNode.active=!0,this.setPlaybackInterface(0)):3==this._curInterfaceType?(this.rankNode.active=!1,this.hisNode.active=!0,this.setPlaybackInterface(0)):4==this._curInterfaceType?(this.rankNode.active=!1,this.hisNode.active=!0,this.setPlaybackInterface(0)):5==this._curInterfaceType?(this.rankNode.active=!0,this.rankView_mj2.active=!0,this.rankView_mj4.active=!1,this.hisNode.active=!1):6==this._curInterfaceType?(this.rankNode.active=!1,this.hisNode.active=!0,this.setPlaybackInterface(0)):7==this._curInterfaceType&&(this.rankNode.active=!1,this.hisNode.active=!0,this.setPlaybackInterface(0))},ShowHFM:function(e){this.HFMNode.active=e},start:function(){},onBtnclose:function(){null==this._curRoomInfo?(this._historyData=null,this.history.active=!1):(this.setPlaybackInterface(0),this.initRoomHistoryList(this._historyData),this._gameDetailArr=[])},setPlaybackInterface:function(e){0==e?(this.GameInfoNode.active=!1,this.viewList1.active=!1,this.viewList.active=!0):1==e&&(this.GameInfoNode.active=!0,this.viewList1.active=!0,this.viewList.active=!1)},onBtnRecallInterface:function(){this.ShowHFM(!0),this.initEdit()},onBtnTextChanged:function(){this.initEdit()},initEdit:function(){var e=this.editNode.getChildByName("EditBox").getComponent(cc.EditBox),t=this.editNode.getChildByName("bg_Edit");""==e.string?t.active=!0:t.active=!1},setEditBoxStr:function(e){var t=this.editNode.getChildByName("EditBox").getComponent(cc.EditBox);e&&(t.string=e)},onBtnRecallClose:function(){console.log("onBtnRecallClose"),this.ShowHFM(!1)},onBtnSureHFM:function(){var e=this.editNode.getChildByName("EditBox").getComponent(cc.EditBox);e.string,this.getlShareVideo(e.string)},getRoomItemPrefab:function(){var e=this.content;if(e.childrenCount>index)return e.children[index];var t=cc.instantiate(this.HistoryRoomsItem);return e.addChild(t),t},initGameInfo:function(e,t){if(null!=t)if(t.length>0){var n,i;i=e.conf?(n=e.conf).peoplemax:4,this.viewList.active=!1,this.viewList1.active=!0;var a=this.GameInfoNode,o=a.getChildByName("lblRoomID").getComponent(cc.Label);4==n.gametype?o.string=e.id+"\u53f7\u623f\u95f4\uff08\u63a8\u5012\u80e1\uff09":3==n.gametype&&(o.string=e.id+"\u53f7\u623f\u95f4\uff08\u676d\u5dde\u9ebb\u5c06\uff09");t[0];var s,r=a.getChildByName("libTime").getComponent(cc.Label);s=this.dateFormat(1e3*e.time),r.string=s;for(var c=0;c<4;c++){var l="lblnames"+c;if(c<i){var h=e.seats[c];a.getChildByName(l).active=!0;var d=a.getChildByName(l).getComponent(cc.Label),u=dc.utils.setNameClamp(h.name);d.string=u}else a.getChildByName(l).active=!1}var g=a.getChildByName("lblUuid");g.active=!0,g.getComponent(cc.Label).string="uuid:"+e.uuid}else this.GameInfoNode.active=!0,this.viewList.active=!1,this.viewList1.active=!1;else this.GameInfoNode.active=!0},initGameHistoryList:function(e,t){var n;if(this.contentGame.removeAllChildren(),e.conf){var i=e.conf;n=0==i.gametype||3==i.gametype||4==i.gametype}else n=!0;for(var a=0;a<t.length;a++){var o=cc.instantiate(this.HistoryGamesItem);this.contentGame.addChild(o);var s=o.getComponent("HistoryGamesItem");s.setIndex(a),s.sharebtn.on(cc.Node.EventType.TOUCH_END,this.onBtnSharedClicked,this),s.sharebtn.idx=a,this.weichatBtnHide(s.sharebtn),s.sharebtn_XL.on(cc.Node.EventType.TOUCH_END,this.onBtnShared_XLClicked,this),s.sharebtn_XL.idx=a,this.XLInstallBtnHide(s.sharebtn_XL),n&&s.relaybtn.on(cc.Node.EventType.TOUCH_END,this.onBtnOpClicked,this),s.initGamesItem(e,t[a])}var r=cc.instantiate(this.End_FrameNode);r.active=!0,this.contentGame.addChild(r),this.initGameInfo(e,t);var c=this.contentGame.childrenCount;this.contentGame.height=(c-1)*this.HistoryGamesItem.data.height+r.height,this._curRoomInfo=e},weichatBtnHide:function(e){var t=AnysdkMgr.isWeichatInstall();e.active=!!t},XLInstallBtnHide:function(e){var t=AnysdkMgr.isXLInstall();e.active=t},getGameListOfRoom:function(e){this.room_idx=e;var t=this._historyData[e];Hall_ReqAndRes.getRecord(t.uuid,function(e){this.getCGameOfRoom(e)}.bind(this))},getCGameOfRoom:function(e){var t=e.record,n=this._historyData[this.room_idx],i=[];for(var a in t)t[a]=JSON.parse(t[a]),i.push(t[a]);i.sort(function(e,t){return e.create_time-t.create_time}),this._gameDetailArr=i,null!=t&&i.length>0&&(this.initGameHistoryList(n,i),this.setPlaybackInterface(1))},getDetailOfGame:function(e){var t=this._gameDetailArr[e];if(cc.log("HFdetal"),t.action_records.length>0){var n=t.action_records[0];n.conf&&(3==n.conf.gametype?(GameDataMgr.initReplayData(t),UIMgr.pushUI(UIMgr.HZMJGame)):4==n.conf.gametype?(GameDataMgr.initReplayData(t),UIMgr.pushUI(UIMgr.TDHGame)):(dc.GameDataMgr.initReplayData(t),UIMgr.pushUI(UIMgr.HZMJGame)))}},getlShareVideo:function(e){this._gameId=e;var t=e.substring(0,8),n=e.length,i=e.substring(8,n);i=Number(i),Hall_ReqAndRes.getRecord(t,function(e){var t=e.record,n=[];for(var a in t)t[a]=JSON.parse(t[a]),n.push(t[a]);n.sort(function(e,t){return e.create_time-t.create_time}),this._gameDetailArr=n,this.getDetailOfGame(i)}.bind(this))},getViewItem:function(e){var t=this.content;if(t.childrenCount>e)return t.children[e];var n=cc.instantiate(this._viewitemTemp);return t.addChild(n),n},dateFormat:function(e){var t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1;i=i>=10?i:"0"+i;var a=t.getDate();a=a>=10?a:"0"+a;var o=t.getHours();o=o>=10?o:"0"+o;var s=t.getMinutes();s=s>=10?s:"0"+s;var r=t.getSeconds();return n+"-"+i+"-"+a+" "+o+":"+s+":"+(r=r>=10?r:"0"+r)},shrinkContent:function(e){var t=this.content.childrenCount;this.content.height=t*this.HistoryRoomsItem.data.height},onViewItemClicked:function(e){var t=e.target.idx;console.log("historyItem click"),console.log(t),null==this._curRoomInfo?(this.room_idx=t,this.getGameListOfRoom(t)):(this.game_idx=t,this.getDetailOfGame(t))},onBtnOpClicked:function(e){var t=e.target.idx;console.log(t),null==this._curRoomInfo?(this.room_idx=t,this.getGameListOfRoom(t)):(this.game_idx=t,this.getDetailOfGame(t))},onBtnSharedClicked:function(e){var t=e.target.idx;console.log(t);var n=this._curRoomInfo.uuid+t;o.shareRecallToMate(n)},onBtnShared_XLClicked:function(e){var t=e.target.idx;console.log("onBtnShared_XLClicked"),console.log(t);var n=this._curRoomInfo.uuid+t;s.shareRecallToMate(n)}}),cc._RF.pop()},{GameTypeConf:"GameTypeConf",WechatHelper:"WechatHelper",XLHelper:"XLHelper"}],HistoryRoomsItem:[function(e,t,n){"use strict";cc._RF.push(t,"29d97jaOCxMVJjUcHl0nkH5","HistoryRoomsItem");e("path");cc.Class({extends:cc.Component,properties:{usernames:[cc.Label],scoresNode:[cc.Node],lblRoom:cc.Label,playtime:cc.Label,_gameType:0,_conf:null},onLoad:function(){},initRoomsItem:function(e){var t,n=e.conf;if(this._conf="string"==typeof n?JSON.parse(n):n,this._conf){if(0==this._conf.gametype)this.lblRoom.string=e.id+"\u53f7\u623f\u95f4\uff08\u676d\u5dde\u9ebb\u5c06\uff09";else if(1==this._conf.gametype)this.lblRoom.string=e.id+"\u53f7\u623f\u95f4\uff08\u98de\u884c\u68cb\uff09";else if(2==this._conf.gametype){0==this._conf.mode?this.lblRoom.string=e.id+"\u53f7\u623f\u95f4\uff08\u9ab0\u5b50\u5439\u725b\uff09":1==this._conf.mode&&(this.lblRoom.string=e.id+"\u53f7\u623f\u95f4\uff08\u9ab0\u5b50\u8840\u6218\u5230\u5e95\uff09");var i="";0==(o=this._conf.wanfa%100)?i=e.id+"\u53f7\u623f\u95f4\uff08\u5168\u6697\u56fa\u5b9a\u642d\u6863\uff09":1==o?i=e.id+"\u53f7\u623f\u95f4\uff08\u5168\u6697\u7ffb\u724c\u914d\u5bf9\uff09":10==o?i=e.id+"\u53f7\u623f\u95f4\uff08\u660e\u53cc\u56fa\u5b9a\u642d\u6863\uff09":11==o&&(i=e.id+"\u53f7\u623f\u95f4\uff08\u660e\u53cc\u7ffb\u724c\u914d\u5bf9\uff09"),this.lblRoom.string=i}else if(3==this._conf.gametype){var a=parseInt(this._conf.wanfa/100)%10;this.lblRoom.string=2==a?e.id+"\u53f7\u623f\u95f4\uff08\u676d\u5dde2\u4eba\u9ebb\u5c06\uff09":e.id+"\u53f7\u623f\u95f4\uff08\u676d\u5dde4\u4eba\u9ebb\u5c06\uff09"}else if(4==this._conf.gametype){var o=this._conf.wanfa%100%10;a=parseInt(this._conf.wanfa/100)%10,i="";1==o?i+="(\u65e0\u4e70\u9a6c":2==o&&(i+="(\u4e70\u9a6c"),4==a?i+="4\u4eba)":3==a&&(i+="3\u4eba)"),this.lblRoom.string=e.id+"\u53f7\u623f\u95f4"+i}}else this.lblRoom.string=e.id+"\u53f7\u623f\u95f4\uff08\u676d\u5dde\u9ebb\u5c06\uff09";t=this.dateFormat(1e3*e.time),this.playtime.string=t;for(var s=0;s<this.scoresNode.length;++s){var r=e.seats[s];if(r){this.usernames[s].node.active=!0,this.scoresNode[s].active=!0,this.usernames[s].string=r.name;var c,l=this.scoresNode[s].getChildByName("score").getComponent(cc.Label);r.score>0?l.string="+"+r.score:l.string=r.score,c=r.score>0?new cc.Color(162,255,117):new cc.Color(255,117,113),l.node.color=c}else this.scoresNode[s].active=!1,this.usernames[s].node.active=!1}},dateFormat:function(e){var t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1;i=i>=10?i:"0"+i;var a=t.getDate();a=a>=10?a:"0"+a;var o=t.getHours();o=o>=10?o:"0"+o;var s=t.getMinutes();s=s>=10?s:"0"+s;var r=t.getSeconds();return n+"-"+i+"-"+a+" "+o+":"+s+":"+(r=r>=10?r:"0"+r)}}),cc._RF.pop()},{path:7}],HttpMgr:[function(e,t,n){"use strict";function i(e,t,n){var i="http://"+e+"/"+t;if(n){var a="?";for(var o in n)"?"!=a&&(a+="&"),a+=o+"="+n[o];i+=encodeURI(a)}return i}cc._RF.push(t,"e4574mwqWpFZJkFDksHUkBl","HttpMgr");var a=function(){dc.DEBUG_NET_CONNECT_FLAG;return"127.0.0.1"};n.sendRequset=function(e,t,n){var i=a();o(i,e,t,n)};var o=function(e,t,n,a){var o=i(e,t,n);return s(o,a)},s=function(e,t){var n=cc.loader.getXMLHttpRequest();return n.timeout=5e3,console.log(e),n.open("GET",e,!0),cc.sys.isNative&&(console.log("----------------"),n.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8")),n.onreadystatechange=function(){if(console.log("onreadystatechange"),4===n.readyState)if(console.log("onreadystatechange1"),n.status>=200&&n.status<300){console.log(n.responseText),console.log("http res("+n.responseText.length+"):"+n.responseText);try{var e=JSON.parse(n.responseText);t&&t(null,e)}catch(e){console.log("err:"+e)}}else t&&t(-1);else console.log("onreadystatechange2")},n.send(),n};cc._RF.pop()},{}],HuMgr:[function(e,t,n){"use strict";cc._RF.push(t,"45b479luABNVKFVYKYDaxTo","HuMgr");cc._RF.pop()},{}],ImageLoader_Gold:[function(e,t,n){"use strict";cc._RF.push(t,"a7a4cbs/OtGGbYd6jgTMqlb","ImageLoader_Gold"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},setIcon:function(e,t,n){cc.sys.OS_WINDOWS==cc.sys.os&&(e&&""!=e||(e="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIPwVcTCjl7D6hmibHU5enDiav3UZ15VhycqZ3HodaDbWyOsnH8AlZJot36QeJvTyPj6G71Wv76nfZw/132")),e&&""!=e?(this.node.active=!0,console.log("setIcon0"),this._spriteFrame?(this.setupSpriteFrame(),n&&n()):this.loadImage(e,t,n)):this.node.active=!1},setupSpriteFrame:function(){if(this._spriteFrame){var e=this.getComponent(cc.Sprite);e&&(e.spriteFrame=this._spriteFrame,this._spriteFrame=null)}},loadImage:function(e,t,n){cc.sys.os==cc.sys.OS_ANDROID?this.loadLocalPNG(e,t):cc.loader.load({url:e,type:"png"},function(e,t){var i=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));this._spriteFrame=i,this.setupSpriteFrame(),n&&n(i)}.bind(this))},loadLocalPNG:function(e,t){var n=jsb.fileUtils.getWritablePath()+"headimg/",i=dc.utils.hashCode(e),a=n+i+".png";console.log("filepath"+a);var o=function(){cc.loader.load(a,function(e,t){if(console.log("loadEnd"),console.log(t),console.log(e),!e){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));this._spriteFrame=n,this.setupSpriteFrame()}}.bind(this))}.bind(this);if(jsb.fileUtils.isFileExist(a))o();else{var s=function(e){e?(jsb.fileUtils.isDirectoryExist(n)||jsb.fileUtils.createDirectory(n),jsb.fileUtils.writeDataToFile(new Uint8Array(e),a)?(console.log("Remote write file succeed."),o()):console.log("Remote write file failed1.")):console.log("Remote download file failed2.")},r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=function(){cc.log("xhr.readyState  "+r.readyState),cc.log("xhr.status  "+r.status),4===r.readyState&&(200===r.status?s(r.response):s(null))}.bind(this),r.open("GET",e,!0),r.send()}}}),cc._RF.pop()},{}],ImageLoader:[function(e,t,n){"use strict";function i(e,t,n){cc.loader.load({url:e,type:"png"},function(e,i){var a=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));n(t,a)})}function a(e,t){var n={token:dc.userMgr.token,userId:e};dc.net.http_proto.sendProtoToHS("base_info",n,function(n,i){if(console.log(n),null==n){var a=null;i.headimgurl&&(a=i.headimgurl+"");var o={name:i.name,sex:i.sex,url:a},s=dc.GameDataMgr.seats;if(s&&s.length>0){var r=s[dc.GameDataMgr.getSeatIndexByID(e)];r.sex||(r.sex=i.sex),i.name&&(r.name=i.name),r.url=a}null!=t&&t(o)}})}function o(e,t){null==dc.GameDataMgr.baseInfoMap?a(e,t):dc.GameDataMgr.baseInfoMap[e]?null!=t&&t(dc.GameDataMgr.baseInfoMap[e]):a(e,t)}cc._RF.push(t,"1afbestOVJLvKcGjsZZyyWn","ImageLoader"),cc.Class({extends:cc.Component,properties:{_userid:null,_isContinueLoad:!0,_spriteFrame:null},onLoad:function(){},setloadImage:function(e,t,n){i(e,t,n)},setContinueLoad:function(e){this._isContinueLoad=e},setSchedule:function(){this.schedule(function(){if(this._isContinueLoad){if(null==this.userid)return;var e=this._userid;this.getWeichatFrameByuserID(e)}}.bind(this),10)},getIsPhone:function(){return cc.sys.OS_IOS==cc.sys.os||cc.sys.OS_ANDROID==cc.sys.os},setUrl:function(e){},setUserID:function(e,t){if(null==e)return console.log("no userid removeImg"),void this.removeSpriteFrame();this._userid=e;this.getIsPhone();this._isContinueLoad,this.getWeichatFrameByuserID(e,t)},setUserIDBySeat:function(e){if(null==e)return console.log("no userid removeImg"),void this.removeSpriteFrame();this._userid=e;this.getIsPhone();this._isContinueLoad,this.getImg(e)},removeSpriteFrame:function(){var e=this.getComponent(cc.Sprite);e&&(e.spriteFrame=null,this._spriteFrame=null)},getImg:function(e){var t=dc.GameDataMgr.seats[dc.GameDataMgr.getSeatIndexByID(e)];(t.url||cc.sys.OS_WINDOWS==cc.sys.os&&(t.url="http://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoMss5EkdCvmmmM9k5cPPYIad8ucCCysaa0yGA3vZUb5hV8NgeWIqiaOwk3lAxw7GoaXkKcjnz0Nibw/0"),t.url)?this._spriteFrame?this.setupSpriteFrame():i(t.url,e,function(e,t){this._spriteFrame=t,this.setupSpriteFrame()}.bind(this)):(console.log("no weichat image,url is null"),this.getComponent(cc.Sprite).spriteFrame=null,this._spriteFrame=null)},getWeichatFrameByuserID:function(e,t){o(e,function(n){cc.sys.OS_WINDOWS==cc.sys.os&&(n.url&&""!=n.url||(n.url="http://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoMss5EkdCvmmmM9k5cPPYIad8ucCCysaa0yGA3vZUb5hV8NgeWIqiaOwk3lAxw7GoaXkKcjnz0Nibw/0")),n.url?this._spriteFrame?(this._isContinueLoad=!1,this.setupSpriteFrame(),t&&t(n,this._spriteFrame)):this.loadWeichatImage(n,e,t):(console.log("no weichat image,url is null"),t&&t(n,null))}.bind(this))},loadWeichatImage:function(e,t,n){i(e.url,t,function(t,i){n&&n(e,i),this._spriteFrame=i,this._isContinueLoad=!1,this.setupSpriteFrame()}.bind(this))},setupSpriteFrame:function(){if(this._spriteFrame){var e=this.getComponent(cc.Sprite);e&&(e.spriteFrame=this._spriteFrame,this._spriteFrame=null)}}}),cc._RF.pop()},{}],IphoneComfirm:[function(e,t,n){"use strict";cc._RF.push(t,"8ebf6L88W9HE5G3Fd4i3DhK","IphoneComfirm"),cc.Class({extends:cc.Component,properties:{YZEditBox:cc.EditBox,IphoneEditBox:cc.EditBox,confimNode:cc.Node,countDown:cc.Label,btnYZMNode:cc.Node,GemsNum:cc.Label,comfirmSelectNode:cc.Node,_timer:null},onLoad:function(){null==dc.confirmOriginTime&&(this.btnYZMNode.active=!0,this.countDown.node.active=!1)},openComfirm:function(e){this.setType(e),this.node.active=!0},setType:function(e){this._comfirmType=e;var t=this.node.getChildByName("tips2"),n=this.node.getChildByName("tips1");1==e?(n.active=!0,t.active=!0):(n.active=!1,t.active=!1)},onBtnComfirm:function(){if(""!=this.IphoneEditBox.string)if(""!=this.YZEditBox.string){var e=this.IphoneEditBox.string;Hall_ReqAndRes.certify(this.YZEditBox.string,e,this._comfirmType,function(e){e.code||(console.log("sendVerifyMS succeed"),UserMgr.phone=e.data.phone,this.confimNode.active=!1,this.playAniGetFK(2),this.IphoneEditBox.string="",this.YZEditBox.string=""),publicWindow.alert.show("\u63d0\u793a",e.msg,!1)}.bind(this))}else publicWindow.alert.show("\u63d0\u793a","\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a",!1);else publicWindow.alert.show("\u63d0\u793a","\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a",!1)},playAniGetFK:function(e){},onBtngetYZM:function(){if(""!=this.IphoneEditBox.string){var e=this.timest(!0);dc.confirmOriginTime=e;var t=this.IphoneEditBox.string;Hall_ReqAndRes.getVerifyCode(t,function(e){e.code?publicWindow.alert.show("",e.msg):(console.log("sendVerifyMS succeed"),this._timer=setInterval(this.countDownStart.bind(this),1e3))}.bind(this))}else publicWindow.alert.show("\u63d0\u793a","\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a",!1)},onBtnClose:function(){clearInterval(this._timer),this._timer=null,this.confimNode.active=!1,GroupDataMgr.refreshInfo(UserMgr.userId)},timest:function(e){var t=Date.parse(new Date)/1e3;return e?parseInt(t):t.toString()},countDownStart:function(){var e=this.curTimeCount();e>0?(this.btnYZMNode.active=!1,this.countDown.node.active=!0):(this.btnYZMNode.active=!0,this.countDown.node.active=!1,clearInterval(this._timer),this._timer=null),this.countDown.string=e},curTimeCount:function(){var e=parseInt(dc.confirmOriginTime,10),t=this.timest(!0),n=parseInt(t);return n-e>60?0:n-e<=60?60-(n-e):void 0}}),cc._RF.pop()},{}],Item:[function(e,t,n){"use strict";cc._RF.push(t,"03521hjleNIEoVod9t6isJe","Item"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},itemID:0},setListView:function(e){this.listView=e},updateItem:function(e,t,n){this.itemID=t,this.userName=n,this.label.string=n||e+" Item#"+this.itemID},onClicked:function(){cc.log("item onClicked()"),this.userName&&this.listView.clickedItem(this.itemID)}}),cc._RF.pop()},{}],JoinRoom:[function(e,t,n){"use strict";cc._RF.push(t,"e96e3eStXFHsr+hIKhuozPC","JoinRoom"),cc.Class({extends:cc.Component,properties:{nums:{default:[],type:[cc.Label]},_inputIndex:0},onLoad:function(){this.initNum()},initNum:function(){for(var e=0;e<this.nums.length;e++)this.nums[e].string=""},onInput:function(e){if(!(this._inputIndex>=this.nums.length)&&(this.nums[this._inputIndex].string=e,this._inputIndex+=1,this._inputIndex==this.nums.length)){var t=this.parseRoomID();console.log("ok:"+t),this.onInputFinished(t)}},onResetClicked:function(){for(var e=0;e<this.nums.length;++e)this.nums[e].string="";this._inputIndex=0},onInputFinished:function(e){Hall_ReqAndRes.enterRoom(e,function(e){console.log("enter_private_room",e);for(var t=0;t<this.nums.length;++t)this.nums[t].string="";this._inputIndex=0,e.code?this.onResetClicked():this.node.active=!1}.bind(this))},parseRoomID:function(){for(var e="",t=0;t<this.nums.length;++t)e+=this.nums[t].string;return e},onNumClicked:function(e){if("btn_Input_1"==e.target.name)this.onInput(1);else if("btn_Input_2"==e.target.name)this.onInput(2);else if("btn_Input_3"==e.target.name)this.onInput(3);else if("btn_Input_4"==e.target.name)this.onInput(4);else if("btn_Input_5"==e.target.name)this.onInput(5);else if("btn_Input_6"==e.target.name)this.onInput(6);else if("btn_Input_7"==e.target.name)this.onInput(7);else if("btn_Input_8"==e.target.name)this.onInput(8);else if("btn_Input_9"==e.target.name)this.onInput(9);else if("btn_Input_Lose_weight"==e.target.name){for(var t=0;t<this.nums.length;++t)this.nums[t].string="";this._inputIndex=0}else"btn_Input_0"==e.target.name?this.onInput(0):"btn_Input_del"==e.target.name&&this._inputIndex>0&&(this._inputIndex-=1,this.nums[this._inputIndex].string="")},onBtnClose:function(){this.node.active=!1}}),cc._RF.pop()},{}],KefuView:[function(e,t,n){"use strict";cc._RF.push(t,"0557d9y54pBa7Dm1oy9Z/NB","KefuView"),cc.Class({extends:cc.Component,properties:{selectNode:cc.Node,advieceNode:cc.Node,coustomNode:cc.Node,_LayerIndex:0,phoneEidtBox:cc.EditBox,InputEditBox:cc.EditBox,lblContent:cc.Label,titleNode:cc.Node},onLoad:function(){this.selectNode.active=!0,this.advieceNode.active=!1,this.coustomNode.active=!1,this.lblContent.string="",this.setTitleType(0)},setTitleType:function(e){var t=this.titleNode.getChildByName("title_kefu"),n=this.titleNode.getChildByName("title_advice");0==e?(t.active=!0,n.active=!1):1==e&&(t.active=!1,n.active=!0)},initWeichatBtn:function(){var e=cc.find("Canvas/kefuNode/contNode/selectNode/weichatNode/bt_weichatKefu"),t=cc.find("Canvas/kefuNode/contNode/selectNode/weichatNode/bt_weichatKefu2");dc.Iphone_Check_flag?(e.active=!1,t.active=!0):(e.active=!0,t.active=!1)},initweiChatKF:function(){},onBtnClose:function(){1==this._LayerIndex?(this.selectNode.active=!0,this.advieceNode.active=!1,this.coustomNode.active=!1,this._LayerIndex=0,this.setTitleType(0)):0==this._LayerIndex&&(this.node.active=!1)},onBtnSelect:function(e){"btn_collectAdviece"==e.target.name?(this._LayerIndex=1,this.selectNode.active=!1,this.coustomNode.active=!1,this.advieceNode.active=!0,this.setTitleType(1)):"bt_weichatKefu"==e.target.name?(this._LayerIndex=1,this.selectNode.active=!1,this.coustomNode.active=!0,this.advieceNode.active=!1,this.setTitleType(0)):"bt_weichatKefu2"==e.target.name&&(this._LayerIndex=1,this.selectNode.active=!1,this.coustomNode.active=!0,this.advieceNode.active=!1,this.setTitleType(0)),this.initweiChatKF()},onBtnSubmit:function(){var e=cc.sys.localStorage.getItem("commit_time");null==dc.commitOriginTime&&(null==e||(dc.commitOriginTime=parseInt(e)));if(null==dc.commitOriginTime)!0;else{var t=this.curTimeCount();t>1800?!0:t<=1800&&!1}if(!0){var n=this.phoneEidtBox.string;if(!new RegExp("^[0-9]+$").test(n)||n.length<11)return void publicWindow.alert.show("\u63d0\u793a","\u624b\u673a\u53f7\u8f93\u5165\u9519\u8bef");if(""==this.InputEditBox.string.replace(/\s*/g,""))return void publicWindow.alert.show("\u63d0\u793a","\u8bf7\u8f93\u5165\u5185\u5bb9");Hall_ReqAndRes.suggest(this.InputEditBox.string,n,function(e){if(e.code)publicWindow.alert.show("\u63d0\u793a",e.msg);else{console.log("onBtnSubmit succeed");var t=this.timest(!0);dc.commitOriginTime=t,cc.sys.localStorage.setItem("commit_time",t),this.InputEditBox.string="",this.phoneEidtBox.string="",publicWindow.alert.show("\u63d0\u793a","\u63d0\u4ea4\u6210\u529f")}}.bind(this))}else publicWindow.alert.show("\u63d0\u793a","\u534a\u5c0f\u65f6\u53ea\u80fd\u63d0\u4ea4\u4e00\u6b21")},onInputReturn:function(e){this.lblContent.string=this.InputEditBox.string},timest:function(e){var t=Date.parse(new Date)/1e3;return e?parseInt(t):t.toString()},curTimeCount:function(){var e=parseInt(dc.commitOriginTime,10),t=this.timest(!0),n=parseInt(t);return n-e>1800?n-e:n-e<=1800?n-e:void 0}}),cc._RF.pop()},{}],ListView:[function(e,t,n){"use strict";cc._RF.push(t,"7292aXhzxNIa5O6AKA+gtQ4","ListView"),cc.Class({extends:cc.Component,properties:{itemTemplate:{default:null,type:cc.Prefab},_itemHeight:40,scrollView:{default:null,type:cc.ScrollView},spawnCount:0,totalCount:0,spacing:0,bufferZone:0,label:cc.Label},onLoad:function(){this.content=this.scrollView.content,this.items=[],this.updateTimer=0,this.updateInterval=.2,this.lastContentPosY=0},setChat:function(e){this.chat=e},hide:function(){this.node.active=!1},show:function(){this.node.active=!0},setUsers:function(e){this.users=e,this.items=[],this.content.removeAllChildren();var t=cc.instantiate(this.itemTemplate);this._itemHeight=t.height,this.totalCount=e.length,this.spawnCount=e.length,this.content.height=this.totalCount*(this._itemHeight+this.spacing)+this.spacing;for(var n=0;n<this.spawnCount;++n){var i=cc.instantiate(this.itemTemplate);this.content.addChild(i),i.setPosition(0,-i.height*(.5+n)-this.spacing*(n+1));var a=null;this.users&&(a=this.users[n]),i.getComponent("Item").setListView(this),i.getComponent("Item").updateItem(n,n,a),this.items.push(i)}},clickedItem:function(e){cc.log("listView clickedItem() itemId: "+e),this.chat.chooseUser(e)},getPositionInView:function(e){var t=e.parent.convertToWorldSpaceAR(e.position);return this.scrollView.node.convertToNodeSpaceAR(t)},update:function(e){if(this.updateTimer+=e,!(this.updateTimer<this.updateInterval)){this.updateTimer=0;for(var t=this.items,n=this.bufferZone,i=this.scrollView.content.y<this.lastContentPosY,a=(this._itemHeight+this.spacing)*t.length,o=0;o<t.length;++o){var s=this.getPositionInView(t[o]);if(i){if(s.y<-n&&t[o].y+a<0){t[o].setPositionY(t[o].y+a);var r=t[o].getComponent("Item"),c=r.itemID-t.length,l=null;this.users&&(l=this.users[c]),r.updateItem(o,c,l)}}else if(s.y>n&&t[o].y-a>-this.content.height){t[o].setPositionY(t[o].y-a);var h=t[o].getComponent("Item");console.log("itemID: "+h.itemID);var d=h.itemID+t.length;l=null;this.users&&(l=this.users[d]),h.updateItem(o,d,l)}}this.lastContentPosY=this.scrollView.content.y}},scrollEvent:function(e,t){}}),cc._RF.pop()},{}],ListenMsg:[function(e,t,n){"use strict";cc._RF.push(t,"bf0f1ORxzlAlJcVRAxHSug5","ListenMsg");var i=e("codeConfig");cc.Class({extends:cc.Component,properties:{},start:function(){},initListen:function(){pomelo.on("gameNotice",function(e){console.log("gameNotice:",e),publicWindow.alert.show("",e.msg)}),pomelo.on("kickUser",function(e){if(console.log("kickUser:",e),1==e.type){UserMgr.token=null,publicWindow.alert.show("",e.reason,function(){UserMgr.loginOut()})}}),pomelo.on("dissolveNotify",function(e){console.log("dissolveNotify:",e),GameDataMgr.roomID=null,UserMgr.clearRoomId(),GameDataMgr.turn=-1,GameDataMgr.lastChuPaiSeat=-1,GameDataMgr.GameEndReset(),GameDataMgr.getGamePage().clearScene(),UIMgr.pushUI(UIMgr.HallPage)}),pomelo.on("exitNotify",function(e){console.log("exitNotify:",e);var t=GameDataMgr.getGamePage();if(e.userId==UserMgr.userId)t.clearScene(),GameDataMgr.GameEndReset(),GameDataMgr.roomID=null,UserMgr.clearRoomId(),GameDataMgr.turn=-1,GameDataMgr.lastChuPaiSeat=-1,UIMgr.pushUI(UIMgr.HallPage);else{for(var n=GameDataMgr.seats,i=0;i<n.length;i++)if(e.userId==n[i].userId){n[i].userId=null;break}t.initSeats(!0),2==GameDataMgr.conf.gametype&&t.initSelectSeats()}}),pomelo.on("dissolveAgreeNotify",function(e){console.log("dissolveAgreeNotify:",e);var t=!1;for(var n in e.users)if(-1!=e.users[n].agree){t=!0;break}t&&GameDataMgr.getGamePage().Dissolvenotice(e)}),pomelo.on("kickRoom",function(e){(console.log("kickRoom:",e),e.roomId==GameDataMgr.roomID&&e.userId==UserMgr.userId)&&(GameDataMgr.roomID=null,UserMgr.clearRoomId(),GameDataMgr.turn=-1,GameDataMgr.lastChuPaiSeat=-1,GameDataMgr.GameEndReset(),UIMgr.pushUI(UIMgr.HallPage),GameDataMgr.getGamePage().clearScene())}),pomelo.on("chatInGame",function(e){console.log("chatInGame:",e);var t=e;if(1!=e.scene&&e.scene){ChatDataMgr.chatInGame(e);var n=UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer");2==e.scene?(n.refreshWTalkList(e),n.updateReadPointShow(e)):3==e.scene&&n.refreshMemTalkList(e)}else{GameDataMgr.getGamePage().sendContentHandle(t)}}),pomelo.on("enterGame",function(e){if(console.log("enterGame:",e),!e.code){GameDataMgr.clearMsgQue(),UIMgr.getMgrNodeScript().stopMsgAction(),GameDataMgr.enterGame(e);var t=(a=GameDataMgr.conf).createtype;if(2==a.gametype)0!=a.wanfa%100%10&&Hall_ReqAndRes.readyReq(1,function(){},GameDataMgr.conf.createtype);else t!=i.createRoomType.hallgame&&Hall_ReqAndRes.readyReq(1,function(){},GameDataMgr.conf.createtype);if(3==a.gametype)if(t==i.createRoomType.hallgame)if(UIMgr.getPageExit(UIMgr.HZMJGame_Arena))if(UIMgr.getPage(UIMgr.HZMJGame_Arena).active)UIMgr.getPageScript(UIMgr.HZMJGame_Arena).readyCountDown(2);var n=GameDataMgr.getGamePage();if(3==a.gametype)t==i.createRoomType.hallgame?UIMgr.pushUI(UIMgr.HZMJGame_Arena):UIMgr.pushUI(UIMgr.HZMJGame),n.initFoldsPos(),n.initLable();else if(2==a.gametype){UIMgr.pushUI(UIMgr.DBGame),n.initLable();var a,o=0==(a=GameDataMgr.conf).wanfa%100%10;n.setSelectSeatShow(o),o&&n.initSelectSeats()}else 4==a.gametype&&(UIMgr.pushUI(UIMgr.TDHGame),n.initFoldsPos(),n.initLable());n.initSeats(!0),n.jurgeLayerHide(),n.enableViews();for(var s=0;s<GameDataMgr.seats.length;s++){var r=GameDataMgr.seats[s];n.initReady(r.seatIndex)}for(s=0;s<GameDataMgr.seats.length;s++){if((r=GameDataMgr.seats[s]).userId){var c=GameDataMgr.getAddress(r.address,r.userId);GameDataMgr.dicLocaltion[r.userId]=c}}}}),pomelo.on("enterUser",function(e){console.log("enterUser:",e),GameDataMgr.enterUser(e);var t=GameDataMgr.getGamePage();t.initSeats(!0);for(var n=0;n<GameDataMgr.seats.length;n++){var i=GameDataMgr.seats[n];t.initReady(i.seatIndex)}2==GameDataMgr.conf.gametype&&t.initSelectSeats()}),pomelo.on("onlineState",function(e){if(console.log("onlineState:",e),e.clubId)e.roomId&&(GroupDataMgr.setClubOnlineInfo(e),(t=UIMgr.getPageScript(UIMgr.HallPage))._gameCircleLayer.getComponent("gameGroupLayer").getRoomUsersgetRoomUsers(GroupDataMgr.tableMap[e.roomId]));else if(e.hallGamehallId);else{var t;GameDataMgr.onlineHandle(e),(t=GameDataMgr.getGamePage()).initSeats(!0),2==GameDataMgr.conf.gametype&&t.initSelectSeats()}}),pomelo.on("gameUpdateAddress",function(e){console.log("gameUpdateAddress:",JSON.stringify(e));var t=GameDataMgr.getAddress(e.address,e.userId);console.log(JSON.stringify(t)),GameDataMgr.dicLocaltion[e.userId]=t}),pomelo.on("gameReady",function(e){if(console.log("gameReady:",e),e.clubId)GroupDataMgr.setClubReadyInfo(e),(t=UIMgr.getPageScript(UIMgr.HallPage))._gameCircleLayer.getComponent("gameGroupLayer").getRoomUsersgetRoomUsers(GroupDataMgr.tableMap[e.roomId]);else if(e.hallGamehallId);else{var t=GameDataMgr.getGamePage();GameDataMgr.readyHandle(e),t.readyHandle(e)}}),pomelo.on("gameRaise",function(e){console.log("gameRaise:",e);var t=GameDataMgr.getGamePage();GameDataMgr.MJDataMgr.raise=e.raise,t.raiseHandle(e.raise)}),pomelo.on("gameMJBegin",function(e){console.log("gameMJBegin:",e),GameDataMgr.onGameBegin(e),GameDataMgr.getGamePage().onGameBegin(e)}),pomelo.on("gameMJSync",function(e){console.log("gameMJSync:",e),GameDataMgr.onGameSync(e),GameDataMgr.getGamePage().onGameSync(e)}),pomelo.on("gameMJMopai",function(e){(console.log("gameMJMopai:",e),e.code)||(GameDataMgr.numofmj--,GameDataMgr.hasOutCard=!1,GameDataMgr.addMopaiHandle(e),GameDataMgr.getGamePage().addMopaiHandle(e))}),pomelo.on("gameMJChupai",function(e){if(console.log("gameMJChupai:",e),!e.code){var t=GameDataMgr.getGamePage();GameDataMgr.showOutCardHandle(e),t.showOutCardHandle(e)}}),pomelo.on("gameMJAction",function(e){(console.log("gameAction:",e),e.code)||(GameDataMgr.MJDataMgr.actionData=e,GameDataMgr.getGamePage().gameActionShow(e))}),pomelo.on("chiMJNotify",function(e){console.log("chiMJNotify:",e),GameDataMgr.chiOper(e),GameDataMgr.getGamePage().EatCardsHandle(e)}),pomelo.on("pengMJNotify",function(e){GameDataMgr.pengOper(e),GameDataMgr.getGamePage().PongHandle(e)}),pomelo.on("gangMJNotify",function(e){GameDataMgr.gangOper(e),GameDataMgr.getGamePage().KongHandle(e)}),pomelo.on("huMJNotify",function(e){GameDataMgr.getGamePage().huHandle(e)}),pomelo.on("gameOverMJNotify",function(e){console.log("gameOverMJNotify:",e),e.isEnd&&(console.log("game_end"),GameDataMgr.isOver=!0),GameDataMgr.getGamePage().gameOverHandle(e)}),pomelo.on("gameExchangeSeat",function(e){console.log("gameExchangeSeat:",e);for(var t=0,n=0,i=0,a=0;a<e.seats.length;a++)-1==e.seats[a].agree?i++:0==e.seats[a].agree?n++:1==e.seats[a].agree&&t++;var o=e.seats[0],s=e.seats[1];if(n>0){if(1==i)publicWindow.alert.hide();else if(1==t)for(a=0;a<e.seats.length;a++)if(0==e.seats[a].agree){if(e.seats[a].userId!=UserMgr.userId)return void publicWindow.alert.show("","\u5bf9\u65b9\u4e0d\u540c\u610f\u4ea4\u6362");console.log("refuse other")}}else if(1==i){var r,c;for(a=0;a<e.seats.length;a++){var l=e.seats[a];if(l.userId==UserMgr.userId){if(!(l.agree<0))return void publicWindow.alert.show("","\u6b63\u5728\u8bf7\u6c42\u5bf9\u65b9\u4ea4\u6362")}else l.agree>0&&(r=l.userId)}for(a=0;a<GameDataMgr.seats.length;a++)if(GameDataMgr.seats[a].userId==r){c=a;break}publicWindow.alert.show("","\u662f\u5426\u540c\u610f"+(c+1)+"\u53f7\u6905\u5b50\u6362\u4f4d\u7f6e\u8bf7\u6c42",function(){Hall_ReqAndRes.optExchangeSeat(1,function(e){})},function(){Hall_ReqAndRes.optExchangeSeat(0,function(e){})})}else if(2==t){var h=GameDataMgr.getSeatByID(o.userId),d=GameDataMgr.getSeatByID(s.userId);console.log(h.name+"\u548c"+d.name+"\u4ea4\u6362\u4f4d\u7f6e"),publicWindow.alert.show("",h.name+"\u548c"+d.name+"\u4ea4\u6362\u4f4d\u7f6e")}}),pomelo.on("gameChangeSeat",function(e){console.log("gameChangeSeat:",e);var t,n,i=e.seats[0],a=e.seats[1];t=dc.deepCopy(GameDataMgr.seats[i.index]),n=dc.deepCopy(GameDataMgr.seats[a.index]),GameDataMgr.seats[i.index]=n,GameDataMgr.seats[a.index]=t;for(var o=0;o<GameDataMgr.seats.length;o++)GameDataMgr.seats[o].seatIndex=o;GameDataMgr.seatIndex=GameDataMgr.getSeatIndexByID(UserMgr.userId),UIMgr.getPageScript(UIMgr.DBGame).changeSeatHandle(e)}),pomelo.on("gameDBuckleBegin",function(e){console.log("gameDBuckleBegin:",e),GameDataMgr.onGameBegin(e),UIMgr.getPageScript(UIMgr.DBGame).onGameBegin(e)}),pomelo.on("gameDBuckleChupai",function(e){console.log("gameDBuckleChupai:",e),GameDataMgr.gameDBuckleChupai(e),UIMgr.getPageScript(UIMgr.DBGame).outCardHandle(e)}),pomelo.on("gameDBuckleAction",function(e){console.log("gameDBuckleAction:",e),GameDataMgr.lastChuPaiSeat=GameDataMgr.turn,GameDataMgr.turn=e.turn,GameDataMgr.lcSeatIndex=e.lcSeatIndex,UIMgr.getPageScript(UIMgr.DBGame).actionHandle(e)}),pomelo.on("gameDBuckleSync",function(e){console.log("gameDBuckleSync:",e),GameDataMgr.onGameSync(e),UIMgr.getPageScript(UIMgr.DBGame).onGameSync(e)}),pomelo.on("gameOverDBuckleNotify",function(e){console.log("gameOverDBuckleNotify:",e),UIMgr.getPageScript(UIMgr.DBGame).gameOverHandle(e)}),pomelo.on("clubDynamicNotify",function(e){console.log("clubDynamicNotify:",e),GroupDataMgr.clubDynamicNotify(e);var t=UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer");t.clubDynamicNotify(e),t.refreshNum()}),pomelo.on("clubRequestNotify",function(e){console.log("clubRequestNotify:",e),GroupDataMgr.addRequsterUserId(e.userId),UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").getReqList(GroupDataMgr.requests)}),pomelo.on("inviteUserNotify",function(e){console.log("inviteUserNotify:",e),GroupDataMgr.addInviteClubID(e.clubId),UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").setClubInvite()}),pomelo.on("clubInfoNotify",function(e){(console.log("clubInfoNotify:",e),e.ownerId==UserMgr.userId)?GroupDataMgr.addMyClub(e.clubId):(GroupDataMgr.addOtherClub(e.clubId),GroupDataMgr.getGroupLayerSp()&&UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").enterNextClub())}),pomelo.on("kickClubNotify",function(e){console.log("kickClubNotify:",e),GroupDataMgr.delOtherClub(e.clubId),UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").kickedClub(e.clubId)}),pomelo.on("clubInfoModifyNotify",function(e){console.log("clubInfoModifyNotify:",e),GroupDataMgr.clubInfoModifyNotify(e),UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").setFix(e)}),pomelo.on("tableStateClubNotify",function(e){console.log("tableStateClubNotify:",e),GroupDataMgr.opening=e.opening,UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").setOpenState(GroupDataMgr.opening)}),pomelo.on("tableClubNotify",function(e){console.log("tableClubNotify:",e),GroupDataMgr.addClubRoom(e),UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").getClubTables(GroupDataMgr.tableMap)}),pomelo.on("tableDissolveClubNotify",function(e){console.log("tableDissolveClubNotify:",e),GroupDataMgr.delClubRoomId(e.roomId),UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").getClubTables(GroupDataMgr.tableMap)}),pomelo.on("tableEnterClubNotify",function(e){console.log("tableEnterClubNotify:",e),GroupDataMgr.setClubEnterInfo(e),UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").getRoomUsersgetRoomUsers(GroupDataMgr.tableMap[e.roomId])}),pomelo.on("tableExitClubNotify",function(e){console.log("tableExitClubNotify:",e),GroupDataMgr.setClubEixtInfo(e),UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer").getRoomUsersgetRoomUsers(GroupDataMgr.tableMap[e.roomId])}),pomelo.on("tableHallGameHallNotify",function(e){console.log("tableHallGameHallNotify:",e),ArenaDataMgr.createRoom(e),UIMgr.getPageScript(UIMgr.HallPage)._arenaLayer.getComponent("ArenaLayer").updateTable(e)}),pomelo.on("tableDissolveHallGameHallNotify",function(e){console.log("tableDissolveHallGameHallNotify:",e)}),pomelo.on("tableEnterHallGameHallNotify",function(e){console.log("tableEnterHallGameHallNotify:",e),ArenaDataMgr.userEnter(e),UIMgr.getPageScript(UIMgr.HallPage)._arenaLayer.getComponent("ArenaLayer").updateTable(e)}),pomelo.on("tableExitHallGameHallNotify",function(e){console.log("tableExitHallGameHallNotify:",e),ArenaDataMgr.userLeave(e),UIMgr.getPageScript(UIMgr.HallPage)._arenaLayer.getComponent("ArenaLayer").userLeave(e)}),pomelo.on("tableInfoHallGameHallNotify",function(e){console.log("tableInfoHallGameHallNotify:",e),ArenaDataMgr.setRoomInfo(e),UIMgr.getPageScript(UIMgr.HallPage)._arenaLayer.getComponent("ArenaLayer").updateTable(e)}),pomelo.on("robotState",function(e){(console.log("robotState:",e),ArenaDataMgr.onAutoState(e),e.userId==UserMgr.userId)&&GameDataMgr.getGamePage().onAutoState(e)})}}),cc._RF.pop()},{codeConfig:"codeConfig"}],LoadingLogic:[function(e,t,n){"use strict";cc._RF.push(t,"517bbiPwQxMjaSqdoDptyMC","LoadingLogic"),e("index"),cc.Class({extends:cc.Component,properties:{tipLabel:cc.Label,version:cc.Node,hotNode:cc.Node,_isDownding:!1,_isConnectSucceed:!1,_stateStr:"",_progress:0,progressLoad:cc.ProgressBar,loadNode:cc.Node,_progressNum:0},onLoad:function(){if(cc.sys.isNative&&cc.Device.setKeepScreenOn(!0),console.log("loading start"),this.version.active=!1,this.hotNode.active=!1,this.loadNode.active=!1,this.showlblByTag(0),console.log("isNotByHttp:"+UserMgr.isNotByHttp),UserMgr.isNotByHttp){var e={};e.IPhoneVersion=UserMgr.version,e.AndroidVersion=UserMgr.version,this.versionHandle(e)}else this.checkVersion()},start:function(){dc.SceneType=0},onBtnToJumpNewVersion:function(){console.log("appweb:"+dc.appweb),cc.sys.openURL(dc.appweb),this.showlblByTag(1)},updateSelect:function(e,t){var n=dc.utils.getUpdateType(e,t);console.log("updateselect:"+n),this.setUpdateSelect(n)},setUpdateSelect:function(e){0==e?(this.hotNode.active=!1,this.loadNode.active=!1,this.version.active=!0):1==e&&(this.hotNode.active=!0,this.loadNode.active=!0,this.version.active=!1,this.showlblByTag(1),this.hotUpdateReady())},hotUpdateReady:function(){var e=this.node.getComponent("CheckUpdate");e.showUpdateTipsLayer(!1),e.startHotUpdateReady(),e.checkUpdate()},showlblByTag:function(e){var t=cc.find("Canvas/lblDownload"),n=this.tipLabel;0==e?(n.node.active=!0,t.active=!1):(n.node.active=!1,t.active=!0)},getCurOs:function(){return cc.sys.os==cc.sys.OS_IOS?cc.sys.OS_IOS:(cc.sys.os,cc.sys.OS_ANDROID,cc.sys.OS_ANDROID)},versionHandle:function(e){var t,n;if(cc.sys.os==cc.sys.OS_IOS?(t=e.IPhoneVersion,n=dc.VERSION_IOS):(t=e.AndroidVersion,n=dc.VERSION_Android),cc.sys.os==cc.sys.OS_IOS){var i=dc.utils.getUpdateType(n,t);if(dc.Iphone_Check_flag=3==i?1:0,dc.Iphone_Check_flag)2==i||3==i?this.startPreloading():1==i?this.startPreloading():0==i&&this.setUpdateSelect(0);else dc.Iphone_Check_flag=0,2==(i=dc.utils.getUpdateType(n,t))||3==i?this.startPreloading():this.updateSelect(n,t)}else{dc.Iphone_Check_flag=0,2==(i=dc.utils.getUpdateType(n,t))||3==i?this.startPreloading():this.updateSelect(n,t)}},getServerState:function(){HttpMgr.sendRequset("getServerStateInfo",null,function(e,t){console.log("getServerStateInfo",t),e?(this.loadingRCTimes++,this.loadingRCTimes<=2?(this._stateStr="\u8fde\u63a5\u5931\u8d25,\u6b63\u5728\u91cd\u65b0\u8fde\u63a5",setTimeout(function(){this.getServerState()}.bind(this),2e3)):this.startPreloading()):(null!=this._timer&&(clearInterval(this._timer),this._timer=null),this.loadingRCTimes=0,dc.Iphone_Check_flag=t.ServerState,cc.sys.os!=cc.sys.OS_IOS&&(dc.Iphone_Check_flag=0),this.versionHandle(t))}.bind(this))},checkAndLoad:function(){this._timer=setInterval(function(){this.loadingRCTimes++,console.log("\u91cd\u8fde:"+this.loadingRCTimes),this.loadingRCTimes<=2?this.getServerState():(null!=this._timer&&(clearInterval(this._timer),this._timer=null),this.startPreloading())}.bind(this),3e3),console.log("this._timer:"+this._timer),this.getServerState()},checkVersion:function(){this.loadingRCTimes=0,this._stateStr="\u6b63\u5728\u8fde\u63a5\u670d\u52a1\u5668",this.checkAndLoad()},onBtnDownloadClicked:function(){cc.sys.openURL(dc.appweb)},startPreloading:function(){this._stateStr="\u6b63\u5728\u52a0\u8f7d\u8d44\u6e90\uff0c\u8bf7\u7a0d\u5019",this._isLoading=!0,this.loadNode.active=!0,this._progressNum=80,console.log("startPreloading")},loadStart:function(){this._Loading=!0,cc.loader.onProgress=function(e,t,n){this._isLoading&&(this._progress=parseFloat(e/t),this._progress>=1&&(this._Loading=!1))}.bind(this),cc.loader.loadResDir("Catalogue",function(e,t){this._Loading=!1}.bind(this))},onLoadComplete:function(){this._isLoading=!1,this._stateStr="\u51c6\u5907\u767b\u9646",cc.director.loadScene("Login"),cc.loader.onComplete=null},update:function(e){if(this.tipLabel.string=this._stateStr+" ",this._isLoading){var t=this._progressNum;this.progressLoad.progress=t/100,this.tipLabel.string="\u52a0\u8f7d\u8d44\u6e90"+t+"%",this._Loading||(this._progressNum=this._progressNum+1),90==this._progressNum?this._Loading||this.loadStart():100==this._progressNum&&this.onLoadComplete()}else for(var n=Math.floor(Date.now()/1e3)%4,i=0;i<n;++i)this.tipLabel.string+="."}}),cc._RF.pop()},{index:"index"}],Login:[function(e,t,n){"use strict";cc._RF.push(t,"333134dvkxKhbHE69i9FPBW","Login"),cc.Class({extends:cc.Component,properties:{RegisterNode:cc.Node,accountEdit:cc.EditBox,passwdEdit:cc.EditBox,lblVersion:cc.Label,_isAgree:!0,AgreementNode:cc.Node,checkbox:cc.Toggle,btnWX:cc.Node,btnYK:cc.Node},start:function(){this.initPrefabe(),this.setVersion(),this.initBtns();NetMgr.setWCReconnectFun(),this.autoLogin()},initPrefabe:function(){if(!this._waitConnect){var e=cc.loader.getRes("Catalogue/Prefab/publicFrame/WaitingConnection",cc.Prefab);this._waitConnect=cc.instantiate(e),this.node.addChild(this._waitConnect),publicWindow.wc=this._waitConnect.getComponent("WaitingConnection")}if(!this._alert){var t=cc.loader.getRes("Catalogue/Prefab/publicFrame/alert",cc.Prefab);this._alert=cc.instantiate(t),this.node.addChild(this._alert),publicWindow.alert=this._alert.getComponent("alert")}},initBtns:function(){var e;e=cc.sys.os!=cc.sys.OS_ANDROID&&(cc.sys.os!=cc.sys.OS_IOS||!!dc.Iphone_Check_flag),this.btnYK.active=e;var t=AnysdkMgr.isWeichatInstall();this.btnWX.active=!!t},autoLogin:function(){var e,t=cc.sys.localStorage.getItem("LoginType");if("ac_login"==t||"wx_login"==t&&(e=cc.sys.localStorage.getItem("token")),e){NetMgr.createSocket({},function(t){UserMgr.LoginHall(e,3,function(e){cc.director.loadScene("HallAndGame",function(){UIMgr.pushUI(UIMgr.HallPage);UIMgr.getPageScript(UIMgr.HallPage).doSomethingAfterlogin()}.bind(this))}.bind(this))}.bind(this))}},onBtnQuickStartClicked:function(){this._isAgree&&(this.RegisterNode.active=!0)},onBtnCloseRegister:function(e){this.RegisterNode.active=!1},onBtnWeichatClicked:function(){if(this._isAgree){AnysdkMgr.login()}},onBtnLogin:function(e){var t=this.accountEdit.string,n=this.passwdEdit.string;Number(t),Number(t);if(""!=t&&""!=n){NetMgr.createSocket({},function(e){UserMgr.LoginHall(t,1,function(e){UserMgr.account=t,cc.sys.localStorage.setItem("account",t);var n=cc.sys.localStorage.getItem("account");cc.sys.localStorage.setItem("token"+n,e.data.token),cc.sys.localStorage.setItem("LoginType","ac_login"),cc.director.loadScene("HallAndGame",function(){UIMgr.pushUI(UIMgr.HallPage);UIMgr.getPageScript(UIMgr.HallPage).doSomethingAfterlogin()}.bind(this))}.bind(this))}.bind(this))}else publicWindow.alert.show("\u63d0\u793a","\u8d26\u53f7\u6216\u8005\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",!1)},onBtnRegister:function(e){var t=this.accountEdit.string;this.passwdEdit.string,Number(t),Number(t);if(""!=t){NetMgr.createSocket({},function(e){UserMgr.LoginHall(t,1,function(e){UserMgr.account=t,cc.sys.localStorage.setItem("account",t);var n=cc.sys.localStorage.getItem("account");cc.sys.localStorage.setItem("token"+n,e.data.token),cc.sys.localStorage.setItem("LoginType","ac_login"),cc.director.loadScene("HallAndGame",function(){UIMgr.pushUI(UIMgr.HallPage);UIMgr.getPageScript(UIMgr.HallPage).doSomethingAfterlogin()}.bind(this))}.bind(this))}.bind(this))}else publicWindow.alert.show("\u63d0\u793a","\u8d26\u53f7\u6216\u8005\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",!1)},onBtnOpenAgreement:function(e){this.AgreementNode.active=!0},onBtnCloseAgreement:function(e){this.AgreementNode.active=!1},checkAgree:function(e){var t=this.checkbox.isChecked;this._isAgree=!!t},setVersion:function(){var e;e=cc.sys.os==cc.sys.OS_IOS?dc.VERSION_IOS:dc.VERSION_Android,this.lblVersion.string="\u7248\u672c:"+e}}),cc._RF.pop()},{}],MJDataMgr:[function(e,t,n){"use strict";var i;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}cc._RF.push(t,"e559797VgFNwpyFFU29i1Mo","MJDataMgr");var s=e("codeConfig");cc.Class((a(i={extends:cc.Component,properties:{MJSeats:[],localSideMap:null,outCardData:null,FOLDS_PERROW_NUM:15,HOLDS_NUM:14,actionData:null,raise:0},start:function(){},init:function(){console.log("MJ Init"),this.reset()},setFolds_PERROW_NUM:function(e){this.FOLDS_PERROW_NUM=e},reset:function(){this.clearMJ(),this.outCardData=null,this.actionData=null,this.raise=0},clearMJ:function(){this.MJSeats=[];for(var e=GameDataMgr.gamePlayerNum,t=0;t<e;t++){var n={holds:[],folds:[],penggangs:[]};this.MJSeats.push(n)}},initConf:function(){this.localSideMap||(this.localSideMap=new Map),2==GameDataMgr.gamePlayerNum?(this.localSideMap[0]={local:0,Side:0},this.localSideMap[1]={local:1,Side:2}):4==GameDataMgr.gamePlayerNum||3==GameDataMgr.gamePlayerNum?(this.localSideMap[0]={local:0,Side:0},this.localSideMap[1]={local:1,Side:1},this.localSideMap[2]={local:2,Side:2},this.localSideMap[3]={local:3,Side:3}):(this.localSideMap[0]=0,this.localSideMap[1]=1,this.localSideMap[2]=2,this.localSideMap[3]=3)},getLocalIndex:function(e){return(e-GameDataMgr.seatIndex+GameDataMgr.gamePlayerNum)%GameDataMgr.gamePlayerNum},getLocalSide:function(e){var t=this.getLocalIndex(e);return this.localSideMap[t].Side},getLocalBySide:function(e){var t=-1;for(var n in this.localSideMap){var i=this.localSideMap[n];if(e==i.Side){t=i.local;break}}return console.log("local:"+t),t},getIndexBySide:function(e){this.getLocalBySide(e);for(var t in GameDataMgr.seats){var n=GameDataMgr.seats[t];if(n.userId){var i=GameDataMgr.getSeatIndexByID(n.userId);if(GameDataMgr.getLocalSide(i)==e)return parseInt(t)}}return-1},addPengData:function(e,t,n){for(var i=this.MJSeats[e].penggangs,a=0;a<t.length;a++){var o={type:"peng"};o.peng=t[a],o.direct=n[a],i.push(o)}},addGangData:function(e,t,n,i){for(var a=this.MJSeats[e].penggangs,o=0;o<t.length;o++){var s={};"diangang"==i?s.type="diangang":"wangang"==i?s.type="wangang":"angang"==i&&(s.type="angang"),s.gang=t[o],s.direct=n[o],a.push(s)}},sortMJArr:function(e,t){if(e){var n;t||this.isTurner(e)&&(n=e.pop()),e.sort(function(e,t){return e-t});for(var i,a=[],o=0,s=0;s<e.length;s++)if(33==e[s]){var r=s;i=e.splice(r,1),a.push(i),o++,s--}for(s=0;s<o;s++)for(var c=a[s],l=0;l<i.length;l++)e.unshift(c[l]);null!=n&&e.push(n)}else console.log("sortMJArr:mjarr is null")},isTurner:function(e){return 14==e.length||11==e.length||8==e.length||5==e.length||2==e.length},onGameBegin:function(e){this.reset(),e.button=e.button||0,GameDataMgr.gameIndex=e.numOfGames,GameDataMgr.button=e.button,GameDataMgr.turn=GameDataMgr.button,GameDataMgr.dice=e.dice,GameDataMgr.newSeats=e.newSeats,GameDataMgr.magicCard=e.magicCard,this.raise=0,4==GameDataMgr.gamePlayerNum?GameDataMgr.numofmj=83:GameDataMgr.numofmj=109},changeSeats:function(e){GameDataMgr.seats;console.log("changeQian:"),console.log(GameDataMgr.seats),GameDataMgr.updateNewSeats(),GameDataMgr.seatIndex=GameDataMgr.getSeatIndexByID(UserMgr.userId),console.log("changeHou:"),console.log(GameDataMgr.seats),this.clearMJ(),this.initBeginData(e)},initBeginData:function(e,t){for(var n=e.holds,i=GameDataMgr.gamePlayerNum,a=this.MJSeats,o=0;o<i;o++){a[o].holds;if(t)a[o].holds=n[o];else if(o==GameDataMgr.seatIndex)if(n){e.lastCard=e.lastCard||0;e.lastCard;a[o].holds=n}else{var s=13;s=GameDataMgr.seatIndex==GameDataMgr.button?14:13;for(var r=0;r<s;r++)a[o].holds.push(-1)}else{var c=0;c=o==GameDataMgr.button?this.HOLDS_NUM:this.HOLDS_NUM-1;for(r=0;r<c;r++)a[o].holds.push(99)}}},onGameSync:function(e){GameDataMgr.GameState=1,e.button=e.button||0,e.turn=e.turn||0,e.raise=e.raise||0,this.raise=e.raise,GameDataMgr.isEnableBegin=!0,GameDataMgr.button=e.button,GameDataMgr.turn=e.turn,GameDataMgr.chuPai=e.chuPai,GameDataMgr.magicCard=33,GameDataMgr.numofmj=e.numOfMJ,GameDataMgr.gameIndex=e.numOfGames,GameDataMgr.lastDiscardSeat=e.lastChuPaiSeat,GameDataMgr.newSeats=[];for(var t=0;t<e.seats.length;t++)GameDataMgr.newSeats.push(e.seats[t].userId);if(GameDataMgr.updateNewSeats(),GameDataMgr.seatIndex=GameDataMgr.getSeatIndexByID(UserMgr.userId),GameDataMgr.conf.createtype==s.createRoomType.hallgame)for(t=0;t<GameDataMgr.seats.length;t++)GameDataMgr.seats[t].isRobotTime=e.seats[t].isRobotTime;this.initMJData(e);var n=GameDataMgr.lastDiscardSeat,i=GameDataMgr.chuPai;n==e.turn&&this.addFolds(e.turn,i),this.actionData=e.opt},initMJData:function(e){for(var t=this.MJSeats,n=e.seats,i=0;i<n.length;i++){var a=n[i],o=a.userId,s=GameDataMgr.getSeatIndexByID(o);if(0==GameDataMgr.getLocalSide(s))if(a.holds)t[s].holds=a.holds,this.sortMJArr(t[s].holds);else{var r=[],c=a.holds;for(i=0;i<c;i++)r.push(-1);t[s].holds=r}else{c=a.holdslen,r=[];for(var l=0;l<c;l++)r.push(99);t[s].holds=r}a.folds&&(t[s].folds=a.folds),this.penggangSync(a,s)}},penggangSync:function(e,t){for(var n=e.chiCards||[],i=e.chiChairs||[],a=e.pengs||[],o=e.pengChairs||[],s=e.angangs||[],r=e.angangChairs||[],c=e.diangangs||[],l=e.diangangChairs||[],h=e.wangangs||[],d=e.wangangChairs||[],u=[],g=0;g<n.length;g++){var m=this.createChiArr(n[g].pai);u.push(m)}var p=[];for(g=0;g<i.length;g++){var f=GameDataMgr.getLocalSide(i[g]);p.push(f)}this.addChiData(t,u,p);var v=[];for(g=0;g<a.length;g++)v.push([a[g],a[g],a[g]]);var _=[];for(g=0;g<o.length;g++){f=GameDataMgr.getLocalSide(o[g]);_.push(f)}this.addPengData(t,v,_);var M=[];for(g=0;g<s.length;g++)M.push([s[g]]);M.length>0&&this.addGangData(t,M,r,"angang");var C=[];for(g=0;g<h.length;g++){var y=[h[g],h[g],h[g],h[g]];C.push(y)}C.length>0&&this.addGangData(t,C,d,"wangang");var N=[];for(g=0;g<c.length;g++){var I=[c[g],c[g],c[g],c[g]];N.push(I)}var b=[];for(g=0;g<l.length;g++){f=GameDataMgr.getLocalSide(l[g]);b.push(f)}this.addGangData(t,N,b,"diangang")},showOutCardHandle:function(e,t){var n=e.userId;console.log(n);var i=e.pai,a=GameDataMgr.getSeatIndexByID(n);null!=e.seatIndex&&(a=e.seatIndex);var o=GameDataMgr.getLocalIndex(a);t?this.removeHolds(a,i):0!=o?this.removeHolds(a,99):GameDataMgr.isObserver?this.removeHolds(a,-1):this.removeHolds(a,i),this.sortMJArr(this.MJSeats[a].holds),this.addFolds(a,i)},addMopaiHandle:function(e,t){var n,i={};e.userId?(i.userID=e.userId,n=GameDataMgr.getSeatIndexByID(e.userId)):(i.userID=dc.UserMgr.userId,n=GameDataMgr.seatIndex),i.card=e.pai,null!=e.pai&&(this.addHolds(n,e.pai),this.sortMJArr(this.MJSeats[n].holds)),this.addEmptyMopaiHandle(i,t)},addEmptyMopaiHandle:function(e,t){var n=e.userID,i=GameDataMgr.getSeatIndexByID(n);GameDataMgr.lastDiscardSeat=GameDataMgr.turn;var a={last:GameDataMgr.lastDiscardSeat,turn:i};(GameDataMgr.turn=i,GameDataMgr.hasOutCard=!1,t)||(0!=GameDataMgr.getLocalSide(a.turn)?this.addHolds(a.turn,99):GameDataMgr.isObserver&&this.addHolds(a.turn,-1))},chiOper:function(e){GameDataMgr.hasOutCard=!1,GameDataMgr.lastDiscardSeat=GameDataMgr.turn,this.EatCardsHandle(e)},pengOper:function(e){GameDataMgr.hasOutCard=!1,GameDataMgr.lastDiscardSeat=GameDataMgr.turn,this.PongHandle(e)},gangOper:function(e){GameDataMgr.hasOutCard=!1,GameDataMgr.lastDiscardSeat=GameDataMgr.turn,GameDataMgr.numofmj--,this.KongHandle(e)},KongHandle:function(e){var t=GameDataMgr.getSeatIndexByID(e.userId);GameDataMgr.turn=t;var n=e.pai,i=e.gangtype;"diangang"==i&&GameDataMgr.lastDiscardSeat>=0&&this.removeFolds(GameDataMgr.lastDiscardSeat,e.pai);var a,o=this.MJSeats[t].holds,s=o[0];if(0==(a=99==s?0:-1==s?1:2)){var r=0;r="wangang"==i?1:"angang"==i?4:3;for(var c=0;c<r;c++)this.removeHolds(t,99)}else if(1==a){r=0;r="wangang"==i?1:"angang"==i?4:3;for(c=0;c<r;c++)this.removeHolds(t,-1)}else for(c=0;c<o.length;c++){o[c]==n&&(o.splice(c,1),c--)}this.sortMJArr(this.MJSeats[t].holds),this.addGang(t,n,i,e.gangIndex)},PongHandle:function(e){GameDataMgr.getLocalIndex(GameDataMgr.lastDiscardSeat);this.removeFolds(GameDataMgr.lastDiscardSeat,e.pai);var t=e.userId,n=GameDataMgr.getSeatIndexByID(t);null!=e.seatIndex&&(n=e.seatIndex),GameDataMgr.turn=n;var i=e.pai,a=(GameDataMgr.getLocalIndex(n),[i,i,i]),o=[];o.push(a);var s,r=GameDataMgr.lastDiscardSeat,c=GameDataMgr.getLocalSide(r),l=[];l.push(c),this.addPengData(n,o,l),99==this.MJSeats[n].holds[0]&&(s=!0);for(var h=0;h<2;h++)s?this.removeHolds(n,99):this.removeHolds(n,i);this.sortMJArr(this.MJSeats[n].holds)},EatCardsHandle:function(e){var t=e.pai,n=e.userId,i=GameDataMgr.getSeatIndexByID(n);null!=e.seatIndex&&(i=e.seatIndex),GameDataMgr.turn=i;var a=GameDataMgr.getSeatIndexByID(e.userId);e.seatIndex=a,this.removeFolds(GameDataMgr.lastDiscardSeat,t[t.length-1]);var o=this.createChiArr(t),s=[];s.push(o);var r=GameDataMgr.lastDiscardSeat,c=GameDataMgr.getLocalSide(r),l=[];l.push(c),this.addChiData(i,s,l);var h=!1;99==this.MJSeats[a].holds[0]&&(h=!0);for(var d=t.pop(),u=this.getRemoveChiHolds(t,d),g=0;g<u.length;g++){var m=u[g];h?this.removeHolds(a,99):this.removeHolds(a,m)}this.sortMJArr(this.MJSeats[a].holds)},createChiArr:function(e){var t=[];t.push.apply(t,o(e));var n=t.pop(),i=t.indexOf(n),a=t.splice(i,1);return a.length>0&&t.unshift(a[0]),t},getRemoveChiHolds:function(e,t){var n=[];n.push.apply(n,o(e));var i=n.indexOf(t);return n.splice(i,1),n},getHolds:function(e){return this.MJSeats[e].holds},addHolds:function(e,t){this.MJSeats[e].holds.push(t)},removeHolds:function(e,t){for(var n=this.MJSeats[e].holds,i=0;i<n.length;i++)if(n[i]==t){var a=n.indexOf(t);n.splice(a,1);break}},removeFolds:function(e,t){if(!(e<0)){var n=this.MJSeats[e].folds;n.splice(n.length-1,1)}},addFolds:function(e,t){this.MJSeats[e].folds.push(t)},addChiData:function(e,t,n){for(var i=this.MJSeats[e].penggangs,a=0;a<t.length;a++){var o={type:"chi"};o.chiCards=t[a],o.direct=n[a],i.push(o)}}},"addPengData",function(e,t,n){for(var i=this.MJSeats[e].penggangs,a=0;a<t.length;a++){var o={type:"peng"};o.peng=t[a],o.direct=n[a],i.push(o)}}),a(i,"addGangData",function(e,t,n,i){for(var a=this.MJSeats[e].penggangs,o=0;o<t.length;o++){var s={};"diangang"==i?s.type="diangang":"wangang"==i?s.type="wangang":"angang"==i&&(s.type="angang"),s.gang=t[o],s.direct=n[o],a.push(s)}}),a(i,"addGang",function(e,t,n,i){var a=this.MJSeats[e].penggangs;if("wangang"==n||"diangang"==n)for(var o=0;o<a.length;o++){var s=a[o];if("peng"==s.type)if(t==s.peng[0]){var r=a.indexOf(s);a.splice(r,1);break}}if("angang"!=n){var c;(h=[]).push([t,t,t,t]),c=null!=i?i:GameDataMgr.lastDiscardSeat;var l=GameDataMgr.getLocalSide(c);(d=[]).push(l),this.addGangData(e,h,d,n)}else{var h;(h=[]).push([t]);var d=[];this.addGangData(e,h,d,n)}}),a(i,"getEnableOper",function(e){if(null==e)return!1;var t,n,i,a;e.oper;return e.canGang&&(i=!0),e.canHu&&(t=!0),e.canPeng&&(n=!0),e.canChi&&(a=!0),!!(i||a||n||t)}),a(i,"enterGame",function(e){}),i)),cc._RF.pop()},{codeConfig:"codeConfig"}],MJLogic:[function(e,t,n){"use strict";cc._RF.push(t,"caa76xMQw9ACpCCHOY1IPA5","MJLogic"),n.sortMJ=function(e,t){var n=this;e.sort(function(e,i){if(t>=0){var a=n.getMahjongType(e),o=n.getMahjongType(i);if(a!=o){if(t==a)return 1;if(t==o)return-1}}return e-i})},n.parseRecordList=function(e){var t=e,n=[];t[0].cmd="begin",n.push(t[0]);for(var i=0;i<t[1].length;){var a={},o={};switch(t[1][i]){case 1:a.cmd="hua",i++,o.userId=t[1][i],i++,o.addHolds=t[1][i],i++,o.outHuaCards=t[1][i],i++,a.vars=o;break;case 2:a.cmd="C_chupai",i++,o.userId=t[1][i],i++,o.pai=t[1][i],i++,a.vars=o;break;case 3:a.cmd="C_action",i++,o.cmd="chi",o.userId=t[1][i],i++,o.chi=t[1][i],i++,a.vars=o;break;case 4:a.cmd="C_action",i++,o.cmd="peng",o.userId=t[1][i],i++,a.vars=o;break;case 5:a.cmd="C_action",i++,o.cmd="angang",o.userId=t[1][i],i++,o.pai=t[1][i],i++,a.vars=o;break;case 6:a.cmd="C_action",i++,o.cmd="gang",o.userId=t[1][i],i++,o.pai=t[1][i],i++,a.vars=o;break;case 7:a.cmd="C_action",i++,o.cmd="wangang",o.userId=t[1][i],i++,o.pai=t[1][i],i++,a.vars=o;break;case 8:a.cmd="C_action",i++,o.cmd="hu",o.userId=t[1][i],i++,o.hupai=t[1][i],i++,o.isZimo=t[1][i],i++,a.vars=o;break;case 9:a.cmd="mopai",i++,o.userId=t[1][i],i++,o.pai=t[1][i],i++,a.vars=o}n.push(a)}return console.log("recordGameAction Parse : "),console.log(n),n},cc._RF.pop()},{}],MJManagerView:[function(e,t,n){"use strict";cc._RF.push(t,"3cc35r4zudFcb8Wdz8w5wUn","MJManagerView"),cc.Class({extends:cc.Component,properties:{holdsNode:[cc.Node],foldsNode:[cc.Node],PengGangNode:[cc.Node],outCardParent:cc.Node,_outCardNode:null,_operation:null},onLoad:function(){},initFoldsPos:function(){2==GameDataMgr.gamePlayerNum?(this.foldsNode[0].x=-437,this.foldsNode[2].x=340):(this.foldsNode[0].x=-337,this.foldsNode[2].x=340)},setShowOutCard:function(e){this._outCardNode=e},setOpration:function(e){this._operation=e;for(var t=0;t<this.holdsNode.length;t++){this.holdsNode[t].getComponent("holdsManager2").setOpration(this._operation)}},addShowPaiLayer:function(e){this.setShowOutCard(e);var t=this._outCardNode.getComponent("showOutCardLayer2");t.setHolds(this.holdsNode),t.setFolds(this.foldsNode);for(var n=0;n<this.holdsNode.length;n++){this.holdsNode[n].getComponent("holdsManager2").setOutCardNode(this._outCardNode)}},createRestartMJ:function(e,t){this.createHoldsByIndex(e,t),this.createFoldsByIndex(e,t),this.createPongKongByIndex(e,t)},initBeginData:function(e,t){for(var n=e.holds,i=GameDataMgr.gamePlayerNum,a=GameDataMgr.MJDataMgr.MJSeats,o=0;o<i;o++){a[o].holds;if(t)a[o].holds=n[o];else if(o==GameDataMgr.seatIndex)if(n){e.lastCard=e.lastCard||null,console.log("beforeholds:"+n),console.log("sortLastMJ");var s=e.lastCard;if(s&&GameDataMgr.MJDataMgr.sortLastMJ(s,n),console.log("lastMJ:"+s),console.log("afterholds:"+n),GameDataMgr.mopaiData&&GameDataMgr.mopaiData.length>0)for(o=0;o<GameDataMgr.mopaiData.length;o++)n.push(GameDataMgr.mopaiData[o]);a[o].holds=n}else{var r=13;r=GameDataMgr.seatIndex==GameDataMgr.button?14:13;for(var c=0;c<r;c++)a[o].holds.push(-1)}else{var l=0;l=o==GameDataMgr.button?dc.HOLDS_NUM:dc.HOLDS_NUM-1;for(c=0;c<l;c++)a[o].holds.push(99)}}},initHoldsBegin:function(e,t){for(var n=GameDataMgr.MJDataMgr.MJSeats,i=0;i<n.length;i++){var a=n[i].holds,o=GameDataMgr.getLocalSide(i),s=this.holdsNode[o].getComponent("holdsManager2");GameDataMgr.MJDataMgr.sortMJArr(n[i].holds),t?(s.setHoldType(1),s.createHolds(n[i].holds)):(s.setHoldType(0),99==a[0]?s.createHolds(n[i].holds):s.createHolds(n[i].holds,!0)),s.refreshHolds()}},createHoldsByIndex:function(e,t,n){var i=GameDataMgr.getLocalSide(t),a=this.holdsNode[i].getComponent("holdsManager2"),o=GameDataMgr.MJDataMgr.MJSeats;n||(a.setHoldType(0),0==i?o[t].holds?(a.initHolds(o[t].holds,!0),this.RestartCaipiao(e,t),this.afterEatCardEatEnable(e,t)):a.createHolds(o[t].holds):a.initHolds(o[t].holds)),a.refreshHolds()},afterEatCardEatEnable:function(e,t){var n=GameDataMgr.getLocalSide(t),i=this.holdsNode[n].getComponent("holdsManager2"),a=e.banChu,o=[];for(var s in a)o.push(s);t==GameDataMgr.turn&&i.setEnableArr(o,!1)},RestartCaipiao:function(e,t){var n=GameDataMgr.getLocalSide(t),i=this.holdsNode[n].getComponent("holdsManager2"),a=e.enable;null==e.enable&&(a=!1),t==GameDataMgr.turn?i.setCipiaoColor(a):i.setCipiaoColor(!1)},getHoldsNum:function(e,t){var n=dc.HOLDS_NUM,i=0,a=e.tableCards,o=a.opers,s=a.cards;a.seatIndexs;if(o&&s)for(var r=0;r<o.length;r++){var c=o[r];2&c||4&c||8&c?i+=3:16&c?i+=3:(32&c||64&c||128&c)&&(i+=3)}var l=n-i;return GameDataMgr.turn!=t&&l--,l},createFoldsByIndex:function(e,t){var n=GameDataMgr.getLocalSide(t),i=this.foldsNode[n],a=GameDataMgr.MJDataMgr.MJSeats[t].folds,o=i.getComponent("foldsManager2");o.initFoldsMJ(a),o.refreshFolds()},createPongKongByIndex:function(e,t){var n=GameDataMgr.getLocalSide(t),i=this.PengGangNode[n].getComponent("pongKongManager2"),a=GameDataMgr.MJDataMgr.MJSeats[t].penggangs;i.initPongKongs(a),i.refreshPongKong()},actionAddFolds:function(e){var t=GameDataMgr.getLocalIndex(e);this.updateFoldPoint(t)},updateOtherEmty:function(e,t){if(e==t&&-1!=e&&-1!=t)for(var n=GameDataMgr.seats,i=0;i<GameDataMgr.gamePlayerNum;i++){var a=n[i].seatindex;if(t==a){var o=GameDataMgr.getLocalIndex(a),s=this.holdsNode[o].getComponent("holdsManager2"),r=GameDataMgr.MJDataMgr.MJSeats;99==r[i].holds[0]&&(r[i].holds.pop(),s.initHolds(r[i].holds),s.refreshHolds())}}},EatCardsHandle:function(e,t){e.pai;var n=GameDataMgr.getSeatIndexByID(e.userId);e.seatIndex=n;var i=GameDataMgr.getLocalSide(GameDataMgr.lastDiscardSeat),a=this.foldsNode[i].getComponent("foldsManager2"),o=GameDataMgr.MJDataMgr.MJSeats[GameDataMgr.lastDiscardSeat].folds;a.initFoldsMJ(o),a.refreshFolds(),this.updateFoldPoint(i),this.setOutCardShow(!1),this.EatAdd(e,t),this.enableOutCard(e),this.EatHoldsRemove(n,e.oper,e.card)},EatHoldsRemove:function(e,t,n){var i=GameDataMgr.getLocalSide(e),a=this.holdsNode[i].getComponent("holdsManager2");a.initHolds(GameDataMgr.MJDataMgr.MJSeats[e].holds,!0),a.refreshHolds()},pongHoldsRemove:function(e){var t=e.userId,n=GameDataMgr.getSeatIndexByID(t);null!=e.seatIndex&&(n=e.seatIndex);var i=GameDataMgr.getLocalSide(n),a=this.holdsNode[i].getComponent("holdsManager2");a.initHolds(GameDataMgr.MJDataMgr.MJSeats[n].holds,!0),a.refreshHolds()},kongHoldsRemove:function(e){var t=e.userId,n=GameDataMgr.getSeatIndexByID(t),i=GameDataMgr.getLocalSide(n),a=this.holdsNode[i].getComponent("holdsManager2");a.initHolds(GameDataMgr.MJDataMgr.MJSeats[n].holds,!0),a.refreshHolds()},enableOutCard:function(e){},PongHandle:function(e,t){var n=GameDataMgr.getLocalSide(GameDataMgr.lastDiscardSeat);if(GameDataMgr.lastDiscardSeat>=0){var i=this.foldsNode[n].getComponent("foldsManager2"),a=GameDataMgr.MJDataMgr.MJSeats[GameDataMgr.lastDiscardSeat].folds;i.initFoldsMJ(a),i.refreshFolds()}this.setOutCardShow(!1),this.PongAdd(e,t),this.pongHoldsRemove(e)},KongHandle:function(e,t){var n=GameDataMgr.getLocalSide(GameDataMgr.lastDiscardSeat);e.pai,GameDataMgr.getSeatIndexByID(e.userId);if("diangang"==e.gangtype&&GameDataMgr.lastDiscardSeat>=0){var i=this.foldsNode[n].getComponent("foldsManager2"),a=GameDataMgr.MJDataMgr.MJSeats[GameDataMgr.lastDiscardSeat].folds;i.initFoldsMJ(a),i.refreshFolds()}this.setOutCardShow(!1),this.kongHoldsRemove(e),this.KongAdd(e,t)},EatAdd:function(e,t){var n=e.userId,i=GameDataMgr.getSeatIndexByID(n);null!=e.seatIndex&&(i=e.seatIndex),this.initPongKongs(i)},initPongKongs:function(e){var t=GameDataMgr.MJDataMgr.MJSeats[e].penggangs,n=GameDataMgr.getLocalSide(e),i=this.PengGangNode[n].getComponent("pongKongManager2");i.initPongKongs(t),i.refreshPongKong()},PongAdd:function(e,t){var n=e.userId,i=GameDataMgr.getSeatIndexByID(n);null!=e.seatIndex&&(i=e.seatIndex),this.initPongKongs(i)},KongAdd:function(e,t){var n=e.userId,i=GameDataMgr.getSeatIndexByID(n);this.initPongKongs(i)},showOutCardHandle:function(e,t){console.log("showOutCardHandle"),this.hideOpration();var n=e.userId;console.log(n);var i=e.pai,a=GameDataMgr.getSeatIndexByID(n),o=GameDataMgr.getLocalSide(a),s=this.holdsNode[o].getComponent("holdsManager2");s.initHolds(GameDataMgr.MJDataMgr.MJSeats[a].holds,!0),s.refreshHolds();var r=this.foldsNode[o].getComponent("foldsManager2"),c=GameDataMgr.MJDataMgr.MJSeats[a].folds;r.initFoldsMJ(c),r.refreshFolds();var l=r.getLastMJ();l.active=!1,this.updateFoldPoint(o),r.showPoint(!1),GameDataMgr.getGamePage()._outCardNode.getComponent("showOutCardLayer2").showMJAni(i,o,function(){l&&(l.active=!0,r.showPoint(!0))}.bind(this)),console.log("showOutCardHandle3"),this.setCaipiaoColor(0,!1)},setEnable:function(e){GameDataMgr.seats,GameDataMgr.seatIndex;if(!GameDataMgr.isObserver){GameDataMgr.seats[GameDataMgr.seatIndex];var t=GameDataMgr.getLocalSide(GameDataMgr.seatIndex);this.setCaipiaoColor(t,e.isMagicTime);var n=e.banChu;this.holdsNode[t].getComponent("holdsManager2").setEnableArr(n)}},addMopaiHandle:function(e,t){var n;if(e.userId){var i=e.userId;n=GameDataMgr.getSeatIndexByID(i);var a=GameDataMgr.getLocalSide(n);o=this.holdsNode[a]}else o=this.holdsNode[0],n=GameDataMgr.seatIndex;var o,s=o.getComponent("holdsManager2");a=GameDataMgr.getLocalSide(n);(s=(o=this.holdsNode[a]).getComponent("holdsManager2")).initHolds(GameDataMgr.MJDataMgr.MJSeats[n].holds,!0),s.refreshHolds()},setOutCardShow:function(e){this._outCardNode.getComponent("showOutCardLayer2").setTouchLayerShow(e)},hideChupai:function(){this._outCardNode.active=!1},hideOpration:function(){},updateCardsNum:function(){},updateFoldPoint:function(e){var t=this.foldsNode[e].getComponent("foldsManager2");this.hideOtherFoldPoint(e),t.updateFoldPoint()},hideOtherFoldPoint:function(e){for(var t=0;t<this.foldsNode.length;t++){var n=this.foldsNode[t].getComponent("foldsManager2");t!=e?n.showPoint(!1):n.showPoint(!0)}},setCaipiaoColor:function(e,t){this.holdsNode[e].getComponent("holdsManager2").setCipiaoColor(t)},hideAllPoints:function(){for(var e=0;e<this.foldsNode.length;e++){this.foldsNode[e].getComponent("foldsManager2").showPoint(!1)}},GameOver:function(e){for(var t=e.results,n=0;n<t.length;n++){var i=t[n];this.GameOverHoldsFall(i,n)}},GameOverHoldsFall:function(e,t){var n=e.holds;GameDataMgr.MJDataMgr.sortMJArr(n);var i=GameDataMgr.getLocalSide(t),a=this.holdsNode[i].getComponent("holdsManager2");a.setHoldType(1),a.createHolds(n),a.refreshHolds()},huHandle:function(e){var t=GameDataMgr.getSeatIndexByID(e.userId),n=GameDataMgr.getLocalSide(t),i=this.holdsNode[n].getComponent("holdsManager2");i.setHoldType(1),i.createHolds(e.holds),i.refreshHolds()},clearHolds:function(){for(var e=this.holdsNode,t=0;t<e.length;t++){var n=e[t].getComponent("holdsManager2");n.setHoldType(0),n.initHoldsInSide()}},clearFolds:function(){for(var e=this.foldsNode,t=0;t<e.length;t++){e[t].getComponent("foldsManager2").initFoldsInSide()}},clearPongKongs:function(){for(var e=this.PengGangNode,t=0;t<e.length;t++){e[t].getComponent("pongKongManager2").initPKChildInSide()}},clearAllMJNode:function(){this.clearHolds(),this.clearFolds(),this.clearPongKongs()},onBtnOperTest:function(){var e={seatIndex:1,card:1};this.showOutCardHandle(e)}}),cc._RF.pop()},{}],MJPrefab_myself:[function(e,t,n){"use strict";cc._RF.push(t,"d4b79F12bRGBojrG41AfiGm","MJPrefab_myself"),cc.Class({extends:cc.Component,properties:{MJSprite:{default:null,type:cc.Sprite},MJBGSprite:{default:null,type:cc.Sprite},shadowNode:cc.Node,MJID:99,_MJCardType:0,Side:0,_isMagic:!1,_MagicID:0,_isTouch:!1,_isTouchEnable:!0,_isMoving:!1,_Size:cc.Size,_originVec2:cc.Vec2,_isShadow:!1},onLoad:function(){this.shadowNode&&(this.shadowNode.active=!1),this.setTouchEnable(!0)},initAnGang:function(){if(this.MJSprite.spriteFrame=null,0==this.Side){var e=this.getPreBySide(this.Side);this.MJBGSprite.spriteFrame=dc.ResourceMgr.getPongKongSpriteByIDAndPre(e,99)}else{e=this.getPreBySide(this.Side);this.MJBGSprite.spriteFrame=dc.ResourceMgr.getFoldsSpriteByIDAndPre(e,99)}},initMJ:function(){this.initMJSpriteFrame(),this.saveOriginVec2()},initFoldsMJ:function(){this.initFoldsSpriteFrame(),this.saveOriginVec2()},initPongKongMJ:function(){this.initPongKongSpriteFrame(),this.saveOriginVec2()},setTouchDeal:function(e){this._isTouch=e,this._isTouch?this.node.y=15:this.node.y=0},setMoving:function(e){this._isMoving=e},isMoving:function(){return this._isMoving},outCard:function(){this.node.removeFromParent()},getPreBySide:function(e){return dc.ResourceMgr.getPreBySide(e)},initMahJongData:function(e){e.Id>=0&&(this.MJID=e.Id,this._MJCardType=this.getMJCardTypeByID(e.Id)),e.Side&&(this.Side=e.Side),e.isMagic&&(this._isMagic=e.isMagic)},setMJID:function(e){this.MJID=e},setMJSide:function(e){this.Side=e},setMagic:function(e){this._MagicID=e},initMJSpriteFrame:function(){if(this.MJID>=0&&this.Side>=0&&this.Side<4){var e=this.getPreBySide(this.Side);this.setMJSpriteFrameByIDAndPre(e,this.MJID)}},initFoldsSpriteFrame:function(){if(this.MJID>=0&&this.Side>=0&&this.Side<4){var e;e=2==this.Side?0:this.Side;var t=this.getPreBySide(e);this.setFoldsMJSpriteFrameByIDAndPre(t,this.MJID)}},initPongKongSpriteFrame:function(){var e;this.MJID>=0&&this.Side>=0&&this.Side<4&&(2==this.Side?(e=this.getPreBySide(0),this.setFoldsMJSpriteFrameByIDAndPre(e,this.MJID)):(e=this.getPreBySide(this.Side),this.setPongKongMJSpriteFrameByIDAndPre(e,this.MJID)))},setMJSpriteFrameByIDAndPre:function(e,t){this.MJSprite&&(this.MJSprite.spriteFrame=dc.ResourceMgr.getMJSpriteFrameByIDAndPre(e,t))},setFoldsMJSpriteFrameByIDAndPre:function(e,t){this.MJSprite&&(this.MJSprite.spriteFrame=dc.ResourceMgr.getFoldsSpriteByIDAndPre(e,t))},setPongKongMJSpriteFrameByIDAndPre:function(e,t){this.MJSprite&&(this.MJSprite.spriteFrame=dc.ResourceMgr.getPongKongSpriteByIDAndPre(e,t))},saveSize:function(){},saveOriginVec2:function(){this._originVec2=new cc.Vec2(this.node.x,this.node.y)},setShadowByTag:function(){this.shadowNode&&(this._isShadow?this.shadowNode.active=!0:this.shadowNode.active=!1)},setUnOutCard:function(e){this._isShadow=e,this.setShadowByTag()},getMJCardTypeByID:function(e){return dc.ResourceMgr.getMJCardTypeByID(e)},setTouched:function(e){this._isTouch=e},getTouched:function(){return this._isTouch},setTouchEnable:function(e){this._isTouchEnable=e},getTouchEnable:function(){return this._isTouchEnable}}),cc._RF.pop()},{}],Maima_TDH:[function(e,t,n){"use strict";cc._RF.push(t,"b94cbY1XRpGwqv/wJtb2lNn","Maima_TDH"),cc.Class({extends:cc.Component,properties:{seatsNode:[cc.Node],ani:cc.Node,scaleNode:cc.Node},start:function(){},onGameOver:function(e){this.hideSeat();for(var t=e.results,n=0;n<t.length;n++){var i=t[n];this.initSingleData(i,n,e)}},hideSeat:function(){for(var e=GameDataMgr.gamePlayerNum,t=0;t<this.seatsNode.length;t++)this.seatsNode[t].active=!1;for(t=0;t<e;t++)this.seatsNode[t].active=!0},initSingleData:function(e,t,n){var i=GameDataMgr.getLocalSide(t),a=this.seatsNode[i],o=GameDataMgr.seats[t];a.getChildByName("iconNode").getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(o.headimg,o.userId),this.setMaima(n,e.ma,t),a.getChildByName("name").getComponent(cc.Label).string=o.name},setMaima:function(e,t,n){var i=GameDataMgr.getLocalSide(n),a=this.seatsNode[i].getChildByName("maima");if(4==GameDataMgr.conf.gametype)if(2==GameDataMgr.conf.wanfa%100%10){a.active=!0;var o=a.getChildByName("card").getComponent("MJPrefab_myself");o.setMJID(t),o.initMJ();var s=GameDataMgr.MJDataMgr.getZhong(e,t,n);a.getChildByName("select").active=s}else a.active=!1;else a.active=!1},onOverPlay:function(e,t){this.scaleNode.setScale(0,0);var n=cc.sequence(cc.scaleTo(.2,1,1),cc.callFunc(function(){this.playAni(),this.onGameOver(e)},this,null),cc.delayTime(2),cc.callFunc(function(){t&&t(e)},this,null));this.scaleNode.runAction(n)},playAni:function(){var e=this.ani.getComponent(cc.Animation);e.node.active=!0;e.play("Maima");e.once("finished",function(){},this)}}),cc._RF.pop()},{}],MenuMgr_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"201f90/ZbFJgogrLD+bFHbX","MenuMgr_2MJ");var i=e("codeConfig");cc.Class({extends:cc.Component,properties:{lblRoomID:cc.Label,lblGameNum:cc.Label,lblGameMaxNum:cc.Label,lblGameCardsNum:cc.Label,lblTime_Hour:cc.Label,lblTime_Minute:cc.Label,BatterNode:cc.Node,retianNode:cc.Node,chatNode:cc.Node,LeftNode:cc.Node,voiceNode:cc.Node,setupNode:cc.Node,obserView:cc.Node,_ruleNode:null,ruleParent:cc.Node,btnDistance:cc.Node,btnSetup:cc.Node,btnObserver:cc.Node,btnObserveList:cc.Node},onLoad:function(){this.setTimeSchedule()},initObserver:function(){GameDataMgr.isObserver?this.btnObserver.active=!0:this.btnObserver.active=!1},onBtnOpenChat:function(){this.chatNode.active=!0;var e=this.chatNode.getComponent("Chat");this.setTipsShow(!1),e.openListType(),e.updateRecordListPos()},onBtnChecktest:function(){dc.net.gsio&&dc.net.gsio.close()},updateTipsPoint:function(e){e.sender!=dc.UserMgr.userId&&this.setTipsShow(!0)},setTipsShow:function(e){this.btnObserver.getChildByName("tipsNode").active=e},upateGameTime:function(){var e=Math.floor(Date.now()/1e3/60);if(this._lastMinute!=e){this._lastMinute=e;var t=new Date,n=t.getHours();n=n<10?"0"+n:n;var i=t.getMinutes();i=i<10?"0"+i:i,this.lblTime_Hour.string=""+n,this.lblTime_Minute.string=""+i}},setTimeSchedule:function(){this.schedule(this.upateGameTime.bind(this),1)},setDistanceShow:function(e){this.btnDistance.active=e},setBtnSetupShow:function(e){this.btnSetup.active=e},initGameNums:function(){var e=this.node.getChildByName("GameNumNode"),t=this.node.getChildByName("descNode"),n=t.getChildByName("des0"),i=t.getChildByName("des1");0==GameDataMgr.maxNumOfGames?(e.active=!1,n.active=!0,i.active=!1):(e.active=!0,n.active=!1,i.active=!0)},onBtnClick:function(e){var t=e.target;"btn_help"==t.name||"btn_setup"==t.name||"btn_chat"==t.name&&(this.chatNode.active=!0)},onBtnOpenObserveList:function(){this.obserView.getComponent("ObsersList").openList()},onBtnDissoveInterfaceOpen:function(){this.setupNode.active=!0,GameDataMgr.getGamePage().getGameSetupSp().open()},setRuleNode:function(){if(!this._ruleNode){var e=GameDataMgr.conf;if(2==e.gametype){var t=cc.loader.getRes("Catalogue/Prefab/DoubleBuckle/ruleNode_DB",cc.Prefab),n=cc.instantiate(t);this._ruleNode=n,this.ruleParent.addChild(n)}else if(3==e.gametype)if(e.createtype==i.createRoomType.hallgame){t=cc.loader.getRes("Catalogue/Prefab/HZMJGame/ruleNode_MJ",cc.Prefab),n=cc.instantiate(t);this._ruleNode=n,this.ruleParent.addChild(n)}else{t=cc.loader.getRes("Catalogue/Prefab/HZMJGame/ruleNode_MJ",cc.Prefab),n=cc.instantiate(t);this._ruleNode=n,this.ruleParent.addChild(n)}else if(4==e.gametype){t=cc.loader.getRes("Catalogue/Prefab/TDHGame/ruleNode_TDH",cc.Prefab),n=cc.instantiate(t);this._ruleNode=n,this.ruleParent.addChild(n)}}},onBtnRule:function(e){var t=GameDataMgr.conf;2==t.gametype?this.clickRule_DB():3==t.gametype?t.createtype==i.createRoomType.hallgame?this.clickRule_MJ_Arena():this.clickRule_MJ():4==t.gametype&&this.clickRule_TDH()},clickRule_MJ:function(){this.ruleParent.active=!0;var e=this._ruleNode.getChildByName("scrollView_1"),t=this._ruleNode.getChildByName("scrollView_2"),n=this._ruleNode.getChildByName("scrollView_mj4p"),i=GameDataMgr.conf;4==i.peoplemax?(n.active=!0,e.active=!1,t.active=!1):(n.active=!1,0==i.gameNums?(e.active=!0,t.active=!1):(e.active=!1,t.active=!0))},clickRule_MJ_Arena:function(){this.clickRule_MJ()},clickRule_DB:function(){this.ruleParent.active=!0},clickRule_TDH:function(){this.ruleParent.active=!0;var e=this._ruleNode.getChildByName("scrollView_wumaima"),t=this._ruleNode.getChildByName("scrollView_maima"),n=GameDataMgr.conf.wanfa,i=(parseInt(n/100),n%100%10);1==i?(e.active=!0,t.active=!1):2==i&&(e.active=!1,t.active=!0)},onBtnDistance:function(){GameDataMgr.getGamePage()._distanceNode.getComponent("DistancePage").openInterface()},onBntCloseRule:function(e){this.ruleParent.active=!1},updateRoomID:function(e){this.lblRoomID.string=e},updateGameNum:function(e){this.lblGameNum.string=e},updateGameMaxNum:function(e){this.lblGameMaxNum.string=e},updateGameCardsNum:function(e){this.lblGameCardsNum.string=e},hideMJNumNode:function(){this.retianNode.active=!1},showMJNumNode:function(){this.retianNode.active=!0},showBtnObserve:function(e){this.btnObserveList.active=e},setGameSetUp:function(e){this.setupNode=e}}),cc._RF.pop()},{codeConfig:"codeConfig"}],MsgMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2bdc0xnAwdNmJJg6YtU0zea","MsgMgr"),n.eventsResponse=function(){this.onGameBegin=i};var i=function(e){};cc._RF.pop()},{}],NetMgr:[function(e,t,n){"use strict";cc._RF.push(t,"c66efIxYgJAA6U6ouI+fj81","NetMgr");var i=0,a=0,o=function(){i=0};n.createSocket=function(e,t){if(publicWindow.wc.show("",null,3),++a>2)s(e,t);else{var n=h().split(":"),i={};i.host=n[0],i.port=n[1],i.log=!0,pomelo.init(i,function(e){Hall_ReqAndRes.getUrlFromGate(function(e){e.code?publicWindow.alert.show("",e.msg):(pomelo.disconnect(),r(e.data.host,e.data.port,t))})}),u()}};var s=function(e,t){var n=d().split(":");r(n[0],n[1],t)},r=function(e,t,n){a=0;var i=e+":"+t;dc.setCurUrl(i);var o={};o.host=e,o.port=t,pomelo.init(o,function(e){publicWindow.wc.hide(),n&&n(e),pomelo.checkWCConnect(),GroupDataMgr.startFKTipsSchedule()})},c=function(){if(++i>5){publicWindow.alert.show("","\u7f51\u7edc\u4e0d\u4f73\uff0c\u8fd4\u56de\u767b\u5f55\u754c\u9762",function(){o(),UserMgr.loginOut(),cc.director.loadScene("Login")})}var e=l().split(":"),t={};t.host=e[0],t.port=e[1],t.log=!0,pomelo.init(t,function(e){o(),UserMgr.token&&(publicWindow.alert.hide(),UserMgr.tokenLogin(function(){console.log("rrrreccconenct"),UIMgr.getPageScript(UIMgr.HallPage).doSomethingAfterlogin(),UIMgr.curPage==UIMgr.HallPage?console.log("hall"):UserMgr.roomId||UserMgr.hallgameId||GameDataMgr.isReplay||GameDataMgr.isOver||(UIMgr.pushUI(UIMgr.HallPage),GroupDataMgr.GroupLayerSp&&GroupDataMgr.GroupLayerSp.onBtnClose()),GroupDataMgr.GroupLayerSp&&GroupDataMgr.clubID&&(console.log("relogin club--------------"),GroupDataMgr.groupMgrIndex=GroupDataMgr.GroupLayerSp.getGroupMgrIndex(),GroupDataMgr.GroupLayerSp.enterClub(GroupDataMgr.clubID))}))})};n.setWCReconnectFun=function(){pomelo.reconnect=c};var l=function(){return dc.getCurUrl()},h=function(){var e=dc.getGateUrl();return e+=":3009"},d=function(){var e=dc.getDefaultUrl();return e+=":3011"},u=function(){HttpMgr.sendRequset("getServerStateInfo",null,function(e,t){e||1==t.ServerState&&publicWindow.alert.show("","\u670d\u52a1\u5668\u6b63\u5728\u7ef4\u62a4")})};cc._RF.pop()},{}],OptionMgr_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"8f3e8cFXhtO1IK09++KKW9i","OptionMgr_2MJ"),cc.Class({extends:cc.Component,properties:{OptionNode:cc.Node,operselNode:cc.Node,sendOperNode:cc.Node,_actionData:null,btnPass:cc.Node},onLoad:function(){},hideOperation:function(){this.OptionNode.active=!1,this.operselNode.active=!1,this.sendOperNode.active=!1;for(var e=0;e<this.operselNode.childrenCount;e++){this.operselNode.children[e].active=!1}this.sendOperNode.removeAllChildren()},showOperSelectInterface:function(e){console.log("showOperSelectInterface"),console.log(JSON.stringify(e)),this.hideOperation(),this._actionData=e;var t,n,i,a;e.oper;e.canGang&&(i=!0),e.canHu&&(t=!0),e.canPeng&&(n=!0),e.canChi&&(a=!0),i||a||n||t?this.setOperLayerShow(!0):this.setOperLayerShow(!1),t&&this.initActionInterface("btnHu",!0),n&&this.initActionInterface("btnPong",!0),i&&this.initActionInterface("btnKong",!0),a&&this.initActionInterface("btnChi",!0)},setOperLayerShow:function(e){this.btnPass.active=e,this.OptionNode.active=e,this.operselNode.active=e},initActionInterface:function(e,t){for(var n=0;n<this.operselNode.childrenCount;n++){var i=this.operselNode.children[n];if(i.name==e)return void(i.active=t)}},MJShowAction:function(e,t,n){if(this.OptionNode.active=!0,this.operselNode.active=!1,this.sendOperNode.active=!0,"chi"==e)for(var i=t.chiPai.length-1,a=0;a<t.chiPai.length;++a){var o=t.chiPai[i].pai;i--,this.addOption(1,o)}else if("gang"==e)for(a=0;a<t.gangPai.length;++a){var s=t.gangPai[a];this.addOption(5,s)}},addOption:function(e,t){if(5==e){var n=t;(o=(a=cc.instantiate(dc.ResourceMgr.MJKongPrefab[0])).getComponent("pongKongPrefab")).setType(e),o.pai=n;var i=[n,n,n,n];o.initMahJongsByArr(i,0),this.sendOperNode.addChild(a),a.on(cc.Node.EventType.TOUCH_END,this.onBtnMJClick,this)}else if(1==e){var a,o,s=GameDataMgr.MJDataMgr.createChiArr(t);(o=(a=cc.instantiate(dc.ResourceMgr.MJPongPrefab[0])).getComponent("pongKongPrefab")).setType(e),o.pai=s,o.initMahJongsByArr(s,0),this.sendOperNode.addChild(a),a.on(cc.Node.EventType.TOUCH_END,this.onBtnMJClick,this)}},addOptionChi:function(e,t){if(1==e)for(var n=0;n<chiArr.length;n++){var i=cc.instantiate(dc.ResourceMgr.MJPongPrefab[0]),a=i.getComponent("pongKongPrefab");a.setType(chiArr[n].chiType),a.oper=chiArr[n].chiType,a.card=pai,a.initMahJongsByArr(chiArr[n].chiArr,0),this.sendOperNode.addChild(i),i.on(cc.Node.EventType.TOUCH_END,this.onBtnMJClick,this)}},onBtnOperClick:function(e){var t=e.target,n=this._actionData,i={};if("btnChi"==t.name){var a=n.oper;1==n.chiPai.length?(i.pai=n.chiPai[0].pai,Hall_ReqAndRes.chiOper(i.pai,null,GameDataMgr.conf.createtype),this.hideOperation(),GameDataMgr.hasOutCard=!0):n.chiPai.length>1&&this.MJShowAction("chi",n,a)}else if("btnPong"==t.name)Hall_ReqAndRes.pengOper(null,GameDataMgr.conf.createtype),this.hideOperation(),GameDataMgr.hasOutCard=!0;else if("btnKong"==t.name){GameDataMgr.seatIndex;1==n.gangPai.length?(Hall_ReqAndRes.gangOper(n.gangPai[0],null,GameDataMgr.conf.createtype),this.hideOperation(),GameDataMgr.hasOutCard=!0):this.MJShowAction("gang",n)}else"btnHu"==t.name&&(Hall_ReqAndRes.huOper(null,GameDataMgr.conf.createtype),this.hideOperation(),GameDataMgr.hasOutCard=!0)},onBtnMJClick:function(e){console.log("SelectClick");var t=e.target.getComponent("pongKongPrefab");5==t._Type?(Hall_ReqAndRes.gangOper(t.pai,null,GameDataMgr.conf.createtype),this.hideOperation(),GameDataMgr.hasOutCard=!0):1==t._Type&&(Hall_ReqAndRes.chiOper(t.pai,null,GameDataMgr.conf.createtype),this.hideOperation(),GameDataMgr.hasOutCard=!0)},onBtnPass:function(e){var t=this._actionData;t.canHu&&t.canchu?publicWindow.alert.show("\u63d0\u793a","\u4e0d\u60f3\u80e1\u8bf7\u76f4\u63a5\u51fa\u724c"):(Hall_ReqAndRes.passOper(null,GameDataMgr.conf.createtype),this.hideOperation(),GameDataMgr.hasOutCard=!1)}}),cc._RF.pop()},{}],OverItem_TDH:[function(e,t,n){"use strict";cc._RF.push(t,"8d02bEMziBD0IFf6t4R6SKr","OverItem_TDH"),cc.Class({extends:cc.Component,properties:{userNode:cc.Node,bgNode:cc.Node,sprFP:cc.Node,sprHu:cc.Node,sprQG:cc.Node,holdsMgr:cc.Node,penggangNode:cc.Node,huContent:cc.Sprite,maimaNode:cc.Node,huScoreNode:cc.Node,gangScoreNode:cc.Node,gangScoreNode_maima:cc.Node,curScoreNode:cc.Node,allScoreNode:cc.Node,indexNode:cc.Node},start:function(){},initSingleData:function(e,t,n){this.setBgByIndex(t),this.setDanjuScore(e.score,t),this.settoltalScore(e.totalscore,t),this.setMaiMa(n,e.ma,t),this.setUserInfo(e,t),this.setFP(n,e,t),this.GameOverHolds(e,t),this.GameOverPengGang(e,t),this.setBanner(e,t),this.initGangShow();var i=this.getHuSocre(e,t,n);this.setHuScore(i);this.setGangScore(e,t,n,i),this.setIndexNode(t)},setIndexNode:function(e){for(var t=0;t<this.indexNode.children.length;t++){this.indexNode.children[t].active=e==t}},getHuSocre:function(e,t,n){if(GameDataMgr.MJDataMgr.getHuCode(n)<0)return 0;var i=GameDataMgr.conf.wanfa%100%10,a=0;return 1==i?a=GameDataMgr.MJDataMgr.getHuScore1(e,t,n):2==i&&(a=GameDataMgr.MJDataMgr.getHuScore2(e,t,n)),a},getGangScore:function(e,t,n,i){if(GameDataMgr.MJDataMgr.getHuCode(n)<0)return 0;var a=GameDataMgr.conf.wanfa%100%10,o=0;return 1==a?o=e.score-i:2==a&&(o=GameDataMgr.MJDataMgr.getGangScore2(e,t,n)),o},initGangShow:function(){var e=GameDataMgr.conf.wanfa%100%10;1==e?(this.gangScoreNode.active=!0,this.gangScoreNode_maima.active=!1):2==e&&(this.gangScoreNode.active=!1,this.gangScoreNode_maima.active=!0)},setGangScore:function(e,t,n,i){var a=GameDataMgr.MJDataMgr.getHuCode(n),o=GameDataMgr.conf.wanfa%100%10,s=0;if(1==o){var r=this.gangScoreNode.getChildByName("tex_add"),c=this.gangScoreNode.getChildByName("tex_sub"),l=this.gangScoreNode.getChildByName("curScore").getComponent(cc.Label);(s=e.score-i)>0?(r.active=!0,c.active=!1):0==s?(r.active=!1,c.active=!1):(r.active=!1,c.active=!0),l.string=s<0?-s:s}else if(2==o){var h=this.gangScoreNode_maima.getChildByName("gang").getComponent(cc.Label);if(a<0)h.string=0;else{var d=GameDataMgr.MJDataMgr.getGangMult(e,t,n);h.string=d+"\u500d"}}},setHuScore:function(e){var t=this.huScoreNode.getChildByName("tex_add"),n=this.huScoreNode.getChildByName("tex_sub"),i=this.huScoreNode.getChildByName("curScore").getComponent(cc.Label);e>0?(t.active=!0,n.active=!1):0==e?(t.active=!1,n.active=!1):(t.active=!1,n.active=!0),i.string=e<0?-e:e},setBanner:function(e,t){var n=this.node.getChildByName("huType");if(n.removeAllChildren(),e.hued)if(e.code>=-1){if(4==GameDataMgr.conf.gametype){n.active=!0;var i=e.code%100;if(10==i){var a=this.getBannerTitleName_TDH("qdz",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o)}else if(20==i){a=this.getBannerTitleName_TDH("qys",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o)}else if(21==i){a=this.getBannerTitleName_TDH("qys",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o);a=this.getBannerTitleName_TDH("qdz",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o)}else if(22==i){a=this.getBannerTitleName_TDH("qys",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o);a=this.getBannerTitleName_TDH("ddh",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o)}else if(23==i){a=this.getBannerTitleName_TDH("qys",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o);a=this.getBannerTitleName_TDH("ddc",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o)}else if(30==i){a=this.getBannerTitleName_TDH("ddh",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o)}else if(40==i){a=this.getBannerTitleName_TDH("ddc",0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o)}var o,s=parseInt(e.code/1e3);a=this.getBannerTitleName_TDH(s,0);(o=new cc.Node).addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=a,n.addChild(o)}}else n.active=!1;else n.active=!1},getBannerTitleName_TDH:function(e,t){var n=null;return 0==t||2==t?n=dc.ResourceMgr.getOverBanner_TDH("My_",e):1==t?n=dc.ResourceMgr.getOverBanner_TDH("Right_",e):3==t&&(n=dc.ResourceMgr.getOverBanner_TDH("Left_",e)),n},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},GameOverHolds:function(e,t){var n=e.holds||[];GameDataMgr.MJDataMgr.sortMJArr(n);var i=this.holdsMgr.getComponent("holdsManager2");i.createHolds(n),i.refreshHolds()},GameOverPengGang:function(e,t){var n=this.penggangNode.getComponent("pongKongManager2"),i=GameDataMgr.MJDataMgr.MJSeats[t].penggangs;n.initPongKongs2(i),n.refreshPongKong()},setFP:function(e,t,n){var i=this.sprFP,a=this.sprQG,o=this.sprHu;if(!!t.point){var s=GameDataMgr.MJDataMgr.getHuCode(e);s>=0&&(s=parseInt(s/1e3)),2==s?(i.active=!0,a.active=!1):3==s?(i.active=!1,a.active=!0):(i.active=!1,a.active=!1)}else i.active=!1,a.active=!1;var r=t.hued;o.active=r},setDanjuScore:function(e,t){var n=this.curScoreNode.getChildByName("tex_add"),i=this.curScoreNode.getChildByName("tex_sub"),a=this.curScoreNode.getChildByName("curScore").getComponent(cc.Label);e>0?(n.active=!0,i.active=!1):0==e?(n.active=!1,i.active=!1):(n.active=!1,i.active=!0),a.string=e<0?-e:e},settoltalScore:function(e,t){var n=this.allScoreNode.getChildByName("tex_add"),i=this.allScoreNode.getChildByName("tex_sub"),a=this.allScoreNode.getChildByName("curScore").getComponent(cc.Label);e>0?(n.active=!0,i.active=!1):0==e?(n.active=!1,i.active=!1):(n.active=!1,i.active=!0),a.string=e<0?-e:e},setMaiMa:function(e,t,n){var i=this.maimaNode;if(4==GameDataMgr.conf.gametype)if(2==GameDataMgr.conf.wanfa%100%10){i.active=!0;var a=i.getChildByName("card").getComponent("MJPrefab_myself");a.setMJID(t),a.initMJ();var o=GameDataMgr.MJDataMgr.getZhong(e,t,n),s=i.getChildByName("zhong"),r=s.getChildByName("zhong"),c=s.getChildByName("buzhong");r.active=o,c.active=!o}else i.active=!1;else i.active=!1},setUserInfo:function(e,t){var n=this.userNode,i=GameDataMgr.seats[t];n.getChildByName("name").getComponent(cc.Label).string=i.name,n.getChildByName("tex_banker").active=GameDataMgr.button==t,n.getChildByName("iconNode").getChildByName("icon").getComponent("ImageLoader_Gold").setIcon(i.headimg,i.userId)}}),cc._RF.pop()},{}],PMD_Arena:[function(e,t,n){"use strict";cc._RF.push(t,"58d7dnAmk9J5YQyj0jFH3Gi","PMD_Arena"),cc.Class({extends:cc.Component,properties:{_pamadeng:null},start:function(){},init:function(){}}),cc._RF.pop()},{}],PhraseConf:[function(e,t,n){"use strict";cc._RF.push(t,"36bdeZYkUZHhpxvKVHAE1vl","PhraseConf");var i=function(){var e,t=[],n=[],i=[],a=[];a[(o={type:0,index:1100,content:"\u4e0d\u6015\u795e\u4e00\u6837\u7684\u5bf9\u624b\uff0c\u5c31\u6015\u732a\u4e00\u6837\u7684\u961f\u53cb\u554a",sound:"QuickChat_0.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1101,content:"\u5dee\u751f\u5dee\u7684\u4e00\u584c\u7cca\u6d82\u7684",sound:"QuickChat_1.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1102,content:"\u9ad8\u624b\u4f60\u7684\u724c\u6253\u5f97\u592a\u597d\u4e86",sound:"QuickChat_2.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1103,content:"\u628a\u628a\u90fd\u662f\u5f88\u5dee\u7684\u724c",sound:"QuickChat_3.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1104,content:"\u4e0a\u78b0\u4e0b\u81ea\u6478\uff0c\u9ebb\u4e66\u4e0a\u5199\u7684\u4e00\u70b9\u4e5f\u4e0d\u9519",sound:"QuickChat_4.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1105,content:"\u5c0f\u59d0\u59b9\u505a\u4e2a\u597d\u670b\u53cb\u5450",sound:"QuickChat_5.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1106,content:"\u56db\u4e2a\u4eba\u51d1\u9f50\u4e86\uff0c\u8d76\u7d27\u5feb\u5f00\u59cb\u5427",sound:"QuickChat_6.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1107,content:"\u4e0d\u597d\u610f\u601d\u6211\u8fd9\u8fb9\u6709\u70b9\u4e8b\u7a0d\u7b49\u4e00\u4e0b",sound:"QuickChat_6.mp3",url:"HZGame/QuickChat_pub_1.mp3"}).index]=o,n[o.index]=o,i.push(n);n=[];a[(o={type:0,index:2100,content:"\u4f60\u592a\u7b28\u4e86",sound:"QuickChat_0.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2101,content:"\u4f60\u592a\u6162\u4e86\uff0c\u5feb\u70b9\u51fa\u724c",sound:"QuickChat_1.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2102,content:"\u4ec0\u4e48\u53eb\u7f18\u5206\uff0c\u78b0\u5230\u4f60\u5c31\u662f\u6211\u7684\u7f18\u5206",sound:"QuickChat_2.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2103,content:"\u592a\u5389\u5bb3\u4e86\uff0c\u5f04\u4e0d\u8fc7\u4f60\u4eec",sound:"QuickChat_3.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2104,content:"\u8111\u5b50\u8f6c\u4e0d\u8fc7\u6765\u4e86\u5417",sound:"QuickChat_4.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2105,content:"\u670b\u53cb\u4f60\u592a\u4f1a\u5403\u4e86",sound:"QuickChat_5.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2106,content:"\u4e0a\u5bb6\u4f60\u4e0d\u8981\u9a7b\u7684\u592a\u7262",sound:"QuickChat_6.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2107,content:"\u6666\u6c14\uff0c\u7206\u5934\u8d64\u811a\u4e86",sound:"QuickChat_7.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2108,content:"\u4eba\u5012\u9709\u559d\u51c9\u6c34\u90fd\u585e\u7259",sound:"QuickChat_8.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2109,content:"\u6389\u5934\u6478\u8d22\u795e",sound:"QuickChat_9.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2110,content:"\u4e0d\u597d\u610f\u601d\u6211\u8fd9\u8fb9\u6709\u70b9\u4e8b\u7a0d\u7b49\u4e00\u4e0b",sound:"QuickChat_6.mp3",url:"HZGame/QuickChat_pub_1.mp3"}).index]=o,n[o.index]=o,i.push(n);n=[];a[(o={type:0,index:1200,content:"\u54ce\u5440\uff0c\u4f60\u5b75\u9e21\u86cb\u5462\uff0c\u52a8\u4f5c\u5feb\u4e00\u70b9\u597d\u4e0d\u5566",sound:"QuickChat_0.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1201,content:"\u521d\u6765\u4e4d\u5230\uff0c\u8bf7\u5927\u5bb6\u591a\u591a\u5173\u7167",sound:"QuickChat_1.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1202,content:"\u4e13\u5fc3\u6253\u724c\uff0c\u4e0d\u8981\u804a\u5929\u4e86\u597d\u5417",sound:"QuickChat_2.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1203,content:"\u4f69\u670d\uff0c\u7684\u786e\u662f\u9ad8\u624b",sound:"QuickChat_3.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1204,content:"\u54ce\uff0c\u4e00\u5f20\u724c\u90fd\u4e0d\u7ed9\u6211\u78b0",sound:"QuickChat_4.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1205,content:"\u98ce\u5934\u8fd9\u4e48\u597d\uff0c\u4e00\u76f4\u505a\u5e84\u5750\u7684\u90fd\u4e0b\u4e0d\u6765\u55bd",sound:"QuickChat_5.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1206,content:"\u5783\u573e\u80e1\uff0c\u80e1\u51e0\u628a\u6389\u6389\u98ce\u5934",sound:"QuickChat_6.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1207,content:"\u6765\u6765\u6765\uff0c\u5de6\u624b\u6478\u4e2a\u8d22\u795e",sound:"QuickChat_7.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1208,content:"\u4e0a\u5bb6\u52a8\u4e00\u4e0b\uff0c\u843d\u4e2a\u8d22\u795e\u4e0b\u6765\u5427",sound:"QuickChat_8.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1209,content:"\u5bf9\u5bb6\u662f\u51a4\u5bb6\uff0c\u4e0a\u5bb6\u624d\u662f\u4eb2\u5bb6",sound:"QuickChat_9.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:1210,content:"\u4e0d\u597d\u610f\u601d\u6211\u8fd9\u8fb9\u6709\u70b9\u4e8b\u7a0d\u7b49\u4e00\u4e0b",sound:"QuickChat_6.mp3",url:"HZGame/QuickChat_pub_1.mp3"}).index]=o,n[o.index]=o,i.push(n),(e=t).push.apply(e,a);var o;n=[];return a[(o={type:0,index:2200,content:"\u50ac\u547d\u554a\uff01\u6211\u559c\u6b22\u60f3\u6e05\u695a\u518d\u51fa",sound:"QuickChat_0.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2201,content:"\u8fd9\u724c\u6253\u5f97\u592a\u81ed\u4e86\uff0c\u56de\u53bb\u7ec3\u7ec3\u518d\u6765",sound:"QuickChat_1.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2202,content:"\u5feb\u70b9\u51fa\u4e0d\u8981\u62d6\u5ef6\u65f6\u95f4\u4e86",sound:"QuickChat_2.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2203,content:"\u670b\u53cb\uff0c\u5927\u5bb6\u597d",sound:"QuickChat_3.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2204,content:"\u5b88\u95e8\u5458\u5728\u5e72\u4ec0\u4e48\u90fd\u4e0d\u77e5\u9053\uff0c\u592a\u4e0d\u8d1f\u8d23\u4e86",sound:"QuickChat_4.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2205,content:"\u8d22\u795e\u8d22\u795e\uff0c\u6551\u6551\u7a77\u4eba",sound:"QuickChat_5.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2206,content:"\u4f4f\u5f97\u7262\uff0c\u8f93\u5f97\u5c11",sound:"QuickChat_6.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2207,content:"\u4f69\u670d\u4f69\u670d\uff0c\u7684\u786e\u662f\u9ad8\u624b",sound:"QuickChat_7.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2208,content:"\u4eca\u5929\u8138\u8272\u4e0d\u592a\u597d\uff0c\u4f30\u8ba1\u8981\u8f93\u7684",sound:"QuickChat_8.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2209,content:"\u4e13\u5fc3\u6253\u724c\uff0c\u4e0d\u8981\u5f00\u5c0f\u5dee\u4e86",sound:"QuickChat_9.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2210,content:"\u5bf9\u4e0b\u5bb6\u597d\uff0c\u624d\u662f\u771f\u7684\u597d",sound:"QuickChat_10.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2211,content:"\u8fd9\u724c\u6211\u81ea\u5df1\u4e0d\u597d\uff0c\u6253\u5f97\u592a\u6c14\u4e86",sound:"QuickChat_11.mp3"}).index]=o,n[o.index]=o,a[(o={type:0,index:2212,content:"\u4e0d\u597d\u610f\u601d\u6211\u8fd9\u8fb9\u6709\u70b9\u4e8b\u7a0d\u7b49\u4e00\u4e0b",sound:"QuickChat_6.mp3",url:"HZGame/QuickChat_pub_1.mp3"}).index]=o,n[o.index]=o,i.push(n),{_myQuickList:i,_quickchatsArr:t=dc.deepCopy(a)}},a=function(){var e=[],t=[],n=[];n[(i={index:1100,content:"\u9ad8\u624b\u4f60\u7684\u724c\u6280\u53ef\u4ee5\u7684",sound:"QuickChat_0.mp3"}).index]=i,e[i.index]=i,n[(i={index:1101,content:"\u5dee\u751f\u5dee\u7684\u4e00\u584c\u7cca\u6d82\u7684",sound:"QuickChat_1.mp3"}).index]=i,e[i.index]=i,n[(i={index:1102,content:"\u55e8\u5f88\u9ad8\u5174\u548c\u4f60\u4e00\u8d77\u6e38\u620f",sound:"QuickChat_2.mp3"}).index]=i,e[i.index]=i,n[(i={index:1103,content:"\u56db\u4e2a\u4eba\u51d1\u9f50\u4e86\uff0c\u8d76\u7d27\u5feb\u5f00\u59cb\u5427",sound:"QuickChat_3.mp3"}).index]=i,e[i.index]=i,n[(i={index:1104,content:"\u5c0f\u59d0\u59b9\u52a0\u4e2a\u597d\u53cb\u5417",sound:"QuickChat_4.mp3"}).index]=i,e[i.index]=i,n[(i={index:1105,content:"\u54c8\u54c8\u6253\u5230\u6211\u996d\u7897\u91cc\u6765\u4e86",sound:"QuickChat_5.mp3"}).index]=i,e[i.index]=i,n[(i={index:1106,content:"\u670b\u53cb\u5408\u4f5c\u6109\u5feb",sound:"QuickChat_6.mp3"}).index]=i,e[i.index]=i,n[(i={index:1107,content:"\u6f02\u4eae\uff0c\u5077\u9e21\u6210\u529f",sound:"QuickChat_7.mp3"}).index]=i,e[i.index]=i,n[(i={index:1108,content:"\u53cc\u6263\u4ed6\u4eec\u4e86\u723d",sound:"QuickChat_8.mp3"}).index]=i,e[i.index]=i,n[(i={index:1109,content:"\u4e0d\u6015\u795e\u4e00\u6837\u7684\u5bf9\u624b\uff0c\u5c31\u6015\u732a\u4e00\u6837\u7684\u961f\u53cb\u554a",sound:"QuickChat_9.mp3"}).index]=i,e[i.index]=i,t.push(e);e=[];n[(i={index:2100,content:"\u50ac\u4ec0\u4e48\u50ac\u6211\u60f3\u6e05\u695a\u518d\u51fa",sound:"QuickChat_0.mp3"}).index]=i,e[i.index]=i,n[(i={index:2101,content:"\u8ddf\u4f60\u5408\u4f5c\u5f88\u6109\u5feb",sound:"QuickChat_1.mp3"}).index]=i,e[i.index]=i,n[(i={index:2102,content:"\u6f02\u4eae\u4f60\u7684\u53cc\u6263\u5883\u754c\u5b9e\u5728\u9ad8",sound:"QuickChat_2.mp3"}).index]=i,e[i.index]=i,n[(i={index:2103,content:"\u732a\u4e00\u6837\u7684\u961f\u53cb\u5927\u6982\u5c31\u662f\u8bf4\u4f60\u4e86",sound:"QuickChat_3.mp3"}).index]=i,e[i.index]=i,n[(i={index:2104,content:"\u653e\u6389\u4e00\u4e2a\uff0c\u6293\u534a\u4e2a",sound:"QuickChat_4.mp3"}).index]=i,e[i.index]=i,n[(i={index:2105,content:"\u4e24\u53ea\u9ebb\u888b\uff0c\u653e\u5fc3\u6253\u597d\u4e86",sound:"QuickChat_5.mp3"}).index]=i,e[i.index]=i,n[(i={index:2106,content:"\u4f60\u4e2a\u6162\u541e\u5a46\uff0c\u5feb\u70b9\u51fa",sound:"QuickChat_6.mp3"}).index]=i,e[i.index]=i,n[(i={index:2107,content:"\u4ec0\u4e48\u662f\u7f18\u5206\uff0c\u78b0\u5230\u4f60\u5c31\u662f\u7f18\u5206",sound:"QuickChat_7.mp3"}).index]=i,e[i.index]=i,n[(i={index:2108,content:"\u70b8\u70b8\u6389\u4e48\u597d\u4e86",sound:"QuickChat_8.mp3"}).index]=i,e[i.index]=i,n[(i={index:2109,content:"\u8fd9\u724c\u6ca1\u6709\u5239\u8f66\u4e86",sound:"QuickChat_9.mp3"}).index]=i,e[i.index]=i,t.push(e);e=[];n[(i={index:1200,content:"\u521d\u6765\u4e4d\u5230\uff0c\u8bf7\u591a\u591a\u5173\u7167",sound:"QuickChat_0.mp3"}).index]=i,e[i.index]=i,n[(i={index:1200,content:"\u54ce\u5440\uff0c\u4f60\u5b75\u9e21\u86cb\u5462\uff0c\u52a8\u4f5c\u5feb\u4e00\u70b9\u597d\u4e0d\u5566",sound:"QuickChat_1.mp3"}).index]=i,e[i.index]=i,n[(i={index:1202,content:"\u4f60\u80fd\u8d70\uff0c\u5c31\u7ba1\u81ea\u5df1\u8d70",sound:"QuickChat_2.mp3"}).index]=i,e[i.index]=i,n[(i={index:1203,content:"\u592a\u5389\u5bb3\u4e86\uff0c\u6211\u5f04\u4f60\u4e0d\u8fc7",sound:"QuickChat_3.mp3"}).index]=i,e[i.index]=i,n[(i={index:1204,content:"\u8fd0\u6c14\uff0c\u8fd9\u724c\u81ea\u6263",sound:"QuickChat_4.mp3"}).index]=i,e[i.index]=i,n[(i={index:1205,content:"\u70b8\u7684\u5934\u90fd\u75db\u4e86",sound:"QuickChat_5.mp3"}).index]=i,e[i.index]=i,n[(i={index:1206,content:"\u70b8\u70b8\u6389\u4e48\u597d\u4e86",sound:"QuickChat_6.mp3"}).index]=i,e[i.index]=i,n[(i={index:1207,content:"\u4e13\u5fc3\u6253\u724c\uff0c\u4e0d\u8981\u804a\u5929\u4e86",sound:"QuickChat_7.mp3"}).index]=i,e[i.index]=i,t.push(e);var i;e=[];return n[(i={index:2200,content:"\u8868\u8003\u8651\u4e86\uff0c\u8fd9\u724c\u6a2a\u6253\u76f4\u6253\u90fd\u662f\u6b7b",sound:"QuickChat_0.mp3"}).index]=i,e[i.index]=i,n[(i={index:2201,content:"\u4e0d\u8981\u5439\u6211\uff0c\u8ba9\u6211\u60f3\u6e05\u695a\u518d\u51fa",sound:"QuickChat_1.mp3"}).index]=i,e[i.index]=i,n[(i={index:2202,content:"\u6253\u7684\u592a\u81ed\u4e86\uff0c\u56de\u53bb\u7ec3\u7ec3\u5728\u6765",sound:"QuickChat_2.mp3"}).index]=i,e[i.index]=i,n[(i={index:2203,content:"\u5f1f\u5144\uff0c\u4f60\u7ba1\u81ea\u5df1\u8d70",sound:"QuickChat_3.mp3"}).index]=i,e[i.index]=i,n[(i={index:2204,content:"\u4f60\u4eca\u5929\u8138\u8272\u4e0d\u597d\u8981\u8f93\u4e86",sound:"QuickChat_4.mp3"}).index]=i,e[i.index]=i,n[(i={index:2205,content:"\u4f69\u670d\u4f69\u670d\u7684\u786e\u662f\u9ad8\u624b",sound:"QuickChat_5.mp3"}).index]=i,e[i.index]=i,n[(i={index:2206,content:"\u592a\u5389\u5bb3\u4e86\uff0c\u6211\u5f04\u4f60\u4e0d\u8fc7",sound:"QuickChat_6.mp3"}).index]=i,e[i.index]=i,n[(i={index:2207,content:"\u70b8\u70b8\u6389\u4e48\u597d\u4e86",sound:"QuickChat_7.mp3"}).index]=i,e[i.index]=i,n[(i={index:2208,content:"\u4e13\u5fc3\u6253\u724c\uff0c\u4e0d\u8981\u5f00\u5c0f\u5dee",sound:"QuickChat_8.mp3"}).index]=i,e[i.index]=i,t.push(e),{_myQuickList:t,_quickchatsArr:dc.deepCopy(n)}};n.getPhrase=function(){var e,t=GameDataMgr.conf;return 2==t.gametype?e=a():3==t.gametype?e=i():4==t.gametype&&(e=i()),e},cc._RF.pop()},{}],Prepare_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"de6e1cEuBZJkZxZXGeQEQCG","Prepare_2MJ");var i=e("WechatHelper"),a=e("XLHelper");cc.Class({extends:cc.Component,properties:{btnExitNode:cc.Node,btnDissolve:cc.Node,btnInvite:cc.Node,btnXLBtn:cc.Node},onLoad:function(){this.weichatBtnHide(),this.XLInstallBtnHide(),this.initDissolveBtn()},weichatBtnHide:function(){var e=AnysdkMgr.isWeichatInstall();this.btnInvite.active=!!e},XLInstallBtnHide:function(){var e=AnysdkMgr.isXLInstall();this.btnXLBtn.active=e},initDissolveBtn:function(){var e=-1;GameDataMgr.conf&&(e=GameDataMgr.getSeatIndexByID(GameDataMgr.conf.creator)),GameDataMgr.seatIndex==e?(this.btnExitNode.active=!1,this.btnDissolve.active=!0):(this.btnExitNode.active=!0,this.btnDissolve.active=!1)},onBtnInviteFriends:function(){var e=GameDataMgr.conf,t=e.peoplemax,n=e.gametype;if(2==n){var a=e.wanfa%100;i.invite_DB(GameDataMgr.roomID,a,GameDataMgr.conf.gamenums,"")}else 3==n&&(2==t?i.invite_MJ2P(GameDataMgr.roomID,GameDataMgr.conf.vip,GameDataMgr.conf.gamenums):i.invite(GameDataMgr.roomID,GameDataMgr.conf.vip,GameDataMgr.conf.gamenums))},onBtnInviteFriends_XL:function(){if(UserMgr.xlOpenId){var e=GameDataMgr.conf,t=e.peoplemax,n=e.gametype;if(2==n){var i=e.wanfa%100;a.invite_DB(GameDataMgr.roomID,i,GameDataMgr.conf.gamenums,"")}else 3==n&&(2==t?a.invite_MJ2P(GameDataMgr.roomID,GameDataMgr.conf.vip,GameDataMgr.conf.gamenums):a.invite(GameDataMgr.roomID,GameDataMgr.conf.vip,GameDataMgr.conf.gamenums))}else publicWindow.alert.show("\u63d0\u793a","\u672a\u7ed1\u5b9a\u95f2\u804a\u53f7\u4e0d\u80fd\u5206\u4eab")},onBtnExit:function(e){Hall_ReqAndRes.exitRequest(null,GameDataMgr.conf.createtype)},onBtnBeginDissolve:function(e){publicWindow.alert.show("\u89e3\u6563\u623f\u95f4","\u6e38\u620f\u5f00\u59cb\u524d\u89e3\u6563\u623f\u95f4\u4e0d\u6263\u623f\u5361",function(){Hall_ReqAndRes.dissolveRequest()},!0)},update:function(e){}}),cc._RF.pop()},{WechatHelper:"WechatHelper",XLHelper:"XLHelper"}],Ready_Common_Gold:[function(e,t,n){"use strict";cc._RF.push(t,"48588WYMtVKNpq3xDmwT8lb","Ready_Common_Gold"),cc.Class({extends:cc.Component,properties:{lblCountDown:cc.Label,btnStart:cc.Node,btnContinue:cc.Node,lblContinueCountDown:cc.Label,countMax:10,_curCount:0,countContinueMax:10,lblContinue:cc.Label,_curContinueTime:0,btnGung:cc.Node,posNode:cc.Node,btnNode:cc.Node,layer1:cc.Node,layer2:cc.Node},onLoad:function(){},onBtnContinue:function(){},setPos:function(e){var t=this.posNode.getChildByName("pos0").getPosition(),n=this.posNode.getChildByName("pos1").getPosition(),i=this.posNode.getChildByName("pos2").getPosition();0==e?this.btnNode.setPosition(t.x,t.y):1==e?this.btnNode.setPosition(n.x,n.y):2==e&&this.btnNode.setPosition(i.x,i.y)},setLayerType:function(e){null==e||(0==e?(this.layer1.active=!0,this.layer2.active=!1):(this.layer1.active=!1,this.layer2.active=!0))},setbtnStartType:function(e){null==e?(this.btnStart.active=!1,this.btnContinue.active=!1):0==e?(this.btnStart.active=!0,this.btnContinue.active=!1):(this.btnStart.active=!1,this.btnContinue.active=!0)},startContinue:function(e,t){},setBtnsByType:function(e){1==e?(this.setbtnStartType(0),this.btnGung.active=!0,this.setPos(0)):2==e&&(this.setbtnStartType(1),this.btnGung.active=!1,this.setPos(1))},startAction:function(e,t,n){var i;ArenaDataMgr.clearreadyInterval(),this.setBtnsByType(n),1==n?i=this.lblCountDown:2==n&&(i=this.lblContinueCountDown),i.node.active=!0,this.node.stopAllActions(),this.node.active=!0,this._curCount=t||this.countMax,this._curCount,this._curCount>1&&this._curCount--,GameDataMgr._readyRetainSecond=this._curCount,i.string=this._curCount,GameDataMgr._readytimer=setInterval(function(){GameDataMgr._readyRetainSecond--,i.string=GameDataMgr._readyRetainSecond,GameDataMgr._readyRetainSecond<=0&&(GameDataMgr._readyRetainSecond=null,GameDataMgr._readyOldTimeStamp=null,this.setbtnStartType(),this.setCountDwownShow(!1),this.setContinueCountDownShow(!1),e?e():(Hall_ReqAndRes.readyReq(1,function(){},GameDataMgr.conf.createtype),console.log("startAction Over")),ArenaDataMgr.clearreadyInterval())}.bind(this),1e3)},endClear:function(){this.stopAction(),this.node.active=!0,this.lblCountDown.node.active=!1,this.lblContinueCountDown.node.active=!1,this.setbtnStartType(1)},stopAction:function(){this.node.stopAllActions()},onBtnReady:function(){if(ArenaDataMgr.clearreadyInterval(),this.node.stopAllActions(),this.setbtnStartType(),GameDataMgr.isOver){GameDataMgr.GameEndReset();var e=GameDataMgr.getGamePage();e.setShowGameEnd(!0),e.clearScene()}else Hall_ReqAndRes.readyReq(1,function(){},GameDataMgr.conf.createtype)},onBtnStand:function(){if(GameDataMgr.gameIndex>0){var e=function(){this.standUp()}.bind(this);publicWindow.alert.show("","\u662f\u5426\u8981\u79bb\u5f00\u6e38\u620f",e,!0)}else this.standUp()},standUp:function(){(ArenaDataMgr.clearreadyInterval(),GameDataMgr.isOver)||(Hall_ReqAndRes.exitRequest(null,GameDataMgr.conf.createtype),UIMgr.getPageScript(UIMgr.HallPage)._arenaLayer.getComponent("ArenaLayer").openHallPlayingLayer(!1))},onBtnReturnHall:function(){UIMgr.pushUI(UIMgr.HallPage),UIMgr.getPageScript(UIMgr.HallPage)._arenaLayer.getComponent("ArenaLayer").openHallPlayingLayer(!0)},setCountDwownShow:function(e){this.lblCountDown.node.active=e},setStartNodeShow:function(e){this.btnStart.active=e},setContinueCountDownShow:function(e){this.lblContinueCountDown.node.active=e},setContinueNodeShow:function(e){this.btnContinue.active=e},onDestroy:function(){console.log("ready des")}}),cc._RF.pop()},{}],ReplayMgr_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"5e60afcN4hKO6+ijM2a4yEC","ReplayMgr_2MJ"),cc.Class({extends:cc.Component,properties:{_controlSp:cc.Node,btnActionNode:cc.Node,btnSpeedNode:cc.Node,_isStop:!1,_frame:0,_speed:90,_speedOrigin:120,_speedNum:1,_index:0,_cmdArr:null},onLoad:function(){},initGame:function(){this.setSpeedBtnByTag(1),this.setAcion(),this.onGameBegin({}),GameDataMgr.conf.gamenums},setControlSp:function(e){this._controlSp=e},getControler:function(){return this._controlSp},initSpeed:function(){this._speedNum=1,this._speed=60},setActionBtnByTag:function(e){this._isStop=e,this.setAcion()},setAcion:function(){var e=this.btnActionNode.getChildByName("pause"),t=this.btnActionNode.getChildByName("start");this._isStop?(e.active=!1,t.active=!0):(e.active=!0,t.active=!1)},setSpeedBtnByTag:function(e){this._speedNum=e,1==this._speedNum?this._speed=60:2==this._speedNum&&(this._speed=30),this.setSpeed()},setSpeed:function(){var e=this.btnSpeedNode.getChildByName("sprAdd"),t=this.btnSpeedNode.getChildByName("sprSub");1==this._speedNum?(e.active=!0,t.active=!1):2==this._speedNum&&(e.active=!1,t.active=!0)},onBtnBackHall:function(){this.clearData(),GameDataMgr.GameEndReset(),this.getControler().clearAllMJNode(),UIMgr.pushUI(UIMgr.HallPage)},onBtnAddSpeed:function(){this.setSpeedBtnByTag(2)},onBtnSubSpeed:function(){this.setSpeedBtnByTag(1)},onBtnContinue:function(){this.setActionBtnByTag(!1)},onBtnStop:function(){this.setActionBtnByTag(!0)},clearData:function(){this._isStop=!1,this._frame=0,this._speed=90,this._speedOrigin=120,this._speedNum=1,this._index=0,this._cmdArr=null},onGameBegin:function(e){var t=GameDataMgr.results;if(t){for(var n=0;n<t.length;n++)t[n].totalscore=t[n].totalscore||0,t[n].score=t[n].score||0,t[n].code=t[n].code||0;var i=GameDataMgr.seats;for(n=0;n<i.length;n++){i[n].score=t[n].totalscore}}this.getControler().OnGameBeginRepaly(e,!0)},setRaiseState:function(e){var t=this.getControler();1==e?(t.setRaiseTips(!0),t.setRaiseState(!1)):2==e?(t.setRaiseTips(!0),t.setRaiseState(!0)):(t.setRaiseTips(!1),t.setRaiseState(!1))},doMopai:function(e){GameDataMgr.numofmj--,GameDataMgr.hasOutCard=!1,GameDataMgr.addMopaiHandle(e,!0),this.getControler().addMopaiHandle(e,!0)},doOutCard:function(e){GameDataMgr.showOutCardHandle(e,!0),this.getControler().showOutCardHandle(e,!0)},doChi:function(e){GameDataMgr.chiOper(e),this.getControler().EatCardsHandle(e,!0)},doPeng:function(e){GameDataMgr.pengOper(e),this.getControler().PongHandle(e,!0)},doGang:function(e){GameDataMgr.gangOper(e),this.getControler().KongHandle(e,!0)},doHu:function(e){var t=this.getControler();GameDataMgr.getSeatIndexByID(e.userId);t.playHuNew(e.pai)},doAction:function(){if(this._frame++,this._frame>=this._speed){if(this._index>=0&&this._index<=GameDataMgr._GameActionData.length){var e=GameDataMgr._GameActionData[this._index];if(!e)return;if("mopai"==e.cmd)(t={}).userId=e.userId,t.pai=e.pai,this.doMopai(t);else if("chupai"==e.cmd){GameDataMgr.getSeatIndexByID(e.userId);(t={}).userId=e.userId,t.pai=e.pai,this.doOutCard(t)}else if("peng"==e.cmd){(t={}).userId=e.userId,t.pai=e.pai,this.doPeng(t)}else if("chi"==e.cmd){(t={}).userId=e.userId,t.pai=e.chis,this.doChi(t)}else if("gang"==e.cmd){(t={}).userId=e.userId,t.pai=e.pai,t.gangtype=e.gangtype,this.doGang(t)}else if("hu"==e.cmd){var t;(t={}).userId=e.userId,t.pai=e.pai,this.doHu(t)}}this._frame=0,this._index++}},update:function(e){GameDataMgr.isReplay&&(this._isStop||this.doAction())}}),cc._RF.pop()},{}],RoomBtnItem:[function(e,t,n){"use strict";cc._RF.push(t,"cabf0QOJ8JPXr1RpQJo1Ytf","RoomBtnItem"),cc.Class({extends:cc.Component,properties:{},start:function(){},OnClickEnterRoom:function(){this.conf}}),cc._RF.pop()},{}],RoomDetail:[function(e,t,n){"use strict";cc._RF.push(t,"b4983ncuqRNTY4/Gp+rg7Uw","RoomDetail"),cc.Class({extends:cc.Component,properties:{seats:[cc.Node],lblRoom:cc.Label,lblType:cc.Label,lblTime:cc.Label,titleNode:cc.Node},onLoad:function(){},openDetail:function(e){var t=JSON.parse(e.conf);this.setRoomId(e.roomId),this.setDec(e);var n=this.dateFormat(1e3*parseInt(e.create_time));this.setTime(n),this.setTitle(t.gametype,t.peoplemax),this.setSeatData(e)},showRoomNode:function(e){this.node.active=e},openRoomDetail:function(e){},setSeatData:function(e){for(var t=JSON.parse(e.conf).peoplemax,n=e.seats,i=0;i<this.seats.length;i++){var a=this.seats[i];i<t&&n[i].userId?a.active=!0:a.active=!1}for(i=0;i<n.length;i++){var o=n[i],s=(a=this.seats[i]).getComponent("seatView_Room_Hall");o.userId?(s.setUrl(o.headImg,o.userId),s.setUserName(o.name),s.setUserId(o.userId),s.setRoomId(e.roomId)):this.initSeatViewBylocal(i)}},initSeatViewBylocal:function(e){this.seats[e].getComponent("seatView_Room_Hall").initSeatView()},setRoomId:function(e){this.lblRoom.string="\u623f\u53f7"+e},setDec:function(e){var t=JSON.parse(e.conf),n=t.gametype,i="";if(3==n){var a=t.gamenums;i=2==t.peoplemax?0==a?"50\u7247\u6d88\u8017\u4e00\u5f20\u623f\u5361":"8\u5c40\u6d88\u8017\u4e00\u5f20\u623f\u5361":0==a?"40\u7247\u6d88\u8017\u4e00\u5f20\u623f\u5361":"8\u5c40\u6d88\u8017\u4e00\u5f20\u623f\u5361"}else if(2==n){0==(o=t.wanfa%100)?i="\u5168\u6697\u56fa\u5b9a\u642d\u6863":1==o?i="\u5168\u6697\u7ffb\u724c\u914d\u5bf9":10==o?i="\u660e\u53cc\u56fa\u5b9a\u642d\u6863":11==o&&(i="\u660e\u53cc\u7ffb\u724c\u914d\u5bf9")}else if(4==n){var o=t.wanfa%100%10,s=parseInt(t.wanfa/100)%10;1==o?i+="\u65e0\u4e70\u9a6c":2==o&&(i+="\u4e70\u9a6c"),4==s?i+="4\u4eba":3==s&&(i+="3\u4eba")}this.lblType.string=i},setTime:function(e){this.lblTime.string=e},setTitle:function(e,t){var n=this.titleNode,i="";i=0==e?"titlemj":1==e?"":2==e?"titleDB":3==e?2==t?"titlemj2p":"titlemj":4==e?"titleTDH":"titlemj";for(var a=0;a<n.childrenCount;a++){var o=n.children[a];o.name==i?o.active=!0:o.active=!1}},dateFormat:function(e){var t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1;i=i>=10?i:"0"+i;var a=t.getDate();a=a>=10?a:"0"+a;var o=t.getHours();o=o>=10?o:"0"+o;var s=t.getMinutes();s=s>=10?s:"0"+s;var r=t.getSeconds();return n+"-"+i+"-"+a+" "+o+":"+s+":"+(r=r>=10?r:"0"+r)},onBtnClose:function(){this.showRoomNode(!1)}}),cc._RF.pop()},{}],SaleRecordItem:[function(e,t,n){"use strict";cc._RF.push(t,"de754ZzDOVOxL/ePMeTKBlP","SaleRecordItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblTime:cc.Label,lblUserId:cc.Label,lblBuyerName:cc.Label,lblFKNum:cc.Label,lblBeforeBuyFKNum:cc.Label,lblAfterBuyFKNum:cc.Label},start:function(){},initData:function(e,t){this.setBgByIndex(t);var n=dc.utils.dateFormat(e.create_time);this.setTime(n),this.setUserId(e.userid),this.setName(e.name),this.setBeforeBuyNum(e.gems_before),this.setBuyFKNum(e.gems);var i=e.gems_before+e.gems;this.setAfterBuyNum(i)},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},setTime:function(e){this.lblTime.string=e},setUserId:function(e){this.lblUserId.string=e},setName:function(e){var t;e.length>9?t=e.substr(0,8)+"...":t=e;this.lblBuyerName.string=t},setBuyFKNum:function(e){this.lblFKNum.string=e},setBeforeBuyNum:function(e){this.lblBeforeBuyFKNum.string=e},setAfterBuyNum:function(e){this.lblAfterBuyFKNum.string=e}}),cc._RF.pop()},{}],ScenePage:[function(e,t,n){"use strict";cc._RF.push(t,"6aab8jz7FBH/LZ6EON7GZvK","ScenePage");e("os");cc.Class({extends:cc.Component,properties:{rootNode:cc.Node,MenuNode:cc.Node,Dialog:cc.Node,lblCodeTest:cc.EditBox,EditRoomTest:cc.EditBox,_pamadeng:null,_alert:null,_alert_Tips:null,_waitConnect:null},onLoad:function(){UIMgr.setNodeMgr(this.node);var e=cc.find("Canvas").getComponent(cc.Canvas),t=e.designResolution;if(dc.utils.getScaleRate(t)>1?(e.fitHeight=!0,e.fitWidth=!1):(e.fitHeight=!1,e.fitWidth=!0),!this._waitConnect){var n=cc.loader.getRes("Catalogue/Prefab/publicFrame/WaitingConnection",cc.Prefab);this._waitConnect=cc.instantiate(n),this.Dialog.addChild(this._waitConnect),publicWindow.wc=this._waitConnect.getComponent("WaitingConnection")}if(!this._alert_Tips){var i=cc.loader.getRes("Catalogue/Prefab/publicFrame/alert_FKTips",cc.Prefab);this._alert_Tips=cc.instantiate(i),this.Dialog.addChild(this._alert_Tips),publicWindow.alert_Tips=this._alert_Tips.getComponent("alert")}this.sendMessage(!1)},start:function(){},onEnable:function(){this.initEvent()},onDisable:function(){cc.game.off(cc.game.EVENT_SHOW),cc.game.off(cc.game.EVENT_HIDE)},sendMessage:function(e){UIMgr.getPageScript(UIMgr.HallPage)._pamadeng.getComponent("speakMessage_G").setMessegeLayer(e)},stopMsgAction:function(e){UIMgr.getPageScript(UIMgr.HallPage)._pamadeng.getComponent("speakMessage_G").stopMsgAction(e)},initEvent:function(){console.log("dc.HZGameOn = "+dc.HZGameOn),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("HZGame"),pomelo.reconnect()}.bind(this)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("BackGround hide"),GameDataMgr.reset(),ArenaDataMgr.clearreadyInterval(),pomelo.disconnect()}.bind(this))},OnDelRoomTest:function(){var e=this.EditRoomTest.string,t={};t.roomId=e,pomelo.request("hall.hallHandler.del_private_room",t,function(e){console.log("del_private_room",e)})}}),cc._RF.pop()},{os:6}],ScrollPartLoadItems:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}cc._RF.push(t,"6e0eedKv7ZPEoyiUFg2Pkl5","ScrollPartLoadItems"),cc.Class({extends:cc.Component,properties:{scrolView:cc.ScrollView,content:cc.Node,_itemData:[],_curMax:10,_defaultMax:10,loadNumOfOnce:10,scrollItem:cc.Node,itemSpName:cc.Node},start:function(){this.addEvents()},init:function(){this._itemData=[],this._curMax=this._defaultMax,this.content.y=0},setItem:function(e,t){this.scrollItem=e,this.itemSpName=t},addItems:function(e,t,n){var a;if(Array.isArray(e)){publicWindow.wc.show(""),(a=this._itemData).push.apply(a,i(e));var o=this._itemData.length>this._curMax?this._curMax:this._itemData.length;this._curMax=o;for(var s=this.content.children.length,r=0;r<s;r++)this.content.children[r].active=!1;for(r=0;r<o;r++)if(r<s){var c=this.content.children[r];c.active=!0,c.getComponent(this.itemSpName).initData(this._itemData[r],r)}else{var l=cc.instantiate(this.scrollItem);l.active=!0;var h=l.getComponent(this.itemSpName);this.content.addChild(l),h.initData(this._itemData[r],r)}this.refreshItem(),publicWindow.wc.hide()}},addEvents:function(){this.scrolView.node.on("scroll-to-bottom",this.scrollBottomFunc.bind(this))},scrollBottomFunc:function(e){UIMgr.getPageScript(UIMgr.HallPage)._agentPowersMgr.getComponent("AgentPowersMgr").getAllGroupList(this._curMax,this.loadNumOfOnce)},refreshItem:function(){var e=this.content.children.length;if(e>0){var t=e*(this.content.children[0].height+5);this.content.height=t}}}),cc._RF.pop()},{}],ScrollRepeatView:[function(e,t,n){"use strict";cc._RF.push(t,"cd42eP2b29D8YCuB/b0fHu9","ScrollRepeatView");var i=function(){function e(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{!i&&r.return&&r.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();cc.Class({extends:cc.Component,properties:{scrollView:cc.Node,itemsArr:[cc.Prefab],Vertical:!1,gap_x:0,gap_y:0},onLoad:function(){},init:function(){var e=this;this.scrView=this.scrollView.getComponent(cc.ScrollView),this.content=this.scrView.content,this.height=this.content.height,this.width=this.content.width,this.node_pools=new Map,this.item_templates=new Map,this.itemsArr.forEach(function(t,n){t.data.active=!1,e.item_templates.set(n,t.data)}),this.scrollView.on("scrolling",this.on_scrolling,this)},on_scrolling:function(){if(this.items&&this.items.length)if(this.Vertical){var e=this.content.y;e<0&&(e=0),e>this.content.height-this.height&&(e=this.content.height-this.height);for(var t=0,n=this.items.length-1,i=-e,a=i-this.height;this.items[t].y-this.items[t].height>i;)t++;for(;this.items[n].y<a;)n--;t!=this.start_index&&n!=this.stop_index&&(this.start_index=t,this.stop_index=n,this.render_items())}else{var o=this.content.x;o>0&&(o=0),o<this.width-this.content.width&&(o=this.width-this.content.width);for(var s=0,r=this.items.length-1,c=-o,l=c+this.width;this.items[s].x+this.items[s].width<c;)s++;for(;this.items[r].x>l;)r--;s!=this.start_index&&r!=this.stop_index&&(this.start_index=s,this.stop_index=r,this.render_items())}},spawn_node:function(e){var t=void 0,n=this.node_pools.get(e);return n&&n.length>0?t=n.pop():(t=cc.instantiate(this.item_templates.get(e))).active=!0,t.parent=this.content,t},recycle_item:function(e){if(e.node&&cc.isValid(e.node)){var t=this.node_pools.get(e.data.key);t||(t=[],this.node_pools.set(e.data.key,t)),t.push(e.node),e.node.removeFromParent(),e.node=null}},clear_items:function(){var e=this;this.items&&this.items.forEach(function(t){e.recycle_item(t)})},render_items:function(){for(var e=void 0,t=0;t<this.start_index;t++)(e=this.items[t]).node&&this.recycle_item(e);for(var n=this.items.length-1;n>this.stop_index;n--)(e=this.items[n]).node&&this.recycle_item(e);for(var i=this.start_index;i<=this.stop_index+1;i++){if(!this.items[i])return;(e=this.items[i]).node||(e.node=this.spawn_node(e.data.key),this.item_setter(e.node,e.data)),e.node.setPosition(e.x,e.y)}},pack_item:function(e,t){var n=this.spawn_node(t.key),a=this.item_setter(n,t),o=i(a,2),s={x:0,y:0,width:o[0],height:o[1],data:t,node:n};return this.recycle_item(s),s},item_setter:function(e,t){return e.getComponent(cc.Component).itemDataAssignment(t),[e.width,e.height]},layout_items:function(e){if(!(this.items.length<=0)){var t=0;if(e>0){var n=this.items[e-1];t=this.Vertical?n.y-n.height-this.gap_y:n.x+n.width+this.gap_x}for(var i=e,a=this.items.length;i<a;i++){var o=this.items[i];this.Vertical?(o.x=0,o.y=t,t-=o.height+this.gap_y):(o.y=0,o.x=t,t+=o.width+this.gap_x)}}},resize_content:function(){if(this.items.length<=0)return this.content.width=0,void(this.content.height=0);var e=this.items[this.items.length-1];this.Vertical?this.content.height=Math.max(this.height,e.height-e.y):this.content.width=Math.max(this.width,e.x+e.width)},set_data:function(e){var t=this;this.clear_items(),this.items=[],e.forEach(function(e,n){var i=t.pack_item(n,e);t.items.push(i)}),this.layout_items(0),this.resize_content(),this.start_index=-1,this.stop_index=-1,this.Vertical?this.content.y=0:this.content.x=0,this.items.length>0&&this.on_scrolling()},insert_data:function(e,t){var n,i=this;if(0!=t.length)if(this.items||(this.items=[]),e<0||e>this.items.length)console.log("\u65e0\u6548\u7684index",e);else{this.items.length;var a=[];t.forEach(function(e,t){var n=i.pack_item(t,e);a.push(n)}),(n=this.items).splice.apply(n,[e,0].concat(a)),this.layout_items(e),this.resize_content(),this.start_index=-1,this.stop_index=-1,this.on_scrolling()}},append_data:function(e){this.items||(this.items=[]),this.insert_data(this.items.length,e)},scroll_to_end:function(){this.Vertical?this.scrView.getComponent(cc.ScrollView).scrollToBottom(2):this.scrView.getComponent(cc.ScrollView).scrollToRight(2)},destroy_items:function(){this.clear_items(),this.node_pools.forEach(function(e,t){e.forEach(function(e){e.destroy()})}),this.node_pools=null,this.items=null,cc.isValid(this.scrollview)&&this.scrollview.off("scrolling",this.on_scrolling,this)}}),cc._RF.pop()},{}],SeatOfSelect_DB:[function(e,t,n){"use strict";cc._RF.push(t,"d8c57lc79dOMqUUmwUTh1xe","SeatOfSelect_DB"),cc.Class({extends:cc.Component,properties:{Icon:cc.Node,lblScore:cc.Label,lblName:cc.Label,onlineNode:cc.Node,readyNode:cc.Node,createNode:cc.Node,btnExchange:cc.Node},start:function(){},clearSeat:function(){this.setName(""),this.setScore(""),this.setOnline(!0),this.Icon.active=!1,this.setReady(!1),this.setCreateNode(!1)},initSeatData:function(e,t){this._seatIndex=t,this.Icon.active=!0,console.log(JSON.stringify(e)),this.setName(e.name),this.setScore(e.score),this.setOnline(e.online),this.setIcon(e.headimg,e.userId),this.setReady(e.ready)},setExchangeShow:function(e){this.btnExchange.active=e},setIcon:function(e,t){var n=this.Icon.getComponent("ImageLoader_Gold");n&&n.setIcon(e,t)},setName:function(e){this.lblName.string=e},setScore:function(e){this.lblScore.string=e},setOnline:function(e){this.onlineNode.active=!e},setReady:function(e){this.readyNode.active=e},setCreateNode:function(e){this.createNode.active=e},OnClickExchange:function(){Hall_ReqAndRes.changeSeat(this._seatIndex,function(e){}.bind(this))}}),cc._RF.pop()},{}],SelectSeatsPage_DB:[function(e,t,n){"use strict";cc._RF.push(t,"7aea86jAy9HNbGPmxnS76nY","SelectSeatsPage_DB"),cc.Class({extends:cc.Component,properties:{seats:[cc.Node],_selectIndex:-1,btnSure:cc.Node,btnCancel:cc.Node},start:function(){},OnBtnSure:function(){Hall_ReqAndRes.readyReq(1,function(){this.intSeats()}.bind(this))},OnBtnCancel:function(){Hall_ReqAndRes.readyReq(0,function(){this.intSeats()}.bind(this))},OnSelectSeats:function(e){for(var t=e.target.parent.name,n=0;n<this.seats.length;n++)if(t=="seat"+n){this._selectIndex=n;break}Hall_ReqAndRes.changeSeat(this._selectIndex,function(e){}.bind(this))},intSeats:function(e){for(var t=0;t<GameDataMgr.seats.length;t++){var n=GameDataMgr.seats[t];this.initSeatData(n,t)}},initSeatData:function(e,t){var n=this.seats[t].getComponent("SeatOfSelect_DB");e.userId?(n.initSeatData(e,t),e.userId!=UserMgr.userId?n.setExchangeShow(!0):n.setExchangeShow(!1)):(n.clearSeat(),n.setExchangeShow(!1))},setReadyBtn:function(e){this.btnSure.active=!e,this.btnCancel.active=!1}}),cc._RF.pop()},{}],Setup:[function(e,t,n){"use strict";cc._RF.push(t,"76071MGybpHkpclA5BoKMLC","Setup"),cc.Class({extends:cc.Component,properties:{setupNode:cc.Node,ToggleGroup:cc.Node,btnYXOpen:cc.Node,btnYXClose:cc.Node,btnYYOpen:cc.Node,btnYYClose:cc.Node,lblVersion:cc.Label,_soundType:1},onLoad:function(){this.setVersion()},start:function(){this.initSoundType()},onEnable:function(){this.refreshVolume()},setVersion:function(){var e;this.lblVersion&&(e=cc.sys.os==cc.sys.OS_IOS?dc.VERSION_IOS:dc.VERSION_Android,this.lblVersion.string="\u7248\u672c\uff1a"+e)},onBtnClose:function(){this.setupNode.active=!1},initSoundType:function(){0==GameDataMgr.isPutonghua?this._soundType=0:this._soundType=1,this.setSoundCheckedByType()},setSoundCheckedByType:function(){for(var e=0;e<this.ToggleGroup.childrenCount;e++){var t=this.ToggleGroup.children[e].getComponent(cc.Toggle);this._soundType==e?t.isChecked=!0:t.isChecked=!1}},refreshVolume:function(){var e=(t=this.node.getChildByName("soundEffectNode").getChildByName("progress")).width*audioMgr.sfxVolume;t.getComponent(cc.Slider).progress=audioMgr.sfxVolume,t.getChildByName("progress").width=e;var t;e=(t=this.node.getChildByName("soundVolumeNode").getChildByName("progress")).width*audioMgr.bgmVolume;t.getComponent(cc.Slider).progress=audioMgr.bgmVolume,t.getChildByName("progress").width=e},onBtnSoundSelect:function(e){var t=e.target.getParent();"toggle1"==t.name?(this._soundType=1,cc.sys.localStorage.setItem("isPTH",1)):"toggle2"==t.name&&(this._soundType=0,cc.sys.localStorage.setItem("isPTH",0)),GameDataMgr.isPutonghua=0==this._soundType},onSlided:function(e){"soundEffectNode"==e.node.parent.name?audioMgr.setSFXVolume(e.progress):"soundVolumeNode"==e.node.parent.name&&audioMgr.setBGMVolume(e.progress),this.refreshVolume()},onBtnClicked:function(e){"btn_close"==e.target.name?this.node.active=!1:"btn_BackToLogin"==e.target.name?(console.log("exit qian"),console.log("exit zhong"),UserMgr.loginOut()):"btn_yx_open"==e.target.name?(audioMgr.setSFXVolume(1),this.refreshVolume()):"btn_yx_close"==e.target.name?(audioMgr.setSFXVolume(0),this.refreshVolume()):"btn_volume_open"==e.target.name?(audioMgr.setBGMVolume(1),this.refreshVolume()):"btn_volume_close"==e.target.name&&(audioMgr.setBGMVolume(0),this.refreshVolume())}}),cc._RF.pop()},{}],ShareHall:[function(e,t,n){"use strict";cc._RF.push(t,"bc59eXaqR9I142cf8QFiYa8","ShareHall");var i=e("WechatHelper");cc.Class({extends:cc.Component,properties:{shareNode:cc.Node},onLoad:function(){},onBtnClose:function(){this.shareNode.active=!1},onBtnfriendCircle:function(){i.shareToTimeline()},onBtnWeichat:function(){i.shareToMate()}}),cc._RF.pop()},{WechatHelper:"WechatHelper"}],ShopView:[function(e,t,n){"use strict";cc._RF.push(t,"285a9nWVxVFd6PzHH6gLF9b","ShopView"),cc.Class({extends:cc.Component,properties:{FKNode:cc.Node,_costType:1,gems:cc.Label,_waitingPre:null},onLoad:function(){this.initFKNode(),this.FitBg(),this.initWidthOfCard()},initWidthOfCard:function(){for(var e=this.FKNode.children,t=0;t<e.length;t++){e[t].x=464*t-450}},FitBg:function(){var e,t=cc.view.getFrameSize(),n=cc.find("Canvas").getComponent(cc.Canvas).designResolution,i=t.height/t.width,a=n.height/n.width;i=parseFloat(i.toFixed(2)),a=parseFloat(a.toFixed(2)),e=n.width/t.width*t.height/n.height,this.node.getChildByName("bg_shop").setScale(e)},hideFKNode:function(){var e=this.FKNode.getChildByName("goodsVNode"),t=dc.Iphone_Check_flag;e.active=!t},setcostType:function(e){this._costType=e},getcostType:function(){return this._costType},initFKNode:function(){this.initShopData()},initShopData:function(e){for(var t=this.node.getChildByName("FKNode"),n=["p_card_01","p_card_02","p_card_03"],i=0;i<n.length;i++){t.children[i].getChildByName("btnFK_5").id=n[i]}},onBtnBuy:function(e){var t=e.target.id;if(console.log("price:"+e.target.id),dc.Iphone_Check_flag){console.log("shopstart");var n=""+UserMgr.userId;publicWindow.wc.show("",""),dc.utils.iapPay(t,n,"1")}else publicWindow.alert.show("",'\u8bf7\u60a8\u8fdb\u5165"\u9e3f\u65f6\u5a31\u4e50"\n\u516c\u4f17\u53f7\u5145\u503c')},onBtnClose:function(e){GroupDataMgr.refreshInfo(UserMgr.userId),this.node.active=!1}}),cc._RF.pop()},{}],TDHDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"7f9d0EClgJFppClgrIyGOiL","TDHDataMgr"),cc.Class({extends:e("MJDataMgr"),properties:{basemjTable:null,mjTable:null},start:function(){},init:function(){console.log("TDH init");this._super();this.basemjTable=new Map,this.basemjTable[1e3]={Name:"\u81ea\u6478",Mult:2},this.basemjTable[2e3]={Name:"\u70b9\u70ae",Mult:1},this.basemjTable[3e3]={Name:"\u62a2\u6760",Mult:2},this.basemjTable[4e3]={Name:"\u6760\u5f00",Mult:4},this.mjTable=new Map,this.mjTable[10]={Name:"\u4e03\u5bf9\u5b50",Mult:2},this.mjTable[20]={Name:"\u6e05\u4e00\u8272",Mult:2},this.mjTable[21]={Name:"\u6e05\u4e00\u8272 \u4e03\u5bf9\u5b50",Mult:4},this.mjTable[22]={Name:"\u6e05\u4e00\u8272 \u5bf9\u5bf9\u80e1",Mult:4},this.mjTable[23]={Name:"\u6e05\u4e00\u8272 \u5927\u540a\u8f66",Mult:4},this.mjTable[30]={Name:"\u5bf9\u5bf9\u80e1",Mult:2},this.mjTable[40]={Name:"\u5927\u540a\u8f66",Mult:2}},getHuScore:function(e){var t=1e3*parseInt(e/1e3),n=this.basemjTable[t].Mult,i=e%100;return n*=this.mjTable[i]?this.mjTable[i].Mult:1},onGameBegin:function(e){this.reset(),e.button=e.button||0,GameDataMgr.gameIndex=e.numOfGames,GameDataMgr.button=e.button,GameDataMgr.turn=GameDataMgr.button,GameDataMgr.dice=e.dice,GameDataMgr.newSeats=e.newSeats,GameDataMgr.magicCard=e.magicCard,this.raise=0;var t=GameDataMgr.conf.wanfa%100%10,n=GameDataMgr.MJDataMgr.HOLDS_NUM-1,i=GameDataMgr.gamePlayerNum;1==t?GameDataMgr.numofmj=136-n*i-1-28:2==t&&(GameDataMgr.numofmj=136-n*i-1)},gangOper:function(e){GameDataMgr.lastDiscardSeat=GameDataMgr.turn,this.KongHandle(e)},sortMJArr:function(e,t){var n;e?(t||this.isTurner(e)&&(n=e.pop()),e.sort(function(e,t){return e-t}),null!=n&&e.push(n)):console.log("sortMJArr:mjarr is null")},getHuIndex:function(e){for(var t=e.results,n=[],i=0;i<t.length;i++)t[i].hued&&n.push(i);return n},getPlayerGangNum:function(e,t,n){for(var i=GameDataMgr.MJDataMgr.MJSeats[t].penggangs,a=0,o=0;o<i.length;o++)"angang"!=i[o].type&&"wangang"!=i[o].type&&"diangang"!=i[o].type||a++;return a},getGangMult:function(e,t,n){var i=this.getHuCode(n);if(i<0)return 0;var a=parseInt(i/1e3),o=(this.getZhong(n,e.ma,t),n.results),s=e.hued,r=this.getHuIndex(n),c=0,l=0,h=0;if(1==a||4==a)if(l=0==(c=this.getPlayerGangNum(e,r[0],n))?0:Math.pow(2,c),s){for(var d=0,u=0;u<o.length;u++){var g=o[u];if(!g.hued)this.getZhong(n,g.ma,u)||d++}h=l*d}else h=0;else h=s?l=0==(c=this.getPlayerGangNum(e,t,n))?0:Math.pow(2,c):(e.point,0);return h},getFGArr:function(e){for(var t=GameDataMgr.MJDataMgr.MJSeats[e].penggangs,n=[],i=0;i<t.length;i++)"diangang"==t[i].type&&n.push(t[i].direct);return n},getFGDirectByIndex:function(e,t){for(var n=this.getFGArr(e),i=[],a=GameDataMgr.getLocalSide(t),o=0;o<n.length;o++)n[o]==a&&i.push(n[o]);return i},getZhong:function(e,t,n){if(t>26)return!1;if(n<0)return!1;var i=(n+t%9%GameDataMgr.gamePlayerNum)%GameDataMgr.gamePlayerNum,a=e.results;return a[n].hued?n==i:!!a[i].hued},getMaimaIndex:function(e,t,n){return t>26?-1:(n+t%9%GameDataMgr.gamePlayerNum)%GameDataMgr.gamePlayerNum},getHuCode:function(e){for(var t=e.results,n=0;n<t.length;n++)if(t[n].hued)return t[n].code;return-2},getFPInfo:function(e){for(var t=e.results,n=0;n<t.length;n++)if(t[n].point)return t[n].code},getHuScore1:function(e,t,n){var i=this.getHuCode(n),a=parseInt(i/1e3),o=GameDataMgr.gamePlayerNum,s=n.results,r=this.getHuIndex(n),c=e.hued,l=0,h=1;if(1==a||4==a)h=this.getHuScore(i),l=c?h*(o-1):h=-h;else if(c)l=h=this.getHuScore(e.code);else{if(!e.point)return 0;for(var d=0,u=0;u<r.length;u++){var g=s[r[u]].code;d+=h=this.getHuScore(g)}l=d=-d}return 1*l},getRealBase:function(e,t,n){var i=0;return i+=t?n?e:2*e:n?0:e},getPoint:function(e){for(var t=e.results,n=0;n<t.length;n++){if(t[n].point)return n}return-1},getHuScore2:function(e,t,n){var i=this.getHuCode(n),a=n.results,o=this.getZhong(n,e.ma,t),s=(this.getMaimaIndex(n,e.ma,t),this.getHuIndex(n)),r=parseInt(i/1e3),c=e.hued,l=0,h=1;if(1==r||4==r)if(h=this.getHuScore(i),c)for(var d=0,u=0;u<a.length;u++){if(!(v=a[u]).hued){var g=this.getMaimaIndex(n,v.ma,u)==t;l+=this.getRealBase(h,o,g)}}else{var m=s[0],p=this.getZhong(n,a[m].ma,m);g=this.getMaimaIndex(n,e.ma,t)==m;l=-this.getRealBase(h,p,g)}else if(c){h=this.getHuScore(e.code);for(d=0,u=0;u<a.length;u++){if((v=a[u]).point){var f=this.getMaimaIndex(n,a[u].ma,u)==t;d=this.getRealBase(h,o,f)}}l=d}else{d=0;if(e.point){for(d=0,y=this.getPoint(n),u=0;u<a.length;u++){var v;if((v=a[u]).hued){var _=a[u].code;h=this.getHuScore(_);g=this.getZhong(n,a[u].ma,u);if(y>=0){I=this.getMaimaIndex(n,a[y].ma,y)==u;d+=this.getRealBase(h,g,I)}else d+=0}else if(u!=t){if((C=(M=this.getMaimaIndex(n,a[u].ma,u))>=0?a[M]:null)&&C.hued){p=this.getZhong(n,a[M].ma,M),I=this.getMaimaIndex(n,a[y].ma,y)==M;h=this.getHuScore(a[M].code),d+=p?I?h:2*h:h}else d+=0}}d=-d}else{var M,C;if((y=this.getPoint(n))>=0)if((C=(M=this.getMaimaIndex(n,a[t].ma,t))>=0?a[M]:null)&&C.hued){var y,N=this.getZhong(n,a[M].ma,M),I=(y=this.getMaimaIndex(n,a[y].ma,y))==M;h=this.getHuScore(C.code),d+=N?I?h:2*h:h}else d=0;else d=0}l=d}return 1*l},getScores:function(e){this.getPoint(e);for(var t=e.results,n=0;n<t.length;n++)t[n]}}),cc._RF.pop()},{MJDataMgr:"MJDataMgr"}],TDH_Controller:[function(e,t,n){"use strict";cc._RF.push(t,"9f3e15roilNaLxMs1wM9MxM","TDH_Controller"),cc.Class({extends:cc.Component,properties:{gameRoot:cc.Node,_MJManager:null,_outCardNode:null,_OptionNode:null,_seatsMgr:null,_desktopLayer:null,_Prepare:null,_gameSetUp:null,_voiceMgr:null,_menuNode:null,_distanceNode:null,_raiseLayer:null,_chatNode:null,_effectNode:null,_emojiNode:null,_aniLayer:null,_countDown:null,_ninthTipsLayer:null,_maimaNode:null,_gameOverNode:null,_gameEndNode:null},start:function(){},onEnable:function(){this.initPrefab()},onDisable:function(){},initPrefab:function(){if(console.log("hzmj control"),!this._desktopLayer){var e=cc.loader.getRes("Catalogue/Prefab/TDHGame/desktopLayer_TDH",cc.Prefab);this._desktopLayer=cc.instantiate(e),this.gameRoot.addChild(this._desktopLayer)}if(!this._directNode){var t=cc.loader.getRes("Catalogue/Prefab/HZMJGame/direction_2MJ",cc.Prefab);this._directNode=cc.instantiate(t),this.gameRoot.addChild(this._directNode)}if(!this._ninthTipsLayer){var n=cc.loader.getRes("Catalogue/Prefab/HZMJGame/ninthTips",cc.Prefab);this._ninthTipsLayer=cc.instantiate(n),this.gameRoot.addChild(this._ninthTipsLayer)}if(!this._MJManager){var i=cc.loader.getRes("Catalogue/Prefab/HZMJGame/MJ4pManager",cc.Prefab);this._MJManager=cc.instantiate(i),this.gameRoot.addChild(this._MJManager)}if(!this._outCardNode){var a=cc.loader.getRes("Catalogue/Prefab/HZMJGame/showOutCardNode",cc.Prefab);this._outCardNode=cc.instantiate(a),this.gameRoot.addChild(this._outCardNode)}if(!this._countDown){var o=cc.loader.getRes("Catalogue/Prefab/HZMJGame/countDownNode_2MJ",cc.Prefab);this._countDown=cc.instantiate(o),this.gameRoot.addChild(this._countDown)}if(!this._OptionNode){var s=cc.loader.getRes("Catalogue/Prefab/HZMJGame/OptionNode_2MJ",cc.Prefab);this._OptionNode=cc.instantiate(s),this.gameRoot.addChild(this._OptionNode)}if(!this._seatsMgr){var r=cc.loader.getRes("Catalogue/Prefab/HZMJGame/seatsNode_2MJ",cc.Prefab);this._seatsMgr=cc.instantiate(r),this.gameRoot.addChild(this._seatsMgr)}if(GameDataMgr.isReplay&&!this._ReplayNode){var c=cc.loader.getRes("Catalogue/Prefab/HZMJGame/ReplayNode_2MJ",cc.Prefab);this._ReplayNode=cc.instantiate(c),this.gameRoot.addChild(this._ReplayNode)}if(!this._Prepare){var l=cc.loader.getRes("Catalogue/Prefab/HZMJGame/prepare_MJ2",cc.Prefab);this._Prepare=cc.instantiate(l),this.gameRoot.addChild(this._Prepare)}if(!this._voiceMgr){var h=cc.loader.getRes("Catalogue/Prefab/publicFrame/voiceMgr_public",cc.Prefab);this._voiceMgr=cc.instantiate(h),this.gameRoot.addChild(this._voiceMgr)}if(!this._menuNode){var d=cc.loader.getRes("Catalogue/Prefab/HZMJGame/MenuNode",cc.Prefab);this._menuNode=cc.instantiate(d),this.gameRoot.addChild(this._menuNode),this._menuNode.getComponent("MenuMgr_2MJ").setRuleNode()}if(!this._distanceNode){var u=cc.loader.getRes("Catalogue/Prefab/publicFrame/DistanceNode",cc.Prefab);this._distanceNode=cc.instantiate(u),this.gameRoot.addChild(this._distanceNode)}if(!this._raiseLayer){var g=cc.loader.getRes("Catalogue/Prefab/HZMJGame/raiseNode",cc.Prefab);this._raiseLayer=cc.instantiate(g),this.gameRoot.addChild(this._raiseLayer)}if(!this._chatNode){var m=cc.loader.getRes("Catalogue/Prefab/HZMJGame/chatNode_2MJ",cc.Prefab);this._chatNode=cc.instantiate(m),this.gameRoot.addChild(this._chatNode)}if(!this._aniLayer){var p=cc.loader.getRes("Catalogue/Prefab/TDHGame/AniLayer_TDH",cc.Prefab);this._aniLayer=cc.instantiate(p),this.gameRoot.addChild(this._aniLayer)}if(!this._effectNode){var f=cc.loader.getRes("Catalogue/Prefab/publicFrame/effectNode_common_G",cc.Prefab);this._effectNode=cc.instantiate(f),this.gameRoot.addChild(this._effectNode)}if(!this._emojiNode){var v=cc.loader.getRes("Catalogue/Prefab/publicFrame/emojiAniNode_public",cc.Prefab);this._emojiNode=cc.instantiate(v),this.gameRoot.addChild(this._emojiNode)}if(!this._gameSetUp){var _=cc.loader.getRes("Catalogue/Prefab/TDHGame/setupNode_TDH",cc.Prefab);this._gameSetUp=cc.instantiate(_),this.gameRoot.addChild(this._gameSetUp)}if(!this._gameOverNode){var M=cc.loader.getRes("Catalogue/Prefab/TDHGame/gameOver_TDH",cc.Prefab);this._gameOverNode=cc.instantiate(M),this.gameRoot.addChild(this._gameOverNode)}if(!this._maimaNode){var C=cc.loader.getRes("Catalogue/Prefab/TDHGame/maimaNode",cc.Prefab);this._maimaNode=cc.instantiate(C),this.gameRoot.addChild(this._maimaNode)}if(!this._gameEndNode){var y=cc.loader.getRes("Catalogue/Prefab/TDHGame/gameEnd_TDH",cc.Prefab);this._gameEndNode=cc.instantiate(y),this.gameRoot.addChild(this._gameEndNode)}if(!this._alert){var N=cc.loader.getRes("Catalogue/Prefab/publicFrame/alert",cc.Prefab);this._alert=cc.instantiate(N),this.node.addChild(this._alert)}publicWindow.alert=this._alert.getComponent("alert"),this.initView(),this.initMusic()},initView:function(){this.initSeats(!0),this._MJManager.getComponent("MJManagerView").addShowPaiLayer(this._outCardNode);var e=this._menuNode.getComponent("MenuMgr_2MJ");e.setGameSetUp(this._gameSetUp),this.getSeatsMgrSp().getComponent("seatsMgr_2MJ").setControlSp(this.getControlSp()),this.getChatSp().setControlSp(this.getControlSp()),this._emojiNode.getComponent("ChatAniSelect_public").setControlSp(this.getControlSp()),this._gameOverNode.getComponent("GameOver_TDH").setControlSp(this.getControlSp());var t=this._voiceMgr.getComponent("Voice_public");if(t.initVoiceEvent(),t.setControlSp(this.getControlSp()),this.setMJNumsShow(!0),this.setMaimaNodeShow(!1),this.setOprationShow(!1),this.setEmojiNodeShow(!1),this.jurgeLayerHide(),this.setGameOverShow(!1),this.setShowGameEnd(!1),this.setRaiseLayerShow(!1),this.setDistanceShow(!1),this.setNinthTipsShow(!1),this.setCenterTipsShow(!1),this._directNode.getComponent("DirectionMgr_2Mj").init(),GameDataMgr.isReplay){e.setBtnSetupShow(!1),this.setReplayNodeShow(!0);var n=this._ReplayNode.getComponent("ReplayMgr_2MJ");n.setControlSp(this.getControlSp()),n.initGame(),t.setBtnVoice(!1),this.initLable()}else e.setBtnSetupShow(!0),this.setReplayNodeShow(!1),t.setBtnVoice(!0)},initMusic:function(){var e=Math.floor(2*Math.random());console.log("\u968f\u673a\u6570\uff1a"+e);var t="HZ_Game/Game_"+e+".mp3";audioMgr.playBGM(t)},getControlSp:function(){return this.node.getComponent("TDH_Controller")},getGameSetupSp:function(){return this._gameSetUp.getComponent("Gamesetup_TDH")},getSeatsMgrSp:function(){return this._seatsMgr.getComponent("seatsMgr_2MJ")},getMenuNodeSp:function(){this.getControlSp();return this._menuNode.getComponent("MenuMgr_2MJ")},getChatSp:function(){this.getControlSp();return this._chatNode.getComponent("Chat_2MJ")},getEffectPubSp:function(){this.getControlSp();return this._effectNode.getComponent("EffectMgrView_common_Gold")},getEmojiSp:function(){return this._emojiNode.getComponent("ChatAniSelect_public")},enableViews:function(){var e=this.getMenuNodeSp();dc.Iphone_Check_flag?e.setDistanceShow(!1):GameDataMgr.isReplay?e.setDistanceShow(!1):2==GameDataMgr.conf.peoplemax?e.setDistanceShow(!1):e.setDistanceShow(!0)},setCenterTipsShow:function(e){this._desktopLayer.getComponent("desktopLG_TDH").setCenterTipsShow(e)},initFoldsPos:function(){this._MJManager.getComponent("MJManagerView").initFoldsPos()},initSeats:function(e){console.log("HZGame initseats"),this._seatsMgr.getComponent("seatsMgr_2MJ").initSeats(e)},initLable:function(){var e=this._desktopLayer.getComponent("desktopLG_TDH");e.updateRoomID(GameDataMgr.roomID),e.updateGameNum(GameDataMgr.gameIndex),e.updateGameMaxNum(GameDataMgr.maxNumOfGames),e.initGameNums()},updateGameNum:function(){this._desktopLayer.getComponent("desktopLG_TDH").updateGameNum(GameDataMgr.gameIndex)},intiDirection:function(e){var t=this._directNode.getComponent("DirectionMgr_2Mj");t.intiDirection(),t.initButtonBgByseatIndex(e)},changeDirect:function(e){this._directNode.getComponent("DirectionMgr_2Mj").initButtonBgByseatIndex(e)},jurgeLayerHide:function(){if(GameDataMgr.isReplay||0!=GameDataMgr.gameIndex)this.setPrepareShow(!1);else{var e=GameDataMgr.seats,t=0;for(var n in e){var i=e[n];i.userId&&i.online&&t++}if(t==GameDataMgr.gamePlayerNum)this.setPrepareShow(!1);else this.setPrepareShow(!0),this._Prepare.getComponent("Prepare_2MJ").initDissolveBtn()}},updateCardsNum:function(e){this._desktopLayer.getComponent("desktopLG_TDH").updateGameCardsNum(e)},initReady:function(e){if(0==GameDataMgr.GameState){var t=GameDataMgr.seats[e],n=t.online&&t.ready,i=this._seatsMgr.getComponent("seatsMgr_2MJ"),a=GameDataMgr.getLocalSide(e);i.initReady(a,n)}else 1==GameDataMgr.GameState&&this.hideSeatsReady()},hideSeatsReady:function(){this._seatsMgr.getComponent("seatsMgr_2MJ").hideReady()},hideAllBankers:function(){this._seatsMgr.getComponent("seatsMgr_2MJ").hideAllBankers()},clearAllMJNode:function(){this._MJManager.getComponent("MJManagerView").clearAllMJNode()},initAllMJs:function(){this._MJManager.getComponent("MJManagerView").initAllMJs()},readyHandle:function(e){this.initSeats();var t=GameDataMgr.getSeatIndexByID(e.userId);this.initReady(t)},Dissolvenotice:function(e){this._gameSetUp.getComponent("Gamesetup_TDH").updateDissolvenotice(e)},onGameBegin:function(e){this.clearAllMJNode(),GameDataMgr.GameState=1,this.initSeats(),GameDataMgr.gameIndex<=1&&this.hideAllBankers(),this.setGameOverShow(!1),this.setShowGameEnd(!1),this.hideSeatsReady(),this.setDirectionShow(!0),this.showAndCountTime(),this.setPrepareShow(!1),this.updateGameNum(),this.setMJNodeShow(!1),this.setCenterTipsShow(!0),this.initLable(),this.updateCardsNum(GameDataMgr.numofmj),this.checkIpEnd(e)},checkIpEnd:function(e){var t=this._aniLayer.getComponent("AniLayer_TDH");t.showDice();GameDataMgr.seats;var n=0,i=0,a=[];console.log("afterCheckout"),n=0==e.gameIndex?GameDataMgr.button:GameDataMgr.seatIndex;for(var o=0;o<e.dice.length;o+=2){n%=4;var s=GameDataMgr.getLocalSide(n),r=[e.dice[o],e.dice[o+1]];a.push(r),this.perDicePlay(r,i,s),i+=2,n++}var c=i+.5,l=cc.callFunc(function(){console.log("afterDice"),console.log("afterDice1"),t.hideDice();GameDataMgr.gamePlayerNum>2&&GameDataMgr.newSeats&&this.moveSeatsPos(1);var n=cc.callFunc(function(){console.log("afterNewSeat"),GameDataMgr.MJDataMgr.changeSeats(e),console.log("afterNewSeat1"),this.initSeats(),this.intiDirection(GameDataMgr.turn),console.log("afterNewSeat2"),this.initHoldsBegin(e),i&&this.setOprationShow(!0);var t=GameDataMgr.conf;if(0==t.gamenums)if(4==t.peoplemax){this.setMJNodeShow(!0),this.setRaiseLayerShow(!1);var n=GameDataMgr.MJDataMgr.actionData;(i=GameDataMgr.MJDataMgr.getEnableOper(n))?this.setOprationShow(!0):this.setOprationShow(!1)}else 0==GameDataMgr.MJDataMgr.raise?(this.setOprationShow(!1),this.setRaiseLayerShow(!0),GameDataMgr.seatIndex==GameDataMgr.button?this.setRaiseOperShow(!0):this.setRaiseOperShow(!1),this.setMJNodeShow(!1),this.setRaiseTips(!1)):(this.setRaiseLayerShow(!0),this.setMJNodeShow(!0),this.setRaiseTips(!0),this.setRaiseOperShow(!1));else{this.setMJNodeShow(!0),this.setRaiseLayerShow(!1);var i;n=GameDataMgr.MJDataMgr.actionData;if((i=GameDataMgr.MJDataMgr.getEnableOper(n))?this.setOprationShow(!0):this.setOprationShow(!1),2==t.peoplemax&&9==GameDataMgr.gameIndex)this.setNinthTipsShow(!0),this._ninthTipsLayer.getComponent("DeciderTips_2MJ").setTipsAction();else this.setNinthTipsShow(!1)}this.setDirectionShow(!0),this.setMJNumsShow(!0),this.showAndCountTime(),GameDataMgr.beginAniState=!1},this,null),i=cc.sequence(cc.delayTime(1),n);this.node.runAction(i)},this,null),h=cc.sequence(cc.delayTime(c),l);this.node.runAction(h)},beginActions:function(e){},moveSeatsPos:function(e){this.getSeatsMgrSp().moveSeatsPos(e)},clearScene:function(){this.stopAllAnis(),this.clearAllMJNode(),this.endClear(),this._voiceMgr.getComponent("Voice_public").cancelClick(),this.getSeatsMgrSp().init()},stopAllAnis:function(){this.node.stopAllActions(),this._aniLayer.getComponent("AniLayer_TDH").hideDice(),this.getSeatsMgrSp().stopChangeSeatAni()},perDicePlay:function(e,t,n){var i={dice:e,defaultTime:t,local:n},a=cc.sequence(cc.delayTime(i.defaultTime),cc.callFunc(function(){console.log("perDicePlay"),this.playDice(i.dice),console.log("perDicePlay0"),this.playHandleEffect(i.local),console.log("perDicePlay1"),this.playFallPoint(i.local),console.log("perDicePlay2")},this,i));this.node.runAction(a)},playDice:function(e){return this._aniLayer.getComponent("AniLayer_TDH").playDice(e)},playHandleEffect:function(e){this._aniLayer.getComponent("AniLayer_TDH").playHandThrow(e)},playFallPoint:function(e){this._aniLayer.getComponent("AniLayer_TDH").playFallPoint(e)},onGameSync:function(e){GameDataMgr.GameState=1,console.log("sync"),this.clearAllMJNode(),this.stopAllAnis(),this.setCenterTipsShow(!0),this.setMJNodeShow(!0),this.initSeats(),this.hideSeatsReady(),this.intiDirection(GameDataMgr.turn),this.setDirectionShow(!0),this.setMJNumsShow(!0),this.updateCardsNum(GameDataMgr.numofmj),this.updateGameNum();for(var t=GameDataMgr.seats,n=0;n<GameDataMgr.gamePlayerNum;n++){var i=t[n],a=i.userId,o=GameDataMgr.getSeatIndexByID(a);this.createRestartMJ(i,o)}var s=GameDataMgr.lastDiscardSeat;this.updateFoldsPoint(s);var r=GameDataMgr.conf;4==r.peoplemax?(this.setMJNodeShow(!0),this.setRaiseLayerShow(!1)):0==r.gamenums?(this.setRaiseLayerShow(!0),0==e.raise?(this.setMJNodeShow(!1),GameDataMgr.seatIndex==GameDataMgr.button?this.setRaiseOperShow(!0):this.setRaiseOperShow(!1),this.setRaiseTips(!1)):(this.setMJNodeShow(!0),this.setRaiseOperShow(!1),this.setRaiseTips(!0),1==e.raise?this.setRaiseState(!1):2==e.raise&&this.setRaiseState(!0))):(this.setMJNodeShow(!0),this.setRaiseLayerShow(!1),9==GameDataMgr.gameIndex?this.setNinthTipsShow(!0):this.setNinthTipsShow(!1)),GameDataMgr.MJDataMgr.actionData&&this.gameActionShow(GameDataMgr.MJDataMgr.actionData)},updateFoldsPoint:function(e){this._MJManager.getComponent("MJManagerView").actionAddFolds(e)},createRestartMJ:function(e,t){this._MJManager.getComponent("MJManagerView").createRestartMJ(e,t)},gameOverHandle:function(e){GameDataMgr.isEnableBegin=!0,GameDataMgr.GameState=0;var t=e.results;if(e.results){for(var n=0;n<t.length;n++)t[n].totalscore=t[n].totalscore||0,t[n].score=t[n].score||0,t[n].code=t[n].code||0,t[n].win&&(t[n].lastCard=t[n].lastCard||0);var i=GameDataMgr.seats;for(n=0;n<i.length;n++){i[n].score=e.results[n].totalscore}for(n=0;n<t.length;n++){var a=t[n];if(a.hued){var o=a.code;2!=(o=parseInt(o/1e3))&&3!=o||t[n].holds.push(a.hupai)}}}e.isEnd&&(console.log("game_end"),GameDataMgr.isOver=!0,this.gameEndHandle(e)),this.gameOverResult(e)},gameEndHandle:function(e){if(e.results){console.log("have gameEnd Result");var t=this._gameEndNode.getComponent("GameEnd_TDH");t.onGameEnd(e),t.showTime()}else{console.log("no gameEnd Result");var n=cc.sequence(cc.delayTime(2),cc.callFunc(function(){UserMgr.clearRoomId(),GameDataMgr.GameEndReset(),UIMgr.pushUI(UIMgr.HallPage)}));this.node.runAction(n)}},endClear:function(){this.clearAllMJNode(),this.getChatSp().clearRecordItems()},gameOverResult:function(e){this.setOprationShow(!1),this.setRaiseLayerShow(!1),this.hideAllPoints();var t=this._maimaNode.getComponent("Maima_TDH"),n=this.countDraw(e),i=GameDataMgr.conf.wanfa%100%10;if(2==n){this.showDraw();var a=cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.hideHuAni(),2==i?(this.setMaimaNodeShow(!0),t.onOverPlay(e,function(){this.gameOverStart(e)}.bind(this))):this.gameOverStart(e)},this,e));this.node.runAction(a)}else{var o=1;1==n?o=2.5:3==n&&(o=1),this.overHu(n,e);a=cc.sequence(cc.delayTime(o),cc.callFunc(function(){this.hideHuAni(),2==i?(this.setMaimaNodeShow(!0),t.onOverPlay(e,function(){this.gameOverStart(e)}.bind(this))):this.gameOverStart(e)},this,e));this.node.runAction(a)}},countDraw:function(e){for(var t=e.results,n=0;n<t.length;n++){if(t[n].hued)return!1,1}return e.isEnd?(!1,3):2},showDraw:function(){this._aniLayer.getComponent("AniLayer_TDH").playDraw(2)},hideHuAni:function(){var e=this._aniLayer.getComponent("AniLayer_TDH");e.hideFPNode(),e.setHuShadowShow(!1)},overHu:function(e,t){var n=this._aniLayer.getComponent("AniLayer_TDH");if(1==e){n.setHuShadowShow(!0);var i=GameDataMgr.MJDataMgr.getHuCode(t),a=parseInt(i/1e3);if(1==a||4==a)this.playHus(t);else{var o=GameDataMgr.MJDataMgr.getPoint(t),s=GameDataMgr.getLocalSide(o);n.playFP(s,"Fangpao_TDH",!1,function(){this.playHus(t,s)}.bind(this))}}else 3==e&&n.setHuShadowShow(!1)},playHus:function(e,t){for(var n=e.results,i=this._gameOverNode.getComponent("GameOver_TDH"),a=0;a<n.length;a++)(function(e){var t=n[e];t.hued&&this.playHuNew(e,t.hupai,function(){}),i.initSoundSingle(t,e)}).bind(this)(a)},playHuNew:function(e,t,n){this._aniLayer.getComponent("AniLayer_TDH").playHu(e,t,n)},gameOverStart:function(e){this.setMaimaNodeShow(!1),this.setGameOverShow(!0),this.initSeats(),this._seatsMgr.getComponent("seatsMgr_2MJ").initSingleOnline(!0),this._gameOverNode.getComponent("GameOver_TDH").onGameOver(e),this.setCountDownShow(!1),this.seGameSetUpShow(!1),this.setNinthTipsShow(!1),this.setEmojiNodeShow(!1),this.GameOver(e),this.clearFolds(),this.clearReady(),this.setMJNodeShow(!0)},GameOver:function(e){this._MJManager.getComponent("MJManagerView").GameOver(e)},huHandle:function(e){this._MJManager.getComponent("MJManagerView").huHandle(e),this._gameOverNode.getComponent("GameOver_TDH").onGameHu(e)},clearReady:function(){for(var e=GameDataMgr.seats,t=0;t<e.length;t++){e[t].ready=!1}},clearFolds:function(){this._MJManager.getComponent("MJManagerView").clearFolds()},initHoldsBegin:function(e,t){this._MJManager.getComponent("MJManagerView").initHoldsBegin(e,t)},showOutCardHandle:function(e,t){this._MJManager.getComponent("MJManagerView").showOutCardHandle(e,t),this.setOprationShow(!1);var n=GameDataMgr.getSeatIndexByID(e.userId),i=GameDataMgr.seats[n],a=33!=e.pai?e.pai:"baiban";GameDataMgr.playPaiSound(a,i.sex,GameDataMgr.isPutonghua),this.updateCardsNum(GameDataMgr.numofmj)},addMopaiHandle:function(e,t){this._MJManager.getComponent("MJManagerView").addMopaiHandle(e,t);var n=GameDataMgr.getSeatIndexByID(e.userId);this.changeDirect(n),this.updateCardsNum(GameDataMgr.numofmj),t||this.showAndCountTime()},gameActionShow:function(e){(this._OptionNode.getComponent("OptionMgr_2MJ").showOperSelectInterface(e),this._MJManager.active)?GameDataMgr.MJDataMgr.getEnableOper(e)?this.setOprationShow(!0):this.setOprationShow(!1):this.setOprationShow(!1);this.setEnable(e)},setEnable:function(e){this._MJManager.getComponent("MJManagerView").setEnable(e)},KongHandle:function(e,t){this._MJManager.getComponent("MJManagerView").KongHandle(e,t),this.setOprationShow(!1),this.updateCardsNum(GameDataMgr.numofmj);var n,i=GameDataMgr.getSeatIndexByID(e.userId),a=GameDataMgr.MJDataMgr.getLocalSide(i);n="angang"==e.gangtype?"angang":"gang";var o=GameDataMgr.seats[i];GameDataMgr.playMJActionSound(n,o.sex,GameDataMgr.isPutonghua),this.playEffect(a,"gang"),this.changeDirect(i),t||this.showAndCountTime()},PongHandle:function(e,t){this._MJManager.getComponent("MJManagerView").PongHandle(e,t),this.setOprationShow(!1);var n=GameDataMgr.getSeatIndexByID(e.userId),i=GameDataMgr.getLocalSide(n),a=GameDataMgr.seats[n];GameDataMgr.playMJActionSound("peng",a.sex,GameDataMgr.isPutonghua),this.playEffect(i,"peng"),this.changeDirect(n),t||this.showAndCountTime()},EatCardsHandle:function(e,t){this._MJManager.getComponent("MJManagerView").EatCardsHandle(e,t),this.setOprationShow(!1);var n=GameDataMgr.getSeatIndexByID(e.userId),i=(n=GameDataMgr.getSeatIndexByID(e.userId),GameDataMgr.getLocalSide(n)),a=GameDataMgr.seats[n];GameDataMgr.playMJActionSound("chi",a.sex,GameDataMgr.isPutonghua),this.playEffect(i,"chi"),this.changeDirect(n),t||this.showAndCountTime()},sendContentHandle:function(e){var t=e.type;0==t?this.sendExpressionHandle(e):1==t?this.sendQuickchatHandle(e):2==t?this.sendChatHandle(e):3==t?this.sendEmojAHandle(e):4==t&&this.VoiceSend(e)},sendEmojAHandle:function(e){this.getEffectPubSp().sendEmojA(e)},sendExpressionHandle:function(e){this.getEffectPubSp().sendExpression(e)},sendQuickchatHandle:function(e){this.getSeatsMgrSp().sendQuickchatHandle(e)},sendChatHandle:function(e){this._chatNode;var t=this.getChatSp();(t.recardItem(e,0),e.type=0,GameDataMgr.chatInfoList.push(e),GameDataMgr.chatInfoList.length>50&&GameDataMgr.chatInfoList.shift(),t.sendChatBack(e),GameDataMgr.getIsObserver())?this.getMenuNodeSp().updateTipsPoint(e):this.getSeatsMgrSp().updateTipsPoint(e);-1!=GameDataMgr.getSeatIndexByID(e.sender)?this.getSeatsMgrSp().sendChat(e):console.log("observer say")},VoiceSend:function(e){var t=this.getSeatsMgrSp();t.addVoiceData(e),t.playVoice(e),this.getChatSp().recardItem(e,1),e.type=1,GameDataMgr.chatInfoList.push(e),GameDataMgr.chatInfoList.length>50&&GameDataMgr.chatInfoList.shift()},raiseHandle:function(e){var t=2==e;(this.setRaiseLayerShow(!0),this.setRaiseTips(!0),this.setRaiseState(t),t)&&this._raiseLayer.getComponent("raise_Layer").setRaiseAction(function(){}.bind(this));var n=GameDataMgr.MJDataMgr.actionData;GameDataMgr.MJDataMgr.getEnableOper(n)?this.setOprationShow(!0):this.setOprationShow(!1)},playEffect:function(e,t){this._aniLayer.getComponent("AniLayer_TDH").playEffect(e,t)},showAndCountTime:function(){this._countDown.getComponent("CountDown_2MJ").startAction()},hideAllPoints:function(){this._MJManager.getComponent("MJManagerView").hideAllPoints()},setOprationShow:function(e){this._OptionNode.active=!!e},seGameSetUpShow:function(e){this._gameSetUp.active=e},setMJNodeShow:function(e){this._MJManager.active=e},setMJNumsShow:function(e){this._desktopLayer.getComponent("desktopLG_TDH").setMJNumNodeShow(e)},setPrepareShow:function(e){this._Prepare.active=e},setEmojiNodeShow:function(e){this._emojiNode.active=e},setDirectionShow:function(e){this._directNode.active=e},setCountDownShow:function(e){this._countDown.active=e},setMenuShow:function(e){this._menuNode.active=e},setDistanceShow:function(e){this._distanceNode.active=e},setGameOverShow:function(e){this._gameOverNode.active=e},setShowGameEnd:function(e){this._gameEndNode.active=e},setChatShow:function(e){this._chatNode.active=e},setRaiseLayerShow:function(e){this._raiseLayer&&(this._raiseLayer.active=e)},setRaiseOperShow:function(e){this._raiseLayer.getComponent("raise_Layer").setRaiseOperShow(e)},setRaiseTips:function(e){this._raiseLayer.getComponent("raise_Layer").setRaiseTips(e)},setRaiseState:function(e){this._raiseLayer.getComponent("raise_Layer").setRaiseState(e),this.setMJNodeShow(!0),this.setRaiseOperShow(!1)},setReplayNodeShow:function(e){this._ReplayNode&&(this._ReplayNode.active=e)},setNinthTipsShow:function(e){this._ninthTipsLayer&&(this._ninthTipsLayer.active=e)},setMaimaNodeShow:function(e){this._maimaNode.active=e},OnGameBeginRepaly:function(e,t){this.setCenterTipsShow(!0),this.enableViews(),this.setCountDownShow(!1),this.setMJNumsShow(!0),this.initSeats(),this.intiDirection(GameDataMgr.turn),this.initHoldsBegin(e,!0),this.setDirectionShow(!0),this.setMJNodeShow(!0),this.updateCardsNum(GameDataMgr.numofmj),this.initLable()}}),cc._RF.pop()},{}],TalkPage:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}cc._RF.push(t,"fe8f6CAs+FGMZhyAlkUrB7D","TalkPage"),cc.Class({extends:cc.Component,properties:{toggle_page:cc.Node,ebox_content:cc.EditBox,ebox_memcontent:cc.EditBox,scrollContent:cc.Node,talkItem:cc.Node,talkItem_my:cc.Node,scrollRecord:cc.Node,myRecordItem:cc.Node,scrollMember:cc.Node,memberItem:cc.Node,scrollmemTalk:cc.Node,memTalkItem:cc.Node,memTalkItem_my:cc.Node,sendNode:cc.Node,sendNode_mem:cc.Node,_curIndex:1,wTalkNode:cc.Node,myRecordNode:cc.Node,membersNode:cc.Node,toggleNode:cc.Node,msgInfoNode:cc.Node,msgOpenNode:cc.Node,jampWXNode:cc.Node,redPoint:cc.Node,redPoint_PS:cc.Node,talkTips:cc.Node},start:function(){},OnClickSend:function(){var e=this.ebox_content.string;if(""!=e){var t={};t.content=e,t.sender=UserMgr.userId;Hall_ReqAndRes.chatRequest(t,function(e){this.ebox_content.string=""}.bind(this),2)}},OnClickSendMember:function(){if(this._selectUserId){var e=this.ebox_memcontent.string;if(""!=e&&this._selectUserId&&UserMgr.userId!=this._selectUserId){var t={};t.content=e,t.sender=UserMgr.userId,t.receiver=this._selectUserId;Hall_ReqAndRes.chatRequest(t,function(e){this.ebox_memcontent.string=""}.bind(this),3)}}},OnClickClose:function(){this.msgInfoNode.active=!1,this.msgOpenNode.active=!0},OnClickOpen:function(){var e;if(this.msgInfoNode.active=!0,this.msgOpenNode.active=!1,this.redPoint.active){e=1;for(var t=0;t<this.toggle_page.children.length;t++){var n=this.toggle_page.children[t].getComponent(cc.Toggle);n.isChecked=t==e-1}}else e=this._curIndex;this.setCurPage(e),this.getTalkHistory()},getTalkHistory:function(){Hall_ReqAndRes.getChatHistory(2,GroupDataMgr.clubID,0,50,function(e){ChatDataMgr.setGameHistory(e.data),this.refreshWTalkList()}.bind(this))},getMemTalkHistory:function(){Hall_ReqAndRes.getChatHistory(3,GroupDataMgr.clubID,0,50,function(e){var t=this.toggleNode.children[2].getChildByName("tipsPoint");if(this.membersNode.active)t.active=!1;else{var n=e.length>0;t.active=n}ChatDataMgr.setMemTalkHistory(e.data),this.refreshMemTalkList()}.bind(this))},initFirstWTalk:function(e){var t=cc.find("layout/lblContent",this.msgOpenNode).getComponent(cc.Label),n=dc.utils.setNameClamp(e.name)+"\uff1a"+e.content;t.string=n},removeAllItems:function(){this.scrollContent.removeAllChildren()},refreshWTalkList:function(e){for(var t=dc.deepCopy(ChatDataMgr.wTalkList),n=GroupDataMgr.userInfoMap,i=[],a=0;a<t.length;a++){var o=t[a];n[o.userId]||i.push(o.userId)}GroupDataMgr.getUsersInfo(i,function(e){for(var i=0;i<t.length;i++){var a=t[i].userId;t[i].headImg=n[a].headImg,t[i].name=n[a].name}if(this.createWTalkList(t),this.toBottom(),t.length>0){var o=dc.deepCopy(t[t.length-1]);this.initFirstWTalk(o)}}.bind(this))},createWTalkList:function(e){this.scrollContent.removeAllChildren();for(var t=this.scrollContent.childrenCount,n=0,i=0;i<e.length;i++)if(i<t){var a=this.scrollContent.children[i];a.getComponent("groupTalkItem").initData(e[i]),n+=a.height}else{var o;(o=e[i].userId==UserMgr.userId?cc.instantiate(this.talkItem_my):cc.instantiate(this.talkItem)).active=!0,this.scrollContent.addChild(o),o.getComponent("groupTalkItem").initData(e[i]),n+=o.height}this.scrollContent.height=n},toBottom:function(){var e=this.scrollContent.parent.height,t=this.scrollContent.height>e?this.scrollContent.height-e:0;this.scrollContent.y=t},OnToggleChange:function(e){var t=e.target.name;"toggle1"==t?(this._curIndex=1,this.setCurPage(1)):"toggle2"==t?(this._curIndex=2,this.setCurPage(2)):"toggle3"==t&&(this._curIndex=3,this.setCurPage(3))},changeToggle:function(e){for(var t=0;t<this.toggleNode.children.length;t++){var n=this.toggleNode.children[t].getComponent(cc.Toggle);n.isChecked=t+1==e}},setCurPage:function(e){(this._curIndex=e,this.changeInterface(),3==this._curIndex)?(this.setRedPointShow_PS(!1),this.refreshMembers(GroupDataMgr.memberNum),this.sendNode.active=!1,this.toggleNode.children[2].getChildByName("tipsPoint").active=!1,this._selectUserId&&this.updateMemTalkByUserId(this._selectUserId)):2==this._curIndex?(this.refreshMyRecords(ChatDataMgr.myRecord),this.sendNode.active=!1):1==this._curIndex&&(this.sendNode.active=!0,this.refreshWTalkList(),this.setReadPointShow(!1))},refreshMyRecords:function(e){for(var t=this.scrollRecord.childrenCount,n=0,i=0;i<e.length;i++)if(i<t){var a=this.scrollRecord.children[i];a.getChildByName("lblcontent").getComponent(cc.Label).string=e[i],n+=a.height}else{var o=cc.instantiate(this.myRecordItem);o.active=!0,this.scrollRecord.addChild(o),o.getChildByName("lblcontent").getComponent(cc.Label).string=e[i],n+=o.height}this.scrollContent.height=n},OnClickCopyRecord:function(e){var t=e.target.getChildByName("lblcontent").getComponent(cc.Label);this.ebox_content.string=t.string,this.setCurPage(1),this.changeToggle(1)},OnClickCopyAndJampToWX:function(){AnysdkMgr.copyContent("hmsqy001"),this.jampWXNode.active=!0,cc.sys.os==cc.sys.OS_IOS||(cc.sys.os,cc.sys.OS_ANDROID)},OnClickJumpToWX:function(){cc.sys.openURL("weixin://"),this.jampWXNode.active=!1},OnClickCloseJump:function(){this.jampWXNode.active=!1},refreshMemTalkList:function(e){for(var t=0;t<this.scrollMember.children.length;t++){var n=this.scrollMember.children[t],i=n.getComponent("talkMemberItem"),a=n._userId;if(this.membersNode.active&&this._selectUserId==a)this.msgInfoNode.active&&(i.setReadPoint(!1),ChatDataMgr.setMemTalkReadState(a,1));else{var o=ChatDataMgr.getMemTalkReadStateNum(a),s=o>0;i.setReadPoint(s);var r=o>0?0:1;ChatDataMgr.setMemTalkReadState(a,r)}}if(this.updateReadPointShow_PS(),this.updateTalkToggleRedPoint(),this.moveUnReadToTop(),ChatDataMgr.savePersonWords(),null!=this._memIndex){a=this._selectUserId;this.updateMemTalkByUserId(a),this.initTips()}},updateMemTalkByUserId:function(e){var t=ChatDataMgr.memTalkMap[e]||[];0==t.length&&this.scrollmemTalk.removeAllChildren();for(var n=GroupDataMgr.userInfoMap,i=[],a=0;a<t.length;a++){var o=t[a];n[o.sender]||i.push(o.sender)}GroupDataMgr.getUsersInfo(i,function(e){for(var i=0;i<t.length;i++){var a=t[i].sender;t[i].headImg=n[a].headImg,t[i].name=n[a].name,t[i].userId=a}this.createMemTalkList(t),this.memToBottom()}.bind(this))},moveUnReadToTop:function(){for(var e=this.scrollMember.childrenCount,t=0;t<e;t++){var n=this.scrollMember.children[t],i=(n.getComponent("groupTalkItem"),n._userId);ChatDataMgr.getMemTalkReadStateNum(i)>0&&n.setSiblingIndex(0)}},createMemTalkList:function(e){var t=this.scrollmemTalk.childrenCount;if(e.length<t)for(var n=0;n<t;n++){var i=this.scrollmemTalk.children[n];n>=e.length?i.active=!1:i.active=!0}var a=0;for(n=0;n<e.length;n++){var o;if(n<t)(i=this.scrollmemTalk.children[n]).active=!0,i.getComponent("groupTalkItem").initData(e[n]),a+=i.height;else(o=e[n].userId==UserMgr.userId?cc.instantiate(this.memTalkItem_my):cc.instantiate(this.memTalkItem)).active=!0,this.scrollmemTalk.addChild(o),o.getComponent("groupTalkItem").initData(e[n]),a+=o.height}this.scrollmemTalk.height=a},memToBottom:function(){var e=this.scrollmemTalk.parent.height,t=this.scrollmemTalk.height>e?this.scrollmemTalk.height-e:0;this.scrollmemTalk.y=t},refreshMembers:function(e){for(var t=GroupDataMgr.userInfoMap,n=[],a=0;a<e.length;a++)t[e[a]]||n.push(e[a]);GroupDataMgr.getUsersInfo(n,function(n){var a=[],o=[],s=e||[];o.push.apply(o,i(s));for(var r=0;r<o.length;r++){var c={};(c=t[o[r]]).userId=o[r],a.push(c)}this.createMembers(a),this.refreshSelectFrame(),this.initTips(),this.getMemTalkHistory()}.bind(this))},initTips:function(){this._selectUserId?(this.talkTips.active=!1,this._selectUserId==UserMgr.userId?this.sendNode_mem.active=!1:this.sendNode_mem.active=!0):(this.talkTips.active=!0,this.sendNode_mem.active=!1)},refreshSelectFrame:function(){if(this._selectUserId)for(var e=this.scrollMember.childrenCount,t=0;t<e;t++){var n=this.scrollMember.children[t],i=n.getComponent(cc.Toggle);n._userId==this._selectUserId?i.isChecked=!0:i.isChecked=!1}},createMembers:function(e){var t=this.scrollMember.childrenCount;if(e.length<t)for(var n=0;n<t;n++){var i=this.scrollMember.children[n];n>=e.length?i.active=!1:i.active=!0}for(n=0;n<e.length;n++)if(n<t){(i=this.scrollMember.children[n]).getComponent("talkMemberItem").initData(e[n],n),i.height}else{var a=cc.instantiate(this.memberItem);a.active=!0,this.scrollMember.addChild(a),a.getComponent(cc.Toggle).isChecked=!1,a.getComponent("talkMemberItem").initData(e[n],n),a.height}},OnToggleSelectPage:function(e){this.scrollMember.getComponent(cc.ToggleContainer).allowSwitchOff=!1;for(var t=e.target,n=0;n<this.scrollMember.children.length;n++){var i=this.scrollMember.children[n];i.getComponent("talkMemberItem");i==t&&(this._memIndex=n,this._selectUserId=i._userId,this.refreshMemTalkList())}this.updateReadPointShow_PS(),this.updateTalkToggleRedPoint(),this._selectUserId==UserMgr.userId?this.sendNode_mem.active=!1:this.sendNode_mem.active=!0},changeInterface:function(){1==this._curIndex?(this.wTalkNode.active=!0,this.myRecordNode.active=!1,this.membersNode.active=!1):2==this._curIndex?(this.wTalkNode.active=!1,this.myRecordNode.active=!0,this.membersNode.active=!1):3==this._curIndex&&(this.wTalkNode.active=!1,this.myRecordNode.active=!1,this.membersNode.active=!0)},setReadPointShow:function(e){this.redPoint.active=e},setRedPointShow_PS:function(e){this.redPoint_PS.active=e},updateReadPointShow:function(e){var t,n=e;2==e.scene&&(t=1),this.msgInfoNode.active&&this._curIndex==t?this.setReadPointShow(!1):n.userId==UserMgr.userId?this.setReadPointShow(!1):this.setReadPointShow(!0)},updateReadPointShow_PS:function(){ChatDataMgr.getAllMemTalkReadStateNum()<=0?this.setRedPointShow_PS(!1):this.setRedPointShow_PS(!0)},updateTalkToggleRedPoint:function(){var e=ChatDataMgr.getAllMemTalkReadStateNum(),t=this.toggleNode.children[2].getChildByName("tipsPoint");t.active=!(e<=0)}}),cc._RF.pop()},{}],UIMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ffed6S8gydGnY62o3bGOHV+","UIMgr");var i=0,a=1,o=2,s=3,r=101;n.HallPage=i,n.HZMJGame=a,n.DBGame=o,n.TDHGame=s,n.HZMJGame_Arena=r;n.curPage=null;var c={};c[i]="Catalogue/Prefab/UIRoot/HallPrefabe",c[a]="Catalogue/Prefab/UIRoot/HZGamePrefab",c[o]="Catalogue/Prefab/UIRoot/DoubleBucklePre",c[s]="Catalogue/Prefab/UIRoot/TDHGamePre",c[r]="Catalogue/Prefab/UIRoot/HZGamePrefab_Arena";var l={},h=null;function d(){return null==h?null:h.getComponent("ScenePage")}function u(e){if(l[e])return l[e];var t=null,n=d().rootNode;return(t=g(e)).pageType=e,n.addChild(t),l[e]=t,t}function g(e){if(c[e]){var t=cc.loader.getRes(c[e],cc.Prefab);return cc.instantiate(t)}return null}n.setNodeMgr=function(e){h=e},n.getMgrNodeScript=d,n.getPage=u,n.getPageExit=function(e){return!!l[e]},n.getPageScript=function(e){var t=u(e);if(t){var n="";return e==i?n="HallMgr":e==a?n="HZMJ_Controller":e==o?n="DoubleBuckle_Controller":e==s?n="TDH_Controller":e==r&&(n="HZMJ_Controller_Arena"),t.getComponent(n)}return null},n.pushUI=function(e){n.curPage=e;var t=u(e);for(var i in l)l[i].active=i==e;return t},n.clearAll=function(){l={}},cc._RF.pop()},{}],UserInfo_Hall:[function(e,t,n){"use strict";cc._RF.push(t,"96ffdusPWBCwqqigDurz4G+","UserInfo_Hall");e("WechatHelper");cc.Class({extends:cc.Component,properties:{lblName:cc.Label,lblUserId:cc.Label,lblCode:cc.Label,icon:cc.Node,signNode:cc.Node,tuiguanNode:cc.Node,btnNode:cc.Node,ebox_sign:cc.EditBox,lblSign:cc.Label,sprPen:cc.Node,qCodeNode:cc.Node,moveNode:cc.Node,qcode:cc.Node,lblCardName:cc.Label,lblCardID:cc.Label,cardIcon:cc.Node},start:function(){},openUserInfo:function(e){if(console.log("openUserInfo"),this.signNode.active=!1,e.userId==UserMgr.userId){var t=e.agentLevel>=2;this.signNode.active=t,this.ebox_sign.node.active=!0,this.lblSign.node.active=!1,this.sprPen.active=!0,this.tuiguanNode.active=!0,this.btnNode.active=!0}else{t=e.agentLevel>=2;this.signNode.active=t,this.ebox_sign.node.active=!1,this.lblSign.node.active=!0,this.sprPen.active=!1,this.tuiguanNode.active=!1,this.btnNode.active=!1}this.node.active=!0,this.initInfo(e)},initInfo:function(e){var t=e.name,n=e.userId;this.setName(t),this.setUserId(n);var i="";i=dc.getTuiGuangMaUrl(),i+=UserMgr.userId,this.setCode(i),this.setIcon(e.headImg,n),this.ebox_sign.string=e.sign||"",this.lblSign.string=e.sign||""},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t)},setName:function(e){this.lblName.string=e},setUserId:function(e){this.lblUserId.string=e},setCode:function(e){this.lblCode.string=e},OnClickClose:function(){this.node.active=!1},OnClickCopy:function(){var e=this.lblCode.string;AnysdkMgr.copyContent(e),cc.sys.os!=cc.sys.OS_IOS&&publicWindow.alert.show("","\u590d\u5236\u6210\u529f")},OnEdit_Sign:function(){var e=this.ebox_sign.string;Hall_ReqAndRes.modifyUserInfo(1,e,function(t){this.lblSign.string=e}.bind(this))},OnClickShareFriend:function(){this._type=1;var e=this.lblCode.string;this.makeCode(this.qcode,e),this.lblCardName.string=UserMgr.userName,this.lblCardID.string=UserMgr.userId,this.setMyIcon(UserMgr.headIMG,UserMgr.userId),setTimeout(function(){this.qCodeNode.active=!0,this.OnBtnQcodeMake()}.bind(this),500)},OnClickShareCircle:function(){this._type=2;var e=this.lblCode.string;this.makeCode(this.qcode,e),this.lblCardName.string=UserMgr.userName,this.lblCardID.string=UserMgr.userId,this.setMyIcon(UserMgr.headIMG,UserMgr.userId),setTimeout(function(){this.qCodeNode.active=!0,this.OnBtnQcodeMake()}.bind(this),500)},OnClickOpenQcode:function(){},setMyIcon:function(e,t){this.cardIcon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){})},makeCode:function(e,t){var n=new QRCode(-1,QRErrorCorrectLevel.H);n.addData(t),n.make();for(var i=e.getComponent(cc.Graphics),a=e.width/n.getModuleCount(),o=e.height/n.getModuleCount(),s=0;s<n.getModuleCount();s++)for(var r=0;r<n.getModuleCount();r++){n.isDark(s,r)?i.fillColor=cc.Color.BLACK:i.fillColor=cc.Color.WHITE;var c=Math.ceil((r+1)*a)-Math.floor(r*a),l=Math.ceil((s+1)*a)-Math.floor(s*a);i.rect(Math.round(r*a),Math.round(s*o),c,l),i.fill()}},OnClickCloseQcode:function(){this.qCodeNode.active=!1},OnBtnQcodeMake:function(){cc.director.getWinSize();var e=this.moveNode.getContentSize();console.log("width:"+e.width),console.log("height:"+e.height);var t=this.moveNode.getPosition(),n="agent_"+UserMgr.userId+".jpg";console.log("cutpaic0");var i=jsb.fileUtils.getWritablePath()+n;console.log("cutpaic"),console.log(jsb.fileUtils.getWritablePath()),console.log(i),jsb.fileUtils.isFileExist(i)&&(console.log("jinqu"),jsb.fileUtils.removeFile(i));var a=new cc.RenderTexture(Math.floor(e.width),Math.floor(e.height));this.moveNode.setPosition(e.width/2,e.height/2),console.log("x:"+t.x),console.log("y:"+t.y),a.setAnchorPoint(cc.p(.5,.5)),a.begin(),this.moveNode._sgNode.visit(),a.end(),console.log("cutpaic1"),a.saveToFile(n,cc.ImageFormat.JPG,!0,function(t){console.log("cut succeed"),this.qCodeNode.active=!1;var n=100/e.height,a=Math.floor(e.width*n);1==this._type?AnysdkMgr.shareCutToFriend(i,a,100):AnysdkMgr.shareCutToCircle(i,a,100),this.moveNode.x=0,this.moveNode.y=0}.bind(this)),console.log("cutpaic2")}}),cc._RF.pop()},{WechatHelper:"WechatHelper"}],UserInfo:[function(e,t,n){"use strict";cc._RF.push(t,"c7f1aKjG7NDebM9Bl9ImQ6h","UserInfo"),cc.Class({extends:cc.Component,properties:{userInfoNode:cc.Node,username:cc.Label,IP:cc.Label,address:cc.Label,icon:cc.Node,userId:cc.Label},onLoad:function(){},onTouchClose:function(){this.userInfoNode.active=!1},setIP:function(e){var t;t=e?"IP:"+e.slice(7,e.length):"",this.IP.string=t},setUserName:function(e){var t="";t=e||"",this.username.string="\u6635\u79f0:"+t},setUserID:function(e){var t;t=e?"ID:"+e:"",this.userId.string=t},setIcom:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t)},setAddress:function(e){this.address.string=e}}),cc._RF.pop()},{}],UserMgr:[function(e,t,n){"use strict";cc._RF.push(t,"b8eb8Qv+nBPQbxJWxfbZOGQ","UserMgr"),cc.Class({extends:cc.Component,properties:{account:null,userID:null,userName:null,lv:0,exp:0,coins:0,gems:0,sign:0,token:null,ip:"",sex:0,url:null,iconSFrame:null,server_version:null,roomId:null,gameID:null,openID:null,ownerID:null,isHistoryBack:!1,curHistoryRoomID:null,phone:null,ZPTable:null},start:function(){},getToken:function(){var e,t=cc.sys.localStorage.getItem("LoginType");if("ac_login"==t){var n=UserMgr.account;e=cc.sys.localStorage.getItem("token"+n),console.log("getToken1")}else"wx_login"==t&&(e=cc.sys.localStorage.getItem("token"),console.log("getToken2"));return e},tokenLogin:function(e){var t=this.getToken();console.log("tokenLogin"),console.log(t),null!=t?UserMgr.LoginHall(t,3,function(t){e&&e(t)}.bind(this)):cc.director.loadScene("Login")},LoginHall:function(e,t,n){var i,a,o={};o.logintype=t,o.account=e,o.os="123456",cc.sys.os==cc.sys.OS_IOS?(i=dc.VERSION_IOS,a=2):(i=dc.VERSION_Android,a=1),o.version=i,o.platform=a;var s=this;pomelo.request("connector.entryHandler.login",o,function(t){if(cc.log("connector.entryHandler.login: ",t),0==t.code){cc.sys.localStorage.setItem(e,e);var i=t.data.token;s.token=i,console.log("tokenSave:",i),s.setLoginData(t.data),s.setCheckFlag(t.data),n&&n(t)}else if(-2==t.code){publicWindow.alert.show("\u63d0\u793a",t.msg,function(){UserMgr.loginOut()})}else publicWindow.alert.show("\u63d0\u793a",t.msg)})},setCheckFlag:function(e){var t,n;if(n=cc.sys.os==cc.sys.OS_IOS?dc.VERSION_IOS:dc.VERSION_Android,t=e.version,cc.sys.os==cc.sys.OS_IOS){var i=dc.utils.getUpdateType(n,t);dc.Iphone_Check_flag=3==i}else dc.Iphone_Check_flag=!1},setLoginData:function(e){this.ownerId=e.ownerId,this.userId=e.userId,this.userName=e.name,this.lv=e.lv,this.gems=e.gems,this.roomId=e.roomId,this.hallgameId=e.hallgameId,this.gameId=e.gameId,this.openId=e.openId,this.sex=e.sex,this.vgems=e.vgems,this.agentLevel=e.agentLevel,this.version=e.version,this.minversion=e.minversion,this.xlOpenId=e.xlOpenId,this.myClubs=e.myClubs||[],this.clubs=e.clubs||[],this.requests=e.requests,this.headIMG=e.headImg,this.qualification_eclub=e.qualification_eclub,this.phone=e.phone,this.sign=e.sign,GroupDataMgr.inviteList=e.requests||[],GroupDataMgr.initClubList(),GameDataMgr.PhraseList=GameDataMgr.getLocalPhraseListFromFile(),ChatDataMgr.myRecord=ChatDataMgr.getHabitOfSentence(),ChatDataMgr.memTalkMap=ChatDataMgr.getPersonwords()},loginOut:function(){var e=cc.sys.localStorage.getItem("account");cc.sys.localStorage.getItem("token"+e)&&cc.sys.localStorage.removeItem("token"+e),cc.sys.localStorage.getItem("token")&&cc.sys.localStorage.removeItem("token"),cc.sys.localStorage.removeItem("LoginType"),UserMgr.xlOpenId=null,UserMgr.token=null,UserMgr.xlcode=null,UIMgr.clearAll(),pomelo.disconnect(),pomelo.closeCheckWCConnect(),GroupDataMgr.clearFKTipsSchedule(),GameDataMgr.cancelUpdateSpeakMsg(),cc.director.loadScene("Login")},clearUIAndCloseWS:function(){UserMgr.xlOpenId=null,UserMgr.token=null,UserMgr.xlcode=null,UIMgr.clearAll(),pomelo.disconnect(),pomelo.closeCheckWCConnect()},clearRoomId:function(){console.log("clearRoomId"),console.log(UserMgr.roomId),UserMgr.roomId=null}}),cc._RF.pop()},{}],VoiceMgr:[function(e,t,n){"use strict";cc._RF.push(t,"09f319gGZpFU5tKrGdsbJ2b","VoiceMgr");var i=12,a=128-i;function o(e){e-=a;var t=Math.floor(e/i)+a,n=e%i+a;return String.fromCharCode(t)+String.fromCharCode(n)}for(var s={},r={},c=0;c<256;++c){var l=null,h=c+1;l=h>=a?o(h):String.fromCharCode(h),s[c]=l,r[l]=c}function d(e){var t="",n=e.length,i=n>>16&255,a=n>>8&255,o=255&n;t+=s[n>>24&255],t+=s[i],t+=s[a],t+=s[o];for(var r=0;r<e.length;++r)t+=s[e[r]];return t}function u(e,t){var n=e.charCodeAt(t);return n=n>=a?e.charAt(t)+e.charAt(t+1):e.charAt(t)}function g(e){for(var t=0,n=0,i=0;i<4;++i){t+=(s=u(e,t)).length,n|=r[s]<<8*(3-i)}for(var a=new Uint8Array(n),o=0;t<e.length;){var s;t+=(s=u(e,t)).length,a[o]=r[s],o++}return a}cc.Class({extends:cc.Component,properties:{onPlayCallback:null,_voiceMediaPath:null},init:function(){cc.sys.isNative&&(this._voiceMediaPath=jsb.fileUtils.getWritablePath()+"/voicemsgs/",this.setStorageDir(this._voiceMediaPath))},prepare:function(e){cc.sys.isNative&&(audioMgr.pauseAll(),this.clearCache(e),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/voicesdk/VoiceRecorder","prepare","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","prepareRecord:",e))},release:function(){cc.sys.isNative&&(audioMgr.resumeAll(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/voicesdk/VoiceRecorder","release","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","finishRecord"))},cancel:function(){cc.sys.isNative&&(audioMgr.resumeAll(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/voicesdk/VoiceRecorder","cancel","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","cancelRecord"))},writeVoice:function(e,t){if(cc.sys.isNative&&t&&t.length>0){var n=g(t),i=this._voiceMediaPath+e;this.clearCache(e),jsb.fileUtils.writeDataToFile(n,i)}},clearCache:function(e){if(cc.sys.isNative){var t=this._voiceMediaPath+e;jsb.fileUtils.isFileExist(t)&&jsb.fileUtils.removeFile(t),jsb.fileUtils.isFileExist(t+".wav")&&jsb.fileUtils.removeFile(t+".wav")}},play:function(e){cc.sys.isNative&&(audioMgr.pauseAll(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/voicesdk/VoicePlayer","play","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","play:",e))},stop:function(){cc.sys.isNative&&(audioMgr.resumeAll(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/voicesdk/VoicePlayer","stop","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","stopPlay"))},getVoiceLevel:function(e){return Math.floor(Math.random()*e+1)},getVoiceData:function(e){if(cc.sys.isNative){var t=this._voiceMediaPath+e;console.log("getVoiceData:"+t);var n=jsb.fileUtils.getDataFromFile(t);if(n)return d(n)}return""},download:function(){},setStorageDir:function(e){cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/voicesdk/VoiceRecorder","setStorageDir","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&(jsb.reflection.callStaticMethod("VoiceSDK","setStorageDir:",e),jsb.fileUtils.isDirectoryExist(e)||jsb.fileUtils.createDirectory(e)))}}),cc._RF.pop()},{}],Voice_public:[function(e,t,n){"use strict";cc._RF.push(t,"58dc0F9CbxB95M6VvEz5ai1","Voice_public"),cc.Class({extends:cc.Component,properties:{voiceNode:cc.Node,volumeNode:cc.Node,voidceFalureNode:cc.Node,timeBar:cc.Node,btnVoice:cc.Node,_lastTouchTime:null,_lastCheckTime:-1,_MAX_TIME:15e3,_controlSp:null,observeList:cc.Node},onLoad:function(){},setBtnVoice:function(e){this.node.getChildByName("btn_voice").active=e},setControlSp:function(e){this._controlSp=e},getSeatsMgrSp:function(){return this._controlSp.getSeatsMgrSp()},getChatSp:function(){return this._controlSp.getChatSp()},initVoiceEvent:function(){this.voidceFalureNode&&(this.voidceFalureNode.active=!1);for(var e=1;e<this.volumeNode.children.length;++e)this.volumeNode.children[e].active=!1;this.btnVoice&&(this.btnVoice.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.btnVoice.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.btnVoice.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.btnVoice.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this))},onBtnOkClick:function(){this.voiceNode.active=!1},onTouchBegin:function(e){console.log("cc.Node.EventType.TOUCH_START"),VoiceMgr.prepare("record.amr"),this._lastTouchTime=Date.now(),this.voiceNode.active=!0,this.voidceFalureNode.active=!1},onTouchMoved:function(e){console.log("cc.Node.EventType.TOUCH_MOVE")},onTouchEnded:function(e){console.log("cc.Node.EventType.TOUCH_END"),Date.now()-this._lastTouchTime<1e3?(this.voidceFalureNode.active=!0,VoiceMgr.cancel()):this.onVoiceOK(),this._lastTouchTime=null},onTouchCancel:function(e){console.log("cc.Node.EventType.TOUCH_CANCEL"),this.cancelClick()},cancelClick:function(){VoiceMgr.cancel(),this._lastTouchTime=null,this.voiceNode.active=!1},onVoiceOK:function(){if(null!=this._lastTouchTime){VoiceMgr.release();var e=Date.now()-this._lastTouchTime,t=VoiceMgr.getVoiceData("record.amr"),n={};n.content=t,n.sender=UserMgr.userId,n.vtime=e,n.type=4,Hall_ReqAndRes.chatRequest(n,function(e){})}this.voiceNode.active=!1},update:function(e){if(1==this.voiceNode.active&&0==this.voidceFalureNode.active&&Date.now()-this._lastCheckTime>300){for(var t=0;t<this.volumeNode.children.length;++t)this.volumeNode.children[t].active=!1;var n=VoiceMgr.getVoiceLevel(7);n>=1&&n<=7&&(this.volumeNode.children[n-1].active=!0),this._lastCheckTime=Date.now()}if(this._lastTouchTime){var i=Date.now()-this._lastTouchTime;if(i>=this._MAX_TIME)this.onVoiceOK(),this._lastTouchTime=null;else{var a=i/this._MAX_TIME;this.timeBar.scaleX=1-a}}}}),cc._RF.pop()},{}],WaitingConnection:[function(e,t,n){"use strict";cc._RF.push(t,"8a7f6KosD1Gp7NCWJVjGbm7","WaitingConnection"),cc.Class({extends:cc.Component,properties:{target:cc.Node,_isShow:!1,lblContent:cc.Label,closeNode:cc.Node,_onok:null},onLoad:function(){this.node.active=this._isShow},setWindow:function(e){},show:function(e,t,n){this._isShow=!0,this.node&&(this.node.active=this._isShow),this.lblContent&&(null==e&&(e=""),this.lblContent.string=e),this._onok=t;var i=n?1e3*n:15e3;this._timer=setTimeout(function(){this.hide()}.bind(this),i)},hide:function(){this._isShow=!1,this.node&&(this.node.active=this._isShow),this.clearTimer()},clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},showClose:function(e){this.closeNode&&(this.closeNode.active=e)},onBtnClose:function(){this._onok&&(this._onok(),this._onok=null),this.hide()},update:function(e){this.target.rotation=this.target.rotation-45*e}}),cc._RF.pop()},{}],WechatHelper:[function(e,t,n){"use strict";cc._RF.push(t,"41a32LiowJKap+JQyfYVQX1","WechatHelper");var i="com/hsgame/WXAPI",a="AppController";n.invite=function(e,t,n,o){var s,r;s=1==t?"\u4f60\u7684\u5c0f\u4f19\u4f34\u5728[V"+e+"]\u68cb\u724c\u5ba4\u7b49\u4f60":"\u4f60\u7684\u5c0f\u4f19\u4f34\u5728["+e+"]\u68cb\u724c\u5ba4\u7b49\u4f60",r=0==n?"\u767d\u677f\u5168\u81ea\u6478 \u78b0\u4e0d\u7b97\u644a \u8d22\u98d8\u6293\u6253 40\u7247\u7206\u5e84 ["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u4e00\u8d77\u73a9\u676d\u9ebb3\u7f3a1":"\u767d\u677f\u5168\u81ea\u6478 \u78b0\u4e0d\u7b97\u644a \u8d22\u98d8\u6293\u6253 ["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u6765\u6218\u516b\u5c40";var c="?roomId="+e,l=dc.URL_HZ_InviteFriends+c;console.log("invite:"),console.log("roomId:"+e),console.log("tempweb:"+l),console.log(t),console.log(s),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i,"Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V",l,s,r,t):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=4,jsb.reflection.callStaticMethod(a,"share:shareTitle:shareDesc:shareToCircle:",l,s,r,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.invite_DB=function(e,t,n,o){var s,r="\u4f60\u7684\u5c0f\u4f19\u4f34\u5728["+e+"]\u53cc\u6263\u623f\u95f4\u7b49\u4f60";0==t?s="\u5c40\u6570"+n+", \u53cc\u62634\u5206\u3001\u5355\u62632\u5206\u3001\u81ea\u62631\u5206,\u623f\u95f4\u89c4\u5219, \u5168\u6697,\u56fa\u5b9a\u642d\u914d":1==t?s="\u5c40\u6570"+n+", \u53cc\u62634\u5206\u3001\u5355\u62632\u5206\u3001\u81ea\u62631\u5206,\u623f\u95f4\u89c4\u5219, \u5168\u6697,\u7ffb\u724c\u642d\u914d":10==t?s="\u5c40\u6570"+n+", \u53cc\u62634\u5206\u3001\u5355\u62632\u5206\u3001\u81ea\u62631\u5206,\u623f\u95f4\u89c4\u5219, \u660e\u53cc,\u56fa\u5b9a\u642d\u914d":11==t&&(s="\u5c40\u6570"+n+", \u53cc\u62634\u5206\u3001\u5355\u62632\u5206\u3001\u81ea\u62631\u5206,\u623f\u95f4\u89c4\u5219, \u660e\u53cc,\u7ffb\u724c\u642d\u914d");var c="?roomId="+e,l=dc.URL_HZ_InviteFriends+c;console.log("invite:"),console.log("roomId:"+e),console.log("tempweb:"+l),console.log(r),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i,"Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V",l,r,s,0):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=4,jsb.reflection.callStaticMethod(a,"share:shareTitle:shareDesc:shareToCircle:",l,r,s,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.invite_Touzi=function(e,t,n){var o,s;o="\u4f60\u7684\u5c0f\u4f19\u4f34\u5728["+e+"]\u7684\u623f\u95f4\u7b49\u4f60\u54e6",0==n?s="9\u76d85\u80dc\u5236 \u5148\u83b7\u5f975\u76d8\u80dc\u5229\u8005\u5373\u4e3a\u5927\u8d62\u5bb6 ["+dc.userMgr.userName+"]\u9080\u8bf7\u4f60\u4e00\u8d77\u73a9\u9ab0\u76c5\u5927\u4f5c\u6218\u4e4b\u5439\u725b\u9ab0\u5b50":1==n&&(s="9\u76d85\u80dc\u5236 \u5148\u83b7\u5f975\u76d8\u80dc\u5229\u8005\u5373\u4e3a\u5927\u8d62\u5bb6 ["+dc.userMgr.userName+"]\u9080\u8bf7\u4f60\u4e00\u8d77\u73a9\u9ab0\u76c5\u5927\u4f5c\u6218\u4e4b\u8840\u6218\u5230\u5e95");var r="?roomId="+e,c=dc.URL_HZ_InviteFriends+r;console.log("invite:"),console.log("roomId:"+e),console.log("tempweb:"+c),console.log(t),console.log(o),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i,"Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V",c,o,s,t):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=4,jsb.reflection.callStaticMethod(a,"share:shareTitle:shareDesc:shareToCircle:",c,o,s,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.invite_MJ2P=function(e,t,n,o){var s,r;s=1==t?"\u4f60\u7684\u5c0f\u4f19\u4f34\u5728[V"+e+"]\u4e8c\u4eba\u68cb\u724c\u5ba4\u7b49\u4f60":"\u4f60\u7684\u5c0f\u4f19\u4f34\u5728["+e+"]\u4e8c\u4eba\u68cb\u724c\u5ba4\u7b49\u4f60",r=0==n?"\u6709\u8d22\u5fc5\u62f7 \u5403\u78b0\u4e0d\u7b97\u644a 50\u7247\u7206\u5e84128\u5c01\u9876 ["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u4e00\u8d77\u73a9\u676d\u9ebb3\u7f3a1\u2014\u2014\u2014\u2014\u5bf9\u6218\u9ebb\u5c06":"\u6709\u8d22\u53ef\u81ea\u6478 \u5403\u78b0\u4e0d\u7b97\u644a ["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u5bf9\u6218\u516b\u5c40";var c="?roomId="+e,l=dc.URL_HZ_InviteFriends+c;console.log("invite:"),console.log("roomId:"+e),console.log("tempweb:"+l),console.log(t),console.log(s),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i,"Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V",l,s,r,t):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=4,jsb.reflection.callStaticMethod(a,"share:shareTitle:shareDesc:shareToCircle:",l,s,r,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.shareToTimeline=function(){var e="\u676d\u9ebb3\u7f3a1 \u6b63\u5b97\u676d\u9ebb \u767d\u677f\u5168\u81ea\u6478 40\u7247\u7206\u5e84\u548c\u7ebf\u4e0b\u68cb\u724c\u623f\u4e00\u6a21\u4e00\u6837",t=dc.URL_HZ_FriendAndCircle;console.log("shareToTimeline:"),console.log("tempweb:"+t),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i,"SharePicToFriendCircle","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",t,e,"\u676d\u9ebb3\u7f3a1 \u6b63\u5b97\u7684\u676d\u9ebb"):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=0,jsb.reflection.callStaticMethod(a,"share:shareTitle:shareDesc:shareToCircle:",t,e,"\u676d\u9ebb3\u7f3a1 \u6b63\u5b97\u7684\u676d\u9ebb",!0)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.shareToMate=function(){var e="["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u4e00\u8d77\u73a9\u676d\u9ebb3\u7f3a1 \u767d\u677f\u5168\u81ea\u6478 40\u7247\u7206\u5e84 \u548c\u68cb\u724c\u623f\u4e00\u6a21\u4e00\u6837\u7684\u4f53\u9a8c",t=dc.URL_HZ_FriendAndCircle;console.log("shareToMate:"),console.log("tempweb:"+t),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i,"SharePicToFriend","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",t,"\u4eba\u4eba\u90fd\u73a9\u676d\u9ebb3\u7f3a1",e):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=1,jsb.reflection.callStaticMethod(a,"share:shareTitle:shareDesc:shareToCircle:",t,"\u4eba\u4eba\u90fd\u73a9\u676d\u9ebb3\u7f3a1",e,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.shareCutPicToMate=function(){cc.sys.os==cc.sys.OS_IOS&&(dc._shareType=2),AnysdkMgr.shareResult()},n.shareRecallToMate=function(e){var t="\u676d\u9ebb3\u7f3a1 \u56de\u653e\u7801["+e+"]",n="["+UserMgr.userName+"]\u5206\u4eab\u4e86\u6e38\u620f\u56de\u653e \u70b9\u51fb\u6218\u7ee9 \u67e5\u770b\u4ed6\u4eba\u56de\u653e \u8f93\u5165\u56de\u653e\u7801\u5373\u53ef\u67e5\u770b",o="?gameId="+e,s=dc.URL_HZ_MateRecal+o;console.log("shareToMate:"),console.log("tempweb:"+s),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i,"SharePicToFriend","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",s,t,n):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=3,jsb.reflection.callStaticMethod(a,"share:shareTitle:shareDesc:shareToCircle:",s,t,n,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.shareTGMTimeline=function(e){var t="\u676d\u9ebb3\u7f3a1 \u6b63\u5b97\u676d\u9ebb \u767d\u677f\u5168\u81ea\u6478 40\u7247\u7206\u5e84\u548c\u7ebf\u4e0b\u68cb\u724c\u623f\u4e00\u6a21\u4e00\u6837",n=e;cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i,"SharePicToFriendCircle","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",n,t,"\u676d\u9ebb3\u7f3a1 \u6b63\u5b97\u7684\u676d\u9ebb"):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=0,jsb.reflection.callStaticMethod(a,"share:shareTitle:shareDesc:shareToCircle:",n,t,"\u676d\u9ebb3\u7f3a1 \u6b63\u5b97\u7684\u676d\u9ebb",!0)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.shareTGMToMate=function(e){var t="["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u4e00\u8d77\u73a9\u676d\u9ebb3\u7f3a1 \u767d\u677f\u5168\u81ea\u6478 40\u7247\u7206\u5e84 \u548c\u68cb\u724c\u623f\u4e00\u6a21\u4e00\u6837\u7684\u4f53\u9a8c",n=e;console.log("shareToMate:"),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i,"SharePicToFriend","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",n,"\u4eba\u4eba\u90fd\u73a9\u676d\u9ebb3\u7f3a1",t):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=1,jsb.reflection.callStaticMethod(a,"share:shareTitle:shareDesc:shareToCircle:",n,"\u4eba\u4eba\u90fd\u73a9\u676d\u9ebb3\u7f3a1",t,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},cc._RF.pop()},{}],WelfareItem:[function(e,t,n){"use strict";cc._RF.push(t,"5f646txhblFs7muV6nSe1lp","WelfareItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,lblName:cc.Label,lblUserID:cc.Label,lblLoginTime:cc.Label,lblFKNum:cc.Label,lblMonthCost:cc.Label,lblMonthBuy:cc.Label,lblBindUserID:cc.Label,lblTotalBuy:cc.Label},start:function(){},initData:function(e,t){this.setBgByIndex(t),this.setUserId(e.userid),this.setBindID(UserMgr.userId),this.setName(e.name),this.setFKNum(e.gems),this.setMonthCost(e.record_gems.mon_cost),this.setMonthBuy(e.record_gems.buy_mon_pomelo);var n=dc.utils.dateFormat(e.re_time);this.setLoginTime(n),this.lblTotalBuy.string=e.record_gems.buy_total_pomelo},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},setName:function(e){var t;e.length>9?t=e.substr(0,8)+"...":t=e;this.lblName.string=t},setUserId:function(e){this.lblUserID.string=e},setLoginTime:function(e){this.lblLoginTime.string=e},setFKNum:function(e){this.lblFKNum.string=e},setMonthCost:function(e){this.lblMonthCost.string=e},setMonthBuy:function(e){this.lblMonthBuy.string=e},setBindID:function(e){this.lblBindUserID.string=e}}),cc._RF.pop()},{}],XLHelper:[function(e,t,n){"use strict";cc._RF.push(t,"e267e8LvABGCLYCTGPj3mPA","XLHelper");var i="AppController";n.invite=function(e,t,n,a){var o,s;o=1==t?"\u4f60\u7684\u5c0f\u4f19\u4f34\u5728[V"+e+"]\u68cb\u724c\u5ba4\u7b49\u4f60":"\u4f60\u7684\u5c0f\u4f19\u4f34\u5728["+e+"]\u68cb\u724c\u5ba4\u7b49\u4f60",s=0==n?"\u767d\u677f\u5168\u81ea\u6478 \u78b0\u4e0d\u7b97\u644a \u8d22\u98d8\u6293\u6253 40\u7247\u7206\u5e84 ["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u4e00\u8d77\u73a9\u676d\u9ebb3\u7f3a1":"\u767d\u677f\u5168\u81ea\u6478 \u78b0\u4e0d\u7b97\u644a \u8d22\u98d8\u6293\u6253 ["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u6765\u6218\u516b\u5c40";var r="?roomId="+e,c=dc.URL_HZ_InviteFriends_XL+r;console.log("invite:"),console.log("roomId:"+e),console.log("tempweb:"+c),console.log(t),console.log(o),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/SGAPI","Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V",c,o,s,t):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=4,jsb.reflection.callStaticMethod(i,"XLShare:shareTitle:shareDesc:shareToCircle:",c,o,s,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.invite_MJ2P=function(e,t,n,a){var o,s;o=1==t?"\u4f60\u7684\u5c0f\u4f19\u4f34\u5728[V"+e+"]\u4e8c\u4eba\u68cb\u724c\u5ba4\u7b49\u4f60":"\u4f60\u7684\u5c0f\u4f19\u4f34\u5728["+e+"]\u4e8c\u4eba\u68cb\u724c\u5ba4\u7b49\u4f60",s=0==n?"\u6709\u8d22\u5fc5\u62f7 \u5403\u78b0\u4e0d\u7b97\u644a 50\u7247\u7206\u5e84128\u5c01\u9876 ["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u4e00\u8d77\u73a9\u676d\u9ebb3\u7f3a1\u2014\u2014\u2014\u2014\u5bf9\u6218\u9ebb\u5c06":"\u6709\u8d22\u53ef\u81ea\u6478 \u5403\u78b0\u4e0d\u7b97\u644a ["+UserMgr.userName+"]\u9080\u8bf7\u4f60\u5bf9\u6218\u516b\u5c40";var r="?roomId="+e,c=dc.URL_HZ_InviteFriends_XL+r;console.log("invite:"),console.log("roomId:"+e),console.log("tempweb:"+c),console.log(t),console.log(o),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/SGAPI","Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V",c,o,s,t):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=4,jsb.reflection.callStaticMethod(i,"XLShare:shareTitle:shareDesc:shareToCircle:",c,o,s,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.invite_DB=function(e,t,n,a){var o,s="\u4f60\u7684\u5c0f\u4f19\u4f34\u5728["+e+"]\u53cc\u6263\u623f\u95f4\u7b49\u4f60";0==t?o="\u5c40\u6570"+n+", \u53cc\u62634\u5206\u3001\u5355\u62632\u5206\u3001\u81ea\u62631\u5206,\u623f\u95f4\u89c4\u5219, \u5168\u6697,\u56fa\u5b9a\u642d\u914d":1==t?o="\u5c40\u6570"+n+", \u53cc\u62634\u5206\u3001\u5355\u62632\u5206\u3001\u81ea\u62631\u5206,\u623f\u95f4\u89c4\u5219, \u5168\u6697,\u7ffb\u724c\u642d\u914d":10==t?o="\u5c40\u6570"+n+", \u53cc\u62634\u5206\u3001\u5355\u62632\u5206\u3001\u81ea\u62631\u5206,\u623f\u95f4\u89c4\u5219, \u660e\u53cc,\u56fa\u5b9a\u642d\u914d":11==t&&(o="\u5c40\u6570"+n+", \u53cc\u62634\u5206\u3001\u5355\u62632\u5206\u3001\u81ea\u62631\u5206,\u623f\u95f4\u89c4\u5219, \u660e\u53cc,\u7ffb\u724c\u642d\u914d");var r="?roomId="+e,c=dc.URL_HZ_InviteFriends+r;console.log("invite:"),console.log("roomId:"+e),console.log("tempweb:"+c),console.log(s),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/SGAPI","Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V",c,s,o,0):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=4,jsb.reflection.callStaticMethod(i,"share:shareTitle:shareDesc:shareToCircle:",c,s,o,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},n.shareCutPicToMate=function(){cc.sys.os==cc.sys.OS_IOS&&(dc._shareType=2),AnysdkMgr.XLShareResult()},n.shareRecallToMate=function(e){var t="\u676d\u9ebb3\u7f3a1 \u56de\u653e\u7801["+e+"]",n="["+UserMgr.userName+"]\u5206\u4eab\u4e86\u6e38\u620f\u56de\u653e \u70b9\u51fb\u6218\u7ee9 \u67e5\u770b\u4ed6\u4eba\u56de\u653e \u8f93\u5165\u56de\u653e\u7801\u5373\u53ef\u67e5\u770b",a="?gameId="+e,o=dc.URL_HZ_MateRecal_XL+a;console.log("shareToMate:"),console.log("tempweb:"+o),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/hsgame/SGAPI","Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V",o,t,n,e):cc.sys.os==cc.sys.OS_IOS?(dc._shareType=3,jsb.reflection.callStaticMethod(i,"XLShare:shareTitle:shareDesc:shareToCircle:",o,t,n,!1)):console.log("platform:"+cc.sys.os+" dosn't implement share.")},cc._RF.pop()},{}],alert:[function(e,t,n){"use strict";cc._RF.push(t,"634658n561GYou5BynfA0LQ","alert"),cc.Class({extends:cc.Component,properties:{alert:cc.Node,btnOK:cc.Button,btnCancel:cc.Button,title:cc.Label,content:cc.Label,_onok:null,_oncancel:null},onLoad:function(){},onBtnClicked:function(e){"btn_ok"==e.target.name?this._onok&&this._onok():"btn_cancel"==e.target.name&&"function"==typeof this._oncancel&&this._oncancel(),this.alert.active=!1,this._onok=null,this._oncancel=null},show:function(e,t,n,i){this.alert.active=!0,this._onok=n,this._oncancel=i,this.content.string=t,i?(this.btnCancel.node.active=!0,this.btnOK.node.x=-100,this.btnCancel.node.x=100):(this.btnCancel.node.active=!1,this.btnOK.node.x=0)},hide:function(){this.alert.active=!1},onBtnClose:function(){this.alert.active=!1,this._onok=null,this._oncancel=null}}),cc._RF.pop()},{}],btnGroupMov:[function(e,t,n){"use strict";cc._RF.push(t,"b10f3Q06ANCDZavauBrucsv","btnGroupMov"),cc.Class({extends:cc.Component,properties:{content:cc.Node,maskNode:cc.Node,direction:0,_container:null,_isMoveOut:!1,_isMoving:!1},onLoad:function(){this.initMoveOringPos()},start:function(){},setRedPointShow:function(e){if(this._container){this._container.getChildByName("btnMessage").children[0].active=e}},setMoveOut:function(e){this._isMoveOut=e,this.initMoveOringPos(),this.startMov()},initMoveOringPos:function(){if(!this._container&&this.content.children.length>0&&(this._container=this.content.children[0]),this._container){var e,t=this._container.height;if(0==this.direction)e=this._isMoveOut?0:-t,this._container.y=e}},setBtnShow:function(e,t){this._container&&(this._container.getChildByName(e).active=t)},startMov:function(){var e=new cc.Vec2,t=new cc.Vec2;0==this.direction&&(e.x=this._container.x,e.y=this._container.y,t.x=this._container.x,this._isMoveOut?t.y=0:t.y=-this._container.height),this._isMoving=!0;var n=cc.sequence(cc.moveTo(.2,t),cc.callFunc(function(){console.log("moveEnd"),this._isMoving=!1},this,null));this._container.runAction(n)},initMaskNode:function(){this._container&&(this.maskNode.width=this._container.width,this.maskNode.height=this._container.height)},addContainer:function(e){var t=cc.instantiate(e);t.active=!0,t.x=0,t.y=0,this._container&&(this._container.removeFromParent(),this._container=null),this._container=t,this.content.addChild(this._container),this.initMaskNode(),this.setMoveOut(!1)},onBtnClick:function(){this._isMoving||(this._isMoveOut=!this._isMoveOut),this.startMov()}}),cc._RF.pop()},{}],cardTypeSelectPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"99882TeJPlLXbm7FNpctePu","cardTypeSelectPrefab"),cc.Class({extends:cc.Component,properties:{_cards:null,_origin:null,cardsNode:cc.Node},onLoad:function(){},initCards:function(e){this._cards=e.cards,this._origin=e.origin;var t=this.cardsNode.getComponent("cardsHold_DDZ");t.pokerType=1,t.initHolds(this._cards),t.refreshHolds(),this.setCaishenCardsUp()},setCaishenCardsUp:function(){for(var e=this.cardsNode.getComponent("cardsHold_DDZ"),t=this._cards,n=this._origin,i=[],a=0;a<t.length;a++)n[a]==dc.GameDataMgr.DDZDataMgr.caishenID&&i.push(t[a]);for(a=0;a<i.length;a++){e.getCardByID(i[a]).getComponent("pokerPrefab").setMagicCard(i[a])}},getChildWidth:function(){return this.cardsNode.getComponent("cardsHold_DDZ").getChildWidth()}}),cc._RF.pop()},{}],cardsHold_DB:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}cc._RF.push(t,"c5432ucKI5Fu7Nq8b/GPUff","cardsHold_DB"),cc.Class({extends:cc.Component,properties:{holdsParent:cc.Node,directType:0,refreshType:0,distantx:40,distanty:0,pokerType:0,Side:0,touchLayer:cc.Node,numOfPerLine:100,distanceOfLine:30},onLoad:function(){this.setTouchEvents()},setTouchEndBack:function(e){this._TouchEndBack=e},setTouchEvents:function(){this.touchLayer&&(this.touchLayer.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.touchLayer.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchLayer.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.touchLayer.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this))},onTouchBegin:function(e){console.log("onTouchBegin"),console.log(JSON.stringify(e.touch));var t=e.getTouches()[0].getLocation();this._touchBegan=this.holdsParent.convertToNodeSpace(t);var n=this.holdsParent.children;this._getCardForTouch(this._touchBegan,n)},onTouchMoved:function(e){console.log("onTouchMoved");var t=e.getTouches()[0].getLocation();this._touchMoved=this.holdsParent.convertToNodeSpace(t);var n=this.holdsParent.children;this._getCardForTouch(this._touchMoved,n),this._checkSelectCardReserve(this._touchBegan,this._touchMoved)},onTouchEnd:function(e){console.log("onTouchEnd");e.touch._point;var t=this.holdsParent.children;for(var n in t){var i=t[n].getComponent("pokerPrefab"),a=new cc.Color(255,255,255);t[n].color=a,i.setMaskShow(!1),!0===t[n].isChiose&&(t[n].isChiose=!1,i.setSelectState())}this._TouchEndBack&&this._TouchEndBack()},onTouchCancel:function(e){console.log("onTouchCancel");var t=this.holdsParent.children;for(var n in t){var i=new cc.Color(255,255,255);t[n].color=i,t[n].getComponent("pokerPrefab").setMaskShow(!1),!0===t[n].isChiose&&(t[n].isChiose=!1)}},_getCardForTouch:function(e,t){for(var n=0;n<t.length;n++){var i,a,o=t[n].getBoundingBox();if(n==t.length-1?(i=o.x,a=o.width):(i=o.x,a=this.distantx),o.x=i,o.width=a,cc.rectContainsPoint(o,e)){t[n].isChiose=!0;var s=new cc.Color(211,211,211);return t[n].color=s,t[n].getComponent("pokerPrefab").setMaskShow(!0),t[n]}}},_checkSelectCardReserve:function(e,t){for(var n=e.x<t.x?e:t,i=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y)>5?Math.abs(e.y-t.y):5,o=cc.rect(n.x,n.y,i,a),s=this.holdsParent.children,r=0;r<s.length;r++){var c,l=s[r].getBoundingBox();if(r==s.length-1?(c=l.x,i=l.width):(c=l.x,i=this.distantx),l.x=c,l.width=i,!cc.rectIntersectsRect(l,o)){s[r].isChiose=!1;var h=new cc.Color(255,255,255);s[r].getComponent("pokerPrefab").setMaskShow(!1),s[r].color=h}}if(n===t)for(var d=s.length-1;d>=0;d--)if(n.x-s[d].x>84){h=new cc.Color(255,255,255);s[d].color=h,s[d].isChiose=!1,s[d].getComponent("pokerPrefab").setMaskShow(!1)}},setTouchLayerWH:function(){if(this.touchLayer){var e,t,n=this.holdsParent.children;0==n.length?(e=0,t=0):(e=this.distantx*n.length+n[0].width,t=n[0].height),this.touchLayer.width=e,this.touchLayer.height=t}},setFreshType:function(e){this.refreshType=e},removeChilds:function(){this.holdsParent.removeAllChildren()},setBackBgType:function(e,t){var n=this.holdsParent;if(e<=n.childrenCount)for(var i=0;i<e;i++){n.children[i].getComponent("pokerPrefab").setBackTypeState(t)}},setLightCard:function(e,t,n){if(0==e){var i=this.getCardByID(t);if(i){var a=i.getComponent("pokerPrefab");a.setLightState(n),a.setLightHeightChange(n)}}else if(1==e){var o=this.holdsParent.children[this.holdsParent.childrenCount-1].getComponent("pokerPrefab");n?(o.setLightState(!0),o.setCard(t)):(o.setLightState(!1),o.setCard(0))}},initHolds:function(e,t,n){var i=this.holdsParent;if(this.removeAllHolds(),e.length<i.childrenCount)return this.removeAllHolds(),void this.addHolds(e,t);for(var a=0;a<e.length;a++){var o;o=null==n?this.Side:n;var s=dc.ResourceMgr.pokerPre[o],r=cc.instantiate(s);r.active=!0,i.addChild(r);var c=r.getComponent("pokerPrefab");c&&(c.setType(this.pokerType),c.setCard(e[a]),r.isChiose=!1)}},getChildWidth:function(){var e=this.holdsParent.children.length;return 0==e?0:(e-1)*this.distantx+this.holdsParent.children[0].width},addHolds:function(e,t){for(var n=this.holdsParent,i=0;i<e.length;i++){var a=dc.ResourceMgr.pokerPre[this.Side],o=cc.instantiate(a);if(o.active=!0,n.addChild(o),0==this.Side){var s=o.getComponent("pokerPrefab");s.setType(this.pokerType),s.setCard(e[i]),o.isChiose=!1}}},setTopsTurnAction:function(e,t){for(var n=this.holdsParent,i=0;i<n.childrenCount;i++){var a=n.children[i];n.childrenCount-1==i?this.turnOverAction(a,e[i],e,t):this.turnOverAction(a,e[i],e)}},turnOverAction:function(e,t,n,i){var a=cc.scaleTo(.2,0,1),o=cc.scaleTo(.2,1,1),s=cc.sequence(a,cc.callFunc(function(){var n=e.getComponent("pokerPrefab");n.initData(),n.setCard(t)},this,null),o,cc.callFunc(function(){i&&i(n)},this,null));e.runAction(s)},removeAllHolds:function(){this.holdsParent.removeAllChildren()},clearSelect:function(){for(var e=this.holdsParent,t=0;t<e.childrenCount;t++){var n=e.children[t].getComponent("pokerPrefab");n._isSelect&&n.setSelectState()}},sortLocalZOrder:function(e){var t=this.holdsParent;if(e)for(var n=1,i=0;i<t.childrenCount;i++){t.children[i].zIndex=n,n++}else for(n=100,i=0;i<t.childrenCount;i++){t.children[i].zIndex=n,n--}},refreshHolds:function(){0==this.directType?0==this.refreshType?this.refresh0():1==this.refreshType?this.refresh1():2==this.refreshType&&this.refresh2():1==this.directType&&(0==this.refreshType?this.refresh_vertical0():1==this.refreshType?this.refresh_vertical1():2==this.refreshType&&this.refresh_vertical2()),this.setTouchLayerWH()},refresh_vertical0:function(){for(var e=this.distantx,t=this.distanty,n=this.holdsParent,i=-(n.childrenCount-1)/2*t,a=0;a<n.childrenCount;a++){var o=n.children[a],s=i+t*a,r=e*a;o.y=s,o.x=r}},refresh_vertical1:function(){for(var e=this.distantx,t=this.distanty,n=this.holdsParent,i=0;i<n.childrenCount;i++){var a=n.children[i],o=t*i,s=e*i;a.y=o,a.x=s}},refresh_vertical2:function(){for(var e=this.distantx,t=this.distanty,n=this.holdsParent,i=0;i<n.childrenCount;i++){var a=n.children[i],o=t*i,s=e*i;a.y=o,a.x=s}},refresh0:function(){for(var e=this.distantx,t=this.holdsParent,n=-(t.childrenCount-1)/2*e,i=0;i<t.childrenCount;i++){var a=i%this.numOfPerLine,o=parseInt(i/this.numOfPerLine),s=t.children[i],r=n+e*a,c=-this.distanceOfLine*o;s.getComponent("pokerPrefab")._mopai&&(c+=20),s.x=r,s.y=c}},refresh1:function(){for(var e=this.distantx,t=this.holdsParent,n=0;n<t.childrenCount;n++){var i=n%this.numOfPerLine,a=parseInt(n/this.numOfPerLine),o=t.children[n],s=i*e,r=-this.distanceOfLine*a;o.getComponent("pokerPrefab")._mopai&&(r+=20),o.x=s,o.y=r}},refresh2:function(){for(var e=this.distantx,t=this.holdsParent,n=-e*(t.childrenCount>this.numOfPerLine?this.numOfPerLine-1:t.childrenCount-1),i=0;i<t.childrenCount;i++){var a=i%this.numOfPerLine,o=parseInt(i/this.numOfPerLine),s=t.children[i],r=n+a*e;s.x=r;var c=-this.distanceOfLine*o;s.getComponent("pokerPrefab")._mopai&&(c+=20),s.y=c}},getLastCardWpos:function(){var e=new cc.Vec2,t=this.holdsParent;if(0==t.childrenCount){var n=new cc.Vec2(0,0);e=t.convertToWorldSpaceAR(n)}else{var i=t.children[0];(n=new cc.Vec2).x=i.x,n.y=i.y,e=t.convertToWorldSpaceAR(n)}return e},setBombShadow:function(e){for(var t=GameDataMgr.DBDataMgr.getCardsMap(e),n=this.holdsParent,i=0;i<n.childrenCount;i++){var a=n.children[i].getComponent("pokerPrefab");if(!a||0==a._cardID)return;var o=GameDataMgr.DBDataMgr.getCardValue(a._cardID);t[o]&&t[o]>=4?a.setBombShow(!0):a.setBombShow(!1)}},getSelectCards:function(){for(var e=[],t=this.holdsParent,n=0;n<t.childrenCount;n++){var i=t.children[n];i.getComponent("pokerPrefab")._isSelect&&e.push(i)}return e},getCardByID:function(e){for(var t=null,n=0;n<this.holdsParent.childrenCount;n++){var i=this.holdsParent.children[n];if(i.getComponent("pokerPrefab")._cardID==e){t=i;break}}return t},getFirstChild:function(){return 0==this.holdsParent.childrenCount?null:this.holdsParent.children[0]},getParent:function(){return this.holdsParent},setTipsCards:function(e){var t=[];t.push.apply(t,i(e));for(var n=this.holdsParent,a=0;a<n.childrenCount;a++){var o=(s=n.children[a].getComponent("pokerPrefab"))._cardID;s._isSelect&&s.setSelectState()}for(a=0;a<n.childrenCount;a++){o=(s=n.children[a].getComponent("pokerPrefab"))._cardID;var s,r=t.indexOf(o);r>=0&&(t.splice(r,1),s._isSelect||s.setSelectState())}}}),cc._RF.pop()},{}],cardsMgr_DB:[function(e,t,n){"use strict";cc._RF.push(t,"f1802jqWDJG4paRlBd9aZyb","cardsMgr_DB");e("DBTips"),e("CardTypeCheck");cc.Class({extends:cc.Component,properties:{holdsNode:[cc.Node],holdsNode2:[cc.Node],outcardPoolsNode:[cc.Node],cardNumNode:[cc.Node]},start:function(){this.setCardTouchBack()},setCardTouchBack:function(){var e=this.holdsNode[0].getComponent("cardsHold_DB"),t=UIMgr.getPageScript(UIMgr.DBGame);e.setTouchEndBack(t.doBtnOutcardEnbale.bind(t))},onEnable:function(){},setHoldsNodeType:function(e){var t;1==e?t=!0:2==e&&(t=!1);for(var n=0;n<this.holdsNode.length;n++)this.holdsNode[n].active=t;for(n=0;n<this.holdsNode2.length;n++)this.holdsNode2[n].active=!t},setcardNumsShow:function(e){for(var t=0;t<this.cardNumNode.length;t++)0!=t&&(this.cardNumNode[t].active=e)},getBeforeMovSeatsCards:function(e){for(var t=e.holds?e.holds.length:0,n=GameDataMgr.DBDataMgr.getMode(),i=dc.deepCopy(GameDataMgr.DBDataMgr.cardsData),a=0;a<i.length;a++)if(0==a)i[a].holds=e.holds;else if(2==a)if(1==n)i[a].holds=e.pholds;else for(var o=0;o<t;o++)i[a].holds.push(0);else for(o=0;o<t;o++)i[a].holds.push(0);return i},sendCards:function(e,t,n){GameDataMgr.DBDataMgr.firstSendIndex,GameDataMgr.DBDataMgr.select_poker;for(var i=this.getBeforeMovSeatsCards(e),a=0;a<i.length;a++)0==a?this.createHoldsMove(i[a].holds,a,t,n):this.createHoldsMove(i[a].holds,a,t)},createHoldsMove:function(e,t,n,i){for(var a=[],o=0;o<e.length;o++)a.push(e[o]),o==e.length-1?this.startAni(a,o,t,n,i):this.startAni(a,o,t,n)},startAni:function(e,t,n,i,a){var o=[].concat(e);(function(){var e=cc.sequence(cc.delayTime(.1*t+.05),cc.callFunc(function(){this.initHoldsByLocal(n,o,n);var e=GameDataMgr.button,t=GameDataMgr.DBDataMgr.select_poker,i=GameDataMgr.getLocalSide(e);if(-1!=t&&i==n){var s,r=this.holdsNode[i].getComponent("cardsHold_DB");if(s=r.getCardByID(t))s.getComponent("pokerPrefab").setFirstMopai(!0),r.refreshHolds();if(1==n||3==n)(s=r.getFirstChild()).getComponent("pokerPrefab").setCard(t)}a&&a()},this,null));i.runAction(e)}).bind(this)(o,t,n,i,a)},initHoldsNumByLocal:function(e,t){if(0!=e){var n=this.holdsNode[e],i=n.getComponent("cardsHold_DB"),a=this.cardNumNode[e],o=a.children[0].getComponent(cc.Label),s=a.children[1].getComponent(cc.Label);if(parseInt(t)>=10)o.node.active=!0,s.node.active=!1,o.string=t;else{if(!(parseInt(t)>0))return o.node.active=!1,void(s.node.active=!1);o.node.active=!1,s.node.active=!0,s.string=t}var r=i.getFirstChild(),c=i.getLastCardWpos(),l=a.parent.convertToNodeSpaceAR(c);2==e?(r.width/2*n.scaleX,l.x=l.x-55,l.y=l.y-40):(r.height/2*n.scaleY,l.y=l.y-30,l.x=1==e?l.x+10:l.x-10),a.x=l.x,a.y=l.y}},initHoldsByLocal:function(e,t,n){t=GameDataMgr.DBDataMgr.sortDB(t);var i=this.holdsNode[e].getComponent("cardsHold_DB");i.removeChilds(),0==e?(i.initHolds(t,!0,e),i.sortLocalZOrder(!0)):(i.initHolds(t,!0,e),0==t[t.length-1]?i.sortLocalZOrder(!1):i.sortLocalZOrder(!0)),i.setBombShadow(t),i.refreshHolds(),0!=e&&this.initHoldsNumByLocal(e,t.length)},initHoldsByLocal2:function(e,t){t=GameDataMgr.DBDataMgr.sortDB(t);var n=this.holdsNode2[e].getComponent("cardsHold_DB");n.initHolds(t,!0,0),n.refreshHolds(),1==e&&n.sortLocalZOrder(!0)},removePoolsByLocal:function(e){this.outcardPoolsNode[e].getComponent("cardsHold_DB").removeChilds()},setCenterCards:function(e,t){var n=GameDataMgr.DBDataMgr.sortDB(t),i=this.outcardPoolsNode[e].getComponent("cardsHold_DB");i.initHolds(n),i.refreshHolds()},clearAllCards:function(){this.clearHolds(),this.clearHolds2(),this.clearAllPools()},clearAllPools:function(){for(var e=0;e<this.outcardPoolsNode.length;e++){this.outcardPoolsNode[e].getComponent("cardsHold_DB").removeChilds()}},clearHolds:function(){for(var e=0;e<this.holdsNode.length;e++){this.holdsNode[e].getComponent("cardsHold_DB").removeChilds()}},clearHolds2:function(){for(var e=0;e<this.holdsNode2.length;e++){this.holdsNode2[e].getComponent("cardsHold_DB").removeChilds()}},setTipsCards:function(e){this.holdsNode[0].getComponent("cardsHold_DB").setTipsCards(e)},getOutcardData:function(){for(var e=this.holdsNode[0].getComponent("cardsHold_DB").getSelectCards(),t=[],n=0;n<e.length;n++){var i=e[n].getComponent("pokerPrefab");t.push(i._cardID)}return t},outCardHandle:function(e){var t=GameDataMgr.getSeatIndexByID(e.userId),n=GameDataMgr.getLocalSide(t),i=GameDataMgr.DBDataMgr.cardsData[t].holds,a=[];if(GameDataMgr.DBDataMgr.cardsData[t].isMingpai)a=i;else for(var o=0;o<i.length;o++)a.push(0);this.initHoldsByLocal(n,a,t),this.setCardPoolCards(t,e.pai)},setCardPoolCards:function(e,t){var n=GameDataMgr.getLocalSide(e),i=this.outcardPoolsNode[n].getComponent("cardsHold_DB");i.initHolds(t),i.refreshHolds()},OnClickClearSelect:function(){this.clearOutCardSelect(),UIMgr.getPageScript(UIMgr.DBGame).doBtnOutcardEnbale()},clearOutCardSelect:function(){this.holdsNode[0].getComponent("cardsHold_DB").clearSelect()},OnClickTmp:function(){UIMgr.pushUI(UIMgr.HallPage)}}),cc._RF.pop()},{CardTypeCheck:"CardTypeCheck",DBTips:"DBTips"}],chat_public:[function(e,t,n){"use strict";cc._RF.push(t,"baf6flDuQdG0Z2zXmFnyFIN","chat_public"),cc.Class({extends:cc.Component,properties:{_controlSp:null,chatNode:cc.Node,MenuNode:cc.Node,chatEditBox:cc.EditBox,quickchatItemNode:cc.Node,quickchatItemInstant:cc.Prefab,emojiNode:cc.Node,_quickchatsArr:[],_myQuickList:[],ViewList0:cc.Node,chatsIndex:-1,_interfaceType:0,seatsMgr:cc.Node,effectNode:cc.Node,_curSelectType:0,recordListContent:cc.Node,recardsListNode:cc.Node,takeItemPrefab:cc.Prefab,toggles:cc.Node,observeList:cc.Node,editShadow:cc.Node},onLoad:function(){this.startInit()},setControlSp:function(e){this._controlSp=e},getMenuSp:function(){return this._controlSp.getMenuNodeSp()},getEmojiSp:function(){},getSeatsMgrSp:function(){return this._controlSp.getSeatsMgrSp()},getEffectPubSp:function(){},setMenuNode:function(e){this.MenuNode=e},setEmojiNode:function(e){this.emojiNode=e},setSeatMgr:function(e){this.seatsMgr=e},setEffectNode:function(e){this.effectNode=e},startInit:function(){this.editShadow.active=!1;var e=GameDataMgr.getIsObserver(),t=this.toggles,n=t.getChildByName("toggle1"),i=t.getChildByName("toggle2"),a=t.getChildByName("toggle3");e?(n.active=!1,i.active=!1,a.active=!0,this._curSelectType=2):(this.initQuickChatConf(),n.active=!0,i.active=!0,a.active=!0,this._curSelectType=0),this.changeInterfaceByType(this._curSelectType);var o=GameDataMgr.chatInfoList;this.initRecordListByData(o)},changeInterfaceByType:function(e){0==e?(this.emojiNode.active=!0,this.quickchatItemNode.active=!1,this.recardsListNode.active=!1):1==e?(this.emojiNode.active=!1,this.quickchatItemNode.active=!0,this.recardsListNode.active=!1,this.initQuickChatList(GameDataMgr.seatIndex)):2==e&&(this.recardsListNode.active=!0,this.emojiNode.active=!1,this.quickchatItemNode.active=!1)},initRecordListByData:function(e){if(e){this.recordListContent.removeAllChildren();for(var t=0;t<e.length;t++){var n=e[t];this.recardItem(n,n.type)}}else console.log("record null")},openListType:function(){0==this._curSelectType?this.clearQuickChatItemNode():1==this._curSelectType?this.changeInterfaceByType(this._curSelectType):2==this._curSelectType&&(this.clearQuickChatItemNode(),this.updateTipsPointByType())},updateTipsPointByType:function(){2==this._curSelectType&&(this.setTipsShow(!1),this.updateRecordListPos())},updateRecordListPos:function(){var e=this.recordListContent.parent.height,t=this.recordListContent.height>e?this.recordListContent.height-e:0;this.recordListContent.y=t},setTipsShow:function(e){GameDataMgr.getIsObserver()?this.MenuNode.getComponent("menuMgr_DDZ").setTipsShow(e):this.seatsMgr.getComponent("seatsMgr_DDZ").setTipsShow(e)},onBtnToggleSelect:function(e){var t=e.target.parent;"toggle1"==t.name?this._curSelectType=0:"toggle2"==t.name?this._curSelectType=1:"toggle3"==t.name&&(this._curSelectType=2),this.changeInterfaceByType(this._curSelectType),this.updateTipsPointByType()},onBtnCloseChat:function(e){this.chatNode.active=!1,this.clearQuickChatItemNode()},clearQuickChatItemNode:function(){this.quickchatItemNode.removeAllChildren()},getMylist:function(){this._myQuickList;var e=GameDataMgr.seats[GameDataMgr.seatIndex].sex;return GameDataMgr.isPutonghua?1==e?this._myQuickList[0]:2==e?this._myQuickList[2]:this._myQuickList[0]:1==e?this._myQuickList[1]:2==e?this._myQuickList[3]:this._myQuickList[1]},getQuickArr:function(e){var t=[],n=GameDataMgr.seats[e];return null!=n.sex?1==n.sex?(this.chatsIndex=0,console.log("PT_Male"),t=this._quickchatsArr[0]):2==n.sex?(console.log("PT_Female"),this.chatsIndex=1,t=this._quickchatsArr[1]):(this.chatsIndex=1,t=this._quickchatsArr[0]):(console.log("PT_UndefineMale"),this.chatsIndex=0,t=this._quickchatsArr[0]),t},initQuickChatList:function(e){this.clearQuickChatItemNode();var t=this.getMylist(),n=(GameDataMgr.seats[e],this.quickchatItemNode),i=0;for(var a in t){var o=t[a],s=cc.instantiate(this.quickchatItemInstant);s.on(cc.Node.EventType.TOUCH_END,this.onQuickChatItemClicked,this),n.addChild(s),s.index=o.index,s.getChildByName("lblword").getComponent(cc.Label).string=o.content,s.y=i,i+=s.height}n.height=i},getLanguage:function(e,t){var n=!0;return 2==GameDataMgr.seats[e].sex?t>=0&&t<=9||t>=300&&t<400?n=!0:(t>=10&&t<100||t>=400&&t<500)&&(n=!1):t>=0&&t<=6&&t>=100&&t<200?n=!0:(t>=7&&t<100||t>=200&&t<300)&&(n=!1),n},initQuickChatConf:function(){var e=[];this._myQuickList=[],this._quickchatsArr=[],(t={})[(n={index:0,content:"\u4e0d\u6015\u795e\u4e00\u6837\u7684\u5bf9\u624b\uff0c\u5c31\u6015\u732a\u4e00\u6837\u7684\u961f\u53cb\u554a",sound:"QuickChat_0.mp3"}).index]=n,e[n.index]=n,t[(n={index:1,content:"\u5dee\u751f\u5dee\u7684\u4e00\u584c\u7cca\u6d82\u7684",sound:"QuickChat_1.mp3"}).index]=n,e[n.index]=n,t[(n={index:2,content:"\u9ad8\u624b\u4f60\u7684\u724c\u6280\u53ef\u4ee5\u7684",sound:"QuickChat_2.mp3"}).index]=n,e[n.index]=n,t[(n={index:5,content:"\u5c0f\u59d0\u59b9\u505a\u4e2a\u597d\u670b\u53cb\u5450",sound:"QuickChat_5.mp3"}).index]=n,e[n.index]=n,this._myQuickList.push(e);e=[];t[(n={index:7,content:"\u4f60\u592a\u7b28\u4e86",sound:"QuickChat_0.mp3"}).index]=n,e[n.index]=n,t[(n={index:8,content:"\u4f60\u592a\u6162\u4e86\uff0c\u5feb\u70b9\u51fa\u724c",sound:"QuickChat_1.mp3"}).index]=n,e[n.index]=n,t[(n={index:9,content:"\u4ec0\u4e48\u53eb\u7f18\u5206\uff0c\u78b0\u5230\u4f60\u5c31\u662f\u6211\u7684\u7f18\u5206",sound:"QuickChat_2.mp3"}).index]=n,e[n.index]=n,t[(n={index:15,content:"\u4eba\u5012\u9709\u559d\u51c9\u6c34\u90fd\u585e\u7259",sound:"QuickChat_8.mp3"}).index]=n,e[n.index]=n,t[(n={index:10,content:"\u5c0f\u59d0\u59b9\u5728\u5e72\u561b,\u52a8\u4f5c\u5feb\u70b9",sound:"QuickChat_10.mp3"}).index]=n,e[n.index]=n,this._quickchatsArr.push(t),this._myQuickList.push(e);var t;e=[];(t=[])[(n={index:0,content:"\u54ce\u5440\uff0c\u4f60\u5b75\u9e21\u86cb\u5462\uff0c\u52a8\u4f5c\u5feb\u4e00\u70b9\u597d\u4e0d\u5566",sound:"QuickChat_0.mp3"}).index]=n,e[n.index]=n,t[(n={index:1,content:"\u521d\u6765\u4e4d\u5230\uff0c\u8bf7\u5927\u5bb6\u591a\u591a\u5173\u7167",sound:"QuickChat_1.mp3"}).index]=n,e[n.index]=n,t[(n={index:2,content:"\u4e13\u5fc3\u6253\u724c\uff0c\u4e0d\u8981\u804a\u5929\u4e86\u597d\u5417",sound:"QuickChat_2.mp3"}).index]=n,e[n.index]=n,t[(n={index:3,content:"\u4f69\u670d\uff0c\u7684\u786e\u662f\u9ad8\u624b",sound:"QuickChat_3.mp3"}).index]=n,e[n.index]=n,t[(n={index:300,content:"\u666e\u5973\u8f93\u5149\u4e48\u7701\u5fc3,\u56de\u5bb6\u7761\u89c9",sound:"QuickChat_300.mp3"}).index]=n,e[n.index]=n,this._myQuickList.push(e);var n;e=[];t[(n={index:12,content:"\u8fd9\u724c\u6253\u5f97\u592a\u81ed\u4e86\uff0c\u56de\u53bb\u7ec3\u7ec3\u518d\u6765",sound:"QuickChat_1.mp3"}).index]=n,e[n.index]=n,t[(n={index:13,content:"\u5feb\u70b9\u51fa\u4e0d\u8981\u62d6\u5ef6\u65f6\u95f4\u4e86",sound:"QuickChat_2.mp3"}).index]=n,e[n.index]=n,t[(n={index:17,content:"\u4f69\u670d\u4f69\u670d\uff0c\u7684\u786e\u662f\u9ad8\u624b",sound:"QuickChat_7.mp3"}).index]=n,e[n.index]=n,t[(n={index:18,content:"\u4eca\u5929\u8138\u8272\u4e0d\u592a\u597d\uff0c\u4f30\u8ba1\u8981\u8f93\u7684",sound:"QuickChat_8.mp3"}).index]=n,e[n.index]=n,t[(n={index:19,content:"\u8d22\u795e\u8d22\u795e\uff0c\u6551\u6551\u7a77\u4eba",sound:"QuickChat_5.mp3"}).index]=n,e[n.index]=n,t[(n={index:20,content:"\u4f60\u771f\u662f\u4e2a\u5012\u9709\u9b3c",sound:"QuickChat_12.mp3"}).index]=n,e[n.index]=n,t[(n={index:21,content:"\u8f93\u5149\u6309\u4f46,\u7761\u89c9\u53bb\u4e86",sound:"QuickChat_13.mp3"}).index]=n,e[n.index]=n,this._quickchatsArr.push(t),this._myQuickList.push(e)},onQuickChatItemClicked:function(e){this.chatNode.active=!1;var t=e.target;console.log(t.index);var n={content:t.index};n.sender=dc.UserMgr.userId,console.log(n),dc.net.send("quickChat",n);var i=this.seatsMgr.getComponent("seatsMgr_DDZ"),a={sender:GameDataMgr.seats[GameDataMgr.seatIndex].userId,content:t.index};i.sendQuickchatHandle(a)},onBtnSendChat:function(e){if(""!=this.chatEditBox.string){var t={};t.content=this.chatEditBox.string,t.sender=dc.UserMgr.userId,dc.net.send("chat",t);var n={sender:dc.UserMgr.userId,content:this.chatEditBox.string},i=GameDataMgr.getUserType(dc.UserMgr.userId);if(0==i){var a=this.seatsMgr.getComponent("seatsMgr_DDZ");GameDataMgr.seats[GameDataMgr.seatIndex];a.sendChat(n),this.recardItem(n,0),n.type=0,GameDataMgr.chatInfoList.push(n),GameDataMgr.chatInfoList.length>50&&GameDataMgr.chatInfoList.shift()}GameDataMgr.isObserver?this.chatNode.active=!0:(this.chatNode.active=!1,this.clearQuickChatItemNode()),this.chatEditBox.string=""}else dc.publicWindow.alert.show("\u63d0\u793a","\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")},sendChatBack:function(e){this.node.active?dc.UserMgr.userId==e.sender&&this.updateTipsPointByType():this.clearQuickChatItemNode()},onEmojiItemClicked:function(e){var t;console.log(e.target.name),this.chatNode.active=!1,this.clearQuickChatItemNode();for(var n=0;n<36;n++)if(e.target.name=="btnBQ_"+(n+1)){t=n+1;break}var i={};i.content=t,i.sender=dc.UserMgr.userId,dc.net.send("faceB",i);var a=this.effectNode.getComponent("EffectMgrView_DDZ"),o={sender:GameDataMgr.seats[GameDataMgr.seatIndex].userId,content:t};a.sendExpression(o)},recardItem:function(e,t){var n=cc.instantiate(this.takeItemPrefab),i=n.getComponent("takeItem");(i.setType(t),i.initData(e),this.recordListContent.addChild(n),this.recordListContent.childrenCount>50)&&this.recordListContent.children[0].removeFromParent();var a=this.recordListContent.childrenCount;this.recordListContent.height=a*this.takeItemPrefab.data.height}}),cc._RF.pop()},{}],circleMemberItem:[function(e,t,n){"use strict";cc._RF.push(t,"4059cB/xLxHHYtm+twI3gma","circleMemberItem");e("constants");cc.Class({extends:cc.Component,properties:{lblUserID:cc.Label,lblName:cc.Label,lblGameNum:cc.Label,lblUTime:cc.Label,icon:cc.Node,btnDel:cc.Node,bgNode:cc.Node},start:function(){},setDelFunc:function(e){this._func=e},onBtnDel:function(e){this._func&&this._func(e)},initUserTime:function(e){var t;t=0==e?"\u5728\u7ebf":e,this.lblUTime.string=t},initGameNum:function(e){this.lblGameNum.string=e},doOwnerHide:function(e){this.btnDel.active=!e},initItemData:function(e,t){this.setBgByIndex(t),this.lblUserID.string=e.userId,this.lblName.string=e.name||"";var n=e.headImg||"";this.setName(e.name||""),this._userID=e.userId,this.btnDel.userID=e.userId;var i=GroupDataMgr.userInfoMap[e.userId],a=GroupDataMgr.getUsersActiveTime(e.re_time);(this.initUserTime(a),i&&i.iconSFrame)?this.icon.getComponent(cc.Sprite).spriteFrame=i.iconSFrame:this.icon.getComponent("ImageLoader_Gold").setIcon(n,e.userId,function(e){e&&i&&(i.iconSFrame=e)})},initIconAndName:function(e,t){this.setBgByIndex(t),this.setName(e.name||"");var n=GroupDataMgr.userInfoMap[e.userId],i=e.headImg||"";n&&n.iconSFrame?this.icon.getComponent(cc.Sprite).spriteFrame=n.iconSFrame:this.icon.getComponent("ImageLoader_Gold").setIcon(i,e.userId,function(e){e&&n&&(n.iconSFrame=e)})},setName:function(e){var t;e.length>9?t=e.substr(0,8)+"...":t=e;this.lblName.string=t},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)}}),cc._RF.pop()},{constants:4}],circleReqItem:[function(e,t,n){"use strict";cc._RF.push(t,"ac247CLsTlOe74aTRATguZF","circleReqItem"),cc.Class({extends:cc.Component,properties:{lblUserID:cc.Label,lblName:cc.Label,icon:cc.Node,_userID:null,bgNode:cc.Node},start:function(){},setClubID:function(e){this._clubID=e},initItemData:function(e,t){this.setBgByIndex(t),this.lblUserID.string=e.userId,this.setName(e.name||"");var n=e.headImg||"";this._userID=e.userId||null,this._clubID=e.clubId||null;var i=GroupDataMgr.userInfoMap[e.userId];i&&i.iconSFrame?this.icon.getComponent(cc.Sprite).spriteFrame=i.iconSFrame:this.icon.getComponent("ImageLoader_Gold").setIcon(n,e.userId,function(e){e&&i&&(i.iconSFrame=e)})},setName:function(e){var t;e.length>6?t=e.substr(0,5)+"...":t=e;this.lblName.string=t},onBtnReqAgree:function(){var e=parseInt(this._userID);Hall_ReqAndRes.clubReqOpt(1,this._clubID,e,function(t){t.code?publicWindow.alert.show("",t.msg):(this.node.removeFromParent(),GroupDataMgr.addMember(e),GroupDataMgr.getGroupLayerSp().setMembersInfo(GroupDataMgr.memberNum))}.bind(this)),this.node.removeFromParent()},onBtnReqDisagree:function(){var e=parseInt(this._userID);Hall_ReqAndRes.clubReqOpt(0,this._clubID,e,function(e){e.code?publicWindow.alert.show("",e.msg):this.node.removeFromParent()}.bind(this))},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)}}),cc._RF.pop()},{}],client:[function(e,t,n){"use strict";cc._RF.push(t,"787727OJ6pJwbc47uLHYony","client"),function(){var e=window.Protocol,n=window.protobuf,i=window.decodeIO_protobuf,a=null,o=null,s=e.Package,r=e.Message,c=window.EventEmitter,l=window.rsa;"undefined"!=typeof window&&"undefined"!=typeof sys&&sys.localStorage&&(window.localStorage=sys.localStorage);"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var h=window,d=Object.create(c.prototype);h.pomelo=d;var u=null,g=null,m=0,p={},f={},v={},_={},M={},C={},y={},N=0,I=0,b=0,S=0,D=null,G=null,R=null,w=function(){console.log("clearWSCheck:"+g),null!=g&&(clearInterval(g),g=null)};d.checkWCConnect=function(){w(),g=setInterval(function(){u||(console.log("createWSCheck"),d.reconnect())},5e3)},d.closeCheckWCConnect=w;var T,L=null,B=null,x=!1,P=null,A=null,H=0,k=5e3,O={sys:{type:"js-websocket",version:"0.0.1",rsa:{}},user:{}},E=null;d.init=function(e,t){E=t;var n=e.host,i=e.port;B=e.encode||U,L=e.decode||F;var a="ws://"+n;if(i&&(a+=":"+i),O.user=e.user,e.encrypt){T=!0,l.generate(1024,"10001");var o={rsa_n:l.n.toString(16),rsa_e:l.e};O.sys.rsa=o}R=e.handshakeCallback,J(e,a,t)};var F=d.decode=function(e){var t=r.decode(e);if(!(t.id>0)||(t.route=v[t.id],delete v[t.id],t.route))return t.body=X(t),t},U=d.encode=function(t,i,o){var s=t?r.TYPE_REQUEST:r.TYPE_NOTIFY;if(n&&y[i])o=n.encode(i,o);else if(a&&a.lookup(i)){o=new(a.build(i))(o).encodeNB()}else o=e.strencode(JSON.stringify(o));var c=0;return _&&_[i]&&(i=_[i],c=1),r.encode(t,s,c,i,o)},J=function t(r,c,l){var h=(r=r||{}).maxReconnectAttempts||5;if(A=c,window.localStorage&&window.localStorage.getItem("protos")&&0===N){var g=JSON.parse(window.localStorage.getItem("protos"));N=g.version||0,C=g.server||{},y=g.client||{},console.log("protos : ",g),n&&n.init({encoderProtos:y,decoderProtos:C}),i&&(a=i.loadJson(y),o=i.loadJson(C))}O.sys.protoVersion=N;u&&d.disconnect(),(u=new WebSocket(c)).idrandom=Math.floor(1e8*Math.random()),window.rId=u.idrandom,console.log("creatSocket idRandom:"+u.idrandom),u.binaryType="arraybuffer",u.onopen=function(t){x&&d.emit("reconnect"),V();var n=s.encode(s.TYPE_HANDSHAKE,e.strencode(JSON.stringify(O)));W(n)},u.onmessage=function(e){K(s.decode(e.data),l),b&&(S=Date.now()+b)},u.onerror=function(e){d.emit("io-error",e),console.error("socket error: ",e)},u.onclose=function(e){d.emit("close",e),d.emit("disconnect",e),console.error("socket close: ",e),console.error("rid----------: ",this.idrandom),console.error("window.rId----------: ",window.rId),this.idrandom==window.rId&&(j(),r.reconnect&&H<h&&(x=!0,H++,P=setTimeout(function(){t(r,A,l)},k),k=(k*=2)>32e3?32e3:k))}};d.disconnect=function(){u&&(console.log("closeWS idRandom:"+u.idrandom),u.close&&u.close(),console.log("disconnect"))};var j=function(){u&&(console.log("closeWS idRandom:"+u.idrandom),u.disconnect&&u.disconnect(),console.log("disconnect"),u=null),D&&(clearTimeout(D),D=null),G&&(clearTimeout(G),G=null)},V=function(){x=!1,k=5e3,H=0,clearTimeout(P)};d.request=function(e,t,n){2===arguments.length&&"function"==typeof t?(n=t,t={}):t=t||{},(e=e||t.route)&&(q(++m,e,t),p[m]=n,v[m]=e)},d.notify=function(e,t){q(0,e,t=t||{})};var q=function(e,t,n){if(T){n=JSON.stringify(n);var i=l.signString(n,"sha256");(n=JSON.parse(n)).__crypto__=i}B&&(n=B(e,t,n));var a=s.encode(s.TYPE_DATA,n);W(a)},W=function(e){u.send(e.buffer)},Q=function e(){var t=S-Date.now();t>100?G=setTimeout(e,t):(console.error("server heartbeat timeout"),d.emit("heartbeat timeout"),d.disconnect())};f[s.TYPE_HANDSHAKE]=function(t){if(501!==(t=JSON.parse(e.strdecode(t))).code)if(200===t.code){console.log("handshake",t),z(t);var n=s.encode(s.TYPE_HANDSHAKE_ACK);W(n),E&&E(u)}else d.emit("error","handshake fail");else d.emit("error","client version not fullfill")},f[s.TYPE_HEARTBEAT]=function(e){if(I){var t=s.encode(s.TYPE_HEARTBEAT);G&&(clearTimeout(G),G=null),D||(D=setTimeout(function(){D=null,W(t),S=Date.now()+b,G=setTimeout(Q,b)},I))}},f[s.TYPE_DATA]=function(e){var t=e;L&&(t=L(t)),Z(d,t)},f[s.TYPE_KICK]=function(t){t=JSON.parse(e.strdecode(t)),d.emit("onKick",t)};var K=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];f[n.type](n.body)}else f[e.type](e.body)},Z=function(e,t){if(t.id){var n=p[t.id];delete p[t.id],"function"==typeof n&&n(t.body)}else e.emit(t.route,t.body)},X=function(t){var i=t.route;if(t.compressRoute){if(!M[i])return{};i=t.route=M[i]}if(n&&C[i])return n.decode(i,t.body);if(o&&o.lookup(i))return o.build(i).decode(t.body);var a=e.utf8_read(t.body);return JSON.parse(a)},z=function(e){e.sys&&e.sys.heartbeat?(I=1e3*e.sys.heartbeat,b=2*I):(I=0,b=0),Y(e),"function"==typeof R&&R(e.user)},Y=function(e){if(console.log("initData data:",e),e&&e.sys){_=e.sys.dict;var t=e.sys.protos;if(_)for(var s in M={},_=_)M[_[s]]=s;t&&(N=t.version||0,C=t.server||{},y=t.client||{},console.log("initData",t),window.localStorage.setItem("protos",JSON.stringify(t)),n&&n.init({encoderProtos:t.client,decoderProtos:t.server}),i&&(a=i.loadJson(y),o=i.loadJson(C)))}};t.exports=d}(),cc._RF.pop()},{}],codeConfig:[function(e,t,n){"use strict";cc._RF.push(t,"01711pfa1JJf5opmynkSRf8","codeConfig"),n.retCode={OK:0,FAIL:-1,LOGIN_FIRST:-110,MAINTAIN:-111,GATE:{},CONNECTOR:{TOKEN_EXPIRED:-2,HAD_UPDATE:-3,FORCE_UPDATE:-4},HALL:{XL_BIND_HAD:-2,HAD_IN_ROOM:-2,ENTER_ROOM_FULL:-2,ENTER_ROOM_FAIL:-3,ENTER_CLUB_ROOM_NOT_MEMBER:-4,ENTER_CLUB_ROOM_CLOSEING:-5},CLUB:{HAD_ECLUB:-2,LIMIT_CLUBS:-3,NOT_CLUB_MEMBER:-4},GM:{CLUB_HAS_OWNER:-2},TASK:{NEED_PHONE:-2}},n.gameRetCode={OK:0,FAIL:-1},n.gameType={mj_hz:3,d_buckle_hz:2,pushing_hz:4},n.StatisticsGameType={mj2_hz:32,mj4_hz:34,dbuckle4_hz:24,pushing3_hz:43,pushing4_hz:44},n.createRoomType={normal:1,empty:2,club:3,hallgame:4},n.roomType={experience:0,normal:1},n.GemType={GEM:"gems",VGEM:"vgems"},n.Statistics={register:{today:"TodayRegister",yesterday:"YesterdayRegister",week:"WeekRegister",lastweek:"LastweekRegister",month:"MonthRegister",lastmonth:"LastmonthRegister"},login:{today:"TodayLogin",yesterday:"YesterdayLogin",week:"WeekLogin",lastweek:"LastweekLogin",month:"MonthLogin",lastmonth:"LastmonthLogin"},cost:{today:"TodayCost",yesterday:"YesterdayCost",week:"WeekCost",lastweek:"LastweekCost",month:"MonthCost",lastmonth:"LastmonthCost"}},n.lock_key={room:"Room_",task:"task_",rebate:"rebate_",sellgems:"sellgems_"},n.rollingnotice_key={wc1:"wc1",hzmj3201:"hzmj3201"},cc._RF.pop()},{}],comfirmApplay:[function(e,t,n){"use strict";cc._RF.push(t,"49db45w8eFAyZOi0qTkmtAt","comfirmApplay"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],createAndJoinCircle:[function(e,t,n){"use strict";cc._RF.push(t,"f6f90E3kWZOw4P+oe1VbXZD","createAndJoinCircle"),cc.Class({extends:cc.Component,properties:{redPoint:cc.Node},start:function(){},onBtnCreateCircle:function(){GroupDataMgr.getGroupLayerSp().openCreateGroupLead()},onBtnJoinCircle:function(){GroupDataMgr.getGroupLayerSp().openJoinCircleNode()},onBtnClose:function(){this.node.active=!1},onBtnMessage:function(){GroupDataMgr.getGroupLayerSp().openInviteList()},setRedpointShow:function(e){this.redPoint.active=e}}),cc._RF.pop()},{}],createCircle:[function(e,t,n){"use strict";cc._RF.push(t,"e6bf70QvxxIiYSZjHGutuKu","createCircle"),cc.Class({extends:cc.Component,properties:{eBox_name:cc.EditBox,eBox_dec:cc.EditBox,titleNode:cc.Node},start:function(){},onBtnCreatCircle:function(){Hall_ReqAndRes.modifyClubInfo(GroupDataMgr.clubID,1,this.eBox_name.string,function(e){GroupDataMgr.getGroupLayerSp().setFixHandle(e)}.bind(this)),Hall_ReqAndRes.modifyClubInfo(GroupDataMgr.clubID,2,this.eBox_dec.string,function(e){GroupDataMgr.getGroupLayerSp().setFixHandle(e)}.bind(this))},openCreateByType:function(e){this.eBox_name.string=GroupDataMgr.groupName||"",this.eBox_dec.string=GroupDataMgr.info||"",0==e?(this.titleNode.children[0].active=!0,this.titleNode.children[1].active=!1):1==e&&(this.titleNode.children[0].active=!1,this.titleNode.children[1].active=!0)},onBtnClose:function(){this.node.active=!1}}),cc._RF.pop()},{}],createGroupLead:[function(e,t,n){"use strict";cc._RF.push(t,"1e19cmSv8NBC52/qG4I/ScF","createGroupLead"),cc.Class({extends:cc.Component,properties:{_groupType:null,agentNode:cc.Node,generalNode:cc.Node,toggle:cc.ToggleContainer,pngNode:cc.Node},start:function(){this._curIndex=1},openNode:function(){var e=UserMgr.agentLevel>=2;this.agentNode.active=e,this.generalNode.active=!e},onBtnClose:function(){this.node.active=!1},OnClickChooseGameType:function(e,t){var n=e.target;"mj_hz"==n.name?this._curIndex=1:"tdh_hz"==n.name?this._curIndex=2:"db_hz"==n.name&&(this._curIndex=3)},OnClickChooseGameType2:function(e){var t=e.target;"mj_hz"==t.name?this._curIndex=1:"tdh_hz"==t.name?this._curIndex=2:"db_hz"==t.name&&(this._curIndex=3),this.changeButton(this._curIndex)},changeButton:function(e){for(var t=0;t<this.pngNode.children.length;t++){var n=this.pngNode.children[t];t==e-1?n.setScale(1.5,1.5):n.setScale(1,1)}},changeToggle:function(e){for(var t=0;t<this.toggle.node.children.length;t++){var n=this.toggle.node.children[t].getComponent(cc.Toggle);n.isChecked=t==e-1}},getSelectType:function(){var e;return 1==this._curIndex?e=3:2==this._curIndex?e=4:3==this._curIndex&&(e=2),e},OnClickCreateGroup:function(){var e=this._curIndex;e=this.getSelectType();Hall_ReqAndRes.createClub(null,null,"",e,function(e){var t=e.data;if(!e.code){var n=t.clubId;publicWindow.alert.show("","\u521b\u5efa\u5708\u5b50"+n+"\u6210\u529f")}}.bind(this))}}),cc._RF.pop()},{}],createTableInterface:[function(e,t,n){"use strict";cc._RF.push(t,"7dcb55OYmRHiLQWxoLwULYq","createTableInterface"),cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,tableType:null,_roomType:0,_roomType_mj2:0},start:function(){},openByType:function(e,t){var n;this._gametype=t,this.gt=e,3==t?3200==e?n="tips_mj2p":3400==e&&(n="tips"):2==t?n="DoubleBulck":4==t&&(n="tuidaohu");for(var i=0;i<this.contentNode.children.length;i++){var a=this.contentNode.children[i];a.name==n?a.active=!0:a.active=!1}3==t&&3200==e&&this.updateDesc_2MJ()},updateDesc_2MJ:function(){var e=this.contentNode.getChildByName("tips_mj2p").getChildByName("desNode"),t=e.getChildByName("50p"),n=e.getChildByName("8j");0==this._roomType_mj2?(t.active=!1,n.active=!0):(t.active=!0,n.active=!1)},onToggle_mj2p:function(e){var t=e.target;"toggle1"==t.parent.name?this._roomType_mj2=0:"toggle2"==t.parent.name&&(this._roomType_mj2=1),this.updateDesc_2MJ()},onToggle_mj4p:function(e){var t=e.target;"toggle1"==t.parent.name?this._roomType=0:"toggle2"==t.parent.name&&(this._roomType=1)},getMode:function(){return 1},getRaise:function(){var e;if(2==this._gametype){var t=this.getDBRaiseOfByIndex();0==t?e=1:1==t?e=10:2==t?e=20:3==t&&(e=40)}else e=1;return e},getTDHModeOfByIndex:function(){for(var e=this.contentNode.getChildByName("tuidaohu").getChildByName("ToggleGroup"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getDBModeOfByIndex:function(){for(var e=this.getInterface().getChildByName("ToggleGroup_mode"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getDBTypeOfByIndex:function(){for(var e=this.getInterface().getChildByName("ToggleGroup_gametype"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getDBGamenumOfByIndex:function(){for(var e=this.getInterface().getChildByName("ToggleGroup_gamenum"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getDBRaiseOfByIndex:function(){for(var e=this.getInterface().getChildByName("ToggleGroup_raise"),t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},getInterface:function(){this.contentNode;return"DoubleBulck",this.contentNode.getChildByName("DoubleBulck")},onBtnCreate:function(){var e,t,n=parseInt(this.gt/1e3),i=parseInt(this.gt/100)%10;if(3==n)e=2==i?0==this._roomType_mj2?8:0:0==this._roomType?0:8;else if(2==n){e=0==this.getDBGamenumOfByIndex()?6:12}else 4==n&&(e=8);if(3==n)4==i?t=this._roomType:2==i&&(t=0==this._roomType_mj2?1:0);else if(2==n){var a=this.getDBModeOfByIndex(),o=this.getDBTypeOfByIndex();t=10*(0==a?1:0)+(0==o?1:0)}else if(4==n){t=0==this.getTDHModeOfByIndex()?1:2}var s=this.getRaise(),r=this.gt+t;if(3==n){if(2==i){if(GroupDataMgr.tablesInfo_2mj.length>=12)return void publicWindow.alert.show("","\u623f\u95f4\u4e0d\u80fd\u591a\u4e8e12\u4e2a")}else if(4==i&&GroupDataMgr.tablesInfo_4mj.length>=12)return void publicWindow.alert.show("","\u623f\u95f4\u4e0d\u80fd\u591a\u4e8e12\u4e2a")}else if(2==n&&GroupDataMgr.tablesInfo_4mj.length>=12)return void publicWindow.alert.show("","\u623f\u95f4\u4e0d\u80fd\u591a\u4e8e12\u4e2a");var c={gametype:n,gamenums:e,createtype:3,peoplemax:i,wanfa:r,clubId:GroupDataMgr.clubID,raise:s};Hall_ReqAndRes.creatRoom(c,function(e){this.node.active=!1}.bind(this))},onBntClose:function(){this.node.active=!1}}),cc._RF.pop()},{}],desktopLG_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"c49c3p8uqhAsp/z2eMCdOHd","desktopLG_2MJ"),cc.Class({extends:cc.Component,properties:{lblRoomID:cc.Label,lblGameNum:cc.Label,lblGameMaxNum:cc.Label,lblGameCardsNum:cc.Label,less128Tps:cc.Node,magicNode:cc.Node,gamenumNode:cc.Node,retainNode:cc.Node},onLoad:function(){},setCenterTipsShow:function(e){this.magicNode.active=e,this.retainNode.active=e,e?(GameDataMgr.conf.peoplemax,0==GameDataMgr.maxNumOfGames?this.gamenumNode.active=!1:this.gamenumNode.active=!0):this.gamenumNode.active=e},initGameNums:function(){this.node.getChildByName("GameNumNode");var e=this.node.getChildByName("descNode"),t=e.getChildByName("desc_2"),n=e.getChildByName("desc_4");if(2==GameDataMgr.conf.peoplemax){t.active=!0,n.active=!1;var i=t.getChildByName("des0"),a=t.getChildByName("des1");0==GameDataMgr.maxNumOfGames?(i.active=!0,a.active=!1,this.less128Tps.active=!0):(i.active=!1,a.active=!0,this.less128Tps.active=!1)}else{t.active=!1,n.active=!0;i=n.getChildByName("des0"),a=n.getChildByName("des1");this.less128Tps.active=!1,0==GameDataMgr.maxNumOfGames?(i.active=!0,a.active=!1):(i.active=!1,a.active=!0)}},updateRoomID:function(e){this.lblRoomID.string=e},updateGameNum:function(e){this.lblGameNum.string=e},updateGameMaxNum:function(e){this.lblGameMaxNum.string=e},updateGameCardsNum:function(e){this.lblGameCardsNum.string=e},hideMJNumNode:function(){this.retainNode.active=!1},setMJNumNodeShow:function(e){this.retainNode.active=e}}),cc._RF.pop()},{}],desktopLG_DB:[function(e,t,n){"use strict";cc._RF.push(t,"050f3qTtDBDSJnHuGvjkSsA","desktopLG_DB"),cc.Class({extends:cc.Component,properties:{lblRoomID:cc.Label,lblGameNum:cc.Label,lblGameMaxNum:cc.Label,gamenumNode:cc.Node},start:function(){},setCenterTipsShow:function(e){e?0==GameDataMgr.gameIndex?this.gamenumNode.active=!1:this.gamenumNode.active=!0:this.gamenumNode.active=e},updateRoomID:function(e){this.lblRoomID.string=e},updateGameNum:function(e){this.lblGameNum.string=e}}),cc._RF.pop()},{}],desktopLG_TDH:[function(e,t,n){"use strict";cc._RF.push(t,"0e762ES+NFPWpm5EFDljrln","desktopLG_TDH"),cc.Class({extends:e("desktopLG_2MJ"),properties:{},start:function(){},setCenterTipsShow:function(e){this.retainNode.active=e,e?(GameDataMgr.conf.peoplemax,0==GameDataMgr.maxNumOfGames?this.gamenumNode.active=!1:this.gamenumNode.active=!0):this.gamenumNode.active=e},initGameNums:function(){var e=this.node.getChildByName("descNode"),t=e.getChildByName("guize_1"),n=e.getChildByName("guize_2"),i=GameDataMgr.conf.wanfa%100%10;1==i?(t.active=!0,n.active=!1):2==i&&(t.active=!1,n.active=!0)}}),cc._RF.pop()},{desktopLG_2MJ:"desktopLG_2MJ"}],emitter:[function(e,t,n){"use strict";function i(e){if(e)return a(e)}function a(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}cc._RF.push(t,"8324dyyaXZLYrKdAj086K8T","emitter"),t.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){var n=this;function i(){n.off(e,i),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},i.fn=t,this.on(e,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks[e];if(!i)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var a=0;a<i.length;a++)if((n=i[a])===t||n.fn===t){i.splice(a,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var i=0,a=(n=n.slice(0)).length;i<a;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length},cc._RF.pop()},{}],foldsManager2:[function(e,t,n){"use strict";cc._RF.push(t,"9fdb5C8PcdCiLemn1w14L+0","foldsManager2"),cc.Class({extends:cc.Component,properties:{Side:0,foldsNode:cc.Node,Distance_Width:80,Distance_Height:0,foldPoint:cc.Node,arrFolds:null},onLoad:function(){},initFoldsInSide:function(){for(var e=this.foldsNode,t=0;t<e.childrenCount;t++){e.children[t].removeAllChildren()}this.arrFolds=[]},createFoldsBySide:function(e){if(this.initFoldsInSide(this.Side),e&&e&&e.length>0)for(var t=GameDataMgr.MJDataMgr.FOLDS_PERROW_NUM,n=this.foldsNode.children.length,i=0;i<e.length;i++){var a,o=parseInt(i/t);o=0==this.Side?n-parseInt(i/t)-1:parseInt(i/t),a=this.foldsNode.children[o];var s=this.createFoldPrefab(e[i],this.Side);s.getComponent(dc.ResourceMgr.geScriptLabel(0));a.addChild(s)}},initFoldsMJ:function(e){if(e&&0==e.length)this.initFoldsInSide();else if(e&&e.length>0){var t=this.countFoldsNum();if(e.length<t)this.createFoldsBySide(e);else for(var n=GameDataMgr.MJDataMgr.FOLDS_PERROW_NUM,i=this.foldsNode.children.length,a=0;a<e.length;a++){var o,s=this.countFoldsNum();o=0==this.Side?i-parseInt(a/n)-1:parseInt(a/n);var r,c=parseInt(a%n);r=this.foldsNode.children[o];var l=e[a];if(a>=s){var h=(d=this.createFoldPrefab(e[a],this.Side)).getComponent(dc.ResourceMgr.geScriptLabel(0));r.addChild(d)}else{var d;(h=(d=r.children[c]).getComponent(dc.ResourceMgr.geScriptLabel(0)))&&(h.setMJID(l),h.setMJSide(this.Side),h.initFoldsMJ())}}}},updateMJsTexture:function(e){if(e&&e.length>0)for(var t=GameDataMgr.MJDataMgr.FOLDS_PERROW_NUM,n=(this.countFoldsNum(),0);n<e.length;n++){var i=parseInt(n/t),a=n%t,o=(0==this.Side?this.foldsNode.children[parentHolds.childrenCount-1-i]:this.foldsNode.children[i]).children[a].getComponent(dc.ResourceMgr.geScriptLabel(0));o.setMJID(e[n]),o.initFoldsMJ()}},refreshFolds:function(e){e||this.Side,this.refreshZ()},refreshZ:function(){var e=this.Side,t=this.Distance_Width,n=this.Distance_Height;0==e||(1==e?t=-t:2==e?t=-t:3==e&&(n=-n,t=-t));var i=0,a=0,o=(this.foldsNode,this.foldsNode);this.sortLocalZOrder();for(var s=0;s<o.childrenCount;s++){var r=o.children[s],c=(i=0,a=0,r.childrenCount);c=-1;for(var l=0;l<r.childrenCount;l++){var h=r.children[l];i=t*l,a=n*l,0==e||2==e?h.x=i:1!=e&&3!=e||(h.x=i,h.y=a),1==e&&(h.zIndex=c,h.zIndex=c,c--)}}},sortLocalZOrder:function(){this.foldsNode},countFoldsNum:function(){for(var e=0,t=this.foldsNode,n=(t.children[t.childrenCount-1],0);n<t.childrenCount;n++){e+=t.children[n].childrenCount}return e},createFoldPrefab:function(e,t){var n=cc.instantiate(dc.ResourceMgr.MJFoldsPrefab[t]),i=n.getComponent(dc.ResourceMgr.geScriptLabel(0));return i&&(i.setMJID(e),i.setMJSide(this.Side),i.initFoldsMJ()),n},addFolds:function(e,t){for(var n=this.countFoldsNum(t),i=this.foldsNode,a=0;a<e.length;a++)this.arrFolds.push(e[a]);var o=GameDataMgr.MJDataMgr.FOLDS_PERROW_NUM;for(a=0;a<e.length;a++){var s,r=n+a,c=parseInt(r/o);s=0==this.Side?i.children[i.childrenCount-c-1]:i.children[c];var l=this.createFoldPrefab(e[a],t);s.addChild(l)}},removeFolds:function(e){var t,n,i=this.countFoldsNum(this.Side),a=this.foldsNode,o=i-1,s=GameDataMgr.MJDataMgr.FOLDS_PERROW_NUM,r=parseInt(o/s);(t=0==this.Side?a.children[a.childrenCount-r-1]:a.children[r],n=1==this.Side?t.children[0]:t.children[t.childrenCount-1])&&(n.getComponent(dc.ResourceMgr.geScriptLabel(0)).MJID==e&&n.removeFromParent());this.removeLastFolds(e)},removeLastFolds:function(e){0!=this.arrFolds.length&&(e==this.arrFolds[this.arrFolds.length-1]&&this.arrFolds.splice(this.arrFolds.length-1,1))},createFolds:function(e,t){0==this.foldsNode.children[0].childrenCount&&0==this.foldsNode.children[this.foldsNode.childrenCount-1].childrenCount?this.createFoldsBySide(e,t):this.addFolds(e,t)},curMJPosition:function(e){if(0==e){var t=new cc.Vec2(0,0);return(0==this.Side?this.foldsNode.children[2]:this.foldsNode.children[0]).convertToWorldSpaceAR(t)}var n=e,i=this.Distance_Width,a=this.Distance_Height;0==this.Side||(1==this.Side?i=-i:2==this.Side?i=-i:3==this.Side&&(a=-a,i=-i));var o,s=n,r=GameDataMgr.MJDataMgr.FOLDS_PERROW_NUM,c=parseInt((s-1)/r),l=this.foldsNode;if(o=0==this.Side?l.children[l.childrenCount-c-1]:l.children[c],0==this.Side||3==this.Side||2==this.Side||1==this.Side)var h=o.children[o.childrenCount-1];else h=o.children[0];var d=new cc.Vec2;return d.x=h.x,d.y=h.y+h.height/2,o.convertToWorldSpaceAR(d)},getLastMJ:function(){var e,t=this.countFoldsNum(),n=GameDataMgr.MJDataMgr.FOLDS_PERROW_NUM,i=parseInt((t-1)/n),a=this.foldsNode;return(e=0==this.Side?a.children[a.childrenCount-i-1]:a.children[i]).children[e.childrenCount-1]},showPoint:function(e){this.foldPoint.active=e},getLastMJPos:function(){var e=this.countFoldsNum(this.Side);return this.curMJPosition(e)},setMJPoint:function(e){if(0!=this.countFoldsNum()){var t=this.foldPoint.parent.convertToNodeSpaceAR(e);this.foldPoint.x=t.x,this.foldPoint.y=t.y}else this.foldPoint.active=!1},PlayAniPoint:function(){this.foldPoint.stopAllActions();new cc.Vec2(0,100),new cc.Vec2(0,-10);var e=cc.repeatForever(cc.sequence(cc.moveBy(.5,0,10),cc.moveBy(.5,0,-10)));this.foldPoint.runAction(e)},updateFoldPoint:function(){var e=this.getLastMJPos();this.setMJPoint(e),this.PlayAniPoint()}}),cc._RF.pop()},{}],gambleLayer:[function(e,t,n){"use strict";cc._RF.push(t,"e1431WBTfRH5Kbslts8cwVl","gambleLayer"),cc.Class({extends:cc.Component,properties:{},start:function(){},OnClickClose:function(){this.node.active=!1}}),cc._RF.pop()},{}],gameGroupLayer:[function(e,t,n){"use strict";function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(a,o){try{var s=t[a](o),r=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(r).then(function(e){i("next",e)},function(e){i("throw",e)});e(r)}("next")})}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}cc._RF.push(t,"b2b90ckn3RA75vyIbu9nF9F","gameGroupLayer");var o=e("GameTypeConf");cc.Class({extends:cc.Component,properties:{_btnOperNode:null,_groupMgrNode:null,_createCircleNode:null,_comfirmNode:null,_joinCircleNode:null,_upMenuNode:null,_initInviteList:null,_createTableInterface:null,_createGroupLeadNode:null,_talkNode:null},onLoad:function(){this.initPrefab()},start:function(){},initPrefab:function(){this._btnOperNode=this.node.getChildByName("btnOperNode"),this._groupMgrNode=this.node.getChildByName("groupMgrNode"),this._createCircleNode=this.node.getChildByName("createCircleNode"),this._comfirmNode=this.node.getChildByName("comfirmNode"),this._joinCircleNode=this.node.getChildByName("JoinCircleNode"),this._upMenuNode=this.node.getChildByName("upNode"),this._initInviteList=this.node.getChildByName("inviteListNode"),this._createTableInterface=this.node.getChildByName("createTableInterface"),this._createGroupLeadNode=this.node.getChildByName("createLeadNode"),this._userInfoNode=this.node.getChildByName("userInfoNode"),this._talkNode=this.node.getChildByName("talkPage")},openCircleLayer:function(e){var t=UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer");GroupDataMgr.setGroupLayerSp(t),this.node.active=!0,this.initClubs()},openExperienceClub:function(){var e=UIMgr.getPageScript(UIMgr.HallPage)._gameCircleLayer.getComponent("gameGroupLayer");Hall_ReqAndRes.joinExperienceClub(function(t){if(t.code)if(-2==t.code){this.node.active=!0,this.setGroupMgrNodeShow(!0),this.setTalkNodeShow(!1),GroupDataMgr.setGroupLayerSp(e),this.setBtnOperNodeShow(!1),this.setUpMenuNodeShow(!0);var n=t.data.eclubs;n&&n.length>0&&this.enterClub(n[0])}else publicWindow.alert.show("",t.msg);else{this.node.active=!0,this.setGroupMgrNodeShow(!0),this.setTalkNodeShow(!1),GroupDataMgr.setGroupLayerSp(e),this.setBtnOperNodeShow(!1),this.setUpMenuNodeShow(!0);var i=t.data.clubId;this.enterClub(i)}}.bind(this))},initClubs:function(){if(UserMgr.myClubs&&UserMgr.myClubs.length>0||UserMgr.clubs&&UserMgr.clubs.length>0){var e,t="clubID_"+UserMgr.userId,n=cc.sys.localStorage.getItem(t);this.setBtnOperNodeShow(!1),this.setUpMenuNodeShow(!0),this.setGroupMgrNodeShow(!0),GroupDataMgr.initClubList(),GroupDataMgr.isHasClub(n)?e=n:UserMgr.myClubs&&UserMgr.myClubs.length>0?e=UserMgr.myClubs[0]:UserMgr.clubs&&UserMgr.clubs.length>0&&(e=UserMgr.clubs[0]),this.enterClub(e)}else{this.setBtnOperNodeShow(!0),this.setUpMenuNodeShow(!1),this.setGroupMgrNodeShow(!1),this.initRedPoint(GroupDataMgr.inviteList),this.setInitInviteListShow(!1),this.getInvitedList(),this.setTalkNodeShow(!1),this.setBackBtn(!0),this._initInviteList.getComponent("inviteListMgr").setBtnClose(!0)}},getGroupMgrIndex:function(){return this._groupMgrNode.getComponent("gameGroupMgr")._curIndex},outClub:function(e){Hall_ReqAndRes.logoutClub()},enterClub:function(e){this.setTalkNodeShow(!1),publicWindow.wc.show("",""),Hall_ReqAndRes.loginClub(e,function(t){if(!t.code){var n="clubID_"+UserMgr.userId,i=[];i.push(e),GroupDataMgr.getClubsBaseInfo2(i,function(t){var i=GroupDataMgr.clubInfoMap;(1==i[e].type&&cc.sys.localStorage.setItem(n,e),UIMgr.curPage==UIMgr.HallPage)?0==i[e].type?(GameDataMgr.clearMsgQue(2),UIMgr.getMgrNodeScript().stopMsgAction(2),GameDataMgr.sendSpeakMsg()):(GameDataMgr.clearMsgQue(),UIMgr.getMgrNodeScript().stopMsgAction()):(GameDataMgr.clearMsgQue(),UIMgr.getMgrNodeScript().stopMsgAction())}.bind(this))}}),this.getClubInfo(e),this.setInitInviteListShow(!1),this.getInvitedList()},getClubInfo:function(e){Hall_ReqAndRes.getClubInfo(e,function(e){this.setClubBaseInfo(e)}.bind(this))},getClubInfo2:function(e){Hall_ReqAndRes.getClubInfo(e,function(e){this.setClubBaseInfo2(e)}.bind(this))},getInvitedList:function(){Hall_ReqAndRes.getInviteList(function(e){var t=e.clubs||[];GroupDataMgr.inviteList=t,t.length}.bind(this))},initInviteListInfo:function(e){GroupDataMgr.getClubsBaseInfo(e,function(e){var t=[];for(var n in e)e[n].clubName=e[n].name,t.push(e[n]);var i=[],a=GroupDataMgr.userInfoMap;for(var o in t){var s=t[o].ownerId;a[s]||i.push(s)}GroupDataMgr.getUsersInfo(i,function(e){for(var n=0;n<t.length;n++){var i=t[n].ownerId;t[n].headImg=a[i].headImg,t[n].name=a[i].name,t[n].userId=i}this._initInviteList.getComponent("inviteListMgr").initInviteList(t)}.bind(this))}.bind(this))},getReqList:function(e){var t=GroupDataMgr.userInfoMap,n=[];e=e||[];for(var i=0;i<e.length;i++)t[e[i]]||n.push(e[i]);GroupDataMgr.getUsersInfo(n,function(){for(var n={},i=0;i<e.length;i++)n[e[i]]=t[e[i]],n[e[i]].clubId=GroupDataMgr.clubID;this.refreshReqList(n)}.bind(this))},setClubBaseInfo2:function(e){var t=e.data;console.log("setClubBaseInfo2"),e.code||(GroupDataMgr.setClubInfo(t),this.getClubTables(GroupDataMgr.tableMap))},setClubBaseInfo:function(e){var t=e.data;if(publicWindow.wc.hide(),e.code){var n=function(){this.onBtnClose()}.bind(this);publicWindow.alert.show("",e.msg,n)}else{GroupDataMgr.clubID=t.clubId,GroupDataMgr.ownerID=t.ownerId,GroupDataMgr.groupName=t.name||"",GroupDataMgr.info=t.introduce||"",GroupDataMgr.clubInfos=t.infos||[],GroupDataMgr.requests=t.requests||[],GroupDataMgr.notice=t.notice||"",GroupDataMgr.setTableMap(t.tables),GroupDataMgr.tables=t.tables,GroupDataMgr.opening=t.opening,GroupDataMgr.open_time=t.open_time,GroupDataMgr.close_time=t.close_time,GroupDataMgr.gametype=t.gametype,GroupDataMgr.type=t.type,t.members.unshift(t.ownerId),this.members=GroupDataMgr.getSingleNumbers(t.members||[]),GroupDataMgr.memberNum=this.members;var i=0==GroupDataMgr.type;this.intBtnBackByGroupType();var a=0!=GroupDataMgr.type;this._initInviteList.getComponent("inviteListMgr").setBtnClose(a),this.setTalkNodeShow(i),i&&(this.getTalkHistory(),this.getMemTalkHistory());var o=this._upMenuNode.getComponent("upMenuOfCircle");o.initBaseData(t),this.setBtnOperNodeShow(!1),this.setGroupMgrNodeShow(!0),this.setOpenJoinCircleNode(!1),this.setSwitchNodeShow(!1);var s=this._groupMgrNode.getComponent("gameGroupMgr"),r=GroupDataMgr.inviteList;GroupDataMgr.isOwner()&&this.refreshHistory(GroupDataMgr.clubInfos);var c=!!GroupDataMgr.opening;this.setOpenState(c);var l=GroupDataMgr.userInfoMap,h=[];l[t.ownerId]||h.push(t.ownerId),l[UserMgr.userId]||h.push(UserMgr.userId),s.setClubInfo({name:GroupDataMgr.groupName,info:GroupDataMgr.info,ownerId:GroupDataMgr.ownerID}),s.setNotice(t.notice),s.initgroupMgr(),s.initBtnSwitch(),this.getClubTables(GroupDataMgr.tableMap),this.getReqList(GroupDataMgr.requests),this.initRedPoint(r),this.setMembersInfo(this.members),GroupDataMgr.getUsersInfo(h,function(){var e=l[t.ownerId];o.setGownerName(e.name||"");var n=l[UserMgr.userId];if(s.setOwnerIcon(e.headImg||"",e.userId),o.initMyBaseData(n),this.members,t.create_time){var i=t.create_time||"",a=dc.utils.dateFormat(i);s.setCClubTime(a)}GroupDataMgr.isOwner()?(o.setGemsNodeShow(!0),o.refreshGems(e.gems),this.getClubCount(10)):o.setGemsNodeShow(!1)}.bind(this)),this._timer&&(clearInterval(this._timer),this._timer=null),this._timer=setInterval(function(e){var t=GroupDataMgr.clubID;UIMgr.curPage==UIMgr.HallPage&&this.node.active&&this.getClubInfo2(t)}.bind(this),15e3)}},refreshNum:function(){var e=this._upMenuNode.getComponent("upMenuOfCircle"),t=GroupDataMgr.memberNum?GroupDataMgr.memberNum.length:0;e.setGownerNum(t)},setOpenState:function(e){var t=this._groupMgrNode.getComponent("gameGroupMgr"),n=!!e;t.setGroupOpenToggleCheck(n),t.setGroupOpenOrClose(!n),t.initShowOpenTime(),t.initGroupOpenToggle()},getClubTables:function(e){if(this._groupMgrNode.getComponent("gameGroupMgr").getClubTables(e),1==(n=GroupDataMgr.type))for(var t in e){var n=(o=e[t]).type;1!=parseInt(n/1e3)&&this.getRoomUsersgetRoomUsers(o)}else if(0==n){var i,a=this.getGroupMgrIndex();for(var t in 6==a?i=3:7==a&&(i=2),e){var o;n=(o=e[t]).type;parseInt(n/1e3)==i&&this.getRoomUsersgetRoomUsers(o)}}},setMembersInfo:function(e){for(var t=GroupDataMgr.userInfoMap,n=[],i=0;i<e.length;i++)t[e[i]]||n.push(e[i]);GroupDataMgr.getUsersInfo(n,function(n){var i=[],o=[],s=e||[];o.push.apply(o,a(s));for(var r=0;r<o.length;r++){var c={};(c=t[o[r]]).userId=o[r],i.push(c)}this.refreshNameAndIcon(i)}.bind(this))},exitClub:function(e){publicWindow.alert.show("","\u60a8\u5df2\u7ecf\u9000\u51fa "+GroupDataMgr.groupName+" \u5708\u5b50"),this.enterNextClub()},kickedClub:function(e){var t=[];t.push(e),GroupDataMgr.getClubsBaseInfo(t,function(t){var n=t[e];publicWindow.alert.show("","\u60a8\u5df2\u7ecf\u88ab\u8e22\u51fa "+n.name+" \u5708\u5b50")}.bind(this)),e==GroupDataMgr.clubID&&this.node.active&&this.enterNextClub()},enterOnlyClub:function(){1==GroupDataMgr.getClubNum()&&this.initClubs()},enterNextClub:function(){0==GroupDataMgr.getClubNum()?this.closeGrouplayer():this.initClubs()},getRoomUsersgetRoomUsers:function(e){var t=this._groupMgrNode.getComponent("gameGroupMgr"),n=e.seats;t.getRoomUsers(n,e.roomId)},inviteClubMember:function(e){this._groupMgrNode.getComponent("gameGroupMgr").inviteClubMember(e)},refreshHistory:function(e){this._groupMgrNode.getComponent("gameGroupMgr").refreshHistory(e)},refreshReqList:function(e){this._groupMgrNode.getComponent("gameGroupMgr").refreshReqList(e)},getCountInfo:function(e,t,n,i){Hall_ReqAndRes.getBattleCount(GroupDataMgr.clubID,t,n,function(a){var o=a.data.battle;for(var s in o)e[s]||(e[s]={}),null==e[s].count&&(e[s].count=0),e[s].count+=parseInt(o[s]);i&&i(e,t,n)}.bind(this))},getWinInfo:function(e,t,n,i){Hall_ReqAndRes.getBigWinerRank(GroupDataMgr.clubID,t,n,function(t){var n=t.data.rank||{};if(!t.code){for(var a in e){e[a]||(e[a]={}),null==e[a].win&&(e[a].win=0);var o=n[a]?parseInt(n[a]):0;e[a].win+=o}i&&i(e)}}.bind(this))},getUserInfoOfCountRank:function(e){var t=this._groupMgrNode.getComponent("gameGroupMgr"),n=GroupDataMgr.userInfoMap,i=[];for(var a in e)n[a]||i.push(parseInt(a));GroupDataMgr.getUsersInfo(i,function(i){var a=[];for(var o in e){var s={};s.userId=parseInt(o),s.name=n[o].name,s.headImg=n[o].headImg,s.count=parseInt(e[o].count),s.win=parseInt(e[o].win),a.push(s)}a.sort(function(e,t){return t.win-e.win}),t.getClubRank(a)}.bind(this))},getCountInfo_tt:function(e,t,n){var i=this;return new Promise(function(a,o){Hall_ReqAndRes.getBattleCount(GroupDataMgr.clubID,t,n,function(t){var n=t.data.battle;for(var i in n)e[i]||(e[i]={}),null==e[i].count&&(e[i].count=0),e[i].count+=parseInt(n[i]);a(e)}.bind(i))})},getWinInfo_tt:function(e,t,n){var i=this;return new Promise(function(a,o){Hall_ReqAndRes.getBigWinerRank(GroupDataMgr.clubID,t,n,function(t){var n=t.data.rank||{};if(!t.code)for(var i in e){e[i]||(e[i]={}),null==e[i].win&&(e[i].win=0);var o=n[i]?parseInt(n[i]):0;e[i].win+=o}a(e)}.bind(i))})},getCount:function(e){this._groupMgrNode.getComponent("gameGroupMgr");var t=GroupDataMgr.gametype;if(3==t){var n=function(){var e=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCountInfo_tt({},t,o.historyServerGameType.mj4_hz);case 2:return n=e.sent,e.next=5,a.getWinInfo_tt(n,t,o.historyServerGameType.mj4_hz);case 5:return n=e.sent,e.next=8,a.getCountInfo_tt(n,t,o.historyServerGameType.mj2_hz);case 8:return n=e.sent,e.next=11,a.getWinInfo_tt(n,t,o.historyServerGameType.mj2_hz);case 11:n=e.sent,a.getUserInfoOfCountRank(n);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a=this;n(e)}else if(4==t){var s=function(){var e=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCountInfo_tt({},t,o.historyServerGameType.mj_tdh4);case 2:return n=e.sent,e.next=5,a.getWinInfo_tt(n,t,o.historyServerGameType.mj_tdh4);case 5:return n=e.sent,e.next=8,a.getCountInfo_tt(n,t,o.historyServerGameType.mj_tdh3);case 8:return n=e.sent,e.next=11,a.getWinInfo_tt(n,t,o.historyServerGameType.mj_tdh3);case 11:n=e.sent,a.getUserInfoOfCountRank(n);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();a=this;s(e)}else if(2==t){var r=function(){var e=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCountInfo_tt({},t,o.historyServerGameType.dbuckle4_hz);case 2:return n=e.sent,e.next=5,a.getWinInfo_tt(n,t,o.historyServerGameType.dbuckle4_hz);case 5:n=e.sent,a.getUserInfoOfCountRank(n);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();a=this;r(e)}},getRankAndCount:function(e){this.getCount(e)},getClubCount:function(e){var t,n=this._groupMgrNode.getComponent("gameGroupMgr"),i=GroupDataMgr.gametype;3==i?this.getCountInfo({},e,o.historyServerGameType.mj4_hz,function(t){this.getCountInfo(t,e,o.historyServerGameType.mj2_hz,function(e){n.refreshMemberJS(e)}.bind(this))}.bind(this)):(2==i&&(t=o.historyServerGameType.dbuckle4_hz),this.getCountInfo({},e,t,function(e){n.refreshMemberJS(e)}.bind(this)))},getWaitClubHistory:function(e,t){var n=this;return new Promise(function(i,a){Hall_ReqAndRes.getClubHistroy(GroupDataMgr.clubID,e,t,function(e){e.data.rank;i(e)}.bind(n))})},getClubHistory:function(e){var t=GroupDataMgr.type;if(1==t){var n=GroupDataMgr.gametype;if(3==n)Hall_ReqAndRes.getClubHistroy(GroupDataMgr.clubID,e,o.historyServerGameType.mj4_hz,function(t){var n=t.data.hislist||[];Hall_ReqAndRes.getClubHistroy(GroupDataMgr.clubID,e,o.historyServerGameType.mj2_hz,function(e){var t=e.data.hislist||[];n.push.apply(n,a(t)),this._groupMgrNode.getComponent("gameGroupMgr").getClubHistory(n)}.bind(this))}.bind(this));else if(4==n){var s=function(){var e=i(regeneratorRuntime.mark(function e(t){var n,i,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getWaitClubHistory(t,o.historyServerGameType.mj_tdh4);case 2:return n=e.sent,i=n.data.hislist||[],e.next=6,r.getWaitClubHistory(t,o.historyServerGameType.mj_tdh3);case 6:s=e.sent,c=s.data.history||[],i.push.apply(i,a(c)),r._groupMgrNode.getComponent("gameGroupMgr").getClubHistory(i);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r=this;s(e)}else{var c;2==n&&(c=o.historyServerGameType.dbuckle4_hz),Hall_ReqAndRes.getClubHistroy(GroupDataMgr.clubID,e,c,function(e){var t=e.data.hislist;this._groupMgrNode.getComponent("gameGroupMgr").getClubHistory(t)}.bind(this))}}},getCGameOfRoom:function(e){this._groupMgrNode.getComponent("gameGroupMgr").getCGameOfRoom(e)},refreshNameAndIcon:function(e){this._groupMgrNode.getComponent("gameGroupMgr").refreshMemberList(e)},closeGrouplayer:function(){this.node.active=!1},setFixHandle:function(e){var t=e.data;e.code?publicWindow.alert.show("",e.msg):(publicWindow.alert.show("","\u4fee\u6539\u6210\u529f"),this.setFix(t))},setFix:function(e){var t=this._groupMgrNode.getComponent("gameGroupMgr");1==e.type||2==e.type?(t.setFixHandle(e),this.setCreateCircleNodeShow(!1),1==e.type&&this._upMenuNode.getComponent("upMenuOfCircle").setGroupName(e.name)):3==e.type?t.setFixHandle(e):4==e.type||5==e.type&&this.setOpenState(GroupDataMgr.opening)},setClubInvite:function(){var e=GroupDataMgr.inviteList;this.initRedPoint(e)},initRedPoint:function(e){var t=this._btnOperNode.getComponent("createAndJoinCircle"),n=this._groupMgrNode.getComponent("gameGroupMgr");e&&e.length>0?(t.setRedpointShow(!0),n.setRedpointShow(!0),n.setMsgBtnRedPointShow(!0)):(t.setRedpointShow(!1),n.setRedpointShow(!1),n.setMsgBtnRedPointShow(!1))},gteTableOfcurIndex:function(){return this._groupMgrNode.getComponent("gameGroupMgr").gteTableOfcurIndex()},gteTableOfcurIndex_TDH:function(){return this._groupMgrNode.getComponent("gameGroupMgr").gteTableOfcurIndex_TDH()},openCreateCircleNode:function(e){this._createCircleNode.getComponent("createCircle").openCreateByType(e),this.setCreateCircleNodeShow(!0)},openCreateGroupLead:function(){this.setCreateGroupLeadNodeShow(!0),this._createGroupLeadNode.getComponent("createGroupLead").openNode()},openComfirmNode:function(){this.setComfirmNodeShow(!0)},openJoinCircleNode:function(){this.setOpenJoinCircleNode(!0)},openInviteList:function(){this.setInitInviteListShow(!0),this.initInviteListInfo(GroupDataMgr.inviteList)},getTalkHistory:function(){Hall_ReqAndRes.getChatHistory(2,GroupDataMgr.clubID,0,50,function(e){ChatDataMgr.setGameHistory(e.data),ChatDataMgr.wTalkList.length>0&&this.refreshWTalkList()}.bind(this))},getMemTalkHistory:function(){this._talkNode.getComponent("TalkPage").getMemTalkHistory()},clubDynamicNotify:function(e){GroupDataMgr.isOwner()&&this.refreshHistory(GroupDataMgr.clubInfos),this.setMembersInfo(GroupDataMgr.memberNum),e.userId!=UserMgr.userId&&UserMgr.agentLevel>=2&&1==e.state&&audioMgr.playSFX("hall/joinClubEff.mp3")},refreshWTalkList:function(e){this._talkNode.getComponent("TalkPage").refreshWTalkList(e)},updateReadPointShow:function(e){this._talkNode.getComponent("TalkPage").updateReadPointShow(e)},updateReadPointShow_PS:function(){this._talkNode.getComponent("TalkPage").updateReadPointShow_PS()},updateTalkToggleRedPoint:function(){this._talkNode.getComponent("TalkPage").updateTalkToggleRedPoint()},refreshMemTalkList:function(e){this._talkNode.getComponent("TalkPage").refreshMemTalkList(e)},openInvite:function(){this.setInitInviteListShow(!0)},openCreateTable:function(e,t){this.setCreateTableInterface(!0),this._createTableInterface.getComponent("createTableInterface").openByType(e,t)},OpenUserInfo:function(e){this._userInfoNode.active=!0;var t=this._userInfoNode.getComponent("GroupUserInfo");t.initData(e),t.setMoveShow(!0);this._groupMgrNode.getComponent("gameGroupMgr")},setNoticeLayer:function(e){this._groupMgrNode.getComponent("gameGroupMgr").setNoticeLayer(e)},setBtnOperNodeShow:function(e){this._btnOperNode.active=e},setCreateCircleNodeShow:function(e){this._createCircleNode.active=e},setComfirmNodeShow:function(e){this._comfirmNode.active=e},setOpenJoinCircleNode:function(e){this._joinCircleNode.active=e},setUpMenuNodeShow:function(e){this._upMenuNode.active=e},setGroupMgrNodeShow:function(e){this._groupMgrNode.active=e},setInitInviteListShow:function(e){this._initInviteList.active=e},setCreateTableInterface:function(e){this._createTableInterface.active=e},setSwitchNodeShow:function(e){this._upMenuNode.getComponent("upMenuOfCircle").setSwitchNodeShow(!1)},setCreateGroupLeadNodeShow:function(e){this._createGroupLeadNode.active=e},setTalkNodeShow:function(e){this._talkNode.active=e},setBackBtn:function(e){this.node.getChildByName("btnCloseInterface").active=e},intBtnBackByGroupType:function(){var e=0==GroupDataMgr.type;this.setBackBtn(!e),this._groupMgrNode.getComponent("gameGroupMgr").setBtnRightBack(e)},onBtnClose:function(){GroupDataMgr.refreshInfo(UserMgr.userId),GameDataMgr.clearMsgQue(1),UIMgr.getMgrNodeScript().stopMsgAction(1),GroupDataMgr.groupMgrIndex=null,GroupDataMgr.setGroupLayerSp(null),GroupDataMgr.clubInfoMap=[],this.outClub(),this.node.active=!1,this._timer&&(clearInterval(this._timer),this._timer=null)}}),cc._RF.pop()},{GameTypeConf:"GameTypeConf"}],gameGroupMgr:[function(e,t,n){"use strict";cc._RF.push(t,"f2e59vQOgZNdLGLaE1rHP1y","gameGroupMgr"),cc.Class({extends:cc.Component,properties:{tableMgr:cc.Node,gradeNode:cc.Node,rankNode:cc.Node,peopleMgr:cc.Node,reqMgr:cc.Node,profileNode:cc.Node,_curIndex:0,toggleNode:cc.Node,redPoint:cc.Node,GroupSetTimeNode:cc.Node,toggleGroupOpenTime:cc.Toggle,btnGroup:cc.Node,btns:cc.Node,switchNode:cc.Node,btnSwitch:cc.Node,btnRightBack:cc.Node},onLoad:function(){this._curIndex=0},start:function(){},setBtnRightBack:function(e){this.btnRightBack.active=e},setGroupOpenToggleCheck:function(e){this.toggleGroupOpenTime.isChecked=e},setGroupOepnToggleShow:function(e){this.toggleGroupOpenTime.node.active=e},setGroupSetupNodeShow:function(e){this.GroupSetTimeNode.active=e},onToggleOpenOrClose:function(e){var t=e.target.parent.getComponent(cc.Toggle).isChecked;this.GroupSetTimeNode.getComponent("GroupSetTime");if(t){Hall_ReqAndRes.modifyClubInfo(GroupDataMgr.clubID,5,1,function(e){console.log("opensss",e)})}else Hall_ReqAndRes.modifyClubInfo(GroupDataMgr.clubID,5,0,function(e){})},setGroupOpenOrClose:function(e){this.GroupSetTimeNode.getComponent("GroupSetTime").setShowNode(e)},initShowOpenTime:function(){this.GroupSetTimeNode.getComponent("GroupSetTime").initShowOpenTime()},initFixTime:function(){this.GroupSetTimeNode.getComponent("GroupSetTime").initFixTime()},initGroupOpenToggle:function(){var e;GroupDataMgr.isOwner()?(e=0==this._curIndex||6==this._curIndex||7==this._curIndex,this.setGroupOepnToggleShow(e)):this.setGroupOepnToggleShow(!1)},setRedpointShow:function(e){this.redPoint.active=e},setMsgBtnRedPointShow:function(e){this.btnGroup.getComponent("btnGroupMov").setRedPointShow(e)},initBtnSwitch:function(){var e=[];e.push(GroupDataMgr.clubID),GroupDataMgr.getClubsBaseInfo2(e,function(e){var t=GroupDataMgr.clubInfoMap;0==t[GroupDataMgr.clubID].type?t[GroupDataMgr.clubID].ownerId==UserMgr.userId?this.btnSwitch.active=!0:this.btnSwitch.active=!1:1==t[GroupDataMgr.clubID].type&&(this.btnSwitch.active=!0)}.bind(this))},initgroupMgr:function(){if(this.initGroupContainer(),this.initGroupBtn(),this.initOwnerUI(),null!=GroupDataMgr.groupMgrIndex)this._curIndex=GroupDataMgr.groupMgrIndex,GroupDataMgr.groupMgrIndex=null;else{var e=GroupDataMgr.type;0==e?this._curIndex=6:1==e&&(this._curIndex=0)}this.setCurPage(this._curIndex),this.changeToggle(this._curIndex)},setNotice:function(e){GroupDataMgr.isOwner()?this.peopleMgr.getComponent("pepleMgr").setNotice(e):this.profileNode.getComponent("groupProfile").setNotice(e)},setOwnerIcon:function(e,t){GroupDataMgr.isOwner()?this.peopleMgr.getComponent("pepleMgr").setOwnerIcon(e):this.profileNode.getComponent("groupProfile").setOwnerIcon(e)},initOwnerUI:function(){this.initToogle()},initToogle:function(){GroupDataMgr.gametype;var e=GroupDataMgr.type,t=GroupDataMgr.isOwner();if(1==e)this.toggleNode.getChildByName("toggle_mj").active=!1,this.toggleNode.getChildByName("toggle_DB").active=!1,this.toggleNode.getChildByName("toggle_rmg").active=!0,this.toggleNode.getChildByName("toggle_grade").active=!0,this.toggleNode.getChildByName("toggle_ph").active=!0,t?(this.toggleNode.getChildByName("toggle_mgr").active=!0,this.toggleNode.getChildByName("toggle_req").active=!0,this.toggleNode.getChildByName("toggle_info").active=!1):(this.toggleNode.getChildByName("toggle_mgr").active=!1,this.toggleNode.getChildByName("toggle_req").active=!1,this.toggleNode.getChildByName("toggle_info").active=!0);else if(0==e)if(t)for(var n=0;n<this.toggleNode.childrenCount;n++){"toggle_rmg"==(i=this.toggleNode.children[n]).name||"toggle_info"==i.name?i.active=!1:i.active=!0}else for(n=0;n<this.toggleNode.childrenCount;n++){var i;"toggle_mj"==(i=this.toggleNode.children[n]).name||"toggle_DB"==i.name?i.active=!0:i.active=!1}},initGroupContainer:function(){console.log("initGroupContainer"),console.log(this.btnGroup._components),this.btnGroup.getComponent("btnGroupMov").addContainer(this.btns)},initGroupBtn:function(){var e=this.btnGroup.getComponent("btnGroupMov"),t=GroupDataMgr.isOwner(),n="btnLeaveClub";e.setBtnShow(n,!t);n="btnDissolveCircle";e.setBtnShow(n,t)},onBtnToggleTurnover:function(e){var t=e.target;"toggle_rmg"==t.name?this._curIndex=0:"toggle_grade"==t.name?this._curIndex=1:"toggle_ph"==t.name?this._curIndex=2:"toggle_mgr"==t.name?this._curIndex=3:"toggle_req"==t.name?this._curIndex=4:"toggle_info"==t.name?this._curIndex=5:"toggle_mj"==t.name?this._curIndex=6:"toggle_DB"==t.name&&(this._curIndex=7),this.changeRuleInterface(),this.initRefreshBtn()},setCurPage:function(e){this._curIndex=e,this.changeRuleInterface(),this.initInterface()},changeToggle:function(e){var t=GroupDataMgr.type,n=(GroupDataMgr.isOwner(),[]);0==t?n=["","","","","","","toggle_mj","toggle_DB"]:1==t&&(n=["toggle_rmg","toggle_grade","toggle_ph","toggle_mgr","toggle_req","toggle_info","toggle_mj","toggle_DB"]);for(var i=0;i<this.toggleNode.children.length;i++){var a=this.toggleNode.children[i].getComponent(cc.Toggle);a.node.name==n[e]?a.isChecked=!0:a.isChecked=!1}},initInterface:function(){if(0==this._curIndex||6==this._curIndex||7==this._curIndex){var e=this.tableMgr.getComponent("groupDeskMgr");null!=GroupDataMgr.curIndex?(e.setPageByIndex(GroupDataMgr.curIndex),GroupDataMgr.curIndex=null):e.setCurPage(this._curIndex)}else 1==this._curIndex&&this.goHistoryLayer();this.changeToggle(this._curIndex)},changeRuleInterface:function(){0==this._curIndex||6==this._curIndex||7==this._curIndex?(this.tableMgr.active=!0,this.gradeNode.active=!1,this.rankNode.active=!1,this.peopleMgr.active=!1,this.reqMgr.active=!1,this.profileNode.active=!1,this.tableMgr.getComponent("groupDeskMgr").setCurPage(this._curIndex),GroupDataMgr.getGroupLayerSp().getClubTables(GroupDataMgr.tableMap)):1==this._curIndex?(this.tableMgr.active=!1,this.gradeNode.active=!0,this.rankNode.active=!1,this.peopleMgr.active=!1,this.reqMgr.active=!1,this.profileNode.active=!1):2==this._curIndex?(this.tableMgr.active=!1,this.gradeNode.active=!1,this.rankNode.active=!0,this.peopleMgr.active=!1,this.reqMgr.active=!1,this.profileNode.active=!1):3==this._curIndex?(this.tableMgr.active=!1,this.gradeNode.active=!1,this.rankNode.active=!1,this.peopleMgr.active=!0,this.reqMgr.active=!1,this.profileNode.active=!1):4==this._curIndex?(this.tableMgr.active=!1,this.gradeNode.active=!1,this.rankNode.active=!1,this.peopleMgr.active=!1,this.reqMgr.active=!0,this.profileNode.active=!1):5==this._curIndex&&(this.tableMgr.active=!1,this.gradeNode.active=!1,this.rankNode.active=!1,this.peopleMgr.active=!1,this.reqMgr.active=!1,this.profileNode.active=!0);0==this._curIndex||6==this._curIndex||7==this._curIndex?this.setGroupSetupNodeShow(!0):this.setGroupSetupNodeShow(!1),this.initGroupOpenToggle()},initRefreshBtn:function(){if(0==this._curIndex);else if(1==this._curIndex){this.gradeNode.getComponent("groupHistoryMgr").setToggleRecover();var e=1;GroupDataMgr.getGroupLayerSp().getClubHistory(e)}else if(2==this._curIndex){e=1;GroupDataMgr.getGroupLayerSp().getRankAndCount(e)}else if(3==this._curIndex){GroupDataMgr.getGroupLayerSp().getClubCount(10)}else 4==this._curIndex||this._curIndex;2!=this._curIndex&&this.rankNode.getComponent("groupRanking").recoverToggle();1==this._curIndex&&this.gradeNode.getComponent("groupHistoryMgr").setPlaybackInterface(0)},setClubRank:function(e){for(var t=dc.GroupDataMgr.userInfoMap,n=[],i=dc.GroupDataMgr.memberNum,a=0;a<i.length;a++)t[i[a]]||n.push(i[a])},getClubRequests:function(e){var t=this.reqMgr.getComponent("groupRequestMgr");t.initHistoryList(e.infos),t.initReqList(e.requests)},refreshReqList:function(e){this.reqMgr.getComponent("groupRequestMgr").initReqList(e)},refreshHistory:function(e){this.reqMgr.getComponent("groupRequestMgr").initHistoryList(e)},inviteClubMember:function(e){this.peopleMgr.getComponent("pepleMgr").closeInviteNode(e)},getClubTables:function(e){var t=this.tableMgr.getComponent("groupDeskMgr"),n=GroupDataMgr.type,i=GroupDataMgr.gametype;1==n?t.initTableList(e,i):0==n&&(6==this._curIndex?t.initTableList(e,3):7==this._curIndex&&t.initTableList(e,2))},setClubInfo:function(e){GroupDataMgr.isOwner()?this.peopleMgr.getComponent("pepleMgr").setClubInfo(e):this.profileNode.getComponent("groupProfile").setClubInfo(e)},setFixHandle:function(e){if(GroupDataMgr.isOwner()){var t=this.peopleMgr.getComponent("pepleMgr");1==e.type?t.setGroupName(e.name):2==e.type?t.setInfo(e.introduce):3==e.type&&t.setNotice(e.notice)}else{var n=this.profileNode.getComponent("groupProfile");1==e.type?n.setGroupName(e.name):2==e.type?n.setInfo(e.introduce):3==e.type&&n.setNotice(e.notice)}},setCClubTime:function(e){GroupDataMgr.isOwner()?this.peopleMgr.getComponent("pepleMgr").setCClubTime(e):this.profileNode.getComponent("groupProfile").setCClubTime(e)},getRoomUsers:function(e,t){this.tableMgr.getComponent("groupDeskMgr").freshUsers(e,t)},getClubRank:function(e){this.rankNode.getComponent("groupRanking").initRankList(e)},getClubHistory:function(e){this.gradeNode.getComponent("groupHistoryMgr").initHistoryList(e)},getCGameOfRoom:function(e){this.gradeNode.getComponent("groupHistoryMgr").getCGameOfRoom(e)},refreshMemberList:function(e){GroupDataMgr.isOwner()?this.peopleMgr.getComponent("pepleMgr").initMemberList(e):this.profileNode.getComponent("groupProfile").initMemberList(e)},refreshMemberJS:function(e){this.peopleMgr.getComponent("pepleMgr").refreshMemberJS(e)},refreshMemberATime:function(e){this.peopleMgr.getComponent("pepleMgr").refreshMemberATime(e)},setNoticeLayer:function(e){this.peopleMgr.getComponent("pepleMgr").closeNoticeFix()},gteTableOfcurIndex:function(){return this.tableMgr.getComponent("groupDeskMgr").getCurIndex()},gteTableOfcurIndex_TDH:function(){return this.tableMgr.getComponent("groupDeskMgr").getCurIndex_TDH()},closeDelInfoCheckNode:function(){this.peopleMgr.getComponent("pepleMgr").setDelInfoCheckNodeShow()},onBtnJoin:function(){console.log("onBtnJoin"),GroupDataMgr.getGroupLayerSp().openJoinCircleNode()},onBtnCreate:function(){console.log("onBtnCreate"),GroupDataMgr.getGroupLayerSp().openCreateGroupLead()},onBtnChange:function(){console.log("onBtnChange")},onBtnDissolve:function(){console.log("onBtnDissolve");var e=GroupDataMgr.groupName,t="\u662f\u5426\u8981\u89e3\u6563"+e+"\u5708\u5b50";publicWindow.alert.show("",t,function(){Hall_ReqAndRes.dissolveClub(GroupDataMgr.clubID,function(t){if(t.code)publicWindow.alert.show("",t.msg);else{var n=t.data.clubId;GroupDataMgr.dealClubID(n);var i="\u89e3\u6563"+e+"\u5708\u5b50\u6210\u529f";publicWindow.alert.show("",i),GroupDataMgr.getGroupLayerSp().enterNextClub()}}.bind(this))},function(){})},onBtnMessage:function(){console.log("onBtnMessage"),GroupDataMgr.getGroupLayerSp().openInviteList()},onBtnLeaveClub:function(){console.log("onBtnLeaveClub");publicWindow.alert.show("","\u662f\u5426\u8981\u9000\u51fa\u5708\u5b50",function(){var e=GroupDataMgr.clubID;Hall_ReqAndRes.eixtClub(e,function(t){t.code?publicWindow.alert.show("",t.msg):(UserMgr.clubs=t.data.clubs,GroupDataMgr.getGroupLayerSp().exitClub(e))})},function(){})},onBtnSwitch:function(){if(this.switchNode.active)this.setSwitchNodeShow(!1);else{if(GroupDataMgr.getClubNum()<=1)return void publicWindow.alert.show("","\u5c11\u4e8e\u4e24\u4e2a\u5708\u5b50\u4e0d\u80fd\u5207\u6362");var e=this.switchNode.getComponent("groupSwitchLayer"),t=(GroupDataMgr.isOwner(),GroupDataMgr.getOtherClubID());GroupDataMgr.getClubsBaseInfo(t,function(t){var n=[];for(var i in t)if(0==t[i].type){if(t[i].ownerId==UserMgr.userId){t[i].clubName=t[i].name;var a=GroupDataMgr.isOwnClub(r);t[i].isOwner=a,n.push(t[i])}}else if(1==t[i].type){t[i].clubName=t[i].name;a=GroupDataMgr.isOwnClub(r);t[i].isOwner=a,n.push(t[i])}if(0==n.length)return e.removeChilds(),void publicWindow.alert.show("","\u5c11\u4e8e\u4e24\u4e2a\u5708\u5b50\u4e0d\u80fd\u5207\u6362");this.setSwitchNodeShow(!0);var o=[],s=GroupDataMgr.userInfoMap;for(var r in n){var c=n[r].ownerId;s[c]||o.push(c)}GroupDataMgr.getUsersInfo(o,function(t){for(var i=0;i<n.length;i++){var a=n[i].ownerId;n[i].headImg=s[a].headImg,n[i].name=s[a].name,n[i].userId=a}e.initClubList(n)}.bind(this))}.bind(this))}},setSwitchNodeShow:function(e){this.switchNode.active=e},onBtnRefresh:function(){}}),cc._RF.pop()},{}],groupDeskItem:[function(e,t,n){"use strict";cc._RF.push(t,"28e1eT9egdBu5D1tLhqaYr3","groupDeskItem");var i=e("WechatHelper"),a=e("XLHelper");cc.Class({extends:cc.Component,properties:{lightNode:cc.Node,shadowNode:cc.Node,delNode:cc.Node,userNode:cc.Node,roomNode:cc.Node,subSpr:cc.Node,btnAdd:cc.Node,lblRoomID:cc.Label,lblDec:cc.Label,tableType:0,tablesState:0},start:function(){},initDesks:function(){for(var e=0;e<this.userNode.childrenCount;e++){this.userNode.children[e].getChildByName("userInfo").active=!1}},freshUsers:function(e){console.log("DeskItem freshUsers"),console.log(JSON.stringify(e));for(var t=0;t<this.userNode.childrenCount;t++){this.userNode.children[t].getChildByName("userInfo").active=!1}var n=GroupDataMgr.userInfoMap;e.length;console.log("DeskItem freshUsers2");for(t=0;t<e.length;t++)e[t].userId&&function(i){var a=e[i],o=(n[a.userId],this.userNode.children[i]),s=o.getChildByName("userInfo");s.active=!0,s.userId=e[t].userId;var r=o.getComponent("Desk_userInfo");r.setName(a.name||""),r.setOnline(a.online);var c=a.ready&&a.online;r.setReadyNodeShow(c),r.setIcon(a.headimg,a.userId)}.bind(this)(t)},setIconInfo:function(e,t,n){e.getComponent("Desk_userInfo").setIcon(t.headImg,function(e){e&&n&&(n.iconSFrame=e)})},setTableType:function(e){this.tableType=e},setRoomID:function(e){this._roomID=e,this.lblRoomID.string="\u623f\u53f7:"+e},setDec:function(e){this.lblDec.string=e||""},setState:function(e){this.tablesState=e},setTableByState:function(e){this.setState(e),0==e?(this.lightNode.active=!0,this.shadowNode.active=!1,this.userNode.active=!0,this.setRoomNode(!0)):1==e&&(this.lightNode.active=!1,this.shadowNode.active=!0,this.userNode.active=!1,this.setRoomNode(!1))},setSubSprShow:function(e){this.subSpr.active=e},setRoomNode:function(e){this.roomNode.active=e},onBtnCloseDel:function(){this.delNode.active=!1},setDelNodeShow:function(e){this.delNode.active=e},onBtnOpenDel:function(){GroupDataMgr.isOwner()&&(this.delNode.active=!0,this.refreshOtherDesk(this._roomID))},refreshOtherDesk:function(e){for(var t=this.node.parent.children,n=0;n<t.length;n++){var i=t[n].getComponent("groupDeskItem");i._roomID!=e&&i.setDelNodeShow(!1)}},onBtnDelTable:function(){Hall_ReqAndRes.delRoom(this._roomID,function(e){}.bind(this))},onBtnShareClick:function(){var e=this.tableType,t=parseInt(e/1e3),n=parseInt(e/100)%10,a=e%10;if(3==t)2==n?i.invite_MJ2P(this._roomID,0,a,GroupDataMgr.clubID):i.invite(this._roomID,0,a,GroupDataMgr.clubID);else if(2==t){var o=e%100,s=this._conf.gamenums;i.invite_DB(this._roomID,o,s,"")}},onBtnShare_XLClick:function(){if(UserMgr.xlOpenId){var e=this.tableType,t=parseInt(e/1e3),n=parseInt(e/100)%10,i=e%10;if(3==t)if(2==n)a.invite_MJ2P(this._roomID,0,i,GroupDataMgr.clubID);else{var o=this._conf.gamenums;a.invite(this._roomID,0,o,GroupDataMgr.clubID)}else if(2==t){var s=e%100;a.invite_DB(this._roomID,s,i,"")}}else publicWindow.alert.show("\u63d0\u793a","\u672a\u7ed1\u5b9a\u95f2\u804a\u53f7\u4e0d\u80fd\u5206\u4eab")},onBtnSit:function(e){console.log("onBtnSit");GroupDataMgr.isOwner();var t=e.target.parent.getChildByName("userInfo");if(t.active){if(0==GroupDataMgr.type){var n=t.userId,i=[];i.push(n);var a=GroupDataMgr.userInfoMap;GroupDataMgr.getUsersInfo(i,function(e){a[n].agentLevel>=2?GroupDataMgr.getGroupLayerSp().OpenUserInfo(a[n]):publicWindow.alert.show("","\u4f4d\u7f6e\u5df2\u6709\u4eba")}.bind(this))}else{if(t.userId!=UserMgr.userId)return void publicWindow.alert.show("","\u4f4d\u7f6e\u5df2\u6709\u4eba");var o=GroupDataMgr.getGroupLayerSp().gteTableOfcurIndex();GroupDataMgr.enterRoomStyle={},GroupDataMgr.enterRoomStyle.curIndex=o;var s=this._roomID;Hall_ReqAndRes.enterRoom(s,function(){}.bind(this))}}else{o=GroupDataMgr.getGroupLayerSp().gteTableOfcurIndex();GroupDataMgr.enterRoomStyle={},GroupDataMgr.enterRoomStyle.curIndex=o;s=this._roomID;Hall_ReqAndRes.enterRoom(s,function(){}.bind(this))}},onBtnAddTable:function(e){var t;console.log("onBtnAddTable");var n=GroupDataMgr.gametype,i=GroupDataMgr.type,a=GroupDataMgr.getGroupLayerSp();if(1==i){if(3==n)0==(s=a.gteTableOfcurIndex())?t=3400:1==s&&(t=3200);else if(2==n)t=2400;else if(4==n){0==(s=a.gteTableOfcurIndex_TDH())?t=4400:1==s&&(t=4300)}this.openCreateTable(t,n)}else if(0==i){var o,s,r=a.getGroupMgrIndex();if(6==r)0==(s=a.gteTableOfcurIndex())?t=3400:1==s&&(t=3200),o=3;else 7==r&&(t=2400,o=2);this.openCreateTable(t,o)}},openCreateTable:function(e,t){GroupDataMgr.getGroupLayerSp().openCreateTable(e,t)}}),cc._RF.pop()},{WechatHelper:"WechatHelper",XLHelper:"XLHelper"}],groupDeskMgr:[function(e,t,n){"use strict";cc._RF.push(t,"017e7S/BWRKLqWX1S4MtqsK","groupDeskMgr");e("GameTypeConf");cc.Class({extends:cc.Component,properties:{desk_mj4p:cc.Node,desk_mj2p:cc.Node,desk_DB:cc.Node,desk_mj3p:cc.Node,_curIndex:0,deskMax:12,content_2pmj:cc.Node,mj2pOfSize:cc.Size,content_4pmj:cc.Node,mj4pOfSize:cc.Size,scroll_2mj:cc.Node,scroll_4mj:cc.Node,toggleNode:cc.Node,toggleNode_TDH:cc.Node},onLoad:function(){},start:function(){},getCurIndex:function(){return this._curIndex},getCurIndex_TDH:function(){for(var e=this.toggleNode_TDH,t=0;t<e.childrenCount;t++){if(e.children[t].getComponent(cc.Toggle).isChecked)return t}},setCurPage:function(e){var t=GroupDataMgr.gametype,n=GroupDataMgr.type;if(1==n){if(3==t)this.setPageByIndex(this._curIndex),this.toggleNode.active=!0,this.toggleNode_TDH.active=!1;else if(2==t)this.content_2pmj.active=!1,this.scroll_2mj.active=!1,this.content_4pmj.active=!0,this.scroll_4mj.active=!0,this.toggleNode.active=!1,this.toggleNode_TDH.active=!1;else if(4==t){var i=this.getCurIndex_TDH();this.setPageByIndex_TDH(i),this.toggleNode.active=!1,this.toggleNode_TDH.active=!0}}else 0==n&&(6==e?(this.setPageByIndex(this._curIndex),this.toggleNode.active=!0,this.toggleNode_TDH.active=!1):7==e&&(this.content_2pmj.active=!1,this.scroll_2mj.active=!1,this.content_4pmj.active=!0,this.scroll_4mj.active=!0,this.toggleNode.active=!1,this.toggleNode_TDH.active=!1))},setPageByIndex:function(e){this._curIndex=e,0==this._curIndex?(this.content_2pmj.active=!1,this.scroll_2mj.active=!1,this.content_4pmj.active=!0,this.scroll_4mj.active=!0):1==this._curIndex&&(this.content_2pmj.active=!0,this.scroll_2mj.active=!0,this.content_4pmj.active=!1,this.scroll_4mj.active=!1);for(var t=0;t<this.toggleNode.children.length;t++){var n=this.toggleNode.children[t].getComponent(cc.Toggle);n.isChecked=e==t}},setPageByIndex_TDH:function(e){0==e?(this.content_2pmj.active=!1,this.scroll_2mj.active=!1,this.content_4pmj.active=!0,this.scroll_4mj.active=!0):1==e&&(this.content_2pmj.active=!0,this.scroll_2mj.active=!0,this.content_4pmj.active=!1,this.scroll_4mj.active=!1);for(var t=0;t<this.toggleNode_TDH.children.length;t++){var n=this.toggleNode_TDH.children[t].getComponent(cc.Toggle);n.isChecked=e==t}},getPreByRoomID:function(e){for(var t,n=0;n<this.content_2pmj.childrenCount;n++){if((i=this.content_2pmj.children[n]).getComponent("groupDeskItem")._roomID==e)return t=i}for(n=0;n<this.content_4pmj.childrenCount;n++){var i;if((i=this.content_4pmj.children[n]).getComponent("groupDeskItem")._roomID==e)return t=i}return t},freshUsers:function(e,t){this.getPreByRoomID(t).getComponent("groupDeskItem").freshUsers(e)},initTableList:function(e,t){var n=[],i=[];for(var a in e){var o=e[a].type,s=parseInt(o/1e3);if(t==s){var r=parseInt(o/100)%10;3==s?4==r?i.push(e[a]):2==r&&n.push(e[a]):2==s?i.push(e[a]):4==s&&(4==r?i.push(e[a]):3==r&&n.push(e[a]))}}GroupDataMgr.tablesInfo_2mj=n,GroupDataMgr.tablesInfo_4mj=i,4==t?this.createTables2(n,3):this.createTables2(n,2),this.createTables2(i,4),this.refreshTables()},createTables2:function(e,t){4==t?this.content_4pmj.removeAllChildren():t<4&&this.content_2pmj.removeAllChildren();var n=GroupDataMgr.isOwner();for(var i in e){var a=e[i].type,o=parseInt(a/1e3),s=parseInt(a/100)%10,r=this.getDeskByType(s,o);r.active=!0;var c=r.getComponent("groupDeskItem");if(c.initDesks(),c.setTableByState(0),c.setRoomID(e[i].roomId),c.setTableType(a),c.setSubSprShow(n),c._conf=JSON.parse(e[i].conf),2==o){var l=a%100%10;d=0==parseInt(a%100/10)?0==l?"\u5168\u6697\u56fa\u5b9a\u642d\u6863":"\u5168\u6697\u7ffb\u724c\u914d\u5bf9":0==l?"\u660e\u53cc\u957f\u671f\u642d\u6863":"\u660e\u53cc\u7ffb\u724c\u914d\u5bf9",d+=c._conf.gamenums+"\u5c40",c.setDec(d),this.content_4pmj.addChild(r)}else if(3==o){var h=a%10;d=4==s?0==h?"40\u7247\u7206\u5e84":"\u676d\u9ebb8\u5c40":0==h?"\u6709\u8d22\u5fc5\u62f7":"8\u5c40\u81ea\u6478",c.setDec(d),4==s?this.content_4pmj.addChild(r):2==s&&this.content_2pmj.addChild(r)}else if(4==o){var d;d=1==a%100%10?"\u65e0\u4e70\u9a6c":"\u4e70\u9a6c",c.setDec(d),4==t?this.content_4pmj.addChild(r):3==t&&this.content_2pmj.addChild(r)}}var u=GroupDataMgr.gametype;if(n&&e.length<12){var g=this.getDeskByType(t,u);g.active=!0;var m=g.getComponent("groupDeskItem");m.initDesks(),m.setTableByState(1),4==t?this.content_4pmj.addChild(g):t<4&&this.content_2pmj.addChild(g)}},refreshTables:function(){if(this.content_4pmj.childrenCount>0){for(var e=0,t=0,n=3,i=117,a=(l=this.content_4pmj.children[0]).height/2,o=0,s=0;s<this.content_4pmj.childrenCount;s++){var r=(h=this.content_4pmj.children[s]).getContentSize(),c=parseInt(s/n);e=i+s%n*r.width,t=-(a+c*r.height),h.x=e,h.y=t}o=l.height*parseInt((this.content_4pmj.childrenCount+n-1)/n),this.content_4pmj.height=o}if(this.content_2pmj.childrenCount>0){var l;for(e=0,t=0,n=3,i=117,a=(l=this.content_2pmj.children[0]).height/2,o=0,s=0;s<this.content_2pmj.childrenCount;s++){var h,d=(h=this.content_2pmj.children[s]).getContentSize();c=parseInt(s/n);e=i+s%n*d.width,t=-(a+c*d.height),h.x=e,h.y=t}o=l.height*parseInt((this.content_2pmj.childrenCount+n-1)/n),this.content_2pmj.height=o}},getDeskByType:function(e,t){var n;return 3==t?2==e?n=cc.instantiate(this.desk_mj2p):4==e&&(n=cc.instantiate(this.desk_mj4p)):2==t?n=cc.instantiate(this.desk_DB):4==t&&(3==e?n=cc.instantiate(this.desk_mj3p):4==e&&(n=cc.instantiate(this.desk_mj4p))),n},changeInterface:function(){this.setPageByIndex(this._curIndex)},onBtnToggle:function(e){var t=e.target;"toggle1"==t.name?this._curIndex=0:"toggle2"==t.name&&(this._curIndex=1),this.changeInterface()}}),cc._RF.pop()},{GameTypeConf:"GameTypeConf"}],groupHistoryMgr:[function(e,t,n){"use strict";cc._RF.push(t,"1c64feTkQpELLSffdAN6fbO","groupHistoryMgr");var i=e("WechatHelper"),a=e("XLHelper");cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,contentGame:cc.Node,roomItem_2p:cc.Prefab,roomItem_4p:cc.Prefab,HistoryGamesItem:cc.Prefab,EndFrame:cc.Node,viewList:cc.Node,viewList1:cc.Node,GameInfoNode:cc.Node,editNode:cc.Node,HFMNode:cc.Node,btnReturn:cc.Node,toggleHistoryType:cc.Node},onLoad:function(){this.GameInfoNode.active=!1,this.viewList1.active=!1,this.viewList.active=!0},start:function(){},onBtnRecallInterface:function(){this.ShowHFM(!0)},onBtnCloseRecall:function(){this.ShowHFM(!1)},ShowHFM:function(e){this.HFMNode.active=e},getMyHisData:function(e){for(var t=[],n=UserMgr.userId,i=0;i<e.length;i++)for(var a=e[i],o=a.seats,s=0;s<o.length;s++){o[s].userid!=n||(a.idx=i,t.push(a))}return t},initHistoryList:function(e){for(var t=e,n=0;n<t.length;n++){"string"==typeof t[n]&&(t[n]=JSON.parse(t[n]))}this._historyData=t;var i=GroupDataMgr.isOwner();this._myHisData=i?this._historyData:this.getMyHisData(t),this.contentNode.removeAllChildren();for(n=0;n<this._myHisData.length;n++){var a,o=this._myHisData[n],s=o.conf;3==s.gametype?2==s.peoplemax?a=cc.instantiate(this.roomItem_2p):4==s.peoplemax&&(a=cc.instantiate(this.roomItem_4p)):2==s.gametype?a=cc.instantiate(this.roomItem_4p):4==s.gametype&&(a=cc.instantiate(this.roomItem_4p)),a.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.onViewItemClicked,this),this.contentNode.addChild(a),a.idx=i?n:o.idx,a.getComponent("HistoryRoomsItem").initRoomsItem(o)}var r=this.contentNode.childrenCount;this.contentNode.height=r*this.roomItem_2p.data.height,this._curRoomInfo=null},onViewItemClicked:function(e){var t=e.target.idx;console.log("historyItem click"),console.log(t),null==this._curRoomInfo?(this.room_idx=t,this.getGameListOfRoom(t)):(this.game_idx=t,this.getDetailOfGame(t))},getGameListOfRoom:function(e){this.room_idx=e;var t=this._historyData[e];Hall_ReqAndRes.getRecord(t.uuid,function(e){this.getCGameOfRoom(e)}.bind(this))},getCGameOfRoom:function(e){var t=e.record,n=this._historyData[this.room_idx],i=[];for(var a in t)t[a]=JSON.parse(t[a]),i.push(t[a]);if(this._gameDetailArr=i,this._gameId){var o=this._gameId.length,s=this._gameId.substring(8,o);this._gameId=null,this.getDetailOfGame(s)}else i.sort(function(e,t){return e.create_time-t.create_time}),null!=t&&i.length>0&&(this.initGameHistoryList(n,i),this.setPlaybackInterface(1))},setPlaybackInterface:function(e){0==e?(this.GameInfoNode.active=!1,this.viewList1.active=!1,this.viewList.active=!0,this.btnReturn.active=!1):1==e&&(this.GameInfoNode.active=!0,this.viewList1.active=!0,this.viewList.active=!1,this.btnReturn.active=!0)},initGameHistoryList:function(e,t){var n;if(this.contentGame.removeAllChildren(),e.conf){var i=e.conf;n=0==i.gametype||3==i.gametype||4==i.gametype}else n=!0;for(var a=0;a<t.length;a++){var o=cc.instantiate(this.HistoryGamesItem);this.contentGame.addChild(o);var s=o.getComponent("HistoryGamesItem");s.setIndex(a),s.sharebtn.on(cc.Node.EventType.TOUCH_END,this.onBtnSharedClicked,this),s.sharebtn.idx=a,s.sharebtn_XL.on(cc.Node.EventType.TOUCH_END,this.onBtnShared_XLClicked,this),s.sharebtn_XL.idx=a,n&&s.relaybtn.on(cc.Node.EventType.TOUCH_END,this.onBtnOpClicked,this),s.initGamesItem(e,t[a])}this.initGameInfo(e,t);var r=this.contentGame.childrenCount;this.contentGame.height=r*this.HistoryGamesItem.data.height,this._curRoomInfo=e},dateFormat:function(e){var t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1;i=i>=10?i:"0"+i;var a=t.getDate();a=a>=10?a:"0"+a;var o=t.getHours();o=o>=10?o:"0"+o;var s=t.getMinutes();s=s>=10?s:"0"+s;var r=t.getSeconds();return n+"-"+i+"-"+a+" "+o+":"+s+":"+(r=r>=10?r:"0"+r)},initGameInfo:function(e,t){if(null!=t)if(t.length>0){var n,i;i=e.conf?(n=e.conf).peoplemax:4,this.viewList.active=!1,this.viewList1.active=!0;var a=this.GameInfoNode,o=a.getChildByName("lblRoomID").getComponent(cc.Label);4==n.gametype?o.string=e.id+"\u53f7\u623f\u95f4\uff08\u63a8\u5012\u80e1\uff09":3==n.gametype&&(o.string=e.id+"\u53f7\u623f\u95f4\uff08\u676d\u5dde\u9ebb\u5c06\uff09");t[0];var s,r=a.getChildByName("libTime").getComponent(cc.Label);s=this.dateFormat(1e3*e.time),r.string=s;for(var c=0;c<4;c++){var l="lblnames"+c;if(c<i){var h=e.seats[c];a.getChildByName(l).active=!0;var d=a.getChildByName(l).getComponent(cc.Label),u=dc.utils.setNameClamp(h.name);d.string=u}else a.getChildByName(l).active=!1}var g=a.getChildByName("lblUuid");g.active=!0,g.getComponent(cc.Label).string="uuid:"+e.uuid}else this.GameInfoNode.active=!0,this.viewList.active=!1,this.viewList1.active=!1;else this.GameInfoNode.active=!0},getDetailOfGame:function(e){var t=this._gameDetailArr[e];if(cc.log("HFdetal"),t.action_records.length>0){var n=t.action_records[0];n.conf&&(3==n.conf.gametype?(GameDataMgr.initReplayData(t),UIMgr.pushUI(UIMgr.HZMJGame)):4==n.conf.gametype?(GameDataMgr.initReplayData(t),UIMgr.pushUI(UIMgr.TDHGame)):(dc.GameDataMgr.initReplayData(t),UIMgr.pushUI(UIMgr.HZMJGame)))}},getlShareVideo:function(e){this._gameId=e;var t=e.substring(0,8),n=e.length,i=e.substring(8,n);i=Number(i),Hall_ReqAndRes.getRecord(t,function(e){var t=e.record,n=[];for(var a in t)t[a]=JSON.parse(t[a]),n.push(t[a]);n.sort(function(e,t){return e.create_time-t.create_time}),this._gameDetailArr=n,this.getDetailOfGame(i)}.bind(this))},onBtnOpClicked:function(e){var t=e.target.idx;console.log(t),null==this._curRoomInfo?(this.room_idx=t,this.getGameListOfRoom(t)):(this.game_idx=t,this.getDetailOfGame(t))},onBtnclose:function(){null==this._curRoomInfo||(this.setPlaybackInterface(0),this.initHistoryList(this._historyData),this._gameDetailArr=[])},onBtnSharedClicked:function(e){var t=e.target.idx;console.log(t);var n=this._curRoomInfo.uuid+t;i.shareRecallToMate(n)},onBtnShared_XLClicked:function(e){var t=e.target.idx;console.log("onBtnShared_XLClicked"),console.log(t);var n=this._curRoomInfo.uuid+t;a.shareRecallToMate(n)},onBtnRecallClose:function(){console.log("onBtnRecallClose"),this.ShowHFM(!1)},onBtnSureHFM:function(){var e=this.editNode.getChildByName("EditBox").getComponent(cc.EditBox);e.string,this.getlShareVideo(e.string)},onBtnTextChanged:function(){this.initEdit()},initEdit:function(){var e=this.editNode,t=this.editNode.getChildByName("bg_Edit");""==e.string?t.active=!0:t.active=!1},onBtnSearchOldGrade:function(e){var t;t=e.target.parent.getComponent(cc.Toggle).isChecked?1:2,GroupDataMgr.getGroupLayerSp().getClubHistory(t),this.setPlaybackInterface(0)},setToggleRecover:function(){this.toggleHistoryType.getComponent(cc.Toggle).isChecked=!0}}),cc._RF.pop()},{WechatHelper:"WechatHelper",XLHelper:"XLHelper"}],groupInfoItem:[function(e,t,n){"use strict";cc._RF.push(t,"6e06dHhzaxPB5baxROe8+wD","groupInfoItem"),cc.Class({extends:cc.Component,properties:{lblName:cc.Label,ownerSpr:cc.Node},start:function(){},initItem:function(e,t,n){this.lblName.string=e||"",this.ownerSpr.active=t,this.clubID=n},onBtnSwtichClub:function(){this.clubID&&GroupDataMgr.getGroupLayerSp().enterClub(this.clubID)}}),cc._RF.pop()},{}],groupProfile:[function(e,t,n){"use strict";cc._RF.push(t,"47cfcSXZUlFj7Lyrs5HDik/","groupProfile"),cc.Class({extends:cc.Component,properties:{lblName:cc.Label,lblDec:cc.Label,lblCreateTime:cc.Label,ownerIcon:cc.Node,memberItme:cc.Node,scrollConentNode:cc.Node,lblContent:cc.Label},start:function(){},setOwnerIcon:function(e,t){var n=GroupDataMgr.userInfoMap[t];n&&n.iconSFrame?this.ownerIcon.getComponent(cc.Sprite).spriteFrame=n.iconSFrame:this.ownerIcon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){e&&n&&(n.iconSFrame=e)})},setClubInfo:function(e){this.lblName.string=e.name,this.lblDec.string=e.info},setGroupName:function(e){this.lblName.string=e},setInfo:function(e){this.lblDec.string=e},setCClubTime:function(e){this.lblCreateTime.string=e},setNotice:function(e){this.lblContent.string=e||""},initMemberList:function(e){this.scrollConentNode.removeAllChildren();for(var t=0,n=(GroupDataMgr.isOwner(),0);n<e.length;n++){var i=e[n],a=cc.instantiate(this.memberItme);a.active=!0,t+=a.height,this.scrollConentNode.addChild(a),a.getComponent("circleMemberItem").initIconAndName(i,n+1)}this.scrollConentNode.height=t}}),cc._RF.pop()},{}],groupRankingItem:[function(e,t,n){"use strict";var i;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"e875a4HK+RG7pB4Kohr6XOG","groupRankingItem"),cc.Class({extends:cc.Component,properties:(i={lblNumber:cc.Label,lblName:cc.Label,lblGameNum:cc.Label,icon:cc.Node},a(i,"lblGameNum",cc.Label),a(i,"lblWinner",cc.Label),a(i,"bgNode",cc.Node),a(i,"lblUserID",cc.Label),i),start:function(){},initItemData:function(e,t){this.setBgByIndex(t),this.lblNumber.string=""+t,this.lblName.string=e.name||"",this.lblGameNum.string="\u5c40\u6570:"+e.count,this.lblWinner.string="\u5927\u8d62\u5bb6\u6b21\u6570:"+e.win;var n=this.icon.getComponent("ImageLoader_Gold"),i=e.headImg||"",a=GroupDataMgr.userInfoMap[e.userId];(this.lblUserID.string=e.userId,a&&a.iconSFrame)?this.icon.getComponent(cc.Sprite).spriteFrame=a.iconSFrame:n.setIcon(i,e.userId,function(e){e&&a&&(a.iconSFrame=e)})},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)}}),cc._RF.pop()},{}],groupRanking:[function(e,t,n){"use strict";cc._RF.push(t,"a8cd49TubJEMZFquosOZWwE","groupRanking"),cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,rankItem:cc.Node,toggleNode:cc.Toggle},start:function(){},recoverToggle:function(){this.toggleNode.isChecked=!0},initRankList:function(e){this.contentNode.removeAllChildren();for(var t=0,n=0;n<e.length;n++){var i=cc.instantiate(this.rankItem);i.active=!0,t+=i.height,i.getComponent("groupRankingItem").initItemData(e[n],n+1),this.contentNode.addChild(i)}this.contentNode.height=t},onBtnSearchOld:function(e){var t;t=e.target.parent.getComponent(cc.Toggle).isChecked?1:2,GroupDataMgr.getGroupLayerSp().getRankAndCount(t)}}),cc._RF.pop()},{}],groupRequestMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ef5d3768udOSbyFYu1cmdxW","groupRequestMgr"),cc.Class({extends:cc.Component,properties:{groupReqItme:cc.Node,scrollConentNode:cc.Node,historyContentNode:cc.Node,strContent:cc.Node},start:function(){},initReqList:function(e){this.scrollConentNode.removeAllChildren();var t=0,n=0;for(var i in e){var a=cc.instantiate(this.groupReqItme);a.active=!0,n+=a.height,this.scrollConentNode.addChild(a),a.getComponent("circleReqItem").initItemData(e[i],parseInt(i),t+1),t++}this.scrollConentNode.height=n},initHistoryList:function(e){this.historyContentNode.removeAllChildren();for(var t,n=0;n<e.length;n++){var i=cc.instantiate(this.strContent);i.active=!0,this.historyContentNode.addChild(i),i.getComponent(cc.Label).string=e[n]}t=34*e.length,this.historyContentNode.height=t}}),cc._RF.pop()},{}],groupSwitchLayer:[function(e,t,n){"use strict";cc._RF.push(t,"1e4cd9kIFVF26OReYXpTgnO","groupSwitchLayer"),cc.Class({extends:cc.Component,properties:{expandBg:cc.Node,_expandHeight:52,clubInfoItem:cc.Node,content:cc.Node,curClubNode:cc.Node,parent1:cc.Node,parent2:cc.Node,scrollContent:cc.Node,swtichContent2:cc.Node,swtichGroupInfoItem:cc.Node},start:function(){},initCurClubInfo:function(e,t){this.curClubNode.getChildByName("lblName").getComponent(cc.Label).string=e,this.curClubNode.getChildByName("ownerSpr").active=t},removeChilds:function(){this.scrollContent.removeAllChildren(),this.swtichContent2.removeAllChildren()},initClubList:function(e){if(this.scrollContent.removeAllChildren(),this.swtichContent2.removeAllChildren(),e.length>=4){this.parent1.active=!0,this.parent2.active=!1;for(var t=0;t<e.length;t++){var n=e[t];(a=cc.instantiate(this.swtichGroupInfoItem)).active=!0,this.scrollContent.addChild(a),a.getComponent("switchClubInfoItem").initData(n)}var i=e?e.length:0;this.scrollContent.width=280*i}else{this.parent1.active=!1,this.parent2.active=!0;for(t=0;t<e.length;t++){var a;n=e[t];(a=cc.instantiate(this.swtichGroupInfoItem)).active=!0,this.swtichContent2.addChild(a),a.getComponent("switchClubInfoItem").initData(n)}}},onBtnClose:function(){this.node.active=!1}}),cc._RF.pop()},{}],groupTalkItem:[function(e,t,n){"use strict";cc._RF.push(t,"1d7dac0Y6JIPKk6JidFVbms","groupTalkItem"),cc.Class({extends:cc.Component,properties:{icon:cc.Node,lblName:cc.Label,lblcontent_None:cc.Label,lblcontent_RESIZE_HEIGHT:cc.Label,lblcontent_tt:cc.Label,qipaoNode:cc.Node,fontWidth:cc.Integer},start:function(){},initData:function(e){this.setIcon(e.headImg,e.userId),this.lblName.string=e.name,this.lblcontent_tt.string=e.content;var t,n,i=this.lblcontent_tt.node.width,a=parseInt(this.fontWidth);(i=i>=a?a:i)>=a?(this.lblcontent_RESIZE_HEIGHT.node.active=!0,this.lblcontent_None.node.active=!1,n=this.lblcontent_RESIZE_HEIGHT):(this.lblcontent_RESIZE_HEIGHT.node.active=!1,this.lblcontent_None.node.active=!0,n=this.lblcontent_None),n.string=e.content,t=n.fontSize;var o=n.node.height,s=parseInt(o/t),r=o+20<45?45:o+20;this.qipaoNode.height=r,this.qipaoNode.width=i+40;var c=(s+1)*t+20;c=c<80?90:c+20,this.node.height=c},getcharCodeNum:function(e){if(""==e)return 0;for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i>256?t+=2:i>=65&&i<=90?t+=2:t++}return t},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t)}}),cc._RF.pop()},{}],holdsManager2:[function(e,t,n){"use strict";cc._RF.push(t,"3c3d4Ri9kZO96wXuyVG5RbD","holdsManager2"),cc.Class({extends:cc.Component,properties:{Side:0,holdsNode:cc.Node,foldsNode:cc.Node,Distance_Width:80,Distance_Height:0,lastHoldsWight:30,lastHoldsHeight:0,_Mopai:null,_HoldsType:0,showOutCardNode:cc.Node,OptionNode:cc.Node,holdsTempNode:cc.Node,opertionNode:cc.Node},onLoad:function(){if(0==this.Side||2==this.Side){var e=cc.find("Canvas").getComponent(cc.Canvas).designResolution,t=dc.utils.getScaleRate(e);this.node.parent.setScale(t)}},setOpration:function(e){this.opertionNode=e},setOutCardNode:function(e){this.showOutCardNode=e},getOptionNodeShow:function(){var e=!1;return this.OptionNode&&(e=this.OptionNode.active),e},setSide:function(e){this.Side=e},initHoldsInSide:function(e){console.log("removeAll holds"),this.holdsNode.removeAllChildren()},createHoldPrefab:function(e){var t,n=(t=0==this.Side?cc.instantiate(dc.ResourceMgr.MJPrefabArr[this.Side]):cc.instantiate(dc.ResourceMgr.MJFoldsPrefab[this.Side])).getComponent(dc.ResourceMgr.geScriptLabel(0));return n&&(n.setMJID(e),33==e&&n.setMagic(e),0==this.Side?n.initMJ():n.initFoldsMJ()),t},createFallHoldPrefab:function(e){var t,n=(t=0==this.Side?cc.instantiate(dc.ResourceMgr.MJFallPrefab[this.Side]):cc.instantiate(dc.ResourceMgr.MJFoldsPrefab[this.Side])).getComponent(dc.ResourceMgr.geScriptLabel(0));return n&&(n.setMJID(e),33==e&&n.setMagic(e),n.initFoldsMJ()),t},createEmptyPrefab:function(e){var t=null;if(0!=this.Side){var n=(t=cc.instantiate(dc.ResourceMgr.MJPrefabArr[this.Side])).getComponent(dc.ResourceMgr.geScriptLabel(0));return n&&n.setMJID(99),t}return null},createFallHoldsBySide:function(e,t){console.log("createFallHoldsBySide"),this.initHoldsInSide();for(var n=this.holdsNode,i=0;i<e.length;i++){var a=this.createFallHoldPrefab(e[i],this.Side);a.getComponent(dc.ResourceMgr.geScriptLabel(0));n.addChild(a)}},initHolds:function(e,t){0==this._HoldsType?this.initZHolds(e,t):1==this._HoldsType&&this.initFallHolds(e)},initZHolds:function(e,t){var n=this.holdsNode;if(e.length<n.childrenCount)0==this.Side?this.createHoldsBySide(e,!0):this.createEmptyMJs(e);else for(var i=0;i<e.length;i++){var a=e[i];if(i>=n.childrenCount)if(0==this.Side){var o=(s=this.createHoldPrefab(e[i],!0)).getComponent(dc.ResourceMgr.geScriptLabel(0));n.addChild(s),t&&(s.on(cc.Node.EventType.TOUCH_END,this.onMJTouchBegin,this),s.on(cc.Node.EventType.TOUCH_END,this.onMJTouchEnd,this),s.on(cc.Node.EventType.TOUCH_MOVE,this.onMJTouchMoved,this),s.on(cc.Node.EventType.TOUCH_CANCEL,this.onMJTouchCancel,this))}else{var s=this.createEmptyPrefab(this.Side);n.addChild(s)}else(o=n.children[i].getComponent(dc.ResourceMgr.geScriptLabel(0))).setMJID(a),33==a&&o.setMagic(a),0==this.Side?o.initMJ():o.initFoldsMJ()}},initFallHolds:function(e){var t=this.holdsNode;if(e.length<t.childrenCount)this.createFallHoldsBySide(e);else for(var n=0;n<e.length;n++){var i=e[n];if(n>=t.childrenCount){var a=this.createFallHoldPrefab(e[n],this.Side),o=a.getComponent(dc.ResourceMgr.geScriptLabel(0));t.addChild(a)}else{(o=t.children[n].getComponent(dc.ResourceMgr.geScriptLabel(0))).setMJID(i),33==i&&o.setMagic(i),o.initFoldsMJ()}}},createHolds:function(e,t){0==this._HoldsType?0==this.Side?this.createHoldsBySide(e,t):this.createEmptyMJs(e):1==this._HoldsType&&this.createFallHoldsBySide(e)},createHoldsBySide:function(e,t){console.log("createHoldsBySide"),console.log(e),this.initHoldsInSide();for(var n=this.holdsNode,i=0;i<e.length;i++){var a=this.createHoldPrefab(e[i]);a.getComponent(dc.ResourceMgr.geScriptLabel(0));n.addChild(a),t&&(a.on(cc.Node.EventType.TOUCH_END,this.onMJTouchBegin,this),a.on(cc.Node.EventType.TOUCH_END,this.onMJTouchEnd,this),a.on(cc.Node.EventType.TOUCH_MOVE,this.onMJTouchMoved,this),a.on(cc.Node.EventType.TOUCH_CANCEL,this.onMJTouchCancel,this))}},createEmptyMJs:function(e){this.initHoldsInSide();for(var t=this.holdsNode,n=0;n<e.length;n++){var i=this.createEmptyPrefab(this.Side);t.addChild(i)}},setHoldType:function(e){this._HoldsType=e},addFallMJ:function(e){var t=this.createFallHoldPrefab(e),n=this.holdsNode;t.getComponent(dc.ResourceMgr.geScriptLabel(0));n.addChild(t)},addHoldMJ:function(e,t){var n=this.createHoldPrefab(e),i=this.holdsNode;n.getComponent(dc.ResourceMgr.geScriptLabel(0));i.addChild(n),t&&(n.on(cc.Node.EventType.TOUCH_END,this.onMJTouchBegin,this),n.on(cc.Node.EventType.TOUCH_END,this.onMJTouchEnd,this),n.on(cc.Node.EventType.TOUCH_MOVE,this.onMJTouchMoved,this),n.on(cc.Node.EventType.TOUCH_CANCEL,this.onMJTouchCancel,this))},addEmptyMJ:function(){var e=this.createEmptyPrefab(this.Side);this.holdsNode.addChild(e)},removeEmptyMJ:function(){this.removeMjByID(99)},removeMjByID:function(e){for(var t=this.holdsNode,n=0;n<t.childrenCount;n++){var i=t.children[n];if(i.getComponent(dc.ResourceMgr.geScriptLabel(0)).MJID==e)return console.log("remove pai:"+e),void i.removeFromParent()}},removePongByID:function(e){console.log("Pong Remove");for(var t=0;t<2;t++)this.removeMjByID(e)},removeEmptyKongbyNum:function(e){for(var t=0;t<e;t++)this.removeEmptyMJ()},removeMJByNum:function(e){for(var t=0;t<e;t++){this.holdsNode.children[0].removeFromParent()}},removeKongByID:function(e){for(var t=this.holdsNode,n=0;n<t.childrenCount;n++){var i=t.children[n];i.getComponent(dc.ResourceMgr.geScriptLabel(0)).MJID==e&&(i.removeFromParent(),n--)}},shoot:function(e){console.log(e),e=Number(e),Hall_ReqAndRes.outCard(e,function(e){},GameDataMgr.conf.createtype),GameDataMgr.outCardStartT=new Date,this.hideOpration(),GameDataMgr.hasOutCard=!0},hideOpration:function(){},addTempHolds:function(e){this.holdsTempNode.removeAllChildren();var t=cc.instantiate(e);t.active=!1;t.getComponent(dc.ResourceMgr.geScriptLabel(0));var n=GameDataMgr.getGamePage()._outCardNode.getComponent("showOutCardLayer2").getMJAniLocalNode(0);n.removeAllChildren(),n.addChild(t)},isStartTouching:function(e){var t=e.target.getComponent(dc.ResourceMgr.geScriptLabel(0));return GameDataMgr.turn!=GameDataMgr.seatIndex?(console.log("not your turn."+GameDataMgr.turn),!1):GameDataMgr.hasOutCard?void console.log("has outCard"):!!t.getTouchEnable()},outCardAni:function(e,t){this.foldsNode.getComponent("foldsManager")},onMJTouchBegin:function(e){console.log("onMJTouchBegin")},optionCheck:function(){if(this.getOptionNodeShow()){var e={oper:512};dc.goldNet.send("oper",e,dc.GoldDataMgr.gameRouteKey)}},onMJTouchCancel:function(e){if(this.isStartTouching(e)){var t=e.target,n=t.getComponent(dc.ResourceMgr.geScriptLabel(0));if(n.isMoving())t.y>80?(this.addTempHolds(t),this.optionCheck(),this.shoot(n.MJID),n.outCard(),GameDataMgr.hasOutCard=!0):this.refreshHolds(),this.setAllMJTouchDeal(),n.setTouchDeal(!1),n.setMoving(!1);else for(var i=this.holdsNode,a=0;a<i.childrenCount;a++){var o=i.children[a],s=o.getComponent(dc.ResourceMgr.geScriptLabel(0));t==o?s._isTouch?(this.addTempHolds(t),this.optionCheck(),s.outCard(),this.shoot(n.MJID),GameDataMgr.hasOutCard=!0):s.setTouchDeal(!0):s.setTouchDeal(!1)}}},setAllMJTouchDeal:function(){for(var e=this.holdsNode,t=0;t<e.childrenCount;t++){var n=e.children[t].getComponent(dc.ResourceMgr.geScriptLabel(0));n.getTouched()&&n.setTouchDeal(!1)}},onMJTouchEnd:function(e){if(this.isStartTouching(e)){var t=e.target,n=t.getComponent(dc.ResourceMgr.geScriptLabel(0));if(n.isMoving())t.y>80?(this.optionCheck(),this.shoot(n.MJID),this.addTempHolds(t),n.outCard(),GameDataMgr.hasOutCard=!0):this.refreshHolds(),this.setAllMJTouchDeal(),n.setTouchDeal(!1),n.setMoving(!1);else for(var i=this.holdsNode,a=0;a<i.childrenCount;a++){var o=i.children[a],s=o.getComponent(dc.ResourceMgr.geScriptLabel(0));t==o?s._isTouch?(this.addTempHolds(t),this.optionCheck(),s.outCard(),this.shoot(n.MJID),GameDataMgr.hasOutCard=!0):s.setTouchDeal(!0):s.setTouchDeal(!1)}}},onMJTouchMoved:function(e){if(console.log("Moved start"),this.isStartTouching(e)){console.log("Moved2");var t=e.touch,n=e.target;t._startPoint,t._prevPoint,t._point;console.log(t),console.log("Moved3");var i=t.getDelta();if(console.log("Moved4"),0!=i.x||0!=i.y)console.log("Moved5"),n.getComponent(dc.ResourceMgr.geScriptLabel(0)).setMoving(!0);n.x+=i.x,n.y+=i.y,console.log("Moved")}},refreshHolds:function(){this.refreshZ()},refreshZ:function(e){var t=this.Side,n=this.Distance_Width,i=this.Distance_Height;if(0==t||(1==t?n=-n:2==t?n=-n:3==t&&(n=-n,i=-i)),this.isTurner())var a=(GameDataMgr.MJDataMgr.HOLDS_NUM-this.holdsNode.childrenCount)*n,o=(GameDataMgr.MJDataMgr.HOLDS_NUM-this.holdsNode.childrenCount)*i;else a=(GameDataMgr.MJDataMgr.HOLDS_NUM-this.holdsNode.childrenCount-1)*n,o=(GameDataMgr.MJDataMgr.HOLDS_NUM-this.holdsNode.childrenCount-1)*i;var s=0,r=0,c=this.holdsNode;this.sortMJ(t);for(var l=0;l<c.childrenCount;l++){var h=c.children[l],d=h.getComponent(dc.ResourceMgr.geScriptLabel(0));s=n*l,r=i*l,0==t||2==t?h.x=a+s:1!=t&&3!=t||(h.x=a+s,h.y=o+r),0==t&&d.saveOriginVec2()}this.dealLastMJPosition(t)},sortMJ:function(e){var t=this.holdsNode;if(1==this.Side)for(var n=100,i=0;i<t.childrenCount;i++){t.children[i].zIndex=n,n--}else for(n=1,i=0;i<t.childrenCount;i++){t.children[i].zIndex=n,n++}},dealLastMJPosition:function(e){if(this.isTurner(e)){var t=this.lastHoldsWight,n=this.lastHoldsHeight,i=this.Distance_Width,a=this.Distance_Height;0==this.Side||(1==this.Side?(t=-t,i=-i):2==this.Side?(t=-t,i=-i):3==this.Side&&(t=-t,i=-i,n=-n,a=-a));var o,s,r=this.holdsNode,c=0;c=r.childrenCount-1,o=(GameDataMgr.MJDataMgr.HOLDS_NUM-1)*i,s=(GameDataMgr.MJDataMgr.HOLDS_NUM-1)*a;var l=r.children[c];0==e||2==e?l.x=o+t:1!=e&&3!=e||(l.x=o+t,l.y=s+n)}},getLastHold:function(){var e;return e=this.holdsNode.childrenCount-1,this.holdsNode.children[e]},isTurner:function(e){var t,n=this.holdsNode;return n.childrenCount%3==2?(t=!0,this._Mopai=n.children[n.childrenCount-1]):(t=!1,this._Mopai=null),t},setCipiaoColor:function(e){var t=this.holdsNode,n=0;this.isTurner(this.Side)?(n=t.childrenCount-1,(a=t.children[n-1].getComponent(dc.ResourceMgr.geScriptLabel(0))).setUnOutCard(!1),a.setTouchEnable(!0)):n=t.childrenCount;for(var i=0;i<n;i++){var a;(a=t.children[i].getComponent(dc.ResourceMgr.geScriptLabel(0))).setUnOutCard(e),a.setTouchEnable(!e)}},setEnableArr:function(e,t){if(e)for(var n=0;n<e.length;n++){var i=Number(e[n]);this.setMJEnableStatus(i,t)}},setMJEnableStatus:function(e,t){for(var n=this.holdsNode,i=0;i<n.childrenCount;i++){var a=n.children[i].getComponent(dc.ResourceMgr.geScriptLabel(0));a.MJID==e&&(a.setUnOutCard(!t),a.setTouchEnable(t))}}}),cc._RF.pop()},{}],index:[function(e,t,n){"use strict";cc._RF.push(t,"0dc91VfbB1KJYqG+Sx1zvD+","index");var i=e("emitter");window.EventEmitter=i;var a=e("protocol");window.Protocol=a;var o=e("protobuf");window.protobuf=o;var s=e("client");window.pomelo=s;var r=e("UserMgr");window.UserMgr=new r;var c=e("UIMgr");window.UIMgr=c;var l=e("AnysdkMgr");window.AnysdkMgr=new l,window.AnysdkMgr.init();var h=e("VoiceMgr");window.VoiceMgr=new h,window.VoiceMgr.init();var d=e("AudioMgr");window.audioMgr=new d,window.audioMgr.init();var u=e("GameDataMgr");window.GameDataMgr=new u,window.GameDataMgr.init();var g=e("GroupDataMgr");window.GroupDataMgr=new g;var m=e("ChatDataMgr");window.ChatDataMgr=new m;var p=e("ArenaDataMgr");window.ArenaDataMgr=new p,window.ArenaDataMgr.init();var f=e("Hall_ReqAndRes");window.Hall_ReqAndRes=f;var v=e("NetMgr");window.NetMgr=v;var _=e("HttpMgr");window.HttpMgr=_,window.publicWindow={},cc._RF.pop()},{AnysdkMgr:"AnysdkMgr",ArenaDataMgr:"ArenaDataMgr",AudioMgr:"AudioMgr",ChatDataMgr:"ChatDataMgr",GameDataMgr:"GameDataMgr",GroupDataMgr:"GroupDataMgr",Hall_ReqAndRes:"Hall_ReqAndRes",HttpMgr:"HttpMgr",NetMgr:"NetMgr",UIMgr:"UIMgr",UserMgr:"UserMgr",VoiceMgr:"VoiceMgr",client:"client",emitter:"emitter",protobuf:"protobuf",protocol:"protocol"}],inviteListMgr:[function(e,t,n){"use strict";cc._RF.push(t,"5242cU0lBNDP7o2jJzdxuFQ","inviteListMgr"),cc.Class({extends:cc.Component,properties:{groupInviteItme:cc.Node,scrollConentNode:cc.Node,btnClose_left:cc.Node,btnClose_right:cc.Node},start:function(){},initInviteList:function(e){this.scrollConentNode.removeAllChildren();for(var t=0;t<e.length;t++){var n=cc.instantiate(this.groupInviteItme);n.active=!0,this.scrollConentNode.addChild(n),n.getComponent("invitedItem").initReqData(e[t])}},onBtnCloseInvtie:function(){this.node.active=!1},setBtnClose:function(e){this.btnClose_left.active=e,this.btnClose_right.active=!e}}),cc._RF.pop()},{}],inviteSearch:[function(e,t,n){"use strict";cc._RF.push(t,"1e1b04D9ktOL4e4uayc5AG6","inviteSearch"),cc.Class({extends:cc.Component,properties:{infoNode:cc.Node,icon:cc.Node,lblName:cc.Label,lblID:cc.Label,btnInvite:cc.Node,inputNode:cc.Node,ebox_invite:cc.EditBox},start:function(){},initInfo:function(e,t,n){t=t||"",this.lblName.string=e||"",this.lblID.string="ID:"+n,this.setIcon(t,n)},setIcon:function(e,t){var n=GroupDataMgr.userInfoMap[t];n&&n.iconSFrame?this.icon.getComponent(cc.Sprite).spriteFrame=n.iconSFrame:this.icon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){e&&n&&(n.iconSFrame=e)})},open:function(){this.infoNode.active=!1,this.btnInvite.active=!1,this.inputNode.active=!0},openInfo:function(){this.infoNode.active=!0},openInvite:function(){this.btnInvite.active=!0},onBtnSearch:function(){var e=this.ebox_invite.string;if(0!=e.length){var t=parseInt(e),n=[];GroupDataMgr.userInfoMap[t]||n.push(t),GroupDataMgr.getUsersInfo(n,function(){this.openInfo();var e=GroupDataMgr.userInfoMap[t];this.initInfo(e.name,e.headImg,t),this.curUserID=t,this.ebox_invite.string="",this.btnInvite.active=!0}.bind(this))}},onBtnSendInvite:function(){this.curUserID!=GroupDataMgr.ownerID?GroupDataMgr.memberNum.indexOf(this.curUserID)>=0?publicWindow.alert.show("","\u8be5\u6210\u5458\u5df2\u7ecf\u5b58\u5728"):Hall_ReqAndRes.inviteUser(this.curUserID,GroupDataMgr.clubID,function(e){e.code?publicWindow.alert.show("\u63d0\u793a",e.msg):publicWindow.alert.show("\u63d0\u793a","\u9080\u8bf7\u6210\u529f")}.bind(this)):dc.publicWindow.alert.show("","\u4e0d\u80fd\u9080\u8bf7\u7fa4\u4e3b")}}),cc._RF.pop()},{}],invitedItem:[function(e,t,n){"use strict";cc._RF.push(t,"56f64WpwfBLWoOa9QodRemY","invitedItem"),cc.Class({extends:cc.Component,properties:{lblName:cc.Label,icon:cc.Node,lblClubName:cc.Label},start:function(){},initReqData:function(e){this.setClubName(e.clubName||"");var t=e.headImg||"";this._userID=e.userId||null,this._clubID=e.clubId||null;var n=GroupDataMgr.userInfoMap[e.userID];n&&n.iconSFrame?this.icon.getComponent(cc.Sprite).spriteFrame=n.iconSFrame:this.icon.getComponent("ImageLoader_Gold").setIcon(t,e.userID,function(e){e&&n&&(n.iconSFrame=e)})},setClubName:function(e){var t;e.length>9?t=e.substr(0,8)+"...":t=e;this.lblClubName.string=t},onBtnInviteAgree:function(e){var t={};t.clubID=this._clubID,t.oper=1;var n=""+this._clubID;Hall_ReqAndRes.invitedOpt(1,n,function(e){if(e.code)publicWindow.alert.show("",e.msg);else{GroupDataMgr.inviteList=e.data.requests,GroupDataMgr.addOtherClub(n);var t=GroupDataMgr.getGroupLayerSp();t.enterOnlyClub(),t.setClubInvite()}}),this._clubID=null,this.node.removeFromParent()},onBtnInviteDisagree:function(e){var t={};t.clubID=this._clubID,t.oper=2;var n=""+this._clubID;Hall_ReqAndRes.invitedOpt(0,n,function(e){e.code||(GroupDataMgr.inviteList=e.data.requests,GroupDataMgr.getGroupLayerSp().setClubInvite())}),this._clubID=null,this.node.removeFromParent()}}),cc._RF.pop()},{}],joinCircle:[function(e,t,n){"use strict";cc._RF.push(t,"50620u2zyRE4IXTC9IlrjAX","joinCircle"),cc.Class({extends:cc.Component,properties:{nums:{default:[],type:[cc.Label]},_inputIndex:0},onLoad:function(){this.initNum()},initNum:function(){for(var e=0;e<this.nums.length;e++)this.nums[e].string=""},onInput:function(e){if(!(this._inputIndex>=this.nums.length)&&(this.nums[this._inputIndex].string=e,this._inputIndex+=1,this._inputIndex==this.nums.length)){var t=this.parseRoomID();console.log("ok:"+t),this.onInputFinished(t)}},onResetClicked:function(){for(var e=0;e<this.nums.length;++e)this.nums[e].string="";this._inputIndex=0},onInputFinished:function(e){GroupDataMgr.isHasClub(e)?publicWindow.alert.show("","\u60a8\u5df2\u5728\u8be5\u5708\u5b50"):(Hall_ReqAndRes.enterClub(e,function(e){e.code?publicWindow.alert.show("",e.msg):publicWindow.alert.show("","\u7533\u8bf7\u6210\u529f")}),this.onResetClicked())},parseRoomID:function(){for(var e="",t=0;t<this.nums.length;++t)e+=this.nums[t].string;return e},onNumClicked:function(e){if("btn_Input_1"==e.target.name)this.onInput(1);else if("btn_Input_2"==e.target.name)this.onInput(2);else if("btn_Input_3"==e.target.name)this.onInput(3);else if("btn_Input_4"==e.target.name)this.onInput(4);else if("btn_Input_5"==e.target.name)this.onInput(5);else if("btn_Input_6"==e.target.name)this.onInput(6);else if("btn_Input_7"==e.target.name)this.onInput(7);else if("btn_Input_8"==e.target.name)this.onInput(8);else if("btn_Input_9"==e.target.name)this.onInput(9);else if("btn_Input_Lose_weight"==e.target.name){for(var t=0;t<this.nums.length;++t)this.nums[t].string="";this._inputIndex=0}else"btn_Input_0"==e.target.name?this.onInput(0):"btn_Input_del"==e.target.name&&this._inputIndex>0&&(this._inputIndex-=1,this.nums[this._inputIndex].string="")},onBtnClose:function(){this.node.active=!1}}),cc._RF.pop()},{}],operLayer_DB:[function(e,t,n){"use strict";cc._RF.push(t,"7d6230dXoJGarruekP191vU","operLayer_DB");var i=e("DBTips");e("CardTypeCheck");cc.Class({extends:cc.Component,properties:{_cardsMgr:null,oper0:cc.Node,oper1:cc.Node,_selectType:1,_curSelectData:null},onLoad:function(){},setBtnOutcardEnable:function(e){this.oper0.getChildByName("btnOutCard").getComponent(cc.Button).interactable=e},setSelectType:function(e){this._selectType=e},getOriginPos:function(e){var t=new cc.Vec2,n=this.bg2.width;this.bg2.height;return 1==e?(t.x=-n/4,t.y=-50):(t.x=0,t.y=-50),t},setCardsMgr:function(e){this._cardsMgr=e},removeAllItems:function(){this.content.removeAllChildren()},initData:function(e){this.removeAllItems();for(var t=0;t<e.length;t++){var n=e[t];this.createSelectPrefab(n)}this._curSelectData[0].cards.length<=8?this.setSelectType(1):this.setSelectType(2),this.refreshPrefab();var i=1;i=1==this._selectType?80*parseInt(this._curSelectData.length/2)+40+20:80*this._curSelectData.length+40+20,this.bg2.height=i},refreshPrefab:function(){1==this._selectType?this.refresh0():this.refresh1()},refresh0:function(){for(var e=this.getOriginPos(this._selectType),t=this.bg2.width,n=0;n<this.content.children.length;n++){var i=this.content.children[n],a=n%2,o=parseInt(n/2),s=e.x+a*t/2,r=e.y-80*o;i.x=s,i.y=r}},refresh1:function(){for(var e=this.getOriginPos(this._selectType),t=(this.bg2.width,this.bg2.height,0);t<this.content.children.length;t++){var n=this.content.children[t],i=parseInt(t/1),a=e.x,o=e.y-80*i;n.x=a,n.y=o}},isMyTurn:function(){return GameDataMgr.turn==GameDataMgr.seatIndex?!0:(console.log("is not your turn"),!1)},onBtnOutCard:function(){if(this.isMyTurn()){var e=this._cardsMgr.getComponent("cardsMgr_DB").getOutcardData();GameDataMgr.DBDataMgr.getCardsSelect(e)?Hall_ReqAndRes.chupai_DB(e,function(e){e.code&&publicWindow.alert.show("",e.msg)}):publicWindow.alert.show("\u63d0\u793a","\u724c\u578b\u9519\u8bef")}else publicWindow.alert.show("\u63d0\u793a","\u6ca1\u8f6e\u5230")},onBtnTips:function(){var e=GameDataMgr.DBDataMgr.cardsData[GameDataMgr.seatIndex].holds,t=GameDataMgr.DBDataMgr.outCardData,n=i.check(e,t.pai);if(n){var a=UIMgr.getPageScript(UIMgr.DBGame);a.setTipsCards(n),a.doBtnOutcardEnbale()}},onBtnPass:function(){this.isMyTurn()?Hall_ReqAndRes.guo_DB(function(e){e.code&&publicWindow.alert.show("",e.msg)}):publicWindow.alert.show("\u63d0\u793a","\u6ca1\u8f6e\u5230")},setSelectNodeShow:function(e){},setOutcardType:function(e){this.setOperType(0);var t=this.oper0.getChildByName("btnOutCard"),n=this.oper0.getChildByName("btnTips"),i=this.oper0.getChildByName("btnPass");0==e?(t.active=!0,n.active=!0,i.active=!0):(t.active=!0,n.active=!1,i.active=!1)},setOperType:function(e){0==e?(this.oper0.active=!0,this.oper1.active=!1):(this.oper0.active=!1,this.oper1.active=!0)},onBtnClose:function(){}}),cc._RF.pop()},{CardTypeCheck:"CardTypeCheck",DBTips:"DBTips"}],pepleMgr:[function(e,t,n){"use strict";cc._RF.push(t,"5af1fHWZK1Ozruclh9ik1Eg","pepleMgr"),cc.Class({extends:cc.Component,properties:{memberItme:cc.Node,scrollConentNode:cc.Node,scrollViewCom:cc.Node,inviteNode:cc.Node,lblName:cc.Label,lblUserId:cc.Label,lblDec:cc.Label,lblCreateTime:cc.Label,ownerIcon:cc.Node,infoNode:cc.Node,ebox_notice:cc.EditBox,writeSpr:cc.Node,lblContent:cc.Label,noticeFixLayer:cc.Node},onLoad:function(){},start:function(){},setOwnerIcon:function(e,t){var n=GroupDataMgr.userInfoMap[t];n&&n.iconSFrame?this.ownerIcon.getComponent(cc.Sprite).spriteFrame=n.iconSFrame:this.ownerIcon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){e&&n&&(n.iconSFrame=e)})},setClubInfo:function(e){this.lblName.string=e.name,this.lblDec.string=e.info,this.lblUserId.string="ID:"+e.ownerId},setGroupName:function(e){this.lblName.string=e},setInfo:function(e){this.lblDec.string=e},setCClubTime:function(e){this.lblCreateTime.string=e},initMemberList:function(e){for(var t=0,n=GroupDataMgr.isOwner(),i=0;i<this.scrollConentNode.children.length;i++){this.scrollConentNode.children[i].active=!1}var a=this.scrollConentNode.children.length;for(i=0;i<e.length;i++){var o,s,r=e[i];i<a?((o=this.scrollConentNode.children[i]).active=!0,s=o.getComponent("circleMemberItem"),t+=o.height,s.initItemData(r,i+1)):((o=cc.instantiate(this.memberItme)).active=!0,t+=o.height,this.scrollConentNode.addChild(o),(s=o.getComponent("circleMemberItem")).initItemData(r,i+1),s.setDelFunc(this.onBtnDel.bind(this))),0==i?s.doOwnerHide(!0):s.doOwnerHide(!n)}var c=this.scrollConentNode.parent.height;(this.scrollConentNode.height=t,t<=c)?this.scrollConentNode.y=0:t-c<this.scrollConentNode.y&&(this.scrollConentNode.y=0)},refreshMemberJS:function(e){for(var t=0;t<this.scrollConentNode.children.length;t++){var n=this.scrollConentNode.children[t].getComponent("circleMemberItem"),i=n._userID,a=e[i]?e[i].count:0;n.initGameNum(a)}},refreshMemberATime:function(e){for(var t=0;t<e.length;t++){this.scrollConentNode.children[t];this.getPreByUserID(e[t].userID).getComponent("circleMemberItem").initUserTime(e[t].time)}},getPreByUserID:function(e){for(var t=0;t<this.scrollConentNode.children.length;t++){var n=this.scrollConentNode.children[t];if(n.getComponent("circleMemberItem")._userID==e)return n}return null},onBtnOpenFix:function(){GroupDataMgr.getGroupLayerSp().openCreateCircleNode(1)},closeInviteNode:function(e){this.inviteNode.active=!1},setDelInfoCheckNodeShow:function(e){this.infoNode.active=e},onBtnInvite:function(){this.inviteNode.active=!0,this.inviteNode.getComponent("inviteSearch").open()},onBtnCloseInvite:function(){this.inviteNode.active=!1},onBtnDel:function(e){var t=e.target;this.userID=t.userID,this.setDelInfoCheckNodeShow(!0),this.initUserInfo(t.userID);var n=function(e){var n=parseInt(t.userID);Hall_ReqAndRes.kickUser(GroupDataMgr.clubID,n,function(e){if(this.setDelInfoCheckNodeShow(!1),e.code)publicWindow.alert.show("",e.msg);else{t.parent.removeFromParent(),GroupDataMgr.dealMember(n);GroupDataMgr.getGroupLayerSp()}}.bind(this))}.bind(this);this.func=n},initUserInfo:function(e){var t,n=this.infoNode.getChildByName("name").getComponent(cc.Label),i=this.infoNode.getChildByName("id").getComponent(cc.Label),a=this.infoNode.getChildByName("iconNode").getChildByName("icon"),o=GroupDataMgr.userInfoMap[e],s=o.name||"";s.length>6?t=s.substr(0,5)+"...":t=s;(n.string="\u6635\u79f0:"+t,i.string="ID:"+e,o&&o.iconSFrame)?a.getComponent(cc.Sprite).spriteFrame=o.iconSFrame:a.getComponent("ImageLoader_Gold").setIcon(o.headIMG,e,function(e){e&&o&&(o.iconSFrame=e)})},onBtnSureDel:function(){this.func&&(this.func(),this.func=null)},onBtnCloseInfo:function(){this.setDelInfoCheckNodeShow(!1),this.func=null},onBtnNotice:function(){},onEboxNoticeBegin:function(){},onEboxNoticeFinish:function(){},onBtnSednnotice:function(){var e=this.ebox_notice.string;""!=e&&Hall_ReqAndRes.modifyClubInfo(GroupDataMgr.clubID,3,e,function(t){GroupDataMgr.notice=e,this.lblContent.string=e,this.ebox_notice.string="",GroupDataMgr.getGroupLayerSp().setFixHandle(t)}.bind(this))},setNotice:function(e){this.lblContent.string=e||""},onBtnOpenNoticeFix:function(){this.ebox_notice.string=GroupDataMgr.notice||"",this.writeSpr.active=!0,this.noticeFixLayer.active=!0},closeNoticeFix:function(){this.writeSpr.active=!0,this.noticeFixLayer.active=!1},onBtnCloseNoticeFix:function(){this.writeSpr.active=!0,this.noticeFixLayer.active=!1}}),cc._RF.pop()},{}],phraseFixItem:[function(e,t,n){"use strict";cc._RF.push(t,"baa77NfLqZB8bhc6F3+39Hi","phraseFixItem"),cc.Class({extends:cc.Component,properties:{content:cc.Label,btnRemove:cc.Node,ebox_content:cc.EditBox},start:function(){},initData:function(e,t){this._data=e,this._index=t,this.content.string=e.content,1==this._state&&(this.ebox_content.string=e.content)},OnEditChange:function(){this.content.string=this.ebox_content.string},OnEditEnd:function(){var e=this.ebox_content.string;if(e.trim(),0==this._state&&(this.content.string='\u70b9\u51fb"\u7b14"\u6dfb\u52a0\u5e38\u7528\u8bed',this.ebox_content.string=""),""!=e){var t,n=GameDataMgr.getGamePage().getChatSp();t=0==this._state?n.getNextConfList():this._index,GameDataMgr.addPhraseAndSave(e,t,0),n.initMyConfList()}else 1==this._state&&this.OnClickRemove()},OnClickRemove:function(){GameDataMgr.removePhraseAndSave(this._index,0),GameDataMgr.getGamePage().getChatSp().initMyConfList()},OnClickSend:function(){if(0!=this._state){var e=this.content.string;if(e.trim(),""!=e){var t={};t.content=e,t.sender=UserMgr.userId,t.type=2,Hall_ReqAndRes.chatRequest(t,function(e){GameDataMgr.getGamePage().setChatShow(!1)})}}},setState:function(e){this._state=e}}),cc._RF.pop()},{}],pokerPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"044d0vsmv9OQJPX6fIbu1bw","pokerPrefab"),cc.Class({extends:cc.Component,properties:{_cardNum:null,_cardID:0,_cardType:null,_cardValue:null,cardBg:cc.Sprite,cardBg2:cc.Sprite,cardSprite:cc.Sprite,shapeNode:cc.Sprite,numNode:cc.Sprite,tipsFrame:cc.Node,magicNode:cc.Node,cardNode:cc.Node,mask:cc.Node,_isFace:!1,_isSelect:!1,_isLight:!1,_backType:0,_isMagic:!1,_isMagicDisplace:!1,pokerType:0,bombShadow:cc.Node},onLoad:function(){},initData:function(){this.setLightState(!1),this._isSelect&&this.setSelectState()},setMaskShow:function(e){this.mask.active=e},getNumNameByType:function(e,t){return 0==e||2==e?"hong_":1==e||3==e?"hei_":""},getNameByType:function(e){return 0==e?"fk_":1==e?"meihua_":2==e?"hongtao_":3==e?"heitao_":""},setCardID:function(e){this._cardID=e,this._cardType=parseInt(e/16),this._cardValue=parseInt(e%16)},setCard:function(e){this.setCardID(e),0==e?(this.setFaceState(!1),this.setMagic(!1),this.updateBackType()):(this.setFaceState(!0),this.setCardNodeShow(!0),this.initCardTexture(),this.initCardNumTexture(),this.initShapeTexture(),this.setMagic(!1))},setMagicCard:function(e){this.setMagic(!0),this.setMagicType(!0),this.setCardID(e);var t=this.magicNode.getChildByName("caishenCardNode").getChildByName("sprNum").getComponent(cc.Sprite),n=this.getCardNumSFrameName(0,this._cardValue),i=dc.ResourceMgr.getPokerSFrameByName(n);t.spriteFrame=i},setMagicType:function(e){this._isMagicDisplace=e;var t=this.magicNode.getChildByName("caishen"),n=this.magicNode.getChildByName("caishenCardNode");e?(t.active=!1,n.active=!0):(t.active=!0,n.active=!1)},initCardNumTexture:function(){var e=this.getCardNumSFrameName(this._cardType,this._cardValue),t=dc.ResourceMgr.getPokerSFrameByName(e);this.numNode.spriteFrame=t,1==this.pokerType?4==this._cardType?this.numNode.node.setScale(.5,.4):this.numNode.node.setScale(.6,.6):this.numNode.node.setScale(1,1)},initShapeTexture:function(){var e=this._cardType;if(e>=0&&e<=4){var t="poker_shape_"+this.getNameByType(this._cardType)+"small",n=dc.ResourceMgr.getPokerSFrameByName(t);this.shapeNode.spriteFrame=n}},initCardTexture:function(){var e=this.getCardSFrameName(this._cardType,this._cardValue),t=dc.ResourceMgr.getPokerSFrameByName(e);this.cardSprite.spriteFrame=t,1==this.pokerType&&4==this._cardType?this.cardSprite.node.active=!1:this.cardSprite.node.active=!0},setType:function(e){this.pokerType=e},getCardSFrameName:function(e,t){var n,i=this.getNameByType(e);return 4==e?n=14==t?"xw":"dw":0==this.pokerType?n=t>10&&t<=13?""+t:"big":1==this.pokerType&&(n="big"),"poker_center_"+i+n},getCardNumSFrameName:function(e,t){return"poker_num_"+this.getNumNameByType(e,t)+(4==e?14==t?"xw":"dw":""+t)},setFaceState:function(e){this.setFace(e),this.updateCardState()},setFace:function(e){this._isFace=e},updateCardState:function(){this.cardBg.node.parent.active=!this._isFace,this.cardSprite.node.parent.active=this._isFace},setBackTypeState:function(e){this.setBackType(e),this.updateBackType()},setBackType:function(e){this._backType=e},updateBackType:function(){0==this._backType?this.cardBg2.node.active=!1:this.cardBg2.node.active=!0},setLightState:function(e){this._isLight=e,this.tipsFrame.active=this._isLight},setFirstMopai:function(e){this._mopai=e},setCardNodeShow:function(e){this.cardNode.active=e},setMagic:function(e){this._isMagic=e,this.magicNode.active=this._isMagic},setSelectState:function(){this.setSelect(),this.updateSelect()},setSelect:function(){this._isSelect=!this._isSelect},updateSelect:function(){this._isSelect?this.node.y=15:this.node.y=0},setBombShow:function(e){this.bombShadow.active=e}}),cc._RF.pop()},{}],pongKongManager2:[function(e,t,n){"use strict";cc._RF.push(t,"016e8xdytZM1p5e3zk0ttqw","pongKongManager2"),cc.Class({extends:cc.Component,properties:{Side:0,PongKongNode:cc.Node,Distance_Width:15,Distance_Height:0,PongKongArr:[]},onLoad:function(){},initPKChildInSide:function(e){this.PongKongNode.removeAllChildren()},initPongKongs:function(e){this.PongKongNode.childrenCount;this.initPKChildInSide();for(var t=0;t<e.length;t++){var n,i,a=e[t];if("chi"==a.type)n=a.chiCards,i=a.direct,this.addPrefab(n,i,!1);else if("peng"==a.type){var o=a.peng;i=a.direct,this.addPrefab(o,i,!1)}else if("diangang"==a.type||"wangang"==a.type){n=[s=a.gang,s,s,s],i=a.direct,this.addPrefab(s,i,!0)}else if("angang"==a.type){var s=a.gang;i=a.direct,this.addAngang(s)}}},addAngang:function(e){var t=this.createPongKongPrefab(this.Side,!0),n=t.getComponent("pongKongPrefab");n.setMJSide(this.Side),n.initAnGangBycard(e,this.Side),n.countSize(),this.PongKongNode.addChild(t)},addPrefab:function(e,t,n){var i=this.createPongKongPrefab(this.Side,n),a=i.getComponent("pongKongPrefab");if(a.setMJSide(this.Side),a.initMahJongsByArr(e,this.Side),a.countSize(),this.PongKongNode.addChild(i),null!=t){var o=this.getActionDirect(this.Side,t);GameDataMgr.gamePlayerNum>2?(a.setDirectionBytoLocalIndex(o),a.setPointShow(!0)):a.setPointShow(!1)}},addPrefab2:function(e,t,n){var i=this.createPongKongPrefab(this.Side,t),a=i.getComponent("pongKongPrefab");a.setMJSide(this.Side),a.initMahJongsByArr(e,!0),a.countSize(),this.PongKongNode.addChild(i),a.setPointShow(!1),null!=n&&a.setToIndex(n)},initPongKongs2:function(e){this.initPKChildInSide();for(var t=0;t<e.length;t++){var n,i=e[t];if("chi"==i.type)n=i.chiCards,this.addPrefab2(n,!1);else if("peng"==i.type){var a=i.peng;this.addPrefab2(a,!1)}else if("diangang"==i.type){n=[s=i.gang,s,s,s];var o=GameDataMgr.getIndexBySide(i.direct);this.addPrefab2(s,!0,o)}else if("wangang"==i.type){n=[s=i.gang,s,s,s],this.addPrefab2(s,!0)}else if("angang"==i.type){var s=i.gang;this.addAngang(s)}}},createPongKongPrefab:function(e,t){return t?cc.instantiate(dc.ResourceMgr.MJKongPrefab[e]):cc.instantiate(dc.ResourceMgr.MJPongPrefab[e])},refreshPongKong:function(){this.Side;for(var e=this.PongKongNode,t=0,n=0,i=0;i<e.childrenCount;i++){var a=e.children[i],o=a.getComponent("pongKongPrefab"),s=o.Width,r=o.Height;0==this.Side?(a.x=t,t+=this.Distance_Width+s):1==this.Side?(a.x=t,a.y=n,t=5*-(n+=this.Distance_Height+r)/16):2==this.Side?(a.x=t,t-=this.Distance_Width+s):3==this.Side&&(a.x=t,a.y=n,t=5*(n-=this.Distance_Height+r)/16)}1==this.Side&&this.sortZOrder()},sortZOrder:function(){for(var e=this.PongKongNode,t=0;t<e.childrenCount;t++){e.childrenCount;e.children[t].zIndex=num}},getCurDistance:function(e){var t=0;return 0==this.Side?t=this.Distance_Width+e:1==this.Side||2==this.Side||this.Side,t},getActionDirect:function(e,t){return e==t?-1:t}}),cc._RF.pop()},{}],pongKongPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"0beb0Ao1lpB9IvMa7DbjLvo","pongKongPrefab"),cc.Class({extends:cc.Component,properties:{Side:0,Height:0,Width:0,Size:cc.Size,_Type:0,_MJDataArr:null,MJNode:cc.Node,pointNode:cc.Node,indexNode:cc.Node},onLoad:function(){this.countSize()},setMJSide:function(e){this.Side=e},setType:function(e){this._Type=e},countSize:function(){this.Width=this.node.width,this.Height=this.node.height},initMahJongsByArr:function(e){var t=0;if(0==this.Side||3==this.Side||2==this.Side)for(var n=0;n<this.MJNode.childrenCount;n++){(i=this.MJNode.children[n].getComponent(dc.ResourceMgr.geScriptLabel(0)))&&(i.setMJID(e[n]),i.setMJSide(this.Side),i.initPongKongMJ())}else if(1==this.Side)for(n=this.MJNode.childrenCount-1;n>=0;n--){var i;(i=this.MJNode.children[n].getComponent(dc.ResourceMgr.geScriptLabel(0)))&&(i.setMJID(e[t]),i.setMJSide(this.Side),i.initPongKongMJ()),t++}this._MJDataArr=e},initAnGangBycard:function(e){for(var t=this.MJNode,n=0;n<t.childrenCount;n++){var i=t.children[n],a=i.getComponent(dc.ResourceMgr.geScriptLabel(0));a.setMJSide(this.Side),"KongNode"==i.name?(a.setMJID(e),a.initPongKongMJ()):a.initAnGang()}},getIsPong:function(e,t){if(!e)return!1;var n=!1;return 3==e.length&&e[0]==e[1]&&e[0]==t&&(n=!0),n},setDirectionBytoLocalIndex:function(e){for(var t=this.pointNode,n=0;n<t.childrenCount;n++){var i=t.children[n];i.active=e==n}},setToIndex:function(e){if(this.indexNode)for(var t=0;t<this.indexNode.children.length;t++){this.indexNode.children[t].active=e==t}},setPointShow:function(e){this.pointNode.active=e}}),cc._RF.pop()},{}],protobuf:[function(e,t,n){"use strict";cc._RF.push(t,"a5477awUmxKQbmXzmnVkraT","protobuf"),function(e,n){var i=e;i.init=function(e){i.encoder.init(e.encoderProtos),i.decoder.init(e.decoderProtos)},i.encode=function(e,t){return i.encoder.encode(e,t)},i.decode=function(e,t){return i.decoder.decode(e,t)},t.exports=i,"undefined"!=typeof window&&(window.protobuf=i)}("undefined"==typeof window?t.exports:window.protobuf={}),function(e,t){(e.constants={}).TYPES={uInt32:0,sInt32:0,int32:0,double:1,string:2,message:2,float:5}}("undefined"!=typeof protobuf?protobuf:t.exports),function(e,t){(e.util={}).isSimpleType=function(e){return"uInt32"===e||"sInt32"===e||"int32"===e||"uInt64"===e||"sInt64"===e||"float"===e||"double"===e}}("undefined"!=typeof protobuf?protobuf:t.exports),function(e,t){var n=e.codec={},i=new ArrayBuffer(8),a=new Float32Array(i),o=new Float64Array(i),s=new Uint8Array(i);function r(e,t,n){for(var i,a,o=n,s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(a=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&a),++s,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-o}function c(e){return e<=127?1:e<=2047?2:3}n.encodeUInt32=function(e){e=parseInt(e);if(isNaN(e)||e<0)return null;var t=[];do{var n=e%128,i=Math.floor(e/128);0!==i&&(n+=128),t.push(n),e=i}while(0!==e);return t},n.encodeSInt32=function(e){e=parseInt(e);return isNaN(e)?null:(e=e<0?2*Math.abs(e)-1:2*e,n.encodeUInt32(e))},n.decodeUInt32=function(e){for(var t=0,n=0;n<e.length;n++){var i=parseInt(e[n]);if(t+=(127&i)*Math.pow(2,7*n),i<128)return t}return t},n.decodeSInt32=function(e){var t=this.decodeUInt32(e);return t=(t%2+t)/2*(t%2==1?-1:1)},n.encodeFloat=function(e){return a[0]=e,s},n.decodeFloat=function(e,t){if(!e||e.length<t+4)return null;for(var n=0;n<4;n++)s[n]=e[t+n];return a[0]},n.encodeDouble=function(e){return o[0]=e,s.subarray(0,8)},n.decodeDouble=function(e,t){if(!e||e.length<t+8)return null;for(var n=0;n<8;n++)s[n]=e[t+n];return o[0]},n.encodeStr=function(e,t,n){return t=r(n,e,t)},n.decodeStr=function(e,t,n){var i=t,a=i+n;if(n<1)return"";for(var o,s=null,r=[],c=0;i<a;)(o=e[i++])<128?r[c++]=o:o>191&&o<224?r[c++]=(31&o)<<6|63&e[i++]:o>239&&o<365?(o=((7&o)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536,r[c++]=55296+(o>>10),r[c++]=56320+(1023&o)):r[c++]=(15&o)<<12|(63&e[i++])<<6|63&e[i++],c>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,r)),c=0);return s?(c&&s.push(String.fromCharCode.apply(String,r.slice(0,c))),s.join("")):String.fromCharCode.apply(String,r.slice(0,c))},n.byteLength=function(e){if("string"!=typeof e)return-1;for(var t=0,n=0;n<e.length;n++){t+=c(e.charCodeAt(n))}return t}}("undefined"!=typeof protobuf?protobuf:t.exports),function(e,t){var n=e,i=e.encoder={},a=n.codec,o=n.constants,s=n.util;function r(e,t){if(!t)return!1;for(var n in t){var a=t[n];switch(a.option){case"required":if(void 0===e[n])return console.warn("no property exist for required! name: %j, proto: %j, msg: %j",n,a,e),!1;case"optional":if(void 0!==e[n])if((o=t.__messages[a.type]||i.protos["message "+a.type])&&!r(e[n],o))return console.warn("inner proto error! name: %j, proto: %j, msg: %j",n,a,e),!1;break;case"repeated":var o=t.__messages[a.type]||i.protos["message "+a.type];if(e[n]&&o)for(var s=0;s<e[n].length;s++)if(!r(e[n][s],o))return!1}}return!0}function c(e,t,n,i){for(var a in i)if(n[a]){var o=n[a];switch(o.option){case"required":case"optional":t=d(e,t,u(o.type,o.tag)),t=l(i[a],o.type,t,e,n);break;case"repeated":i[a].length>0&&(t=h(i[a],o,t,e,n))}}return t}function l(e,t,n,o,s){switch(t){case"uInt32":n=d(o,n,a.encodeUInt32(e));break;case"int32":case"sInt32":n=d(o,n,a.encodeSInt32(e));break;case"float":d(o,n,a.encodeFloat(e)),n+=4;break;case"double":d(o,n,a.encodeDouble(e)),n+=8;break;case"string":var r=a.byteLength(e);n=d(o,n,a.encodeUInt32(r)),a.encodeStr(o,n,e),n+=r;break;default:var l=s.__messages[t]||i.protos["message "+t];if(l){var h=new ArrayBuffer(2*a.byteLength(JSON.stringify(e)));r=c(h,r=0,l,e),n=d(o,n,a.encodeUInt32(r));for(var u=0;u<r;u++)o[n]=h[u],n++}}return n}function h(e,t,n,i,o){var r=0;if(s.isSimpleType(t.type))for(n=d(i,n=d(i,n,u(t.type,t.tag)),a.encodeUInt32(e.length)),r=0;r<e.length;r++)n=l(e[r],t.type,n,i);else for(r=0;r<e.length;r++)n=d(i,n,u(t.type,t.tag)),n=l(e[r],t.type,n,i,o);return n}function d(e,t,n){for(var i=0;i<n.length;i++,t++)e[t]=n[i];return t}function u(e,t){var n=o.TYPES[e]||2;return a.encodeUInt32(t<<3|n)}i.init=function(e){this.protos=e||{}},i.encode=function(e,t){var n=this.protos[e];if(!r(t,n))return null;var i=a.byteLength(JSON.stringify(t)),o=new ArrayBuffer(i),s=new Uint8Array(o),l=0;return n&&(l=c(s,l,n,t))>0?s.subarray(0,l):null}}("undefined"!=typeof protobuf?protobuf:t.exports),function(e,t){var n,i=e,a=e.decoder={},o=i.codec,s=i.util,r=0;function c(e,t,n){for(;r<n;){var i=l(),a=(i.type,i.tag),o=t.__tags[a];switch(t[o].option){case"optional":case"required":e[o]=h(t[o].type,t);break;case"repeated":e[o]||(e[o]=[]),d(e[o],t[o].type,t)}}return e}function l(){var e=o.decodeUInt32(u());return{type:7&e,tag:e>>3}}function h(e,t){switch(e){case"uInt32":return o.decodeUInt32(u());case"int32":case"sInt32":return o.decodeSInt32(u());case"float":var i=o.decodeFloat(n,r);return r+=4,i;case"double":var s=o.decodeDouble(n,r);return r+=8,s;case"string":var l=o.decodeUInt32(u()),h=o.decodeStr(n,r,l);return r+=l,h;default:var d=t&&(t.__messages[e]||a.protos["message "+e]);if(d){l=o.decodeUInt32(u());var g={};return c(g,d,r+l),g}}}function d(e,t,n){if(s.isSimpleType(t))for(var i=o.decodeUInt32(u()),a=0;a<i;a++)e.push(h(t));else e.push(h(t,n))}function u(e){var t,i=[],a=r;e=e||!1;do{t=n[a],i.push(t),a++}while(t>=128);return e||(r=a),i}a.init=function(e){this.protos=e||{}},a.setProtos=function(e){e&&(this.protos=e)},a.decode=function(e,t){var i=this.protos[e];return n=t,r=0,i?c({},i,n.length):null}}("undefined"!=typeof protobuf?protobuf:t.exports),cc._RF.pop()},{}],protocol:[function(e,t,n){(function(e){"use strict";cc._RF.push(t,"07eebjJVLlGf4fDAu+lLsJp","protocol"),function(e,n,i){var a=e,o=a.Package={},s=a.Message={};o.TYPE_HANDSHAKE=1,o.TYPE_HANDSHAKE_ACK=2,o.TYPE_HEARTBEAT=3,o.TYPE_DATA=4,o.TYPE_KICK=5,s.TYPE_REQUEST=0,s.TYPE_NOTIFY=1,s.TYPE_RESPONSE=2,s.TYPE_PUSH=3,a.strencode=function(e){for(var t=new n(3*e.length),i=0,a=0;a<e.length;a++){var o=e.charCodeAt(a),s=null;s=o<=127?[o]:o<=2047?[192|o>>6,128|63&o]:[224|o>>12,128|(4032&o)>>6,128|63&o];for(var c=0;c<s.length;c++)t[i]=s[c],++i}var l=new n(i);return r(l,0,t,0,i),l},a.strdecode=function(e){for(var t=new n(e),i=[],a=0,o=0,s=t.length;a<s;)t[a]<128?(o=t[a],a+=1):t[a]<224?(o=((63&t[a])<<6)+(63&t[a+1]),a+=2):(o=((15&t[a])<<12)+((63&t[a+1])<<6)+(63&t[a+2]),a+=3),i.push(o);return String.fromCharCode.apply(null,i)},a.utf8_read=function(e){var t=0,n=e.length;if(n-t<1)return"";for(var i,a=null,o=[],s=0;t<n;)(i=e[t++])<128?o[s++]=i:i>191&&i<224?o[s++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(i>>10),o[s++]=56320+(1023&i)):o[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0);return a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))},o.encode=function(e,t){var i=t?t.length:0,a=new n(4+i),o=0;return a[o++]=255&e,a[o++]=i>>16&255,a[o++]=i>>8&255,a[o++]=255&i,t&&r(a,o,t,0,i),a},o.decode=function(e){for(var t=0,i=new n(e),a=0,o=[];t<i.length;){var s=i[t++],c=(a=(i[t++]<<16|i[t++]<<8|i[t++])>>>0)?new n(a):null;r(c,0,i,t,a),t+=a,o.push({type:s,body:c})}return 1===o.length?o[0]:o},s.encode=function(e,t,i,o,s){var r=1+(c(t)?h(e):0);if(l(t))if(i){if("number"!=typeof o)throw new Error("error flag for number route!");r+=2}else if(r+=1,o){if((o=a.strencode(o)).length>255)throw new Error("route maxlength is overflow");r+=o.length}s&&(r+=s.length);var p=new n(r),f=0;return f=d(t,i,p,f),c(t)&&(f=u(e,p,f)),l(t)&&(f=g(i,o,p,f)),s&&(f=m(s,p,f)),p},s.decode=function(e){var t=new n(e),i=t.length||t.byteLength,o=0,s=0,h=null,d=t[o++],u=1&d,g=d>>1&7;if(c(g)){var m=parseInt(t[o]),p=0;do{s+=(127&(m=parseInt(t[o])))*Math.pow(2,7*p),o++,p++}while(m>=128)}if(l(g))if(u)h=t[o++]<<8|t[o++];else{var f=t[o++];f?(h=new n(f),r(h,0,t,o,f),h=a.strdecode(h)):h="",o+=f}var v=i-o,_=new n(v);return r(_,0,t,o,v),{id:s,type:g,compressRoute:u,route:h,body:_}};var r=function(e,t,n,i,a){if("function"==typeof n.copy)n.copy(e,t,i,i+a);else for(var o=0;o<a;o++)e[t++]=n[i++]},c=function(e){return e===s.TYPE_REQUEST||e===s.TYPE_RESPONSE},l=function(e){return e===s.TYPE_REQUEST||e===s.TYPE_NOTIFY||e===s.TYPE_PUSH},h=function(e){var t=0;do{t+=1,e>>=7}while(e>0);return t},d=function(e,t,n,i){if(e!==s.TYPE_REQUEST&&e!==s.TYPE_NOTIFY&&e!==s.TYPE_RESPONSE&&e!==s.TYPE_PUSH)throw new Error("unkonw message type: "+e);return n[i]=e<<1|(t?1:0),i+1},u=function(e,t,n){do{var i=e%128,a=Math.floor(e/128);0!==a&&(i+=128),t[n++]=i,e=a}while(0!==e);return n},g=function(e,t,n,i){if(e){if(t>65535)throw new Error("route number is overflow");n[i++]=t>>8&255,n[i++]=255&t}else t?(n[i++]=255&t.length,r(n,i,t,0,t.length),i+=t.length):n[i++]=0;return i},m=function(e,t,n){return r(t,n,e,0,e.length),n+e.length};t.exports=a,"undefined"!=typeof window&&(window.Protocol=a)}("undefined"==typeof window?t.exports:window.Protocol={},"undefined"==typeof window?e:Uint8Array),cc._RF.pop()}).call(this,e("buffer").Buffer)},{buffer:2}],raise_Layer:[function(e,t,n){"use strict";cc._RF.push(t,"915d0RjH1dNVYNOPl9LeX7D","raise_Layer"),cc.Class({extends:cc.Component,properties:{raiseLayer:cc.Node,tipsParent:cc.Node,actionTips:cc.Node},onLoad:function(){this.setRaiseTips(!1)},setRaiseAction:function(){this.actionTips.active=!0;var e=cc.sequence(cc.delayTime(1),cc.callFunc(function(){this.actionTips.active=!1},this,null));this.node.runAction(e)},setRaiseOperShow:function(e){this.raiseLayer.active=e},setRaiseTips:function(e){this.tipsParent.active=e},setRaiseState:function(e){var t=this.tipsParent.getChildByName("spr_Tips"),n=t.getChildByName("raise"),i=t.getChildByName("noraise");e?(n.active=!0,i.active=!1):(n.active=!1,i.active=!0)},onBtnRaise:function(){Hall_ReqAndRes.doRaise(1)},onBtnNoRaise:function(){Hall_ReqAndRes.doRaise(0)}}),cc._RF.pop()},{}],rankItem:[function(e,t,n){"use strict";cc._RF.push(t,"5abb0f4+ApNwqPiyE1fshgU","rankItem"),cc.Class({extends:cc.Component,properties:{lblRank:cc.Label,lblName:cc.Label,lblWinner:cc.Label,bgNode:cc.Node,rankNumNode:cc.Node,icon:cc.Node},onLoad:function(){},initData:function(e,t){this.setNumber(t),this.setName(e.name||"",e.userId),this.setWinCount(e.count),this.setBg(e.rank),this.setIcon(e.headImg,e.userId)},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t)},setBg:function(e){var t=(Number(e)+1)%2,n=this.bgNode.getChildByName("bgItem1"),i=this.bgNode.getChildByName("bgItem2");0==t?(n.active=!0,i.active=!1):(n.active=!1,i.active=!0)},compareUserId:function(e){var t=!1;return UserMgr.userId==e&&(t=!0),t},setName:function(e,t){this.compareUserId(t);var n="";n=e.length>7?e.slice(0,7)+"...":e,this.lblName.string=""+n},setWinCount:function(e){this.lblWinner.string="\u5927\u8d62\u5bb6"+e+"\u6b21"},setRank:function(e){var t=Number(e);if(t<=3){this.lblRank.string="",this.rankNumNode.active=!0;for(var n=0;n<this.rankNumNode.childrenCount;n++){var i=this.rankNumNode.children[n];i.active=t==n+1}}else this.rankNumNode.active=!1,this.lblRank.string=""+e},setNumber:function(e){this.lblRank.string=e}}),cc._RF.pop()},{}],roomInfoLayer:[function(e,t,n){"use strict";cc._RF.push(t,"820e6U5IZBIo5XGSKSOYq4g","roomInfoLayer");e("path");function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(a,o){try{var s=t[a](o),r=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(r).then(function(e){i("next",e)},function(e){i("throw",e)});e(r)}("next")})}}cc.Class({extends:cc.Component,properties:{deskPrefab:cc.Node,deskContentNode:cc.Node,btnReturnGameNode:cc.Node,rankNode:cc.Node,rankContent:cc.Node,rankItem:cc.Prefab,myRateItem:cc.Node,moveLeft:cc.Node,moveRight:cc.Node,ruleNode:cc.Node},start:function(){},openMove:function(e){this._isMv=!0,this.rankNode.x=this.moveLeft.x;var t=this.moveRight.getPosition(),n=cc.sequence(cc.moveTo(.2,t),cc.callFunc(function(){e&&e(),this._isMv=!1},this,null));this.rankNode.runAction(n)},closeMove:function(e){this._isMv=!0,this.rankNode.x=this.moveRight.x;var t=this.moveLeft.getPosition(),n=cc.sequence(cc.moveTo(.2,t),cc.callFunc(function(){e&&e(),this._isMv=!1},this,null));this.rankNode.runAction(n)},setContinueBtn:function(e){this.btnReturnGameNode.active=e},createTableList:function(e){this.deskContentNode.removeAllChildren();var t=Object.keys(e);for(var n in t.sort(function(e,t){var n=e.substr(e.length-2),i=t.substr(t.length-2);return(n=parseInt(n))-(i=parseInt(i))}),t){var i=t[n],a=cc.instantiate(this.deskPrefab);a.active=!0,this.deskContentNode.addChild(a);var o=e[i].conf,s=a.getComponent("ArenaDeskItem");s.initDesks(),s.setRoomID(e[i].roomId),s.hallGamehallId=e[i].hallGamehallId,s.setJS(e[i].numOfGames),s.setTableType(o),s._conf=o;var r=0==o%10?"\u6709\u8d22\u5fc5\u62f7":"8\u5c40\u81ea\u6478";s.setDec(r);var c=e[i].seats||[];s.freshUsers(c)}},updateTable:function(e){var t=ArenaDataMgr.rooms,n=this.getTableByRoomId(e.roomId).getComponent("ArenaDeskItem");n.initDesks(),n.setRoomID(e.roomId),n.setJS(t[e.roomId].numOfGames);var i=t[e.roomId].seats||[];n.freshUsers(i)},userEnter:function(e){this.updateTable(e)},userLeave:function(e){this.updateTable(e)},getTableByRoomId:function(e){for(var t=this.deskContentNode.children,n=e.substr(e.length-2),i=0;i<t.length;i++){var a=t[i].getComponent("ArenaDeskItem")._roomID;if(a.substr(a.length-2)==n)return t[i]}return null},OnClickReturn:function(){UIMgr.getPageScript(UIMgr.HallPage)._arenaLayer.getComponent("ArenaLayer").closeInterface()},getBankerData:function(){var e=function(){var e=i(regeneratorRuntime.mark(function e(){var i,o,s,r,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(ArenaDataMgr.hallGamehallId,null);case 2:return i=e.sent,e.next=5,n(ArenaDataMgr.hallGamehallId,null);case 5:for(c in o=e.sent,s=GroupDataMgr.userInfoMap,r=[],i)s[c]||r.push(parseInt(c));-1==r.indexOf(UserMgr.userId)&&r.push(UserMgr.userId),GroupDataMgr.getUsersInfo(r,function(e){var t,n=[];for(var r in i){var c={};c.userId=parseInt(r),c.name=s[r].name,c.headImg=s[r].headImg,c.count=i[r],c.win=o[r]||0;var l=c.win/c.count;c.rate=l,c.count>=ArenaDataMgr.hallGameConfigs[ArenaDataMgr.hallGamehallId].reward.condition1&&n.push(c),c.userId==UserMgr.userId&&(t=dc.deepCopy(c))}t||((t={}).count=0,t.win=0,t.rate=0,t.userId=UserMgr.userId,t.headImg=s[UserMgr.userId].headImg,t.name=s[UserMgr.userId].name),n.sort(function(e,t){t.rate,e.rate});for(var h=0,d=0;d<n.length;d++)if(n[d].userId==UserMgr.userId){h=d+1;break}a.initMyRateData(t,h),a.createRankList(n)}.bind(this));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t=function(e,t){var n=this;return new Promise(function(i,a){Hall_ReqAndRes.getHallGameCountAll(e,t,function(e){console.log("getHallGameCountAll",e);var t=e.data.list||[];e.code,i(t)}.bind(n))})},n=function(e,t){var n=this;return new Promise(function(i,a){Hall_ReqAndRes.getHallGameWinerCountAll(e,t,function(e){console.log("getHallGameCountAll",e);var t=e.data.list||[];e.code,i(t)}.bind(n))})},a=this;e()},initMyRateData:function(e,t){this.myRateItem.active=!0;var n=this.myRateItem.getComponent("HallRankItem_Arena");n.initData(e,t),n.setBgNode(!0)},createRankList:function(e){this.rankContent.removeAllChildren();for(var t=0;t<e.length;t++){var n=cc.instantiate(this.rankItem);n.active=!0,this.rankContent.addChild(n),n.getComponent("HallRankItem_Arena").initData(e[t],t+1)}},OnClickShop:function(){publicWindow.alert.show("",'\u8bf7\u60a8\u8fdb\u5165"\u9e3f\u65f6\u5a31\u4e50"\n\u516c\u4f17\u53f7\u5145\u503c')},OnClickBank:function(){this._isMv||(this.rankNode.active=!0,this.openMove(function(){this.getBankerData()}.bind(this)))},OnClickReturnGame:function(){UIMgr.pushUI(UIMgr.HZMJGame_Arena)},OnClickCloseRank:function(){this._isMv||this.closeMove(function(e){this.rankNode.active=!1}.bind(this))},OnClickRule:function(){this.ruleNode.active=!0},OnClickCloseRule:function(){this.ruleNode.active=!1}}),cc._RF.pop()},{path:7}],roomListLayer:[function(e,t,n){"use strict";cc._RF.push(t,"5db6exzWExMg6R5m/uiFDwf","roomListLayer"),cc.Class({extends:cc.Component,properties:{roomListContent:cc.Node,btnRoomPre:cc.Node},start:function(){},createRoomBtnList:function(e){if(this.roomListContent.removeAllChildren(),e)for(var t in e){var n=e[t],i=cc.instantiate(this.btnRoomPre);i.active=!0,this.roomListContent.addChild(i);var a=i.getComponent("RoomBtnPrefab");a.conf=n,a.hallGameId=t}else console.log("\u627e\u4e0d\u5230\u623f\u95f4")}}),cc._RF.pop()},{}],seatView_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"6b97bu7DV9JGZjQc7RzEZbZ","seatView_2MJ"),cc.Class({extends:cc.Component,properties:{Icon:cc.Node,lblScore:cc.Label,lblName:cc.Label,onlineNode:cc.Node,bankerNode:cc.Node,lblContnet:cc.Label,emojiNode:cc.Node,readyNode:cc.Node,BtnChatNode:cc.Node,voidceNode:cc.Node,createNode:cc.Node,_lastChatTime:-1,infoNode:cc.Node,shadow:cc.Node,btnInfo:cc.Node,picNode:cc.Node,voiceAni:cc.Node},onLoad:function(){this.infoNode},setPicIndexs:function(){if(this.picNode){var e=GameDataMgr.attackConf,t=this.picNode,n=0;for(var i in e){var a=e[i],o=t.children[n],s=o.getChildByName("btnBQ").getComponent(cc.Sprite),r=dc.ResourceMgr.getFaceAByIndex(a.index);s.spriteFrame=r,"ani_other_9"==a.oriName&&s.node.setScale(.35,.35),o.getChildByName("btnItem").index=a.index,n++}}},OnClickSendAttatckEmj:function(e){var t=e.target.index;if(GameDataMgr.isEnableEmojiA){console.log("emojiA onBtnSend");var n=GameDataMgr.getIndexBySide(this._openType),i={};i.desIndex=n,i.sender=UserMgr.userId,i.content=t.toString(),i.type=3,Hall_ReqAndRes.chatRequest(i),this.setEmjInfoShow(!1),GameDataMgr.isEnableEmojiA=!1,this.createEmojiA(t)}else publicWindow.alert.show("\u63d0\u793a","10\u79d2\u5185\u53ea\u80fd\u53d1\u9001\u4e00\u6b21")},createEmojiA:function(e){var t=0,n=function(){(t/100).toFixed(2);100==t&&(GameDataMgr.isEnableEmojiA=!0,clearInterval(i)),t++}.bind(this),i=setInterval(n,100)},setEmjInfoShow:function(e){this.infoNode.active=e},OnClickCloseInfo:function(){this.setEmjInfoShow(!1)},initInfoNode:function(e){var t=this.infoNode.getComponent("UserInfo"),n=GameDataMgr.dicLocaltion[e.userId];n?t.setAddress(n.address):t.setAddress(""),t.setUserName(e.name),t.setUserID(e.userId),t.setIP(e.ip),t.setIcom(e.headimg,e.userId),e.userId?this.setInfoNodeShow(!0):this.setInfoNodeShow(!1)},setInfoNodeShow:function(e){this.btnInfo.active=e},hideSingle:function(){this.lblContnet.node.parent.active=!1,this.readyNode.active=!1,this.onlineNode.active=!1,this.bankerNode.active=!1,GameDataMgr.isReplay?this.BtnChatNode.active=!1:this.BtnChatNode.active=!0},voiceMsgShow:function(e){e?(this.voidceNode.active=e,this.playVoiceAni()):(this.stopVoiceAni(),this.voidceNode.active=e)},playVoiceAni:function(){var e=this.voiceAni.getComponent(cc.Animation),t=e.getClips()[0].name;e.repeatCount=20,e.wrapMode="Default",e.play(t)},stopVoiceAni:function(){var e=this.voiceAni.getComponent(cc.Animation),t=e.getClips()[0].name;e.stop(t)},initSingleSeat:function(e){var t=GameDataMgr.seats[e];this.initSeatData(t)},initSeatData:function(e){console.log(JSON.stringify(e)),this.setInfo(e.name,e.score),GameDataMgr.isReplay?this.setOnline(!0):this.setOnline(e.online),this.setImgByID(e.userId,e.headimg),this.setBanker(e.seatIndex==GameDataMgr.button);var t=!1,n=GameDataMgr.conf.creator;t=!!n&&n==e.userId,this.setCreateNode(t)},setBanker:function(e){this.bankerNode.active=e},setOnline:function(e){this.onlineNode.active=!e},setInfo:function(e,t){this.lblName.string=e,this.lblScore.string=t},setReady:function(e){this.readyNode.active=e},setCreateNode:function(e){this.createNode.active=e},onIconClicked:function(e){},setImgByID:function(e,t){if(t=t||"",console.log("seatView url:"+t),e){var n=this.Icon.getComponent("ImageLoader_Gold");n&&n.setIcon(t,e)}},chat:function(e){this.lblContnet.string=e;var t=this.lblContnet.node.parent;t.active=!0;var n=t.getChildByName("chatBg"),i=this.lblContnet.node.width<83?103:this.lblContnet.node.width+40;n.width=i,this.emojiNode.active=!1,this._lastChatTime=5},emoji:function(e){null!=this.emojiNode&&null!=this.emojiNode&&(console.log(e),this.lblContnet.node.parent.active=!1,this.emojiNode.active=!0,this.emojiNode.getComponent(cc.Animation).play(e),this._lastChatTime=3)},quickChat:function(e){this.lblContnet.string=e.content;e.index;var t=this.lblContnet.node.parent;t.active=!0,t.getChildByName("chatBg").width=this.lblContnet.node.width+60,this.emojiNode.active=!1,this._lastChatTime=3},update:function(e){this._lastChatTime>0&&(this._lastChatTime-=e,this._lastChatTime<0&&(this.lblContnet.node.parent.active=!1,this.emojiNode.active=!1,this.emojiNode.getComponent(cc.Animation).stop()))}}),cc._RF.pop()},{}],seatView_DB:[function(e,t,n){"use strict";cc._RF.push(t,"d0ce8RusHJE16H6Z3rWY9zM","seatView_DB"),cc.Class({extends:cc.Component,properties:{Icon:cc.Node,lblScore:cc.Label,lblName:cc.Label,onlineNode:cc.Node,bankerNode:cc.Node,lblContnet:cc.Label,emojiNode:cc.Node,readyNode:cc.Node,BtnChatNode:cc.Node,voidceNode:cc.Node,createNode:cc.Node,_lastChatTime:-1,infoNode:cc.Node,shadow:cc.Node,btnInfo:cc.Node,picNode:cc.Node,voiceAni:cc.Node,numberNode:cc.Node,turnEffectNode:cc.Node,passNode:cc.Node},onLoad:function(){this.infoNode},showEffNode:function(e){this.turnEffectNode.active=e},playTurnAni:function(){this.turnEffectNode.getComponent(cc.Animation).play("turnEffect_DB")},setPassNode:function(e){this.passNode.active=e},setNumber:function(e){for(var t=0;t<this.numberNode.childrenCount;t++){var n=this.numberNode.children[t];n.active=t+1==e}},setPicIndexs:function(){if(this.picNode){var e=GameDataMgr.attackConf,t=this.picNode,n=0;for(var i in e){var a=e[i],o=t.children[n],s=o.getChildByName("btnBQ").getComponent(cc.Sprite),r=dc.ResourceMgr.getFaceAByIndex(a.index);s.spriteFrame=r,"ani_other_9"==a.oriName&&s.node.setScale(.35,.35),o.getChildByName("btnItem").index=a.index,n++}}},OnClickSendAttatckEmj:function(e){var t=e.target.index;if(GameDataMgr.isEnableEmojiA){console.log("emojiA onBtnSend");var n=GameDataMgr.getIndexBySide(this._openType),i={};i.desIndex=n,i.sender=UserMgr.userId,i.content=t,i.type=3;var a=JSON.stringify(i);Hall_ReqAndRes.chatRequest(a),this.setEmjInfoShow(!1),GameDataMgr.isEnableEmojiA=!1,this.createEmojiA(t)}else publicWindow.alert.show("\u63d0\u793a","10\u79d2\u5185\u53ea\u80fd\u53d1\u9001\u4e00\u6b21")},createEmojiA:function(e){var t=0,n=function(){(t/100).toFixed(2);100==t&&(GameDataMgr.isEnableEmojiA=!0,clearInterval(i)),t++}.bind(this),i=setInterval(n,100)},setEmjInfoShow:function(e){this.infoNode&&(this.infoNode.active=e)},OnClickCloseInfo:function(){this.setEmjInfoShow(!1)},initInfoNode:function(e){var t=this.infoNode.getComponent("UserInfo"),n=GameDataMgr.dicLocaltion[e.userId];n?t.setAddress(n.address):t.setAddress(""),t.setUserName(e.name),t.setUserID(e.userId),t.setIP(e.ip),t.setIcom(e.headimg,e.userId),e.userId?this.setInfoNodeShow(!0):this.setInfoNodeShow(!1)},setInfoNodeShow:function(e){this.btnInfo.active=e},hideSingle:function(){this.lblContnet.node.parent.active=!1,this.readyNode.active=!1,this.onlineNode.active=!1,this.bankerNode.active=!1,GameDataMgr.isReplay?this.BtnChatNode.active=!1:this.BtnChatNode.active=!0},voiceMsgShow:function(e){e?(this.voidceNode.active=e,this.playVoiceAni()):(this.stopVoiceAni(),this.voidceNode.active=e)},playVoiceAni:function(){var e=this.voiceAni.getComponent(cc.Animation),t=e.getClips()[0].name;e.repeatCount=20,e.wrapMode="Default",e.play(t)},stopVoiceAni:function(){var e=this.voiceAni.getComponent(cc.Animation),t=e.getClips()[0].name;e.stop(t)},initSingleSeat:function(e){var t=GameDataMgr.seats[e];this.initSeatData(t)},initSeatData:function(e){console.log(JSON.stringify(e)),this.setInfo(e.name,e.score),GameDataMgr.isReplay?this.setOnline(!0):this.setOnline(e.online),this.setImgByID(e.userId,e.headimg);var t=!1,n=GameDataMgr.conf.creator;t=!!n&&n==e.userId,this.setCreateNode(t)},setBanker:function(e){this.bankerNode.active=!1},setOnline:function(e){this.onlineNode.active=!e},setInfo:function(e,t){this.lblName.string=e,this.lblScore.string=t},setReady:function(e){this.readyNode.active=e},setCreateNode:function(e){this.createNode.active=e},onIconClicked:function(e){},setImgByID:function(e,t){if(t=t||"",console.log("seatView url:"+t),e){var n=this.Icon.getComponent("ImageLoader_Gold");n&&n.setIcon(t,e)}},chat:function(e){this.lblContnet.string=e;var t=this.lblContnet.node.parent;t.active=!0;var n=t.getChildByName("chatBg"),i=this.lblContnet.node.width<83?103:this.lblContnet.node.width+40;n.width=i,this.emojiNode.active=!1,this._lastChatTime=3},emoji:function(e){null!=this.emojiNode&&null!=this.emojiNode&&(console.log(e),this.lblContnet.node.parent.active=!1,this.emojiNode.active=!0,this.emojiNode.getComponent(cc.Animation).play(e),this._lastChatTime=3)},quickChat:function(e){this.lblContnet.string=e.content;e.index;var t=this.lblContnet.node.parent;t.active=!0,t.getChildByName("chatBg").width=this.lblContnet.node.width+60,this.emojiNode.active=!1,this._lastChatTime=3},update:function(e){this._lastChatTime>0&&(this._lastChatTime-=e,this._lastChatTime<0&&(this.lblContnet.node.parent.active=!1,this.emojiNode.active=!1,this.emojiNode.getComponent(cc.Animation).stop()))}}),cc._RF.pop()},{}],seatView_Room_Hall:[function(e,t,n){"use strict";cc._RF.push(t,"bd5e2/KizJA9onEi7W4BRgw","seatView_Room_Hall"),cc.Class({extends:cc.Component,properties:{icon:cc.Node,lblNames:cc.Label,lblID:cc.Label},onLoad:function(){},setRoomId:function(e){this._roomId=e},initSeatView:function(){this.icon.getComponent(cc.Sprite).spriteFrame=null,this.lblID.string="",this.lblNames.string=""},setUserId:function(e){this.lblID.string="ID:"+e,this._userId=e},setName:function(e){this.lblNames.string=""+e},setIcon:function(e){if(e){var t=this.icon.getComponent("ImageLoader");t&&t.setUserIDBySeat(e)}},setUserName:function(e){var t="";t=e||"",this.lblNames.string=t},setUrl:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t,function(e){console.log("loadImage callback"),this.icon.getComponent(cc.Sprite).spriteFrame=e}.bind(this))},onBtnKicker:function(){var e=function(){Hall_ReqAndRes.kickUserOutRoom(this._roomId,this._userId,function(e){e.code||(this.node.active=!1)}.bind(this))}.bind(this);publicWindow.alert.show("","\u662f\u5426\u8981\u8e22\u51fa\u8be5\u6210\u5458",e,!0)}}),cc._RF.pop()},{}],seatsMgr_2MJ:[function(e,t,n){"use strict";cc._RF.push(t,"22a8bfg6XVNgZx/MPM1NlY1","seatsMgr_2MJ"),cc.Class({extends:cc.Component,properties:{seats:[cc.Node],_controlSp:null,_voicesStack:[],_playingSeat:null,_lastPlayTime:null},onLoad:function(){this.initHide(),this.initObserverBtn(),this.initSeatViewPic()},init:function(){this.initHide()},setControlSp:function(e){this._controlSp=e},initSeatViewPic:function(){for(var e=0;e<this.seats.length;e++){var t=this.seats[e];this.getSeatViewSp(t).setPicIndexs()}},initObserverBtn:function(){for(var e=0;e<this.seats.length;e++){var t="btnChat"+e,n=this.seats[e].getChildByName(t);GameDataMgr.isObserver?n.active=!1:n.active=!0}},setChatNode:function(e){this.chatNode=e},setEmojiNode:function(e){this.chatAniNode=e},getSeatViewSp:function(e){return e.getComponent("seatView_2MJ")},getChatSp:function(){return this._controlSp.getChatSp()},getEmojiSp:function(){return this._controlSp.getEmojiSp()},initHide:function(){for(var e=0;e<this.seats.length;e++){var t=this.seats[e],n=this.getSeatViewSp(t);n.hideSingle(),n.voiceMsgShow(!1),n.setInfoNodeShow(!1),n.setCreateNode(!1)}},stopChangeSeatAni:function(){},moveSeatsPos:function(e){this.seats;for(var t=GameDataMgr.seats,n=GameDataMgr.createNewseats(),i=0;i<t.length;i++){var a=t[i],o=n[i],s=a.seatIndex,r=o.seatIndex,c=GameDataMgr.getLocalSide(s),l=GameDataMgr.getLocalSide(r);this.moveSeatsFromTo(c,l,e)}},moveSeatsFromTo:function(e,t,n){if(e!=t){this.seats;var i=this.seats[e],a=this.seats[t];i.active=!1,a.active=!1;var o=cc.instantiate(i);o.active=!0,i.getParent().addChild(o);var s=new cc.Vec2;s.x=a.x,s.y=a.y;var r=cc.callFunc(function(){i.active=!0,a.active=!0,o.removeFromParent()},this,null),c=cc.sequence(cc.moveTo(n,s),r);o.runAction(c)}},initSingleSeat:function(e){console.log("initSingleSeat");var t=GameDataMgr.getLocalSide(e),n=this.seats[t];this.getSeatViewSp(n).initSingleSeat(e)},initSeats:function(e){console.log("initSeats");var t=GameDataMgr.seats;if(console.log(JSON.stringify(t)),t){for(var n in t){var i=t[n];i.userId&&(console.log("seatIndex:"+i.seatIndex),this.initSingleSeat(i.seatIndex))}e&&this.initSeatsActive()}},initSingleOnline:function(e){var t=GameDataMgr.seats;for(var n in t)if(t[n].userId){var i=GameDataMgr.getLocalSide(n),a=this.seats[i];this.getSeatViewSp(a).setOnline(e)}},initSeatsActive:function(){for(var e=GameDataMgr.gamePlayerNum,t=0;t<this.seats.length;t++)this.seats[t].active=!1;var n=GameDataMgr.seats;if(n&&n.length>0)for(t=0;t<e;t++){var i=n[t];if(i&&i.userId&&null!=i.seatIndex){var a=GameDataMgr.getLocalSide(i.seatIndex);this.seats[a].active=!0}}},hideReady:function(){for(var e=0;e<this.seats.length;e++)this.initReady(e,!1)},hideAllBankers:function(){for(var e=0;e<this.seats.length;e++)this.initBanker(e,!1)},initReady:function(e,t){var n=this.seats[e];this.getSeatViewSp(n).setReady(t)},initBanker:function(e,t){var n=this.seats[e];this.getSeatViewSp(n).setBanker(t)},sendChat:function(e){var t=GameDataMgr.getSeatIndexByID(e.sender),n=GameDataMgr.getLocalSide(t),i=this.seats[n];this.getSeatViewSp(i).chat(e.content)},sendExpression:function(e){var t=GameDataMgr.getSeatIndexByID(e.sender),n=GameDataMgr.getLocalSide(t),i=this.seats[n];this.getSeatViewSp(i).emoji(e.content)},sendQuickchatHandle:function(e){var t=GameDataMgr.getSeatIndexByID(e.sender),n=GameDataMgr.getLocalSide(t),i=this.seats[n],a=this.getChatSp();a.initQuickChatConf();var o,s=a.getQuickInfo(parseInt(e.content));if(console.log("sendQuickchatHandle"),console.log(s.content),this.getSeatViewSp(i).quickChat(s),s.url)o=s.url,audioMgr.playSFX(o);else{var r=parseInt(e.content);parseInt(r/1e3);GameDataMgr.playQuickSound(r,s.sound)}},updateTipsPoint:function(e){this.setTipsShow(!0)},setTipsShow:function(e){this.seats[0].getChildByName("tipsNode").active=e},onBtnOpenchat:function(e){for(var t=e.target,n=-1,i=0;i<this.seats.length;i++)if("btnChat"+i==t.name){n=i;break}if(console.log("onBtnOpenchat openType:"+n),0==n){(o=this.getChatSp()).node.active=!0,o.openListType();var a=GameDataMgr.seats[GameDataMgr.seatIndex];o.initInfoNode(a)}else{var o;(o=this.getChatSp()).node.active=!1;var s=GameDataMgr.getIndexBySide(n),r=this.seats[n],c=this.getSeatViewSp(r);if(c.setEmjInfoShow(!0),c._openType=n,s>=0){var l=GameDataMgr.seats[s];c.initInfoNode(l)}else{var h={name:"",ip:"",userId:""};c.initInfoNode(h)}}},addVoiceData:function(e){if(this._voicesStack[e.sender])this._voicesStack[e.sender].push(e);else{var t=[];t.push(e),this._voicesStack[e.sender]=t}},playVoice:function(e){if(e){var t=this._voicesStack[e.sender];if(t||(console.log("empty voiceArr"),console.log(e.sender)),null==this._playingSeat&&t.length){console.log("playVoice2");e=t.pop();var n=GameDataMgr.getSeatIndexByID(e.sender);if(-1==n)this._playingSeat=null;else{var i=GameDataMgr.getLocalSide(n);this._playingSeat=i,console.log("sender:"+e.sender);var a=this.seats[i];this.getSeatViewSp(a).voiceMsgShow(!0)}e.content;console.log(e.content),VoiceMgr.writeVoice("voicemsg.amr",e.content),VoiceMgr.play("voicemsg.amr"),this._lastPlayTime=Date.now()+e.vtime,console.log(e.vtime),this._voicesStack[e.sender]=[]}}},onPlayerOver:function(){if(audioMgr.resumeAll(),console.log("onPlayCallback:"+this._playingSeat),null!=this._playingSeat){var e=this._playingSeat;this._playingSeat=null;var t=this.seats[e];this.getSeatViewSp(t).voiceMsgShow(!1)}},updateInfo:function(){for(var e=0;e<GameDataMgr.seats.length;e++){var t=GameDataMgr.getLocalSide(e),n=this.seats[t],i=GameDataMgr.seats[e];this.getSeatViewSp(n).setOnline(i.online)}},update:function(e){null!=this._lastPlayTime&&Date.now()>this._lastPlayTime+200&&(this.onPlayerOver(),this._lastPlayTime=null)}}),cc._RF.pop()},{}],seatsMgr_DB:[function(e,t,n){"use strict";cc._RF.push(t,"7f0a6028RREeqh5wihp/SCt","seatsMgr_DB"),cc.Class({extends:cc.Component,properties:{seats:[cc.Node],_controlSp:null,_voicesStack:[],_playingSeat:null,_lastPlayTime:null},onLoad:function(){this.initHide(),this.initObserverBtn(),this.initSeatViewPic()},init:function(){this.initHide()},setControlSp:function(e){this._controlSp=e},initNumber:function(){for(var e=0;e<this.seats.length;e++){this.getSeatViewSp(this.seats[e]).setNumber(-1)}var t=GameDataMgr.DBDataMgr.endusers;for(e=0;e<t.length;e++){var n=GameDataMgr.getSeatIndexByID(t[e]),i=GameDataMgr.getLocalSide(n);this.getSeatViewSp(this.seats[i]).setNumber(e+1)}},setNumber:function(e,t){this.getSeatViewSp(this.seats[t]).setNumber(e)},initSeatViewPic:function(){for(var e=0;e<this.seats.length;e++){var t=this.seats[e];this.getSeatViewSp(t).setPicIndexs()}},initObserverBtn:function(){for(var e=0;e<this.seats.length;e++){var t="btnChat"+e,n=this.seats[e].getChildByName(t);GameDataMgr.isObserver?n.active=!1:n.active=!0}},setChatNode:function(e){this.chatNode=e},setEmojiNode:function(e){this.chatAniNode=e},getSeatViewSp:function(e){return e.getComponent("seatView_DB")},getChatSp:function(){return this._controlSp.getChatSp()},getEmojiSp:function(){return this._controlSp.getEmojiSp()},setSeatPass:function(e,t){this.getSeatViewSp(this.seats[e]).setPassNode(t)},hideAllPass:function(){for(var e=0;e<this.seats.length;e++){this.getSeatViewSp(this.seats[e]).setPassNode(!1)}},hideTurnEffect:function(){for(var e=0;e<this.seats.length;e++){this.getSeatViewSp(this.seats[e]).showEffNode(!1)}},playTurnEffect:function(e){for(var t=0;t<this.seats.length;t++){var n;if(e==t)(n=this.getSeatViewSp(this.seats[t])).showEffNode(!0),n.playTurnAni();else(n=this.getSeatViewSp(this.seats[t])).showEffNode(!1)}},initHide:function(){for(var e=0;e<this.seats.length;e++){var t=this.seats[e],n=this.getSeatViewSp(t);n.hideSingle(),n.voiceMsgShow(!1),n.setInfoNodeShow(!1),n.setCreateNode(!1),n.setPassNode(!1)}},moveSeatsPos:function(e){this.seats;var t=GameDataMgr.seats,n=GameDataMgr.createNewseats();GameDataMgr.updateNewSeats(),GameDataMgr.seatIndex=GameDataMgr.getSeatIndexByID(UserMgr.userId);for(var i=0;i<t.length;i++){var a=t[i],o=n[i],s=a.seatIndex,r=o.seatIndex,c=GameDataMgr.getLocalSide(s),l=GameDataMgr.getLocalSide(r);this.moveSeatsFromTo(c,l,e)}},moveSeatsFromTo:function(e,t,n){if(e!=t){this.seats;var i=this.seats[e],a=this.seats[t];i.active=!1,a.active=!1;var o=cc.instantiate(i);o.active=!0,i.getParent().addChild(o);var s=new cc.Vec2;s.x=a.x,s.y=a.y;var r=cc.callFunc(function(){i.active=!0,a.active=!0,o.removeFromParent()},this,null),c=cc.sequence(cc.moveTo(n,s),r);o.runAction(c)}},initSingleSeat:function(e){console.log("initSingleSeat");var t=GameDataMgr.getLocalSide(e),n=this.seats[t];this.getSeatViewSp(n).initSingleSeat(e)},initSeats:function(e){console.log("initSeats");var t=GameDataMgr.seats;if(console.log(JSON.stringify(t)),t){for(var n in t){var i=t[n];i.userId&&(console.log("seatIndex:"+i.seatIndex),this.initSingleSeat(i.seatIndex))}e&&this.initSeatsActive()}},initSingleOnline:function(e){var t=GameDataMgr.seats;for(var n in t)if(t[n].userId){var i=GameDataMgr.getLocalSide(n),a=this.seats[i];this.getSeatViewSp(a).setOnline(e)}},initSeatsActive:function(){for(var e=GameDataMgr.gamePlayerNum,t=0;t<this.seats.length;t++)this.seats[t].active=!1;var n=GameDataMgr.seats;if(n&&n.length>0)for(t=0;t<e;t++){var i=n[t];if(i&&i.userId&&null!=i.seatIndex){var a=GameDataMgr.getLocalSide(i.seatIndex);this.seats[a].active=!0}}},hideReady:function(){for(var e=0;e<this.seats.length;e++)this.initReady(e,!1)},initReady:function(e,t){var n=this.seats[e];this.getSeatViewSp(n).setReady(t)},sendChat:function(e){var t=GameDataMgr.getSeatIndexByID(e.sender),n=GameDataMgr.getLocalSide(t),i=this.seats[n];this.getSeatViewSp(i).chat(e.content)},sendExpression:function(e){var t=GameDataMgr.getSeatIndexByID(e.sender),n=GameDataMgr.getLocalSide(t),i=this.seats[n];this.getSeatViewSp(i).emoji(e.content)},sendQuickchatHandle:function(e){var t=GameDataMgr.getSeatIndexByID(e.sender),n=GameDataMgr.getLocalSide(t),i=this.seats[n],a=this.getChatSp();a.initQuickChatConf();var o,s=a.getQuickInfo(parseInt(e.content));if(console.log("sendQuickchatHandle"),console.log(s.content),this.getSeatViewSp(i).quickChat(s),s.url)o=s.url,audioMgr.playSFX(o);else{var r=parseInt(e.content);parseInt(r/1e3);GameDataMgr.playQuickSound(r,s.sound)}},updateTipsPoint:function(e){this.setTipsShow(!0)},setTipsShow:function(e){this.seats[0].getChildByName("tipsNode").active=e},onBtnOpenchat:function(e){for(var t=e.target,n=-1,i=0;i<this.seats.length;i++)if("btnChat"+i==t.name){n=i;break}if(console.log("onBtnOpenchat openType:"+n),0==n){(o=this.getChatSp()).node.active=!0,o.openListType();var a=GameDataMgr.seats[GameDataMgr.seatIndex];o.initInfoNode(a)}else{var o;(o=this.getChatSp()).node.active=!1;var s=GameDataMgr.getIndexBySide(n),r=this.seats[n];for(i=0;i<this.seats.length;i++){var c=this.seats[i],l=this.getSeatViewSp(c);i==n?l.setEmjInfoShow(!0):l.setEmjInfoShow(!1)}var h=this.getSeatViewSp(r);if(h._openType=n,s>=0){var d=GameDataMgr.seats[s];h.initInfoNode(d)}else{var u={name:"",ip:"",userId:""};h.initInfoNode(u)}}},addVoiceData:function(e){if(this._voicesStack[e.sender])this._voicesStack[e.sender].push(e);else{var t=[];t.push(e),this._voicesStack[e.sender]=t}},playVoice:function(e){if(e){var t=this._voicesStack[e.sender];if(t||(console.log("empty voiceArr"),console.log(e.sender)),null==this._playingSeat&&t.length){console.log("playVoice2");e=t.pop();var n=GameDataMgr.getSeatIndexByID(e.sender);if(-1==n)this._playingSeat=null;else{var i=GameDataMgr.getLocalSide(n);this._playingSeat=n,console.log("sender:"+e.sender);var a=this.seats[i];this.getSeatViewSp(a).voiceMsgShow(!0)}e.content;console.log(e.content),VoiceMgr.writeVoice("voicemsg.amr",e.content),VoiceMgr.play("voicemsg.amr"),this._lastPlayTime=Date.now()+e.time,console.log(e.time),this._voicesStack[e.sender]=[]}}},onPlayerOver:function(){if(audioMgr.resumeAll(),console.log("onPlayCallback:"+this._playingSeat),null!=this._playingSeat){var e=this._playingSeat,t=GameDataMgr.getLocalSide(e);this._playingSeat=null;var n=this.seats[t];this.getSeatViewSp(n).voiceMsgShow(!1)}},updateInfo:function(){for(var e=0;e<GameDataMgr.seats.length;e++){var t=GameDataMgr.getLocalSide(e),n=this.seats[t],i=GameDataMgr.seats[e];this.getSeatViewSp(n).setOnline(i.online)}},update:function(e){null!=this._lastPlayTime&&Date.now()>this._lastPlayTime+200&&(this.onPlayerOver(),this._lastPlayTime=null)}}),cc._RF.pop()},{}],showOutCardLayer2:[function(e,t,n){"use strict";cc._RF.push(t,"b54e3c6IH9DyKEdc3xlJFNZ","showOutCardLayer2"),cc.Class({extends:cc.Component,properties:{localPos:[cc.Node],MJAniLocal:[cc.Node],foldsNode:[cc.Node],holdsNode:[cc.Node],touchLayer:cc.Node},onLoad:function(){},setHolds:function(e){this.holdsNode=e},setFolds:function(e){this.foldsNode=e},showChupai:function(){this.node.active=!0},getMJAniLocalNode:function(e){return this.MJAniLocal[e]},getMJMoveNode:function(e){var t=this.MJAniLocal[e];return 0==t.children.length?null:t.children[0]},initMJById:function(e,t){var n=this.localPos[t].getChildByName("HZ_myselfMJNode").getComponent(dc.ResourceMgr.geScriptLabel(0));n.setMJID(e),n.initMJ(),this.showMJByLocalIndex(t)},getMoveMJ:function(e,t){var n,i=this.getMJMoveNode(t),a=this.holdsNode[t],o=a.getComponent("holdsManager2"),s=this.MJAniLocal[t];if(i)n=i;else{if(0==a.children.length){console.log("local:"+t+" is no MJMove");var r=this.localPos[t].getChildByName("HZ_myselfMJNode");(n=cc.instantiate(r)).x=0,n.y=0;var c=n.getComponent(dc.ResourceMgr.geScriptLabel(0));c.setMJID(e),c.initMJ()}else{var l=o.getLastHold();(n=o.createFallHoldPrefab(e)).x=l.x,n.y=l.y}s.addChild(n)}return n},showMJAni:function(e,t,n){var i=this.getMoveMJ(e,t),a=this.MJAniLocal[t];i.active=!0;var o=this.localPos[t],s=new cc.Vec2;s.x=this.localPos[t].x,s.y=this.localPos[t].y;var r=o.parent.convertToWorldSpaceAR(s),c=a.convertToNodeSpaceAR(r),l=this.foldsNode[t].getComponent("foldsManager2"),h=l.countFoldsNum(),d=l.curMJPosition(h),u=a.convertToNodeSpace(d),g=cc.sequence(cc.moveTo(.1,c),cc.delayTime(.1),cc.moveTo(.1,u),cc.callFunc(function(){i.removeFromParent(),n&&n()},this,null));i.runAction(g)},showMJByLocalIndex:function(e){for(var t=0;t<4;t++){var n=this.localPos[t];n.active=t==e}},hildAllMJ:function(){for(var e=0;e<4;e++){this.localPos[e].active=!1}},hideChupai:function(){this.node.active=!1},setTouchLayerShow:function(e){}}),cc._RF.pop()},{}],speakMessage_G:[function(e,t,n){"use strict";cc._RF.push(t,"67271bCUPRCwaC2odVx85IR","speakMessage_G"),cc.Class({extends:cc.Component,properties:{lblContent:cc.Label,sprFrame:cc.Node,saveContent:cc.Node,cloneLable:cc.Node,upLayer:cc.Node,saveLayer:cc.Node,messageLayer:cc.Node,moveLayer:cc.Node,movePNode:cc.Node,_isStart:!0},onLoad:function(){},setStart:function(e){this._isStart=e},setLayerType:function(e){0==e?(this.setUpLayerShow(!0),this.setSaveLayerShow(!1)):(this.setUpLayerShow(!1),this.setSaveLayerShow(!0))},setSaveLayerShow:function(e){this.saveLayer.active=e},setUpLayerShow:function(e){this.upLayer.active=e},setMessegeLayer:function(e){this.messageLayer.active=e},setContent:function(e){this.lblContent.string=e},initInfoList:function(e){this.saveContent.removeAllChildren();for(var t=dc.GoldDataMgr._saveMesQuene,n=0,i=0;i<t.length;i++){var a=cc.instantiate(this.cloneLable);a.active=!0,a.getComponent(cc.Label).string=t[i],n+=a.height,this.saveContent.addChild(a)}this.saveContent.height=n},messageAction:function(e){var t=GameDataMgr._messageQuene;if(t.length>0){if(!this._isMoving){this.setMessegeLayer(!0),this._isMoving=!0,this.setContent(t[0].content),this._msg=dc.deepCopy(t[0]);var n=this.sprFrame.width,i=n/2,a=-(n/2+this.lblContent.node.width);this.lblContent.node.x=i;var o=this.lblContent.node.width/300*10,s=cc.sequence(cc.moveTo(o,a,0),cc.callFunc(function(){for(var e in GameDataMgr._messageQuene)if(this._msg.key==GameDataMgr._messageQuene[e].key){GameDataMgr._messageQuene.splice(e,1);break}this._isMoving=!1,this.setContent(""),0==GameDataMgr._messageQuene.length&&this.stopAndInit()},this,null));this.lblContent.node.runAction(s)}}else this.stopAndInit()},stopMsgAction:function(e){if(this._isMoving)if(null==e)this.stopAndInit();else{var t=this._msg.key.substr(0,1);("t"==(t=t.toLowerCase())?1:2)==e&&this.stopAndInit()}},stopAndInit:function(){this.lblContent.node.stopAllActions(),this._isMoving=!1,this.setContent(""),this.moveByType(0),this.setMessegeLayer(!1)},onBtnUp:function(){this.setLayerType(0)},onBtnDown:function(){this.setLayerType(1)},moveByType:function(e,t){var n=this.movePNode.getChildByName("upNode"),i=this.movePNode.getChildByName("downNode");if(0==e){i.getPosition();var a=n.getPosition(),o=cc.sequence(cc.moveTo(.2,a),cc.callFunc(function(){t&&t()},this,null));this.moveLayer.runAction(o)}else{n.getPosition(),a=i.getPosition(),o=cc.sequence(cc.moveTo(.2,a),cc.callFunc(function(){t&&t()},this,null));this.moveLayer.runAction(o)}},update:function(e){this._isStart?this.messageAction(e):(this._isMoving=!1,this.setContent(""),this.moveByType(0))}}),cc._RF.pop()},{}],switchClubInfoItem:[function(e,t,n){"use strict";cc._RF.push(t,"7b3b2bkESpCWKJXcA8FeT6c","switchClubInfoItem"),cc.Class({extends:cc.Component,properties:{icon:cc.Node,lblGroupID:cc.Label,lblGroupName:cc.Label,lblOwnerName:cc.Label,lblmemberNum:cc.Label,titleNode:cc.Node},start:function(){},initData:function(e){this.setIcon(e.headImg,e.ownerId),this.lblGroupID.string=e.clubId,this.lblGroupName.string=e.clubName,this.lblOwnerName.string=e.name;e.members&&e.members.length;if(this.lblmemberNum.string=e.members.length,this.clubID=e.clubId,0==e.type)this.titleNode.active=!1;else if(1==e.type){this.titleNode.active=!0;var t="";2==e.gametype?t="qz_db":3==e.gametype?t="qz_hz":4==e.gametype&&(t="qz_tdh");for(var n=0;n<this.titleNode.children.length;n++){var i=this.titleNode.children[n];i.name==t?i.active=!0:i.active=!1}}},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t)},onBtnSwtichClub:function(){this.clubID&&GroupDataMgr.getGroupLayerSp().enterClub(this.clubID)}}),cc._RF.pop()},{}],takeItem:[function(e,t,n){"use strict";cc._RF.push(t,"dc73edWbX1Gm60I1oXc64Yc","takeItem"),cc.Class({extends:cc.Component,properties:{lblId:cc.Label,lblName:cc.Label,lblcontent:cc.Label,voiceNode:cc.Node,icon:cc.Node,itemType:0,_data:null},onLoad:function(){},setType:function(e){this.itemType=null!=e?e:0},initData:function(e){this._data=e;var t,n="";if(0==this.itemType)this.lblcontent.node.active=!0,this.icon.active=!0,this.voiceNode.active=!1,this.lblId.string="Id:"+e.sender,this.lblcontent.string=e.content;else if(1==this.itemType){this.lblcontent.node.active=!1,this.icon.active=!0,this.voiceNode.active=!0,this.voiceNode.getChildByName("voiceBg").on(cc.Node.EventType.TOUCH_END,this.onBtnVoiceClicked,this)}for(var i=GameDataMgr.seats,a=0;a<i.length;a++){var o=i[a];if(e.sender==o.userId){t=o,n=o.headimg;break}}this.setIcon(n,e.sender),this.lblName.string=t.name+"\uff1a"},onBtnVoiceClicked:function(){console.log("onBtnVoiceClicked");var e=this._data.content;console.log(this._data.content),VoiceMgr.writeVoice("voicemsg.amr",e),VoiceMgr.play("voicemsg.amr")},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t)}}),cc._RF.pop()},{}],talkMemberItem:[function(e,t,n){"use strict";cc._RF.push(t,"77c29iIOTtC5qMKeP4pPo9o","talkMemberItem"),cc.Class({extends:cc.Component,properties:{icon:cc.Node,lblName:cc.Label,lblUserId:cc.Label,bgNode:cc.Node,redPoint:cc.Node},start:function(){},setFunc:function(e){this._func=e},initData:function(e,t){this.setIcon(e.headImg,e.userId),this.lblName.string=e.name,this.lblUserId.string="ID:"+e.userId,this.node._userId=e.userId,this.node._index=t},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t)},setReadPoint:function(e){this.redPoint.active=e},setSelBg:function(e){this.node.isSelect=e,this.bgNode.children[1].active=e},OnClickSelect:function(){this._func&&this._func(this.node._userId)}}),cc._RF.pop()},{}],taskWelfareItem:[function(e,t,n){"use strict";cc._RF.push(t,"5c866mSZ7ZPM4CNxvq2gT6B","taskWelfareItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,icon:cc.Node,lblNumber:cc.Label,lblName:cc.Label,lblID:cc.Label},start:function(){},initData:function(e,t){this.setBgByIndex(t),this.lblNumber.string=""+t,this.lblName.string=e.name||"",this.lblID.string="ID:"+e.userid,this.setIcon(e.headimg,e.userid)},setBgByIndex:function(e){var t=e%2,n=this.bgNode;0==t?(n.children[0].active=!0,n.children[1].active=!1):(n.children[0].active=!1,n.children[1].active=!0)},setIcon:function(e,t){this.icon.getComponent("ImageLoader_Gold").setIcon(e,t,function(){})}}),cc._RF.pop()},{}],test:[function(e,t,n){"use strict";cc._RF.push(t,"4d2bfZrnAJD46/TqtcgGu9v","test"),cc.Class({extends:cc.Component,properties:{},start:function(){this.callBack("192.168.199.135","3010")},callBack:function(e,t){pomelo.on("OnTest",function(e){console.log("Ontest:",e)}),pomelo.init({host:e,port:t,log:!0},function(){pomelo.request("hall.hallHandler.getInfo",{uid:"111"},function(e){cc.log("hall.hallHandler.getInfo: ",e)})})}}),cc._RF.pop()},{}],upMenuOfCircle:[function(e,t,n){"use strict";cc._RF.push(t,"1a7e1SOLDdItKkhd0eltGnN","upMenuOfCircle"),cc.Class({extends:cc.Component,properties:{lblGroupName:cc.Label,lblGowerlblID:cc.Label,lblGownerName:cc.Label,lblGownerNum:cc.Label,lblGems:cc.Label,switchNode:cc.Node,FKNode:cc.Node,lblMyIcon:cc.Node,lblMyID:cc.Label,lblMyName:cc.Label},onLoad:function(){},start:function(){},initMyBaseData:function(e){this.lblMyIcon.getComponent("ImageLoader_Gold").setIcon(e.headImg,e.userId),this.lblMyID.string="ID:"+e.userId,this.setMyName(e.name)},initBaseData:function(e){this.setGroupName(e.name||""),this.setClubID(e.clubId);var t=e.members?e.members.length:0;this.setGownerNum(t)},refreshGems:function(e){this.lblGems.string=e},setMyName:function(e){var t;e.length>9?t=e.substr(0,8)+"...":t=e;this.lblMyName.string=t},setGroupName:function(e){var t;e.length>9?t=e.substr(0,8)+"...":t=e;this.lblGroupName.string=t},setClubID:function(e){this.lblGowerlblID.string="ID:"+e},setGownerName:function(e){var t;e.length>7?t=e.substr(0,6)+"...":t=e;this.lblGownerName.string=t},setGownerNum:function(e){this.lblGownerNum.string=e},setGems:function(e){this.lblGems.string=e},setSwitchNodeShow:function(e){this.switchNode.active=e},setGemsNodeShow:function(e){this.FKNode.active=e},onBtnSwitch:function(){if(this.switchNode.active)this.setSwitchNodeShow(!1);else{if(GroupDataMgr.getClubNum()<=1)return void publicWindow.alert.show("","\u5c11\u4e8e\u4e24\u4e2a\u5708\u5b50\u4e0d\u80fd\u5207\u6362");this.setSwitchNodeShow(!0);var e=this.switchNode.getComponent("groupSwitchLayer"),t=(GroupDataMgr.isOwner(),GroupDataMgr.getOtherClubID());GroupDataMgr.getClubsBaseInfo(t,function(t){var n=[];for(var i in t){t[i].clubName=t[i].name;var a=GroupDataMgr.isOwnClub(r);t[i].isOwner=a,n.push(t[i])}var o=[],s=GroupDataMgr.userInfoMap;for(var r in n){var c=n[r].ownerId;s[c]||o.push(c)}GroupDataMgr.getUsersInfo(o,function(t){for(var i=0;i<n.length;i++){var a=n[i].ownerId;n[i].headImg=s[a].headImg,n[i].name=s[a].name,n[i].userId=a}e.initClubList(n)}.bind(this))}.bind(this))}}}),cc._RF.pop()},{}]},{},["VoiceMgr","ChatClient","MJLogic","PhraseConf","codeConfig","HZMJ_Controller_Arena","DoubleBuckle_Controller","DoubleBuckle_Res","CardBase","CardTypeCheck","DBTips","HZMJ_Controller","HZMJ_Res","HuMgr","HallMgr","TDH_Controller","pokerPrefab","PMD_Arena","Desk_userInfo","EffectMgrView_common_Gold","ImageLoader_Gold","speakMessage_G","Item","ListView","Hall_ReqAndRes","HttpMgr","ListenMsg","MsgMgr","ScenePage","UIMgr","AnysdkMgr","ArenaDataMgr","AudioMgr","ChatDataMgr","DBDataMgr","GameDataMgr","GroupDataMgr","MJDataMgr","NetMgr","TDHDataMgr","UserMgr","GameTypeConf","WechatHelper","XLHelper","FileUtils","ArenaLayer","ArenaDeskItem","HallRankItem_Arena","RoomBtnItem","AutoStateLayer","Ready_Common_Gold","roomInfoLayer","roomListLayer","AniLayer_DB","Chat_DB","GameEnd_DB","GameOver_DB","GameOver_DDZ","Gamesetup_DB","SeatOfSelect_DB","SelectSeatsPage_DB","cardTypeSelectPrefab","cardsHold_DB","cardsMgr_DB","desktopLG_DB","operLayer_DB","seatView_DB","seatsMgr_DB","MJPrefab_myself","pongKongPrefab","AniLayer_MJ_G","Chat_2MJ","CountDown_2MJ","DeciderTips_2MJ","DirectionMgr_2Mj","EffectMgrView_2MJ","GameEnd_2MJ","GameOver_2MJ","Gamesetup_2MJ","CountDown","ExpressItem","takeItem","MJManagerView","foldsManager2","holdsManager2","pongKongManager2","MenuMgr_2MJ","OptionMgr_2MJ","Prepare_2MJ","ReplayMgr_2MJ","desktopLG_2MJ","raise_Layer","seatView_2MJ","seatsMgr_2MJ","showOutCardLayer2","CreateRoom","HallUILayer","Accouncement","AgentPowers","AgentBuyCard","AgentCreateEGroup","AgentCreateGroup","AgentEGroupOwnersPushList","AgentFeadback","AgentInfo","AgentPMD","AgentPowersMgr","AgentReqPage","AgentRoomFind","AgentRoot","AgentStatisticsPage","AgentTaskState","AgentUserInfoFind","AgentWelfare","AgentAddOwnersItem","AgentBuyRecordItem","AgentEGroupInfoItem","AgentFindItem","AgentGroupInfoItem","AgentPMDItem","AgentRebateHistoryItem","AgentReqItem","AgentStatisticsItem","AgentTaskStateItem","FeadBackItem","SaleRecordItem","WelfareItem","AgentRecruit","ComfAndGeneralize","EmptyRoomItem","EmptyRoomList","Gift","HallTask","HallTaskItem","HistoryGamesItem","HistoryList","HistoryRoomsItem","IphoneComfirm","KefuView","RoomDetail","ShareHall","ShopView","gambleLayer","rankItem","seatView_Room_Hall","taskWelfareItem","JoinRoom","CheckUpdate","LoadingLogic","Login","DistancePage","AniLayer_TDH","GameEnd_TDH","GameOver_TDH","Gamesetup_TDH","Maima_TDH","OverItem_TDH","desktopLG_TDH","GroupUserInfo","comfirmApplay","createAndJoinCircle","createCircle","createGroupLead","createTableInterface","gameGroupLayer","gameGroupMgr","groupInfoItem","groupSwitchLayer","joinCircle","GroupSetTime","circleMemberItem","circleReqItem","groupDeskItem","groupDeskMgr","groupHistoryMgr","groupProfile","groupRanking","groupRankingItem","groupRequestMgr","inviteListMgr","inviteSearch","invitedItem","pepleMgr","switchClubInfoItem","upMenuOfCircle","Battery","ImageLoader","Setup","UserInfo","UserInfo_Hall","WaitingConnection","alert","ChatAniSelect_public","Voice_public","chat_public","phraseFixItem","TalkPage","groupTalkItem","talkMemberItem","ScrollPartLoadItems","ScrollRepeatView","btnGroupMov","test","DoubleBuckleLogic","client","emitter","index","protobuf","protocol"]);